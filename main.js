/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var sp=Object.create;var xi=Object.defineProperty,ap=Object.defineProperties,op=Object.getOwnPropertyDescriptor,up=Object.getOwnPropertyDescriptors,lp=Object.getOwnPropertyNames,Qo=Object.getOwnPropertySymbols,hp=Object.getPrototypeOf,eu=Object.prototype.hasOwnProperty,fp=Object.prototype.propertyIsEnumerable;var tu=(i,e,t)=>e in i?xi(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Qe=(i,e)=>{for(var t in e||(e={}))eu.call(e,t)&&tu(i,t,e[t]);if(Qo)for(var t of Qo(e))fp.call(e,t)&&tu(i,t,e[t]);return i},bt=(i,e)=>ap(i,up(e)),ru=i=>xi(i,"__esModule",{value:!0});var Js=(i,e)=>()=>(i&&(e=i(i=0)),e);var J=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),iu=(i,e)=>{ru(i);for(var t in e)xi(i,t,{get:e[t],enumerable:!0})},cp=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of lp(e))!eu.call(i,r)&&r!=="default"&&xi(i,r,{get:()=>e[r],enumerable:!(t=op(e,r))||t.enumerable});return i},kr=i=>cp(ru(xi(i!=null?sp(hp(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var Me=(i,e,t)=>new Promise((r,n)=>{var s=u=>{try{o(t.next(u))}catch(l){n(l)}},a=u=>{try{o(t.throw(u))}catch(l){n(l)}},o=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(i,e)).next())});function sr(i,e){for(var t in e)i[t]=e[t];return i}function na(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function st(i,e,t){var r,n,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?n=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?Di.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)a[s]===void 0&&(a[s]=i.defaultProps[s]);return Ti(i,a,r,n,null)}function Ti(i,e,t,r,n){var s={type:i,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n==null?++ou:n,__i:-1,__u:0};return n==null&&Se.vnode!=null&&Se.vnode(s),s}function cn(){return{current:null}}function qt(i){return i.children}function Ot(i,e){this.props=i,this.context=e}function Xr(i,e){if(e==null)return i.__?Xr(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?Xr(i):null}function pu(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return pu(i)}}function sa(i){(!i.__d&&(i.__d=!0)&&Or.push(i)&&!dn.__r++||uu!=Se.debounceRendering)&&((uu=Se.debounceRendering)||lu)(dn)}function dn(){for(var i,e,t,r,n,s,a,o=1;Or.length;)Or.length>o&&Or.sort(hu),i=Or.shift(),o=Or.length,i.__d&&(t=void 0,r=void 0,n=(r=(e=i).__v).__e,s=[],a=[],e.__P&&((t=sr({},r)).__v=r.__v+1,Se.vnode&&Se.vnode(t),aa(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[n]:null,s,n==null?Xr(r):n,!!(32&r.__u),a),t.__v=r.__v,t.__.__k[t.__i]=t,yu(s,t,a),r.__e=r.__=null,t.__e!=n&&pu(t)));dn.__r=0}function gu(i,e,t,r,n,s,a,o,u,l,c){var f,p,v,m,C,S,d,g=r&&r.__k||du,y=e.length;for(u=_p(t,e,g,u,y),f=0;f<y;f++)(v=t.__k[f])!=null&&(p=v.__i==-1?Ci:g[v.__i]||Ci,v.__i=f,S=aa(i,v,p,n,s,a,o,u,l,c),m=v.__e,v.ref&&p.ref!=v.ref&&(p.ref&&ua(p.ref,null,v),c.push(v.ref,v.__c||m,v)),C==null&&m!=null&&(C=m),(d=!!(4&v.__u))||p.__k===v.__k?u=vu(v,u,i,d):typeof v.type=="function"&&S!==void 0?u=S:m&&(u=m.nextSibling),v.__u&=-7);return t.__e=C,u}function _p(i,e,t,r,n){var s,a,o,u,l,c=t.length,f=c,p=0;for(i.__k=new Array(n),s=0;s<n;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=i.__k[s]=Ti(null,a,null,null,null):Ai(a)?a=i.__k[s]=Ti(qt,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=i.__k[s]=Ti(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):i.__k[s]=a,u=s+p,a.__=i,a.__b=i.__b+1,o=null,(l=a.__i=yp(a,t,u,f))!=-1&&(f--,(o=t[l])&&(o.__u|=2)),o==null||o.__v==null?(l==-1&&(n>c?p--:n<c&&p++),typeof a.type!="function"&&(a.__u|=4)):l!=u&&(l==u-1?p--:l==u+1?p++:(l>u?p--:p++,a.__u|=4))):i.__k[s]=null;if(f)for(s=0;s<c;s++)(o=t[s])!=null&&(2&o.__u)==0&&(o.__e==r&&(r=Xr(o)),wu(o,o));return r}function vu(i,e,t,r){var n,s;if(typeof i.type=="function"){for(n=i.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=i,e=vu(n[s],e,t,r));return e}i.__e!=e&&(r&&(e&&i.type&&!e.parentNode&&(e=Xr(i)),t.insertBefore(i.__e,e||null)),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ar(i,e){return e=e||[],i==null||typeof i=="boolean"||(Ai(i)?i.some(function(t){ar(t,e)}):e.push(i)),e}function yp(i,e,t,r){var n,s,a,o=i.key,u=i.type,l=e[t],c=l!=null&&(2&l.__u)==0;if(l===null&&o==null||c&&o==l.key&&u==l.type)return t;if(r>(c?1:0)){for(n=t-1,s=t+1;n>=0||s<e.length;)if((l=e[a=n>=0?n--:s++])!=null&&(2&l.__u)==0&&o==l.key&&u==l.type)return a}return-1}function mu(i,e,t){e[0]=="-"?i.setProperty(e,t==null?"":t):i[e]=t==null?"":typeof t!="number"||mp.test(e)?t:t+"px"}function pn(i,e,t,r,n){var s,a;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof r=="string"&&(i.style.cssText=r=""),r)for(e in r)t&&e in t||mu(i.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||mu(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(fu,"$1")),a=e.toLowerCase(),e=a in i||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?r?t.u=r.u:(t.u=ta,i.addEventListener(e,s?ia:ra,s)):i.removeEventListener(e,s?ia:ra,s);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t==null?"":t;break e}catch(o){}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function _u(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=ta++;else if(e.t<t.u)return;return t(Se.event?Se.event(e):e)}}}function aa(i,e,t,r,n,s,a,o,u,l){var c,f,p,v,m,C,S,d,g,y,T,I,w,A,k,N,z,F=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(u=!!(32&t.__u),s=[o=e.__e=t.__e]),(c=Se.__b)&&c(e);e:if(typeof F=="function")try{if(d=e.props,g="prototype"in F&&F.prototype.render,y=(c=F.contextType)&&r[c.__c],T=c?y?y.props.value:c.__:r,t.__c?S=(f=e.__c=t.__c).__=f.__E:(g?e.__c=f=new F(d,T):(e.__c=f=new Ot(d,T),f.constructor=F,f.render=wp),y&&y.sub(f),f.state||(f.state={}),f.__n=r,p=f.__d=!0,f.__h=[],f._sb=[]),g&&f.__s==null&&(f.__s=f.state),g&&F.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=sr({},f.__s)),sr(f.__s,F.getDerivedStateFromProps(d,f.__s))),v=f.props,m=f.state,f.__v=e,p)g&&F.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),g&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(g&&F.getDerivedStateFromProps==null&&d!==v&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(d,T),e.__v==t.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(d,f.__s,T)===!1){for(e.__v!=t.__v&&(f.props=d,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),I=0;I<f._sb.length;I++)f.__h.push(f._sb[I]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(d,f.__s,T),g&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(v,m,C)})}if(f.context=T,f.props=d,f.__P=i,f.__e=!1,w=Se.__r,A=0,g){for(f.state=f.__s,f.__d=!1,w&&w(e),c=f.render(f.props,f.state,f.context),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[]}else do f.__d=!1,w&&w(e),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++A<25);f.state=f.__s,f.getChildContext!=null&&(r=sr(sr({},r),f.getChildContext())),g&&!p&&f.getSnapshotBeforeUpdate!=null&&(C=f.getSnapshotBeforeUpdate(v,m)),N=c,c!=null&&c.type===qt&&c.key==null&&(N=bu(c.props.children)),o=gu(i,Ai(N)?N:[N],e,t,r,n,s,a,o,u,l),f.base=e.__e,e.__u&=-161,f.__h.length&&a.push(f),S&&(f.__E=f.__=null)}catch(Z){if(e.__v=null,u||s!=null)if(Z.then){for(e.__u|=u?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,e.__e=o}else{for(z=s.length;z--;)na(s[z]);oa(e)}else e.__e=t.__e,e.__k=t.__k,Z.then||oa(e);Se.__e(Z,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):o=e.__e=bp(t.__e,e,t,r,n,s,a,u,l);return(c=Se.diffed)&&c(e),128&e.__u?void 0:o}function oa(i){i&&i.__c&&(i.__c.__e=!0),i&&i.__k&&i.__k.forEach(oa)}function yu(i,e,t){for(var r=0;r<t.length;r++)ua(t[r],t[++r],t[++r]);Se.__c&&Se.__c(e,i),i.some(function(n){try{i=n.__h,n.__h=[],i.some(function(s){s.call(n)})}catch(s){Se.__e(s,n.__v)}})}function bu(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:Ai(i)?i.map(bu):sr({},i)}function bp(i,e,t,r,n,s,a,o,u){var l,c,f,p,v,m,C,S=t.props||Ci,d=e.props,g=e.type;if(g=="svg"?n="http://www.w3.org/2000/svg":g=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((v=s[l])&&"setAttribute"in v==!!g&&(g?v.localName==g:v.nodeType==3)){i=v,s[l]=null;break}}if(i==null){if(g==null)return document.createTextNode(d);i=document.createElementNS(n,g,d.is&&d),o&&(Se.__m&&Se.__m(e,s),o=!1),s=null}if(g==null)S===d||o&&i.data==d||(i.data=d);else{if(s=s&&Di.call(i.childNodes),!o&&s!=null)for(S={},l=0;l<i.attributes.length;l++)S[(v=i.attributes[l]).name]=v.value;for(l in S)if(v=S[l],l!="children"){if(l=="dangerouslySetInnerHTML")f=v;else if(!(l in d)){if(l=="value"&&"defaultValue"in d||l=="checked"&&"defaultChecked"in d)continue;pn(i,l,null,v,n)}}for(l in d)v=d[l],l=="children"?p=v:l=="dangerouslySetInnerHTML"?c=v:l=="value"?m=v:l=="checked"?C=v:o&&typeof v!="function"||S[l]===v||pn(i,l,v,S[l],n);if(c)o||f&&(c.__html==f.__html||c.__html==i.innerHTML)||(i.innerHTML=c.__html),e.__k=[];else if(f&&(i.innerHTML=""),gu(e.type=="template"?i.content:i,Ai(p)?p:[p],e,t,r,g=="foreignObject"?"http://www.w3.org/1999/xhtml":n,s,a,s?s[0]:t.__k&&Xr(t,0),o,u),s!=null)for(l=s.length;l--;)na(s[l]);o||(l="value",g=="progress"&&m==null?i.removeAttribute("value"):m!=null&&(m!==i[l]||g=="progress"&&!m||g=="option"&&m!=S[l])&&pn(i,l,m,S[l],n),l="checked",C!=null&&C!=i[l]&&pn(i,l,C,S[l],n))}return i}function ua(i,e,t){try{if(typeof i=="function"){var r=typeof i.__u=="function";r&&i.__u(),r&&e==null||(i.__u=i(e))}else i.current=e}catch(n){Se.__e(n,t)}}function wu(i,e,t){var r,n;if(Se.unmount&&Se.unmount(i),(r=i.ref)&&(r.current&&r.current!=i.__e||ua(r,null,e)),(r=i.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Se.__e(s,e)}r.base=r.__P=null}if(r=i.__k)for(n=0;n<r.length;n++)r[n]&&wu(r[n],e,t||typeof i.type!="function");t||na(i.__e),i.__c=i.__=i.__e=void 0}function wp(i,e,t){return this.constructor(i,t)}function Yr(i,e,t){var r,n,s,a;e==document&&(e=document.documentElement),Se.__&&Se.__(i,e),n=(r=typeof t=="function")?null:t&&t.__k||e.__k,s=[],a=[],aa(e,i=(!r&&t||e).__k=st(qt,null,[i]),n||Ci,Ci,e.namespaceURI,!r&&t?[t]:n?null:e.firstChild?Di.call(e.childNodes):null,s,!r&&t?t:n?n.__e:e.firstChild,r,a),yu(s,i,a)}function la(i,e){Yr(i,e,la)}function Eu(i,e,t){var r,n,s,a,o=sr({},i.props);for(s in i.type&&i.type.defaultProps&&(a=i.type.defaultProps),e)s=="key"?r=e[s]:s=="ref"?n=e[s]:o[s]=e[s]===void 0&&a!=null?a[s]:e[s];return arguments.length>2&&(o.children=arguments.length>3?Di.call(arguments,2):t),Ti(i.type,o,r||i.key,n||i.ref,null)}function gn(i){function e(t){var r,n;return this.getChildContext||(r=new Set,(n={})[e.__c]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&r.forEach(function(a){a.__e=!0,sa(a)})},this.sub=function(s){r.add(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){r&&r.delete(s),a&&a.call(s)}}),t.children}return e.__c="__cC"+cu++,e.__=i,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}var Di,Se,ou,vp,Or,uu,lu,hu,fu,ta,ra,ia,cu,Ci,du,mp,Ai,vn=Js(()=>{Ci={},du=[],mp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ai=Array.isArray;Di=du.slice,Se={__e:function(i,e,t,r){for(var n,s,a;e=e.__;)if((n=e.__c)&&!n.__)try{if((s=n.constructor)&&s.getDerivedStateFromError!=null&&(n.setState(s.getDerivedStateFromError(i)),a=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(i,r||{}),a=n.__d),a)return n.__E=n}catch(o){i=o}throw i}},ou=0,vp=function(i){return i!=null&&i.constructor===void 0},Ot.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=sr({},this.state),typeof i=="function"&&(i=i(sr({},t),this.props)),i&&sr(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),sa(this))},Ot.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),sa(this))},Ot.prototype.render=qt,Or=[],lu=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,hu=function(i,e){return i.__v.__b-e.__v.__b},dn.__r=0,fu=/(PointerCapture)$|Capture$/i,ta=0,ra=_u(!1),ia=_u(!0),cu=0});function Nr(i,e){Ye.__h&&Ye.__h(Ue,i,Kr||e),Kr=0;var t=Ue.__H||(Ue.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({}),t.__[i]}function Nt(i){return Kr=1,ki(Ru,i)}function ki(i,e,t){var r=Nr(cr++,2);if(r.t=i,!r.__c&&(r.__=[t?t(e):Ru(void 0,e),function(o){var u=r.__N?r.__N[0]:r.__[0],l=r.t(u,o);u!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=Ue,!Ue.__f)){var n=function(o,u,l){if(!r.__c.__H)return!0;var c=r.__c.__H.__.filter(function(p){return!!p.__c});if(c.every(function(p){return!p.__N}))return!s||s.call(this,o,u,l);var f=r.__c.props!==o;return c.forEach(function(p){if(p.__N){var v=p.__[0];p.__=p.__N,p.__N=void 0,v!==p.__[0]&&(f=!0)}}),s&&s.call(this,o,u,l)||f};Ue.__f=!0;var s=Ue.shouldComponentUpdate,a=Ue.componentWillUpdate;Ue.componentWillUpdate=function(o,u,l){if(this.__e){var c=s;s=void 0,n(o,u,l),s=c}a&&a.call(this,o,u,l)},Ue.shouldComponentUpdate=n}return r.__N||r.__}function mt(i,e){var t=Nr(cr++,3);!Ye.__s&&ca(t.__H,e)&&(t.__=i,t.u=e,Ue.__H.__h.push(t))}function Rr(i,e){var t=Nr(cr++,4);!Ye.__s&&ca(t.__H,e)&&(t.__=i,t.u=e,Ue.__h.push(t))}function Ut(i){return Kr=5,dr(function(){return{current:i}},[])}function mn(i,e,t){Kr=6,Rr(function(){if(typeof i=="function"){var r=i(e());return function(){i(null),r&&typeof r=="function"&&r()}}if(i)return i.current=e(),function(){return i.current=null}},t==null?t:t.concat(i))}function dr(i,e){var t=Nr(cr++,7);return ca(t.__H,e)&&(t.__=i(),t.__H=e,t.__h=i),t.__}function dt(i,e){return Kr=8,dr(function(){return i},e)}function _n(i){var e=Ue.context[i.__c],t=Nr(cr++,9);return t.c=i,e?(t.__==null&&(t.__=!0,e.sub(Ue)),e.props.value):i.__}function yn(i,e){Ye.useDebugValue&&Ye.useDebugValue(e?e(i):i)}function Ep(i){var e=Nr(cr++,10),t=Nt();return e.__=i,Ue.componentDidCatch||(Ue.componentDidCatch=function(r,n){e.__&&e.__(r,n),t[1](r)}),[t[0],function(){t[1](void 0)}]}function bn(){var i=Nr(cr++,11);if(!i.__){for(var e=Ue.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);i.__="P"+t[0]+"-"+t[1]++}return i.__}function xp(){for(var i;i=Su.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(wn),i.__H.__h.forEach(fa),i.__H.__h=[]}catch(e){i.__H.__h=[],Ye.__e(e,i.__v)}}function Sp(i){var e,t=function(){clearTimeout(r),Nu&&cancelAnimationFrame(e),setTimeout(i)},r=setTimeout(t,35);Nu&&(e=requestAnimationFrame(t))}function wn(i){var e=Ue,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),Ue=e}function fa(i){var e=Ue;i.__c=i.__(),Ue=e}function ca(i,e){return!i||i.length!==e.length||e.some(function(t,r){return t!==i[r]})}function Ru(i,e){return typeof e=="function"?e(i):e}var cr,Ue,ha,xu,Kr,Su,Ye,Du,Cu,Au,Tu,ku,Ou,Nu,da=Js(()=>{vn();Kr=0,Su=[],Ye=Se,Du=Ye.__b,Cu=Ye.__r,Au=Ye.diffed,Tu=Ye.__c,ku=Ye.unmount,Ou=Ye.__;Ye.__b=function(i){Ue=null,Du&&Du(i)},Ye.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),Ou&&Ou(i,e)},Ye.__r=function(i){Cu&&Cu(i),cr=0;var e=(Ue=i.__c).__H;e&&(ha===Ue?(e.__h=[],Ue.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(wn),e.__h.forEach(fa),e.__h=[],cr=0)),ha=Ue},Ye.diffed=function(i){Au&&Au(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Su.push(e)!==1&&xu===Ye.requestAnimationFrame||((xu=Ye.requestAnimationFrame)||Sp)(xp)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ha=Ue=null},Ye.__c=function(i,e){e.some(function(t){try{t.__h.forEach(wn),t.__h=t.__h.filter(function(r){return!r.__||fa(r)})}catch(r){e.some(function(n){n.__h&&(n.__h=[])}),e=[],Ye.__e(r,t.__v)}}),Tu&&Tu(i,e)},Ye.unmount=function(i){ku&&ku(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{wn(r)}catch(n){e=n}}),t.__H=void 0,e&&Ye.__e(e,t.__v))};Nu=typeof requestAnimationFrame=="function"});var ol={};iu(ol,{Children:()=>Mu,Component:()=>Ot,Fragment:()=>qt,PureComponent:()=>En,StrictMode:()=>sl,Suspense:()=>Oi,SuspenseList:()=>Jr,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>Ku,cloneElement:()=>tl,createContext:()=>gn,createElement:()=>st,createFactory:()=>Ju,createPortal:()=>xn,createRef:()=>cn,default:()=>Ea,findDOMNode:()=>rl,flushSync:()=>nl,forwardRef:()=>Pu,hydrate:()=>Zu,isElement:()=>al,isFragment:()=>Qu,isMemo:()=>el,isValidElement:()=>Ni,lazy:()=>Vu,memo:()=>Bu,render:()=>Sn,startTransition:()=>ma,unmountComponentAtNode:()=>Ri,unstable_batchedUpdates:()=>il,useCallback:()=>dt,useContext:()=>_n,useDebugValue:()=>yn,useDeferredValue:()=>_a,useEffect:()=>mt,useErrorBoundary:()=>Ep,useId:()=>bn,useImperativeHandle:()=>mn,useInsertionEffect:()=>ba,useLayoutEffect:()=>Rr,useMemo:()=>dr,useReducer:()=>ki,useRef:()=>Ut,useState:()=>Nt,useSyncExternalStore:()=>ga,useTransition:()=>ya,version:()=>Mp});function Iu(i,e){for(var t in e)i[t]=e[t];return i}function pa(i,e){for(var t in i)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&i[r]!==e[r])return!0;return!1}function ga(i,e){var t=e(),r=Nt({t:{__:t,u:e}}),n=r[0].t,s=r[1];return Rr(function(){n.__=t,n.u=e,va(n)&&s({t:n})},[i,t,e]),mt(function(){return va(n)&&s({t:n}),i(function(){va(n)&&s({t:n})})},[i]),t}function va(i){var e,t,r=i.u,n=i.__;try{var s=r();return!((e=n)===(t=s)&&(e!==0||1/e==1/t)||e!=e&&t!=t)}catch(a){return!0}}function ma(i){i()}function _a(i){return i}function ya(){return[!1,ma]}function En(i,e){this.props=i,this.context=e}function Bu(i,e){function t(n){var s=this.props.ref,a=s==n.ref;return!a&&s&&(s.call?s(null):s.current=null),e?!e(this.props,n)||!a:pa(this.props,n)}function r(n){return this.shouldComponentUpdate=t,st(i,n)}return r.displayName="Memo("+(i.displayName||i.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r.type=i,r}function Pu(i){function e(t){var r=Iu({},t);return delete r.ref,i(r,t.ref||null)}return e.$$typeof=Dp,e.render=i,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(i.displayName||i.name)+")",e}function qu(i,e,t){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),i.__c.__H=null),(i=Iu({},i)).__c!=null&&(i.__c.__P===t&&(i.__c.__P=e),i.__c.__e=!0,i.__c=null),i.__k=i.__k&&i.__k.map(function(r){return qu(r,e,t)})),i}function Uu(i,e,t){return i&&t&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(r){return Uu(r,e,t)}),i.__c&&i.__c.__P===e&&(i.__e&&t.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=t)),i}function Oi(){this.__u=0,this.o=null,this.__b=null}function Wu(i){var e=i.__.__c;return e&&e.__a&&e.__a(i)}function Vu(i){var e,t,r,n=null;function s(a){if(e||(e=i()).then(function(o){o&&(n=o.default||o),r=!0},function(o){t=o,r=!0}),t)throw t;if(!r)throw e;return n?st(n,a):null}return s.displayName="Lazy",s.__f=!0,s}function Jr(){this.i=null,this.l=null}function Ap(i){return this.getChildContext=function(){return i.context},i.children}function Tp(i){var e=this,t=i.h;if(e.componentWillUnmount=function(){Yr(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),!e.v){for(var r=e.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(n,s){this.childNodes.push(n),e.h.insertBefore(n,s)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.h.removeChild(n)}}}Yr(st(Ap,{context:e.context},i.__v),e.v)}function xn(i,e){var t=st(Tp,{__v:i,h:e});return t.containerInfo=e,t}function Sn(i,e,t){return e.__k==null&&(e.textContent=""),Yr(i,e),typeof t=="function"&&t(),i?i.__c:null}function Zu(i,e,t){return la(i,e),typeof t=="function"&&t(),i?i.__c:null}function Bp(){}function Lp(){return this.cancelBubble}function Pp(){return this.defaultPrevented}function Ju(i){return st.bind(null,i)}function Ni(i){return!!i&&i.$$typeof===Hu}function Qu(i){return Ni(i)&&i.type===qt}function el(i){return!!i&&!!i.displayName&&(typeof i.displayName=="string"||i.displayName instanceof String)&&i.displayName.startsWith("Memo(")}function tl(i){return Ni(i)?Eu.apply(null,arguments):i}function Ri(i){return!!i.__k&&(Yr(null,i),!0)}function rl(i){return i&&(i.base||i.nodeType===1&&i)||null}var ba,Lu,Dp,Fu,Mu,Cp,zu,ju,Hu,kp,Op,Np,Rp,Ip,Gu,wa,Fp,$u,Xu,Yu,Ku,Mp,il,nl,sl,al,Ea,Qr=Js(()=>{vn();vn();da();da();ba=Rr;(En.prototype=new Ot).isPureReactComponent=!0,En.prototype.shouldComponentUpdate=function(i,e){return pa(this.props,i)||pa(this.state,e)};Lu=Se.__b;Se.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),Lu&&Lu(i)};Dp=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;Fu=function(i,e){return i==null?null:ar(ar(i).map(e))},Mu={map:Fu,forEach:Fu,count:function(i){return i?ar(i).length:0},only:function(i){var e=ar(i);if(e.length!==1)throw"Children.only";return e[0]},toArray:ar},Cp=Se.__e;Se.__e=function(i,e,t,r){if(i.then){for(var n,s=e;s=s.__;)if((n=s.__c)&&n.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),n.__c(i,e)}Cp(i,e,t,r)};zu=Se.unmount;Se.unmount=function(i){var e=i.__c;e&&e.__R&&e.__R(),e&&32&i.__u&&(i.type=null),zu&&zu(i)},(Oi.prototype=new Ot).__c=function(i,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var n=Wu(r.__v),s=!1,a=function(){s||(s=!0,t.__R=null,n?n(o):o())};t.__R=a;var o=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=Uu(u,u.__c.__P,u.__c.__O)}var l;for(r.setState({__a:r.__b=null});l=r.o.pop();)l.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),i.then(a,a)},Oi.prototype.componentWillUnmount=function(){this.o=[]},Oi.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=qu(this.__b,t,r.__O=r.__P)}this.__b=null}var n=e.__a&&st(qt,null,i.fallback);return n&&(n.__u&=-33),[st(qt,null,e.__a?null:i.children),n]};ju=function(i,e,t){if(++t[1]===t[0]&&i.l.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(t=i.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;i.i=t=t[2]}};(Jr.prototype=new Ot).__a=function(i){var e=this,t=Wu(e.__v),r=e.l.get(i);return r[0]++,function(n){var s=function(){e.props.revealOrder?(r.push(n),ju(e,i,r)):n()};t?t(s):s()}},Jr.prototype.render=function(i){this.i=null,this.l=new Map;var e=ar(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return i.children},Jr.prototype.componentDidUpdate=Jr.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(e,t){ju(i,t,e)})};Hu=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,kp=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Op=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Np=/[A-Z0-9]/g,Rp=typeof document!="undefined",Ip=function(i){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};Ot.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(Ot.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});Gu=Se.event;Se.event=function(i){return Gu&&(i=Gu(i)),i.persist=Bp,i.isPropagationStopped=Lp,i.isDefaultPrevented=Pp,i.nativeEvent=i};Fp={enumerable:!1,configurable:!0,get:function(){return this.class}},$u=Se.vnode;Se.vnode=function(i){typeof i.type=="string"&&function(e){var t=e.props,r=e.type,n={},s=r.indexOf("-")===-1;for(var a in t){var o=t[a];if(!(a==="value"&&"defaultValue"in t&&o==null||Rp&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var u=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&o===!0?o="":u==="translate"&&o==="no"?o=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?a="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||Ip(t.type)?u==="onfocus"?a="onfocusin":u==="onblur"?a="onfocusout":Op.test(a)&&(a=u):u=a="oninput":s&&kp.test(a)?a=a.replace(Np,"-$&").toLowerCase():o===null&&(o=void 0),u==="oninput"&&n[a=u]&&(a="oninputCapture"),n[a]=o}}r=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=ar(t.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),r=="select"&&n.defaultValue!=null&&(n.value=ar(t.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),t.class&&!t.className?(n.class=t.class,Object.defineProperty(n,"className",Fp)):(t.className&&!t.class||t.class&&t.className)&&(n.class=n.className=t.className),e.props=n}(i),i.$$typeof=Hu,$u&&$u(i)};Xu=Se.__r;Se.__r=function(i){Xu&&Xu(i),wa=i.__c};Yu=Se.diffed;Se.diffed=function(i){Yu&&Yu(i);var e=i.props,t=i.__e;t!=null&&i.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),wa=null};Ku={ReactCurrentDispatcher:{current:{readContext:function(i){return wa.__n[i.__c].props.value},useCallback:dt,useContext:_n,useDebugValue:yn,useDeferredValue:_a,useEffect:mt,useId:bn,useImperativeHandle:mn,useInsertionEffect:ba,useLayoutEffect:Rr,useMemo:dr,useReducer:ki,useRef:Ut,useState:Nt,useSyncExternalStore:ga,useTransition:ya}}},Mp="18.3.1";il=function(i,e){return i(e)},nl=function(i,e){return i(e)},sl=qt,al=Ni,Ea={useState:Nt,useId:bn,useReducer:ki,useEffect:mt,useLayoutEffect:Rr,useInsertionEffect:ba,useTransition:ya,useDeferredValue:_a,useSyncExternalStore:ga,startTransition:ma,useRef:Ut,useImperativeHandle:mn,useMemo:dr,useCallback:dt,useContext:_n,useDebugValue:yn,version:"18.3.1",Children:Mu,render:Sn,hydrate:Zu,unmountComponentAtNode:Ri,createPortal:xn,createElement:st,createContext:gn,createFactory:Ju,cloneElement:tl,createRef:cn,Fragment:qt,isValidElement:Ni,isElement:al,isFragment:Qu,isMemo:el,findDOMNode:rl,Component:Ot,PureComponent:En,memo:Bu,forwardRef:Pu,flushSync:nl,unstable_batchedUpdates:il,StrictMode:sl,Suspense:Oi,SuspenseList:Jr,lazy:Vu,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Ku}});var Dn=J((j2,ul)=>{ul.exports=(Qr(),ol)});var hl=J((H2,ll)=>{"use strict";var zp="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";ll.exports=zp});var pl=J((Z2,dl)=>{"use strict";var qp=hl();function fl(){}function cl(){}cl.resetWarningCache=fl;dl.exports=function(){function i(r,n,s,a,o,u){if(u!==qp){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}i.isRequired=i;function e(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:cl,resetWarningCache:fl};return t.PropTypes=t,t}});var xa=J((X2,gl)=>{gl.exports=pl()();var G2,$2});var Sa=J((Y2,vl)=>{"use strict";var Up=void 0;vl.exports=function(i){return i!==Up&&i!==null}});var _l=J((K2,ml)=>{"use strict";var Wp=Sa(),Vp={object:!0,function:!0,undefined:!0};ml.exports=function(i){return Wp(i)?hasOwnProperty.call(Vp,typeof i):!1}});var bl=J((J2,yl)=>{"use strict";var jp=_l();yl.exports=function(i){if(!jp(i))return!1;try{return i.constructor?i.constructor.prototype===i:!1}catch(e){return!1}}});var El=J((Q2,wl)=>{"use strict";var Hp=bl();wl.exports=function(i){if(typeof i!="function"||!hasOwnProperty.call(i,"length"))return!1;try{if(typeof i.length!="number"||typeof i.call!="function"||typeof i.apply!="function")return!1}catch(e){return!1}return!Hp(i)}});var Sl=J((ey,xl)=>{"use strict";var Zp=El(),Gp=/^\s*class[\s{/}]/,$p=Function.prototype.toString;xl.exports=function(i){return!(!Zp(i)||Gp.test($p.call(i)))}});var Cl=J((ty,Dl)=>{"use strict";Dl.exports=function(){var i=Object.assign,e;return typeof i!="function"?!1:(e={foo:"raz"},i(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}});var Tl=J((ry,Al)=>{"use strict";Al.exports=function(){try{return Object.keys("primitive"),!0}catch(i){return!1}}});var Ol=J((iy,kl)=>{"use strict";kl.exports=function(){}});var Cn=J((ny,Nl)=>{"use strict";var Xp=Ol()();Nl.exports=function(i){return i!==Xp&&i!==null}});var Il=J((sy,Rl)=>{"use strict";var Yp=Cn(),Kp=Object.keys;Rl.exports=function(i){return Kp(Yp(i)?Object(i):i)}});var Ll=J((ay,Bl)=>{"use strict";Bl.exports=Tl()()?Object.keys:Il()});var Fl=J((oy,Pl)=>{"use strict";var Jp=Cn();Pl.exports=function(i){if(!Jp(i))throw new TypeError("Cannot use null or undefined");return i}});var zl=J((uy,Ml)=>{"use strict";var Qp=Ll(),eg=Fl(),tg=Math.max;Ml.exports=function(i,e){var t,r,n=tg(arguments.length,2),s;for(i=Object(eg(i)),s=function(a){try{i[a]=e[a]}catch(o){t||(t=o)}},r=1;r<n;++r)e=arguments[r],Qp(e).forEach(s);if(t!==void 0)throw t;return i}});var Ul=J((ly,ql)=>{"use strict";ql.exports=Cl()()?Object.assign:zl()});var Vl=J((hy,Wl)=>{"use strict";var rg=Cn(),ig=Array.prototype.forEach,ng=Object.create,sg=function(i,e){var t;for(t in i)e[t]=i[t]};Wl.exports=function(i){var e=ng(null);return ig.call(arguments,function(t){!rg(t)||sg(Object(t),e)}),e}});var Hl=J((fy,jl)=>{"use strict";var Da="razdwatrzy";jl.exports=function(){return typeof Da.contains!="function"?!1:Da.contains("dwa")===!0&&Da.contains("foo")===!1}});var Gl=J((cy,Zl)=>{"use strict";var ag=String.prototype.indexOf;Zl.exports=function(i){return ag.call(this,i,arguments[1])>-1}});var Xl=J((dy,$l)=>{"use strict";$l.exports=Hl()()?String.prototype.contains:Gl()});var eh=J((py,Ql)=>{"use strict";var An=Sa(),Yl=Sl(),Kl=Ul(),Jl=Vl(),Ii=Xl(),og=Ql.exports=function(i,e){var t,r,n,s,a;return arguments.length<2||typeof i!="string"?(s=e,e=i,i=null):s=arguments[2],An(i)?(t=Ii.call(i,"c"),r=Ii.call(i,"e"),n=Ii.call(i,"w")):(t=n=!0,r=!1),a={value:e,configurable:t,enumerable:r,writable:n},s?Kl(Jl(s),a):a};og.gs=function(i,e,t){var r,n,s,a;return typeof i!="string"?(s=t,t=e,e=i,i=null):s=arguments[3],An(e)?Yl(e)?An(t)?Yl(t)||(s=t,t=void 0):t=void 0:(s=e,e=t=void 0):e=void 0,An(i)?(r=Ii.call(i,"c"),n=Ii.call(i,"e")):(r=!0,n=!1),a={get:e,set:t,configurable:r,enumerable:n},s?Kl(Jl(s),a):a}});var rh=J((gy,th)=>{"use strict";th.exports=function(i){if(typeof i!="function")throw new TypeError(i+" is not a function");return i}});var Qt=J((Ba,oh)=>{"use strict";var Tn=eh(),Ca=rh(),Aa=Function.prototype.apply,Ta=Function.prototype.call,ih=Object.create,ug=Object.defineProperty,nh=Object.defineProperties,ka=Object.prototype.hasOwnProperty,Oa={configurable:!0,enumerable:!1,writable:!0},kn,Na,On,Ra,sh,Ia,ah;kn=function(i,e){var t;return Ca(e),ka.call(this,"__ee__")?t=this.__ee__:(t=Oa.value=ih(null),ug(this,"__ee__",Oa),Oa.value=null),t[i]?typeof t[i]=="object"?t[i].push(e):t[i]=[t[i],e]:t[i]=e,this};Na=function(i,e){var t,r;return Ca(e),r=this,kn.call(this,i,t=function(){On.call(r,i,t),Aa.call(e,this,arguments)}),t.__eeOnceListener__=e,this};On=function(i,e){var t,r,n,s;if(Ca(e),!ka.call(this,"__ee__"))return this;if(t=this.__ee__,!t[i])return this;if(r=t[i],typeof r=="object")for(s=0;n=r[s];++s)(n===e||n.__eeOnceListener__===e)&&(r.length===2?t[i]=r[s?0:1]:r.splice(s,1));else(r===e||r.__eeOnceListener__===e)&&delete t[i];return this};Ra=function(i){var e,t,r,n,s;if(!!ka.call(this,"__ee__")&&(n=this.__ee__[i],!!n))if(typeof n=="object"){for(t=arguments.length,s=new Array(t-1),e=1;e<t;++e)s[e-1]=arguments[e];for(n=n.slice(),e=0;r=n[e];++e)Aa.call(r,this,s)}else switch(arguments.length){case 1:Ta.call(n,this);break;case 2:Ta.call(n,this,arguments[1]);break;case 3:Ta.call(n,this,arguments[1],arguments[2]);break;default:for(t=arguments.length,s=new Array(t-1),e=1;e<t;++e)s[e-1]=arguments[e];Aa.call(n,this,s)}};sh={on:kn,once:Na,off:On,emit:Ra};Ia={on:Tn(kn),once:Tn(Na),off:Tn(On),emit:Tn(Ra)};ah=nh({},Ia);oh.exports=Ba=function(i){return i==null?ih(ah):nh(Object(i),Ia)};Ba.methods=sh});var Li=J(Bi=>{"use strict";function lg(i,e,t){if(t===void 0&&(t=Array.prototype),i&&typeof t.find=="function")return t.find.call(i,e);for(var r=0;r<i.length;r++)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r];if(e.call(void 0,n,r,i))return n}}function La(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}var uh=La({HTML:"text/html",isHTML:function(i){return i===uh.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),lh=La({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===lh.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Bi.find=lg;Bi.freeze=La;Bi.MIME_TYPE=uh;Bi.NAMESPACE=lh});var Za=J(wr=>{var hh=Li(),or=hh.find,Pi=hh.NAMESPACE;function hg(i){return i!==""}function fg(i){return i?i.split(/[\t\n\f\r ]+/).filter(hg):[]}function cg(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function fh(i){if(!i)return[];var e=fg(i);return Object.keys(e.reduce(cg,{}))}function dg(i){return function(e){return i&&i.indexOf(e)!==-1}}function Fi(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function At(i,e){var t=i.prototype;if(!(t instanceof e)){let n=function(){};var r=n;n.prototype=e.prototype,n=new n,Fi(t,n),i.prototype=t=n}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var Tt={},er=Tt.ELEMENT_NODE=1,ei=Tt.ATTRIBUTE_NODE=2,Nn=Tt.TEXT_NODE=3,ch=Tt.CDATA_SECTION_NODE=4,dh=Tt.ENTITY_REFERENCE_NODE=5,pg=Tt.ENTITY_NODE=6,ph=Tt.PROCESSING_INSTRUCTION_NODE=7,gh=Tt.COMMENT_NODE=8,vh=Tt.DOCUMENT_NODE=9,mh=Tt.DOCUMENT_TYPE_NODE=10,pr=Tt.DOCUMENT_FRAGMENT_NODE=11,gg=Tt.NOTATION_NODE=12,_t={},ht={},my=_t.INDEX_SIZE_ERR=(ht[1]="Index size error",1),_y=_t.DOMSTRING_SIZE_ERR=(ht[2]="DOMString size error",2),kt=_t.HIERARCHY_REQUEST_ERR=(ht[3]="Hierarchy request error",3),yy=_t.WRONG_DOCUMENT_ERR=(ht[4]="Wrong document",4),by=_t.INVALID_CHARACTER_ERR=(ht[5]="Invalid character",5),wy=_t.NO_DATA_ALLOWED_ERR=(ht[6]="No data allowed",6),Ey=_t.NO_MODIFICATION_ALLOWED_ERR=(ht[7]="No modification allowed",7),_h=_t.NOT_FOUND_ERR=(ht[8]="Not found",8),xy=_t.NOT_SUPPORTED_ERR=(ht[9]="Not supported",9),yh=_t.INUSE_ATTRIBUTE_ERR=(ht[10]="Attribute in use",10),Sy=_t.INVALID_STATE_ERR=(ht[11]="Invalid state",11),Dy=_t.SYNTAX_ERR=(ht[12]="Syntax error",12),Cy=_t.INVALID_MODIFICATION_ERR=(ht[13]="Invalid modification",13),Ay=_t.NAMESPACE_ERR=(ht[14]="Invalid namespace",14),Ty=_t.INVALID_ACCESS_ERR=(ht[15]="Invalid access",15);function it(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,ht[i]),this.message=ht[i],Error.captureStackTrace&&Error.captureStackTrace(this,it);return t.code=i,e&&(this.message=this.message+": "+e),t}it.prototype=Error.prototype;Fi(_t,it);function gr(){}gr.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var t=[],r=0;r<this.length;r++)ri(this[r],t,i,e);return t.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function ti(i,e){this._node=i,this._refresh=e,Pa(this)}function Pa(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var t=i._refresh(i._node);if(Ph(i,"length",t.length),!i.$$length||t.length<i.$$length)for(var r=t.length;r in i;r++)Object.prototype.hasOwnProperty.call(i,r)&&delete i[r];Fi(t,i),i._inc=e}}ti.prototype.item=function(i){return Pa(this),this[i]||null};At(ti,gr);function Rn(){}function bh(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function wh(i,e,t,r){if(r?e[bh(e,r)]=t:e[e.length++]=t,i){t.ownerElement=i;var n=i.ownerDocument;n&&(r&&Dh(n,i,r),vg(n,i,t))}}function Eh(i,e,t){var r=bh(e,t);if(r>=0){for(var n=e.length-1;r<n;)e[r]=e[++r];if(e.length=n,i){var s=i.ownerDocument;s&&(Dh(s,i,t),t.ownerElement=null)}}else throw new it(_h,new Error(i.tagName+"@"+t))}Rn.prototype={length:0,item:gr.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new it(yh);var t=this.getNamedItem(i.nodeName);return wh(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new it(yh);return t=this.getNamedItemNS(i.namespaceURI,i.localName),wh(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return Eh(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return Eh(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var r=this[t];if(r.localName==e&&r.namespaceURI==i)return r}return null}};function xh(){}xh.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var r=new zi;if(r.implementation=this,r.childNodes=new gr,r.doctype=t||null,t&&r.appendChild(t),e){var n=r.createElementNS(i,e);r.appendChild(n)}return r},createDocumentType:function(i,e,t){var r=new Ln;return r.name=i,r.nodeName=i,r.publicId=e||"",r.systemId=t||"",r}};function ze(){}ze.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return In(this,i,e)},replaceChild:function(i,e){In(this,i,e,kh),e&&this.removeChild(e)},removeChild:function(i){return Ch(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return Ha(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==Nn&&i.nodeType==Nn?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&t[r]===i)return r}e=e.nodeType==ei?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&i in t&&Object.prototype.hasOwnProperty.call(t,i))return t[i];e=e.nodeType==ei?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function Sh(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}Fi(Tt,ze);Fi(Tt,ze.prototype);function Mi(i,e){if(e(i))return!0;if(i=i.firstChild)do if(Mi(i,e))return!0;while(i=i.nextSibling)}function zi(){this.ownerDocument=this}function vg(i,e,t){i&&i._inc++;var r=t.namespaceURI;r===Pi.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Dh(i,e,t,r){i&&i._inc++;var n=t.namespaceURI;n===Pi.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Fa(i,e,t){if(i&&i._inc){i._inc++;var r=e.childNodes;if(t)r[r.length++]=t;else{for(var n=e.firstChild,s=0;n;)r[s++]=n,n=n.nextSibling;r.length=s,delete r[r.length]}}}function Ch(i,e){var t=e.previousSibling,r=e.nextSibling;return t?t.nextSibling=r:i.firstChild=r,r?r.previousSibling=t:i.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Fa(i.ownerDocument,i),e}function mg(i){return i&&(i.nodeType===ze.DOCUMENT_NODE||i.nodeType===ze.DOCUMENT_FRAGMENT_NODE||i.nodeType===ze.ELEMENT_NODE)}function _g(i){return i&&(ur(i)||Ma(i)||vr(i)||i.nodeType===ze.DOCUMENT_FRAGMENT_NODE||i.nodeType===ze.COMMENT_NODE||i.nodeType===ze.PROCESSING_INSTRUCTION_NODE)}function vr(i){return i&&i.nodeType===ze.DOCUMENT_TYPE_NODE}function ur(i){return i&&i.nodeType===ze.ELEMENT_NODE}function Ma(i){return i&&i.nodeType===ze.TEXT_NODE}function Ah(i,e){var t=i.childNodes||[];if(or(t,ur)||vr(e))return!1;var r=or(t,vr);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function Th(i,e){var t=i.childNodes||[];function r(s){return ur(s)&&s!==e}if(or(t,r))return!1;var n=or(t,vr);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function yg(i,e,t){if(!mg(i))throw new it(kt,"Unexpected parent node type "+i.nodeType);if(t&&t.parentNode!==i)throw new it(_h,"child not in parent");if(!_g(e)||vr(e)&&i.nodeType!==ze.DOCUMENT_NODE)throw new it(kt,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function bg(i,e,t){var r=i.childNodes||[],n=e.childNodes||[];if(e.nodeType===ze.DOCUMENT_FRAGMENT_NODE){var s=n.filter(ur);if(s.length>1||or(n,Ma))throw new it(kt,"More than one element or text in fragment");if(s.length===1&&!Ah(i,t))throw new it(kt,"Element in fragment can not be inserted before doctype")}if(ur(e)&&!Ah(i,t))throw new it(kt,"Only one element can be added and only after doctype");if(vr(e)){if(or(r,vr))throw new it(kt,"Only one doctype is allowed");var a=or(r,ur);if(t&&r.indexOf(a)<r.indexOf(t))throw new it(kt,"Doctype can only be inserted before an element");if(!t&&a)throw new it(kt,"Doctype can not be appended since element is present")}}function kh(i,e,t){var r=i.childNodes||[],n=e.childNodes||[];if(e.nodeType===ze.DOCUMENT_FRAGMENT_NODE){var s=n.filter(ur);if(s.length>1||or(n,Ma))throw new it(kt,"More than one element or text in fragment");if(s.length===1&&!Th(i,t))throw new it(kt,"Element in fragment can not be inserted before doctype")}if(ur(e)&&!Th(i,t))throw new it(kt,"Only one element can be added and only after doctype");if(vr(e)){let u=function(l){return vr(l)&&l!==t};var o=u;if(or(r,u))throw new it(kt,"Only one doctype is allowed");var a=or(r,ur);if(t&&r.indexOf(a)<r.indexOf(t))throw new it(kt,"Doctype can only be inserted before an element")}}function In(i,e,t,r){yg(i,e,t),i.nodeType===ze.DOCUMENT_NODE&&(r||bg)(i,e,t);var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===pr){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:i.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:i.firstChild=s,t==null?i.lastChild=a:t.previousSibling=a;do s.parentNode=i;while(s!==a&&(s=s.nextSibling));return Fa(i.ownerDocument||i,i),e.nodeType==pr&&(e.firstChild=e.lastChild=null),e}function wg(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,Fa(i.ownerDocument,i,e),e}zi.prototype={nodeName:"#document",nodeType:vh,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==pr){for(var t=i.firstChild;t;){var r=t.nextSibling;this.insertBefore(t,e),t=r}return i}return In(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===er&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),Ch(this,i)},replaceChild:function(i,e){In(this,i,e,kh),i.ownerDocument=this,e&&this.removeChild(e),ur(i)&&(this.documentElement=i)},importNode:function(i,e){return Lh(this,i,e)},getElementById:function(i){var e=null;return Mi(this.documentElement,function(t){if(t.nodeType==er&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=fh(i);return new ti(this,function(t){var r=[];return e.length>0&&Mi(t.documentElement,function(n){if(n!==t&&n.nodeType===er){var s=n.getAttribute("class");if(s){var a=i===s;if(!a){var o=fh(s);a=e.every(dg(o))}a&&r.push(n)}}}),r})},createElement:function(i){var e=new Ir;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new gr;var t=e.attributes=new Rn;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new Pn;return i.ownerDocument=this,i.childNodes=new gr,i},createTextNode:function(i){var e=new za;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new qa;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new Ua;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new Va;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new Bn;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new Wa;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new Ir,r=e.split(":"),n=t.attributes=new Rn;return t.childNodes=new gr,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,n._ownerElement=t,t},createAttributeNS:function(i,e){var t=new Bn,r=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,t}};At(zi,ze);function Ir(){this._nsMap={}}Ir.prototype={nodeType:er,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===pr?this.insertBefore(i,null):wg(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var r=this.ownerDocument.createAttributeNS(i,e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new ti(this,function(e){var t=[];return Mi(e,function(r){r!==e&&r.nodeType==er&&(i==="*"||r.tagName==i)&&t.push(r)}),t})},getElementsByTagNameNS:function(i,e){return new ti(this,function(t){var r=[];return Mi(t,function(n){n!==t&&n.nodeType===er&&(i==="*"||n.namespaceURI===i)&&(e==="*"||n.localName==e)&&r.push(n)}),r})}};zi.prototype.getElementsByTagName=Ir.prototype.getElementsByTagName;zi.prototype.getElementsByTagNameNS=Ir.prototype.getElementsByTagNameNS;At(Ir,ze);function Bn(){}Bn.prototype.nodeType=ei;At(Bn,ze);function qi(){}qi.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(ht[kt])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var r=this.data.substring(0,i),n=this.data.substring(i+e);t=r+t+n,this.nodeValue=this.data=t,this.length=t.length}};At(qi,ze);function za(){}za.prototype={nodeName:"#text",nodeType:Nn,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};At(za,qi);function qa(){}qa.prototype={nodeName:"#comment",nodeType:gh};At(qa,qi);function Ua(){}Ua.prototype={nodeName:"#cdata-section",nodeType:ch};At(Ua,qi);function Ln(){}Ln.prototype.nodeType=mh;At(Ln,ze);function Oh(){}Oh.prototype.nodeType=gg;At(Oh,ze);function Nh(){}Nh.prototype.nodeType=pg;At(Nh,ze);function Wa(){}Wa.prototype.nodeType=dh;At(Wa,ze);function Pn(){}Pn.prototype.nodeName="#document-fragment";Pn.prototype.nodeType=pr;At(Pn,ze);function Va(){}Va.prototype.nodeType=ph;At(Va,ze);function Rh(){}Rh.prototype.serializeToString=function(i,e,t){return Ih.call(i,e,t)};ze.prototype.toString=Ih;function Ih(i,e){var t=[],r=this.nodeType==9&&this.documentElement||this,n=r.prefix,s=r.namespaceURI;if(s&&n==null){var n=r.lookupPrefix(s);if(n==null)var a=[{namespace:s,prefix:null}]}return ri(this,t,i,e,a),t.join("")}function Bh(i,e,t){var r=i.prefix||"",n=i.namespaceURI;if(!n||r==="xml"&&n===Pi.XML||n===Pi.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===r)return a.namespace!==n}return!0}function ja(i,e,t){i.push(" ",e,'="',t.replace(/[<&"]/g,Sh),'"')}function ri(i,e,t,r,n){if(n||(n=[]),r)if(i=r(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case er:var s=i.attributes,a=s.length,o=i.firstChild,u=i.tagName;t=Pi.isHTML(i.namespaceURI)||t;var l=u;if(!t&&!i.prefix&&i.namespaceURI){for(var c,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){c=s.item(f).value;break}if(!c)for(var p=n.length-1;p>=0;p--){var v=n[p];if(v.prefix===""&&v.namespace===i.namespaceURI){c=v.namespace;break}}if(c!==i.namespaceURI)for(var p=n.length-1;p>=0;p--){var v=n[p];if(v.namespace===i.namespaceURI){v.prefix&&(l=v.prefix+":"+u);break}}}e.push("<",l);for(var m=0;m<a;m++){var C=s.item(m);C.prefix=="xmlns"?n.push({prefix:C.localName,namespace:C.value}):C.nodeName=="xmlns"&&n.push({prefix:"",namespace:C.value})}for(var m=0;m<a;m++){var C=s.item(m);if(Bh(C,t,n)){var S=C.prefix||"",d=C.namespaceURI;ja(e,S?"xmlns:"+S:"xmlns",d),n.push({prefix:S,namespace:d})}ri(C,e,t,r,n)}if(u===l&&Bh(i,t,n)){var S=i.prefix||"",d=i.namespaceURI;ja(e,S?"xmlns:"+S:"xmlns",d),n.push({prefix:S,namespace:d})}if(o||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(e.push(">"),t&&/^script$/i.test(u))for(;o;)o.data?e.push(o.data):ri(o,e,t,r,n.slice()),o=o.nextSibling;else for(;o;)ri(o,e,t,r,n.slice()),o=o.nextSibling;e.push("</",l,">")}else e.push("/>");return;case vh:case pr:for(var o=i.firstChild;o;)ri(o,e,t,r,n.slice()),o=o.nextSibling;return;case ei:return ja(e,i.name,i.value);case Nn:return e.push(i.data.replace(/[<&]/g,Sh).replace(/]]>/g,"]]&gt;"));case ch:return e.push("<![CDATA[",i.data,"]]>");case gh:return e.push("<!--",i.data,"-->");case mh:var g=i.publicId,y=i.systemId;if(e.push("<!DOCTYPE ",i.name),g)e.push(" PUBLIC ",g),y&&y!="."&&e.push(" ",y),e.push(">");else if(y&&y!=".")e.push(" SYSTEM ",y,">");else{var T=i.internalSubset;T&&e.push(" [",T,"]"),e.push(">")}return;case ph:return e.push("<?",i.target," ",i.data,"?>");case dh:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function Lh(i,e,t){var r;switch(e.nodeType){case er:r=e.cloneNode(!1),r.ownerDocument=i;case pr:break;case ei:t=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=i,r.parentNode=null,t)for(var n=e.firstChild;n;)r.appendChild(Lh(i,n,t)),n=n.nextSibling;return r}function Ha(i,e,t){var r=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=e[n];typeof s!="object"&&s!=r[n]&&(r[n]=s)}switch(e.childNodes&&(r.childNodes=new gr),r.ownerDocument=i,r.nodeType){case er:var a=e.attributes,o=r.attributes=new Rn,u=a.length;o._ownerElement=r;for(var l=0;l<u;l++)r.setAttributeNode(Ha(i,a.item(l),!0));break;case ei:t=!0}if(t)for(var c=e.firstChild;c;)r.appendChild(Ha(i,c,t)),c=c.nextSibling;return r}function Ph(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case er:case pr:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};ky=i,Object.defineProperty(ti.prototype,"length",{get:function(){return Pa(this),this.$$length}}),Object.defineProperty(ze.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case er:case pr:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Ph=function(e,t,r){e["$$"+t]=r}}}catch(i){}var ky;wr.DocumentType=Ln;wr.DOMException=it;wr.DOMImplementation=xh;wr.Element=Ir;wr.Node=ze;wr.NodeList=gr;wr.XMLSerializer=Rh});var Mh=J(Ui=>{"use strict";var Fh=Li().freeze;Ui.XML_ENTITIES=Fh({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});Ui.HTML_ENTITIES=Fh({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});Ui.entityMap=Ui.HTML_ENTITIES});var Zh=J($a=>{var Wi=Li().NAMESPACE,Ga=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,zh=new RegExp("[\\-\\.0-9"+Ga.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),qh=new RegExp("^"+Ga.source+zh.source+"*(?::"+Ga.source+zh.source+"*)?$"),Vi=0,Er=1,ii=2,ji=3,ni=4,si=5,Hi=6,Fn=7;function ai(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ai)}ai.prototype=new Error;ai.prototype.name=ai.name;function Uh(){}Uh.prototype={parse:function(i,e,t){var r=this.domBuilder;r.startDocument(),jh(e,e={}),Eg(i,e,t,r,this.errorHandler),r.endDocument()}};function Eg(i,e,t,r,n){function s(ne){if(ne>65535){ne-=65536;var ge=55296+(ne>>10),ve=56320+(ne&1023);return String.fromCharCode(ge,ve)}else return String.fromCharCode(ne)}function a(ne){var ge=ne.slice(1,-1);return ge in t?t[ge]:ge.charAt(0)==="#"?s(parseInt(ge.substr(1).replace("x","0x"))):(n.error("entity not found:"+ne),ne)}function o(ne){if(ne>C){var ge=i.substring(C,ne).replace(/&#?\w+;/g,a);p&&u(C),r.characters(ge,0,ne-C),C=ne}}function u(ne,ge){for(;ne>=c&&(ge=f.exec(i));)l=ge.index,c=l+ge[0].length,p.lineNumber++;p.columnNumber=ne-l+1}for(var l=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,p=r.locator,v=[{currentNSMap:e}],m={},C=0;;){try{var S=i.indexOf("<",C);if(S<0){if(!i.substr(C).match(/^\s*$/)){var d=r.doc,g=d.createTextNode(i.substr(C));d.appendChild(g),r.currentElement=g}return}switch(S>C&&o(S),i.charAt(S+1)){case"/":var y=i.indexOf(">",S+3),T=i.substring(S+2,y).replace(/[ \t\n\r]+$/g,""),I=v.pop();y<0?(T=i.substring(S+2).replace(/[\s<].*/,""),n.error("end tag name: "+T+" is not complete:"+I.tagName),y=S+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),n.error("end tag name: "+T+" maybe not complete"),y=S+1+T.length);var w=I.localNSMap,A=I.tagName==T,k=A||I.tagName&&I.tagName.toLowerCase()==T.toLowerCase();if(k){if(r.endElement(I.uri,I.localName,T),w)for(var N in w)Object.prototype.hasOwnProperty.call(w,N)&&r.endPrefixMapping(N);A||n.fatalError("end tag name: "+T+" is not match the current start tagName:"+I.tagName)}else v.push(I);y++;break;case"?":p&&u(S),y=Ag(i,S,r);break;case"!":p&&u(S),y=Cg(i,S,r,n);break;default:p&&u(S);var z=new Hh,F=v[v.length-1].currentNSMap,y=xg(i,S,z,F,a,n),Z=z.length;if(!z.closed&&Dg(i,y,z.tagName,m)&&(z.closed=!0,t.nbsp||n.warning("unclosed xml attribute")),p&&Z){for(var j=Wh(p,{}),ie=0;ie<Z;ie++){var pe=z[ie];u(pe.offset),pe.locator=Wh(p,{})}r.locator=j,Vh(z,r,F)&&v.push(z),r.locator=p}else Vh(z,r,F)&&v.push(z);Wi.isHTML(z.uri)&&!z.closed?y=Sg(i,y,z.tagName,a,r):y++}}catch(ne){if(ne instanceof ai)throw ne;n.error("element parse error: "+ne),y=-1}y>C?C=y:o(Math.max(S,C)+1)}}function Wh(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function xg(i,e,t,r,n,s){function a(v,m,C){t.attributeNames.hasOwnProperty(v)&&s.fatalError("Attribute "+v+" redefined"),t.addValue(v,m,C)}for(var o,u,l=++e,c=Vi;;){var f=i.charAt(l);switch(f){case"=":if(c===Er)o=i.slice(e,l),c=ji;else if(c===ii)c=ji;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===ji||c===Er)if(c===Er&&(s.warning('attribute value must after "="'),o=i.slice(e,l)),e=l+1,l=i.indexOf(f,e),l>0)u=i.slice(e,l).replace(/&#?\w+;/g,n),a(o,u,e-1),c=si;else throw new Error("attribute value no end '"+f+"' match");else if(c==ni)u=i.slice(e,l).replace(/&#?\w+;/g,n),a(o,u,e),s.warning('attribute "'+o+'" missed start quot('+f+")!!"),e=l+1,c=si;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Vi:t.setTagName(i.slice(e,l));case si:case Hi:case Fn:c=Fn,t.closed=!0;case ni:case Er:break;case ii:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==Vi&&t.setTagName(i.slice(e,l)),l;case">":switch(c){case Vi:t.setTagName(i.slice(e,l));case si:case Hi:case Fn:break;case ni:case Er:u=i.slice(e,l),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case ii:c===ii&&(u=o),c==ni?(s.warning('attribute "'+u+'" missed quot(")!'),a(o,u.replace(/&#?\w+;/g,n),e)):((!Wi.isHTML(r[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),a(u,u,e));break;case ji:throw new Error("attribute value missed!!")}return l;case"\x80":f=" ";default:if(f<=" ")switch(c){case Vi:t.setTagName(i.slice(e,l)),c=Hi;break;case Er:o=i.slice(e,l),c=ii;break;case ni:var u=i.slice(e,l).replace(/&#?\w+;/g,n);s.warning('attribute "'+u+'" missed quot(")!!'),a(o,u,e);case si:c=Hi;break}else switch(c){case ii:var p=t.tagName;(!Wi.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=l,c=Er;break;case si:s.warning('attribute space is required"'+o+'"!!');case Hi:c=Er,e=l;break;case ji:c=ni,e=l;break;case Fn:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function Vh(i,e,t){for(var r=i.tagName,n=null,s=i.length;s--;){var a=i[s],o=a.qName,u=a.value,p=o.indexOf(":");if(p>0)var l=a.prefix=o.slice(0,p),c=o.slice(p+1),f=l==="xmlns"&&c;else c=o,l=null,f=o==="xmlns"&&"";a.localName=c,f!==!1&&(n==null&&(n={},jh(t,t={})),t[f]=n[f]=u,a.uri=Wi.XMLNS,e.startPrefixMapping(f,u))}for(var s=i.length;s--;){a=i[s];var l=a.prefix;l&&(l==="xml"&&(a.uri=Wi.XML),l!=="xmlns"&&(a.uri=t[l||""]))}var p=r.indexOf(":");p>0?(l=i.prefix=r.slice(0,p),c=i.localName=r.slice(p+1)):(l=null,c=i.localName=r);var v=i.uri=t[l||""];if(e.startElement(v,c,r,i),i.closed){if(e.endElement(v,c,r),n)for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&e.endPrefixMapping(l)}else return i.currentNSMap=t,i.localNSMap=n,!0}function Sg(i,e,t,r,n){if(/^(?:script|textarea)$/i.test(t)){var s=i.indexOf("</"+t+">",e),a=i.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(n.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),n.characters(a,0,a.length),s)}return e+1}function Dg(i,e,t,r){var n=r[t];return n==null&&(n=i.lastIndexOf("</"+t+">"),n<e&&(n=i.lastIndexOf("</"+t)),r[t]=n),n<e}function jh(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function Cg(i,e,t,r){var n=i.charAt(e+2);switch(n){case"-":if(i.charAt(e+3)==="-"){var s=i.indexOf("-->",e+4);return s>e?(t.comment(i,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var s=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,s-e-9),t.endCDATA(),s+3}var a=Tg(i,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],l=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var f=a[o-1];return t.startDTD(u,l,c),t.endDTD(),f.index+f[0].length}}return-1}function Ag(i,e,t){var r=i.indexOf("?>",e);if(r){var n=i.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){var s=n[0].length;return t.processingInstruction(n[1],n[2]),r+2}else return-1}return-1}function Hh(){this.attributeNames={}}Hh.prototype={setTagName:function(i){if(!qh.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!qh.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function Tg(i,e){var t,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(i);t=n.exec(i);)if(r.push(t),t[1])return r}$a.XMLReader=Uh;$a.ParseError=ai});var Jh=J(Gi=>{var kg=Li(),Xa=Za(),Gh=Mh(),$h=Zh(),Og=Xa.DOMImplementation,Xh=kg.NAMESPACE,Ng=$h.ParseError,Rg=$h.XMLReader;function Yh(i){this.options=i||{locator:{}}}Yh.prototype.parseFromString=function(i,e){var t=this.options,r=new Rg,n=t.domBuilder||new Zi,s=t.errorHandler,a=t.locator,o=t.xmlns||{},u=/\/x?html?$/.test(e),l=u?Gh.HTML_ENTITIES:Gh.XML_ENTITIES;return a&&n.setDocumentLocator(a),r.errorHandler=Ig(s,n,a),r.domBuilder=t.domBuilder||n,u&&(o[""]=Xh.HTML),o.xml=o.xml||Xh.XML,i&&typeof i=="string"?r.parse(i,o,l):r.errorHandler.error("invalid doc source"),n.doc};function Ig(i,e,t){if(!i){if(e instanceof Zi)return e;i=e}var r={},n=i instanceof Function;t=t||{};function s(a){var o=i[a];!o&&n&&(o=i.length==2?function(u){i(a,u)}:i),r[a]=o&&function(u){o("[xmldom "+a+"]	"+u+Ya(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function Zi(){this.cdata=!1}function oi(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}Zi.prototype={startDocument:function(){this.doc=new Og().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,r){var n=this.doc,s=n.createElementNS(i,t||e),a=r.length;Mn(this,s),this.currentElement=s,this.locator&&oi(this.locator,s);for(var o=0;o<a;o++){var i=r.getURI(o),u=r.getValue(o),t=r.getQName(o),l=n.createAttributeNS(i,t);this.locator&&oi(r.getLocator(o),l),l.value=l.nodeValue=u,s.setAttributeNode(l)}},endElement:function(i,e,t){var r=this.currentElement,n=r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&oi(this.locator,t),Mn(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=Kh.apply(this,arguments),i){if(this.cdata)var r=this.doc.createCDATASection(i);else var r=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(i)&&this.doc.appendChild(r),this.locator&&oi(this.locator,r)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=Kh.apply(this,arguments);var r=this.doc.createComment(i);this.locator&&oi(this.locator,r),Mn(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(i,e,t);this.locator&&oi(this.locator,n),Mn(this,n),this.doc.doctype=n}},warning:function(i){console.warn("[xmldom warning]	"+i,Ya(this.locator))},error:function(i){console.error("[xmldom error]	"+i,Ya(this.locator))},fatalError:function(i){throw new Ng(i,this.locator)}};function Ya(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function Kh(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){Zi.prototype[i]=function(){return null}});function Mn(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}Gi.__DOMHandler=Zi;Gi.DOMParser=Yh;Gi.DOMImplementation=Xa.DOMImplementation;Gi.XMLSerializer=Xa.XMLSerializer});var Ka=J(zn=>{var Qh=Za();zn.DOMImplementation=Qh.DOMImplementation;zn.XMLSerializer=Qh.XMLSerializer;zn.DOMParser=Jh().DOMParser});var Ve=J(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.RangeObject=void 0;we.blob2base64=av;we.borders=Zg;we.bounds=Hg;we.createBase64Url=ev;we.createBlob=nf;we.createBlobUrl=Jg;we.defaults=Wg;we.defer=ov;we.documentHeight=Mg;we.extend=Vg;we.filterChildren=hv;we.findChildren=lv;we.getParentByTagName=fv;we.indexOfElementNode=Yg;we.indexOfNode=Qa;we.indexOfSorted=Ja;we.indexOfTextNode=Xg;we.insert=jg;we.isElement=zg;we.isFloat=qg;we.isNumber=rf;we.isXml=Kg;we.locationOf=qn;we.nodeBounds=Gg;we.parents=to;we.parse=rv;we.prefixed=Ug;we.qs=iv;we.qsa=sf;we.qsp=nv;we.querySelectorByType=uv;we.requestAnimationFrame=void 0;we.revokeBlobUrl=Qg;we.sprint=sv;we.treeWalker=af;we.type=tv;we.uuid=tf;we.walk=eo;we.windowBounds=$g;var Bg=Ka(),Lg=typeof window!="undefined"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1;we.requestAnimationFrame=Lg;var Pg=1,Fg=3,ef=typeof URL!="undefined"?URL:typeof window!="undefined"?window.URL||window.webkitURL||window.mozURL:void 0;function tf(){var i=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(t=="x"?r:r&7|8).toString(16)});return e}function Mg(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function zg(i){return!!(i&&i.nodeType==1)}function rf(i){return!isNaN(parseFloat(i))&&isFinite(i)}function qg(i){let e=parseFloat(i);return rf(i)===!1?!1:typeof i=="string"&&i.indexOf(".")>-1?!0:Math.floor(e)!==e}function Ug(i){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=i.toLowerCase(),n=e.length;if(typeof document=="undefined"||typeof document.body.style[r]!="undefined")return i;for(var s=0;s<n;s++)if(typeof document.body.style[t[s]+r]!="undefined")return t[s]+r;return i}function Wg(i){for(var e=1,t=arguments.length;e<t;e++){var r=arguments[e];for(var n in r)i[n]===void 0&&(i[n]=r[n])}return i}function Vg(i){var e=[].slice.call(arguments,1);return e.forEach(function(t){!t||Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}),i}function jg(i,e,t){var r=qn(i,e,t);return e.splice(r,0,i),r}function qn(i,e,t,r,n){var s=r||0,a=n||e.length,o=parseInt(s+(a-s)/2),u;return t||(t=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?o:(u=t(e[o],i),a-s==1?u>=0?o:o+1:u===0?o:u===-1?qn(i,e,t,o,a):qn(i,e,t,s,o))}function Ja(i,e,t,r,n){var s=r||0,a=n||e.length,o=parseInt(s+(a-s)/2),u;return t||(t=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?-1:(u=t(e[o],i),a-s==1?u===0?o:-1:u===0?o:u===-1?Ja(i,e,t,o,a):Ja(i,e,t,s,o))}function Hg(i){var e=window.getComputedStyle(i),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],n=0,s=0;return t.forEach(function(a){n+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:n}}function Zg(i){var e=window.getComputedStyle(i),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],n=0,s=0;return t.forEach(function(a){n+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:n}}function Gg(i){let e,t=i.ownerDocument;if(i.nodeType==Node.TEXT_NODE){let r=t.createRange();r.selectNodeContents(i),e=r.getBoundingClientRect()}else e=i.getBoundingClientRect();return e}function $g(){var i=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:i,bottom:e,width:i,height:e}}function Qa(i,e){for(var t=i.parentNode,r=t.childNodes,n,s=-1,a=0;a<r.length&&(n=r[a],n.nodeType===e&&s++,n!=i);a++);return s}function Xg(i){return Qa(i,Fg)}function Yg(i){return Qa(i,Pg)}function Kg(i){return["xml","opf","ncx"].indexOf(i)>-1}function nf(i,e){return new Blob([i],{type:e})}function Jg(i,e){var t,r=nf(i,e);return t=ef.createObjectURL(r),t}function Qg(i){return ef.revokeObjectURL(i)}function ev(i,e){var t,r;if(typeof i=="string")return t=btoa(i),r="data:"+e+";base64,"+t,r}function tv(i){return Object.prototype.toString.call(i).slice(8,-1)}function rv(i,e,t){var r,n;return typeof DOMParser=="undefined"||t?n=Bg.DOMParser:n=DOMParser,i.charCodeAt(0)===65279&&(i=i.slice(1)),r=new n().parseFromString(i,e),r}function iv(i,e){var t;if(!i)throw new Error("No Element Provided");if(typeof i.querySelector!="undefined")return i.querySelector(e);if(t=i.getElementsByTagName(e),t.length)return t[0]}function sf(i,e){return typeof i.querySelector!="undefined"?i.querySelectorAll(e):i.getElementsByTagName(e)}function nv(i,e,t){var r,n;if(typeof i.querySelector!="undefined"){e+="[";for(var s in t)e+=s+"~='"+t[s]+"'";return e+="]",i.querySelector(e)}else if(r=i.getElementsByTagName(e),n=Array.prototype.slice.call(r,0).filter(function(a){for(var o in t)if(a.getAttribute(o)===t[o])return!0;return!1}),n)return n[0]}function sv(i,e){var t=i.ownerDocument||i;typeof t.createTreeWalker!="undefined"?af(i,e,NodeFilter.SHOW_TEXT):eo(i,function(r){r&&r.nodeType===3&&e(r)},!0)}function af(i,e,t){var r=document.createTreeWalker(i,t,null,!1);let n;for(;n=r.nextNode();)e(n)}function eo(i,e){if(e(i))return!0;if(i=i.firstChild,i)do{if(eo(i,e))return!0;i=i.nextSibling}while(i)}function av(i){return new Promise(function(e,t){var r=new FileReader;r.readAsDataURL(i),r.onloadend=function(){e(r.result)}})}function ov(){this.resolve=null,this.reject=null,this.id=tf(),this.promise=new Promise((i,e)=>{this.resolve=i,this.reject=e}),Object.freeze(this)}function uv(i,e,t){var r;if(typeof i.querySelector!="undefined"&&(r=i.querySelector(`${e}[*|type="${t}"]`)),!r||r.length===0){r=sf(i,e);for(var n=0;n<r.length;n++)if(r[n].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||r[n].getAttribute("epub:type")===t)return r[n]}else return r}function lv(i){for(var e=[],t=i.childNodes,r=0;r<t.length;r++){let n=t[r];n.nodeType===1&&e.push(n)}return e}function to(i){for(var e=[i];i;i=i.parentNode)e.unshift(i);return e}function hv(i,e,t){for(var r=[],n=i.childNodes,s=0;s<n.length;s++){let a=n[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(t)return a;r.push(a)}}if(!t)return r}function fv(i,e){let t;if(!(i===null||e===""))for(t=i.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}var of=class{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,r=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,r),this.setEnd(t,r+1)}selectNodeContents(e){let t=e.childNodes[e.childNodes-1],r=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,r)}_commonAncestorContainer(e,t){var r=to(e||this.startContainer),n=to(t||this.endContainer);if(r[0]==n[0]){for(var s=0;s<r.length;s++)if(r[s]!=n[s])return r[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}};we.RangeObject=of});var $i=J((Py,lf)=>{"use strict";ro||(ro={cwd:function(){return"/"}});var ro;function lr(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+i)}function uf(i,e){for(var t="",r=-1,n=0,s,a=0;a<=i.length;++a){if(a<i.length)s=i.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(t.length<2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){for(var o=t.length-1,u=o;u>=0&&t.charCodeAt(u)!==47;--u);if(u!==o){u===-1?t="":t=t.slice(0,u),r=a,n=0;continue}}else if(t.length===2||t.length===1){t="",r=a,n=0;continue}}e&&(t.length>0?t+="/..":t="..")}else t.length>0?t+="/"+i.slice(r+1,a):t=i.slice(r+1,a);r=a,n=0}else s===46&&n!==-1?++n:n=-1}return t}function cv(i,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+i+r:r}var Un={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var s;n>=0?s=arguments[n]:(r===void 0&&(r=ro.cwd()),s=r),lr(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=uf(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(lr(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=uf(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return lr(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];lr(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":Un.normalize(e)},relative:function(e,t){if(lr(e),lr(t),e===t||(e=Un.resolve(e),t=Un.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,s=n-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var o=t.length,u=o-a,l=s<u?s:u,c=-1,f=0;f<=l;++f){if(f===l){if(u>l){if(t.charCodeAt(a+f)===47)return t.slice(a+f+1);if(f===0)return t.slice(a+f)}else s>l&&(e.charCodeAt(r+f)===47?c=f:f===0&&(c=0));break}var p=e.charCodeAt(r+f),v=t.charCodeAt(a+f);if(p!==v)break;p===47&&(c=f)}var m="";for(f=r+c+1;f<=n;++f)(f===n||e.charCodeAt(f)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+t.slice(a+c):(a+=c,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(lr(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,s=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){n=a;break}}else s=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');lr(e);var r=0,n=-1,s=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,u=-1;for(a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){r=a+1;break}}else u===-1&&(s=!1,u=a+1),o>=0&&(l===t.charCodeAt(o)?--o==-1&&(n=a):(o=-1,n=u))}return r===n?n=u:n===-1&&(n=e.length),e.slice(r,n)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else n===-1&&(s=!1,n=a+1);return n===-1?"":e.slice(r,n)}},extname:function(e){lr(e);for(var t=-1,r=0,n=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(u===47){if(!s){r=o+1;break}continue}n===-1&&(s=!1,n=o+1),u===46?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||n===-1||a===0||a===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return cv("/",e)},parse:function(e){lr(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,s;n?(t.root="/",s=1):s=0;for(var a=-1,o=0,u=-1,l=!0,c=e.length-1,f=0;c>=s;--c){if(r=e.charCodeAt(c),r===47){if(!l){o=c+1;break}continue}u===-1&&(l=!1,u=c+1),r===46?a===-1?a=c:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||u===-1||f===0||f===1&&a===u-1&&a===o+1?u!==-1&&(o===0&&n?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(o,u)):(o===0&&n?(t.name=e.slice(1,a),t.base=e.slice(1,u)):(t.name=e.slice(o,a),t.base=e.slice(o,u)),t.ext=e.slice(a,u)),o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",posix:null};lf.exports=Un});var xr=J(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.default=void 0;var Wn=dv($i());function dv(i){return i&&i.__esModule?i:{default:i}}var hf=class{constructor(e){var t,r;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return Wn.default.parse(e)}isAbsolute(e){return Wn.default.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return Wn.default.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:Wn.default.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}},pv=hf;Vn.default=pv});var Xi=J(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.default=void 0;var ff=df(xr()),cf=df($i());function df(i){return i&&i.__esModule?i:{default:i}}var pf=class{constructor(e,t){var r=e.indexOf("://")>-1,n=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!r&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,n=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch(a){this.Url=void 0,this.base&&(s=new ff.default(this.base),n=s.resolve(n))}this.Path=new ff.default(n),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,r;return t?e:(r=cf.default.resolve(this.directory,e),this.origin+r)}relative(e){return cf.default.relative(e,this.directory)}toString(){return this.href}},gv=pf;jn.default=gv});var Rt=J(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.default=void 0;var Sr=Ve(),ui=1,Wt=3,vv=9,Dr=class{constructor(e,t,r){var n;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Dr))return new Dr(e,t,r);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),n=this.checkType(e),n==="string")return this.str=e,(0,Sr.extend)(this,this.parse(e));if(n==="range")return(0,Sr.extend)(this,this.fromRange(e,this.base,r));if(n==="node")return(0,Sr.extend)(this,this.fromNode(e,this.base,r));if(n==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&((0,Sr.type)(e)==="Range"||typeof e.startContainer!="undefined")?"range":e&&typeof e=="object"&&typeof e.nodeType!="undefined"?"node":e&&typeof e=="object"&&e instanceof Dr?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,n,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(t.base=this.parseComponent(r),n=this.getPathComponent(e),t.path=this.parseComponent(n),s=this.getRange(e),s&&(t.range=!0,t.start=this.parseComponent(s[0]),t.end=this.parseComponent(s[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),n=r[0].split("/"),s;return r.length>1&&(s=r[1],t.terminal=this.parseTerminal(s)),n[0]===""&&n.shift(),t.steps=n.map(function(a){return this.parseStep(a)}.bind(this)),t}parseStep(e){var t,r,n,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),r=parseInt(e),!isNaN(r))return r%2==0?(t="element",n=r/2-1):(t="text",n=(r-1)/2),{type:t,index:n,id:a||null}}parseTerminal(e){var t,r,n=e.match(/\[(.*)\]/);return n&&n[1]?(t=parseInt(e.split("[")[0]),r=n[1]):t=parseInt(e),(0,Sr.isNumber)(t)||(t=null),{offset:t,assertion:r}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var r="";return t.type==="element"&&(r+=(t.index+1)*2),t.type==="text"&&(r+=1+2*t.index),t.id&&(r+="["+t.id+"]"),r}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var r,n,s,a,o,u,l,l,c,f,p,v;if(typeof e=="string"&&(e=new Dr(e)),typeof t=="string"&&(t=new Dr(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),s=e.start.terminal):(r=e.path.steps,s=e.path.terminal),t.range?(n=t.path.steps.concat(t.start.steps),a=t.start.terminal):(n=t.path.steps,a=t.path.terminal);for(var m=0;m<r.length;m++){if(!r[m])return-1;if(!n[m]||r[m].index>n[m].index)return 1;if(r[m].index<n[m].index)return-1}return r.length<n.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var t=e.nodeType===Wt?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var r=this.filter(e,t),n;if(!!r)return n=r.nodeType===Wt?"text":"element",{id:r.id,tagName:r.tagName,type:n,index:this.filteredPosition(r,t)}}pathTo(e,t,r){for(var n={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=vv;)r?a=this.filteredStep(s,r):a=this.step(s),a&&n.steps.unshift(a),s=s.parentNode;return t!=null&&t>=0&&(n.terminal.offset=t,n.steps[n.steps.length-1].type!="text"&&n.steps.push({type:"text",index:0})),n}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,r){var n={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,u=e.endOffset,l=!1;if(r&&(l=s.ownerDocument.querySelector("."+r)!=null),typeof t=="string"?(n.base=this.parseComponent(t),n.spinePos=n.base.steps[1].index):typeof t=="object"&&(n.base=t),e.collapsed)l&&(o=this.patchOffset(s,o,r)),n.path=this.pathTo(s,o,r);else{n.range=!0,l&&(o=this.patchOffset(s,o,r)),n.start=this.pathTo(s,o,r),l&&(u=this.patchOffset(a,u,r)),n.end=this.pathTo(a,u,r),n.path={steps:[],terminal:null};var c=n.start.steps.length,f;for(f=0;f<c&&this.equalStep(n.start.steps[f],n.end.steps[f]);f++)f===c-1?n.start.terminal===n.end.terminal&&(n.path.steps.push(n.start.steps[f]),n.range=!1):n.path.steps.push(n.start.steps[f]);n.start.steps=n.start.steps.slice(n.path.steps.length),n.end.steps=n.end.steps.slice(n.path.steps.length)}return n}fromNode(e,t,r){var n={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(n.base=this.parseComponent(t),n.spinePos=n.base.steps[1].index):typeof t=="object"&&(n.base=t),n.path=this.pathTo(e,null,r),n}filter(e,t){var r,n,s,a,o,u=!1;return e.nodeType===Wt?(u=!0,s=e.parentNode,r=e.parentNode.classList.contains(t)):(u=!1,r=e.classList.contains(t)),r&&u?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===Wt?n=a:o&&o.nodeType===Wt&&(n=o),n||e):r&&!u?!1:e}patchOffset(e,t,r){if(e.nodeType!=Wt)throw new Error("Anchor must be a text node");var n=e,s=t;for(e.parentNode.classList.contains(r)&&(n=e.parentNode);n.previousSibling;){if(n.previousSibling.nodeType===ui)if(n.previousSibling.classList.contains(r))s+=n.previousSibling.textContent.length;else break;else s+=n.previousSibling.textContent.length;n=n.previousSibling}return s}normalizedMap(e,t,r){var n={},s=-1,a,o=e.length,u,l;for(a=0;a<o;a++)u=e[a].nodeType,u===ui&&e[a].classList.contains(r)&&(u=Wt),a>0&&u===Wt&&l===Wt?n[a]=s:t===u&&(s=s+1,n[a]=s),l=u;return n}position(e){var t,r;return e.nodeType===ui?(t=e.parentNode.children,t||(t=(0,Sr.findChildren)(e.parentNode)),r=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),r=t.indexOf(e)),r}filteredPosition(e,t){var r,n,s;return e.nodeType===ui?(r=e.parentNode.children,s=this.normalizedMap(r,ui,t)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,r=e.parentNode.childNodes),s=this.normalizedMap(r,Wt,t)),n=Array.prototype.indexOf.call(r,e),s[n]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(r){var n=r.index+1;r.id?t.push("*[position()="+n+" and @id='"+r.id+"']"):r.type==="text"?t.push("text()["+n+"]"):t.push("*["+n+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(r){var n=r.index+1;r.id?t.push("#"+r.id):r.type==="text"||t.push("*:nth-child("+n+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===Wt?!0:!!(t&&r.classList.contains(t))})}walkToNode(e,t,r){var n=t||document,s=n.documentElement,a,o,u=e.length,l;for(l=0;l<u&&(o=e[l],o.type==="element"?o.id?s=n.getElementById(o.id):(a=s.children||(0,Sr.findChildren)(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,r)[o.index]),!!s);l++);return s}findNode(e,t,r){var n=t||document,s,a;return!r&&typeof n.evaluate!="undefined"?(a=this.stepsToXpath(e),s=n.evaluate(a,n,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?s=this.walkToNode(e,n,r):s=this.walkToNode(e,n),s}fixMiss(e,t,r,n){var s=this.findNode(e.slice(0,-1),r,n),a=s.childNodes,o=this.normalizedMap(a,Wt,n),u,l,c=e[e.length-1].index;for(let f in o){if(!o.hasOwnProperty(f))return;if(o[f]===c)if(u=a[f],l=u.textContent.length,t>l)t=t-l;else{u.nodeType===ui?s=u.childNodes[0]:s=u;break}}return{container:s,offset:t}}toRange(e,t){var r=e||document,n,s,a,o,u,l=this,c,f,p=t?r.querySelector("."+t)!=null:!1,v;if(typeof r.createRange!="undefined"?n=r.createRange():n=new Sr.RangeObject,l.range?(s=l.start,c=l.path.steps.concat(s.steps),o=this.findNode(c,r,p?t:null),a=l.end,f=l.path.steps.concat(a.steps),u=this.findNode(f,r,p?t:null)):(s=l.path,c=l.path.steps,o=this.findNode(l.path.steps,r,p?t:null)),o)try{s.terminal.offset!=null?n.setStart(o,s.terminal.offset):n.setStart(o,0)}catch(m){v=this.fixMiss(c,s.terminal.offset,r,p?t:null),n.setStart(v.container,v.offset)}else return console.log("No startContainer found for",this.toString()),null;if(u)try{a.terminal.offset!=null?n.setEnd(u,a.terminal.offset):n.setEnd(u,0)}catch(m){v=this.fixMiss(f,l.end.terminal.offset,r,p?t:null),n.setEnd(v.container,v.offset)}return n}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,r){var n=parseInt(t),s=(e+1)*2,a="/"+s+"/";return a+=(n+1)*2,r&&(a+="["+r+"]"),a}collapse(e){!this.range||(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}},mv=Dr;Hn.default=mv});var Gn=J(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.default=void 0;var gf=class{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let r=0;r<this.hooks.length;r++)if(t=this.hooks[r],t===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,t=this.context,r=[];return this.hooks.forEach(function(n){try{var s=n.apply(t,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&r.push(s)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}},_v=gf;Zn.default=_v});var Yi=J(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.replaceBase=bv;Lr.replaceCanonical=wv;Lr.replaceLinks=xv;Lr.replaceMeta=Ev;Lr.substitute=Sv;var Br=Ve(),yv=vf(Xi()),Uy=vf(xr());function vf(i){return i&&i.__esModule?i:{default:i}}function bv(i,e){var t,r,n=e.url,s=n.indexOf("://")>-1;!i||(r=(0,Br.qs)(i,"head"),t=(0,Br.qs)(r,"base"),t||(t=i.createElement("base"),r.insertBefore(t,r.firstChild)),!s&&window&&window.location&&(n=window.location.origin+n),t.setAttribute("href",n))}function wv(i,e){var t,r,n=e.canonical;!i||(t=(0,Br.qs)(i,"head"),r=(0,Br.qs)(t,"link[rel='canonical']"),r?r.setAttribute("href",n):(r=i.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",n),t.appendChild(r)))}function Ev(i,e){var t,r,n=e.idref;!i||(t=(0,Br.qs)(i,"head"),r=(0,Br.qs)(t,"link[property='dc.identifier']"),r?r.setAttribute("content",n):(r=i.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",n),t.appendChild(r)))}function xv(i,e){var t=i.querySelectorAll("a[href]");if(!!t.length)for(var r=(0,Br.qs)(i.ownerDocument,"base"),n=r?r.getAttribute("href"):void 0,s=function(o){var u=o.getAttribute("href");if(u.indexOf("mailto:")!==0){var l=u.indexOf("://")>-1;if(l)o.setAttribute("target","_blank");else{var c;try{c=new yv.default(u,n)}catch(f){}o.onclick=function(){return c&&c.hash?e(c.Path.path+c.hash):e(c?c.Path.path:u),!1}}}}.bind(this),a=0;a<t.length;a++)s(t[a])}function Sv(i,e,t){return e.forEach(function(r,n){r&&t[n]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=i.replace(new RegExp(r,"g"),t[n]))}),i}});var Ki=J($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.default=void 0;var li=Ve(),Dv=Cv(xr());function Cv(i){return i&&i.__esModule?i:{default:i}}function Av(i,e,t,r){var n=typeof window!="undefined"?window.URL:!1,s=n?"blob":"arraybuffer",a=new li.defer,o=new XMLHttpRequest,u=XMLHttpRequest.prototype,l;"overrideMimeType"in u||Object.defineProperty(u,"overrideMimeType",{value:function(){}}),t&&(o.withCredentials=!0),o.onreadystatechange=f,o.onerror=c,o.open("GET",i,!0);for(l in r)o.setRequestHeader(l,r[l]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new Dv.default(i).extension),e=="blob"&&(o.responseType=s),(0,li.isXml)(e)&&o.overrideMimeType("text/xml"),e=="xhtml",e=="html"||e=="htm",e=="binary"&&(o.responseType="arraybuffer"),o.send();function c(p){a.reject(p)}function f(){if(this.readyState===XMLHttpRequest.DONE){var p=!1;if((this.responseType===""||this.responseType==="document")&&(p=this.responseXML),this.status===200||this.status===0||p){var v;if(!this.response&&!p)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;p?v=this.responseXML:(0,li.isXml)(e)?v=(0,li.parse)(this.response,"text/xml"):e=="xhtml"?v=(0,li.parse)(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?v=(0,li.parse)(this.response,"text/html"):e=="json"?v=JSON.parse(this.response):e=="blob"?n?v=this.response:v=new Blob([this.response]):v=this.response,a.resolve(v)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}var Tv=Av;$n.default=Tv});var bf=J(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.default=void 0;var io=Ve(),mf=no(Rt()),_f=no(Gn()),kv=Yi(),Ov=no(Ki()),Nv=Ka();function no(i){return i&&i.__esModule?i:{default:i}}var yf=class{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new _f.default(this),this.hooks.content=new _f.default(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||Ov.default,r=new io.defer,n=r.promise;return this.contents?r.resolve(this.contents):t(this.url).then(function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){r.resolve(this.contents)}.bind(this)).catch(function(s){r.reject(s)}),n}base(){return(0,kv.replaceBase)(this.document,this)}render(e){var t=new io.defer,r=t.promise;return this.output,this.load(e).then(function(n){var s=typeof navigator!="undefined"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer=="undefined"||a?o=Nv.DOMParser:o=XMLSerializer;var u=new o;return this.output=u.serializeToString(n),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch(function(n){t.reject(n)}),r}find(e){var t=this,r=[],n=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),u=t.document.createRange(),l,c,f=-1,p,v=150;c!=-1;)c=o.indexOf(n,f+1),c!=-1&&(u=t.document.createRange(),u.setStart(a,c),u.setEnd(a,c+n.length),l=t.cfiFromRange(u),a.textContent.length<v?p=a.textContent:(p=a.textContent.substring(c-v/2,c+v/2),p="..."+p+"..."),r.push({cfi:l,excerpt:p})),f=c};return(0,io.sprint)(t.document,function(a){s(a)}),r}search(e,t=5){if(typeof document.createTreeWalker=="undefined")return this.find(e);let r=[],n=150,s=this,a=e.toLowerCase(),o=function(f){let m=f.reduce((C,S)=>C+S.textContent,"").toLowerCase().indexOf(a);if(m!=-1){let C=0,S=m+a.length,d=0,g=0;if(m<f[C].length){let y;for(;d<f.length-1&&(g+=f[d].length,!(S<=g));)d+=1;let T=f[C],I=f[d],w=s.document.createRange();w.setStart(T,m);let A=f.slice(0,d).reduce((N,z)=>N+z.textContent.length,0);w.setEnd(I,A>S?S:S-A),y=s.cfiFromRange(w);let k=f.slice(0,d+1).reduce((N,z)=>N+z.textContent,"");k.length>n&&(k=k.substring(m-n/2,m+n/2),k="..."+k+"..."),r.push({cfi:y,excerpt:k})}}},u=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1),l,c=[];for(;l=u.nextNode();)c.push(l),c.length==t&&(o(c.slice(0,t)),c=c.slice(1,t));return c.length>0&&o(c),r}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var n=r.replace("rendition:",""),s=n.indexOf("-"),a,o;s!=-1&&(a=n.slice(0,s),o=n.slice(s+1),t[a]=o)}),t}cfiFromRange(e){return new mf.default(e,this.cfiBase).toString()}cfiFromElement(e){return new mf.default(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}},Rv=yf;Xn.default=Rv});var Sf=J(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.default=void 0;var wf=ao(Rt()),Ef=ao(Gn()),Iv=ao(bf()),so=Yi();function ao(i){return i&&i.__esModule?i:{default:i}}var xf=class{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Ef.default,this.hooks.content=new Ef.default,this.hooks.content.register(so.replaceBase),this.hooks.content.register(so.replaceCanonical),this.hooks.content.register(so.replaceMeta),this.epubcfi=new wf.default,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((n,s)=>{var a=this.manifest[n.idref],o;n.index=s,n.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,n.index,n.id),n.href&&(n.url=t(n.href,!0),n.canonical=r(n.href)),a&&(n.href=a.href,n.url=t(n.href,!0),n.canonical=r(n.href),a.properties.length&&n.properties.push.apply(n.properties,a.properties)),n.linear==="yes"?(n.prev=function(){let u=n.index;for(;u>0;){let l=this.get(u-1);if(l&&l.linear)return l;u-=1}}.bind(this),n.next=function(){let u=n.index;for(;u<this.spineItems.length-1;){let l=this.get(u+1);if(l&&l.linear)return l;u+=1}}.bind(this)):(n.prev=function(){},n.next=function(){}),o=new Iv.default(n,this.hooks),this.append(o)}),this.loaded=!0}get(e){var t=0;if(typeof e=="undefined")for(;t<this.spineItems.length;){let r=this.spineItems[t];if(r&&r.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new wf.default(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,r){t.index=r}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}},Bv=xf;Yn.default=Bv});var Jn=J(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.default=hi.Task=void 0;var Kn=Ve(),Df=class{constructor(e){this._q=[],this.context=e,this.tick=Kn.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var e,t,r,n=[].shift.call(arguments),s=arguments;if(!n)throw new Error("No Task Provided");return typeof n=="function"?(e=new Kn.defer,t=e.promise,r={task:n,args:s,deferred:e,promise:t}):r={promise:n},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,t,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return r=t.apply(this.context,e.args),r&&typeof r.then=="function"?r.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new Kn.defer,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Kn.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}},Cf=class{constructor(e,t,r){return function(){var n=arguments||[];return new Promise((s,a)=>{var o=function(u,l){!u&&l?a(l):s(u)};n.push(o),e.apply(r||this,n)})}}};hi.Task=Cf;var Lv=Df;hi.default=Lv});var Vt=J(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.EVENTS=Cr.EPUBJS_VERSION=Cr.DOM_EVENTS=void 0;var Pv="0.3";Cr.EPUBJS_VERSION=Pv;var Fv=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"];Cr.DOM_EVENTS=Fv;var Mv={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};Cr.EVENTS=Mv});var Af=J(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.default=void 0;var Pr=Ve(),zv=oo(Jn()),Ar=oo(Rt()),qv=Vt(),Uv=oo(Qt());function oo(i){return i&&i.__esModule?i:{default:i}}var uo=class{constructor(e,t,r){this.spine=e,this.request=t,this.pause=r||100,this.q=new zv.default(this),this.epubcfi=new Ar.default,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each(function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then(function(t){var r=new Pr.defer,n=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(n),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(n),this.pause),r.promise}.bind(this))}parse(e,t,r){var n=[],s,a=e.ownerDocument,o=(0,Pr.qs)(a,"body"),u=0,l,c=r||this.break,f=function(p){var v=p.length,m,C=0;if(p.textContent.trim().length===0)return!1;for(u==0&&(s=this.createRange(),s.startContainer=p,s.startOffset=0),m=c-u,m>v&&(u+=v,C=v);C<v;)if(m=c-u,u===0&&(C+=1,s=this.createRange(),s.startContainer=p,s.startOffset=C),C+m>=v)u+=v-C,C=v;else{C+=m,s.endContainer=p,s.endOffset=C;let S=new Ar.default(s,t).toString();n.push(S),u=0}l=p};if((0,Pr.sprint)(o,f.bind(this)),s&&s.startContainer&&l){s.endContainer=l,s.endOffset=l.length;let p=new Ar.default(s,t).toString();n.push(p),u=0}return n}generateFromWords(e,t,r){var n=e?new Ar.default(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(s){s.linear&&(n?s.index>=n.spinePos&&this.q.enqueue(this.processWords.bind(this),s,t,n,r):this.q.enqueue(this.processWords.bind(this),s,t,n,r))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(e,t,r,n){return n&&this._locationsWords.length>=n?Promise.resolve():e.load(this.request).then(function(s){var a=new Pr.defer,o=this.parseWords(s,e,t,r),u=n-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=n?o.slice(0,u):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}.bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,r,n){var s=t.cfiBase,a=[],o=e.ownerDocument,u=(0,Pr.qs)(o,"body"),l,c=r,f=n?n.spinePos!==t.index:!0,p;n&&t.index===n.spinePos&&(p=n.findNode(n.range?n.path.steps.concat(n.start.steps):n.path.steps,e.ownerDocument));var v=function(m){if(!f)if(m===p)f=!0;else return!1;if(m.textContent.length<10&&m.textContent.trim().length===0)return!1;var C=this.countWords(m.textContent),S,d=0;if(C===0)return!1;for(S=c-this._wordCounter,S>C&&(this._wordCounter+=C,d=C);d<C;)if(S=c-this._wordCounter,d+S>=C)this._wordCounter+=C-d,d=C;else{d+=S;let g=new Ar.default(m,s);a.push({cfi:g.toString(),wordCount:this._wordCounter}),this._wordCounter=0}l=m};return(0,Pr.sprint)(u,v.bind(this)),a}locationFromCfi(e){let t;return Ar.default.prototype.isCfiString(e)&&(e=new Ar.default(e)),this._locations.length===0?-1:(t=(0,Pr.locationOf)(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new Ar.default(this._locations[this.total]);return r.collapse(),r.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(qv.EVENTS.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}};(0,Uv.default)(uo.prototype);var Wv=uo;Qn.default=Wv});var kf=J(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.default=void 0;var Vv=Hv($i()),jv=Ve();function Hv(i){return i&&i.__esModule?i:{default:i}}var Tf=class{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=(0,jv.qs)(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=Vv.default.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}},Zv=Tf;es.default=Zv});var Nf=J(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.default=void 0;var jt=Ve(),Of=class{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,r,n;if(!e)throw new Error("Package File Not Found");if(t=(0,jt.qs)(e,"metadata"),!t)throw new Error("No Metadata Found");if(r=(0,jt.qs)(e,"manifest"),!r)throw new Error("No Manifest Found");if(n=(0,jt.qs)(e,"spine"),!n)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,n),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=(0,jt.indexOfElementNode)(n),this.spine=this.parseSpine(n,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=n.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},r=(0,jt.qsa)(e,"item"),n=Array.prototype.slice.call(r);return n.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",u=s.getAttribute("media-type")||"",l=s.getAttribute("media-overlay")||"",c=s.getAttribute("properties")||"";t[a]={href:o,type:u,overlay:l,properties:c.length?c.split(" "):[]}}),t}parseSpine(e,t){var r=[],n=(0,jt.qsa)(e,"itemref"),s=Array.prototype.slice.call(n);return s.forEach(function(a,o){var u=a.getAttribute("idref"),l=a.getAttribute("properties")||"",c=l.length?l.split(" "):[],f={id:a.getAttribute("id"),idref:u,linear:a.getAttribute("linear")||"yes",properties:c,index:o};r.push(f)}),r}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var r=e.getElementById(t);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=(0,jt.qsp)(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var r=(0,jt.qsp)(e,"item",{"media-type":"application/x-dtbncx+xml"}),n;return r||(n=t.getAttribute("toc"),n&&(r=e.querySelector(`#${n}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var t=(0,jt.qs)(e,"package"),r=t.getAttribute("version"),n=(0,jt.qsp)(e,"item",{properties:"cover-image"});if(n)return n.getAttribute("href");var s=(0,jt.qsp)(e,"meta",{name:"cover"});if(s){var a=s.getAttribute("content"),o=e.getElementById(a);return o?o.getAttribute("href"):""}else return!1}getElementText(e,t){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),n;return!r||r.length===0?"":(n=r[0],n.childNodes.length?n.childNodes[0].nodeValue:"")}getPropertyText(e,t){var r=(0,jt.qsp)(e,"meta",{property:t});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((r,n)=>(r.index=n,r.linear=r.linear||"yes",r)),e.resources.forEach((r,n)=>{this.manifest[n]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,n)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}},Gv=Of;ts.default=Gv});var If=J(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.default=void 0;var It=Ve(),Rf=class{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,r,n;t&&(r=(0,It.qs)(e,"html"),n=(0,It.qs)(e,"ncx")),t?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):n&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,r=0;r<e.length;r++)t=e[r],t.href&&(this.tocByHref[t.href]=r),t.id&&(this.tocById[t.id]=r),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,r){if(r.length===0)return;let n=r[t];if(n&&(e===n.id||e===n.href))return n;{let s;for(let a=0;a<r.length&&(s=this.getByIndex(e,t,r[a].subitems),!s);++a);return s}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=(0,It.querySelectorByType)(e,"nav","toc"),r=[];if(!t)return r;let n=(0,It.filterChildren)(t,"ol",!0);return n&&(r=this.parseNavList(n)),r}parseNavList(e,t){let r=[];if(!e||!e.children)return r;for(let n=0;n<e.children.length;n++){let s=this.navItem(e.children[n],t);s&&r.push(s)}return r}navItem(e,t){let r=e.getAttribute("id")||void 0,n=(0,It.filterChildren)(e,"a",!0)||(0,It.filterChildren)(e,"span",!0);if(!n)return;let s=n.getAttribute("href")||"";r||(r=s);let a=n.textContent||"",o=[],u=(0,It.filterChildren)(e,"ol",!0);return u&&(o=this.parseNavList(u,r)),{id:r,href:s,label:a,subitems:o,parent:t}}parseLandmarks(e){var t=(0,It.querySelectorByType)(e,"nav","landmarks"),r=t?(0,It.qsa)(t,"li"):[],n=r.length,s,a=[],o;if(!r||n===0)return a;for(s=0;s<n;++s)o=this.landmarkItem(r[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let t=(0,It.filterChildren)(e,"a",!0);if(!t)return;let r=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,n=t.getAttribute("href")||"",s=t.textContent||"";return{href:n,label:s,type:r}}parseNcx(e){var t=(0,It.qsa)(e,"navPoint"),r=t.length,n,s={},a=[],o,u;if(!t||r===0)return a;for(n=0;n<r;++n)o=this.ncxItem(t[n]),s[o.id]=o,o.parent?(u=s[o.parent],u.subitems.push(o)):a.push(o);return a}ncxItem(e){var t=e.getAttribute("id")||!1,r=(0,It.qs)(e,"content"),n=r.getAttribute("src"),s=(0,It.qs)(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],u=e.parentNode,l;return u&&(u.nodeName==="navPoint"||u.nodeName.split(":").slice(-1)[0]==="navPoint")&&(l=u.getAttribute("id")),{id:t,href:n,label:a,subitems:o,parent:l}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}},$v=Rf;rs.default=$v});var ns=J(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.default=void 0;var Ji={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},Xv=function(){var i,e,t,r,n={};for(i in Ji)if(Ji.hasOwnProperty(i)){for(e in Ji[i])if(Ji[i].hasOwnProperty(e))if(t=Ji[i][e],typeof t=="string")n[t]=i+"/"+e;else for(r=0;r<t.length;r++)n[t[r]]=i+"/"+e}return n}(),Yv="text/plain";function Kv(i){return i&&Xv[i.split(".").pop().toLowerCase()]||Yv}var Jv={lookup:Kv};is.default=Jv});var Ff=J(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.default=void 0;var Bf=Yi(),Qi=Ve(),Qv=ss(Xi()),em=ss(ns()),Lf=ss(xr()),tm=ss($i());function ss(i){return i&&i.__esModule?i:{default:i}}var Pf=class{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(e){return e.href}.bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new Qv.default(e),r=em.default.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(n=>(0,Qi.blob2base64)(n)).then(n=>(0,Qi.createBase64Url)(n,r)):this.settings.request(e,"blob").then(n=>(0,Qi.createBlobUrl)(n,r))}replacements(){if(this.settings.replacements==="none")return new Promise(function(t){t(this.urls)}.bind(this));var e=this.urls.map(t=>{var r=this.settings.resolver(t);return this.createUrl(r).catch(n=>(console.error(n),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(r=>typeof r=="string"),t))}replaceCss(e,t){var r=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach(function(n){var s=this.createCssFile(n,e,t).then(function(a){var o=this.urls.indexOf(n);o>-1&&(this.replacementUrls[o]=a)}.bind(this));r.push(s)}.bind(this)),Promise.all(r)}createCssFile(e){var t;if(tm.default.isAbsolute(e))return new Promise(function(a){a()});var r=this.settings.resolver(e),n;this.settings.archive?n=this.settings.archive.getText(r):n=this.settings.request(r,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),u=new Lf.default(r).relative(o);return u});return n?n.then(a=>(a=(0,Bf.substitute)(a,s,this.replacementUrls),this.settings.replacements==="base64"?t=(0,Qi.createBase64Url)(a,"text/css"):t=(0,Qi.createBlobUrl)(a,"text/css"),t),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map(function(r){var n=t(r),s=new Lf.default(e).relative(n);return s}.bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise(function(r,n){r(this.replacementUrls[t])}.bind(this)):this.createUrl(e)}substitute(e,t){var r;return t?r=this.relativeTo(t):r=this.urls,(0,Bf.substitute)(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}},rm=Pf;as.default=rm});var zf=J(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.default=void 0;var im=nm(Rt()),Ht=Ve();function nm(i){return i&&i.__esModule?i:{default:i}}var Mf=class{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new im.default,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=(0,Ht.qs)(e,"html"),r=(0,Ht.qs)(e,"ncx");if(t)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var t=(0,Ht.querySelectorByType)(e,"nav","page-list"),r=t?(0,Ht.qsa)(t,"li"):[],n=r.length,s,a=[],o;if(!r||n===0)return a;for(s=0;s<n;++s)o=this.item(r[s]),a.push(o);return a}parseNcx(e){var t=[],r=0,n,s,a,o=0;if(s=(0,Ht.qs)(e,"pageList"),!s||(a=(0,Ht.qsa)(s,"pageTarget"),o=a.length,!a||a.length===0))return t;for(r=0;r<o;++r)n=this.ncxItem(a[r]),t.push(n);return t}ncxItem(e){var t=(0,Ht.qs)(e,"navLabel"),r=(0,Ht.qs)(t,"text"),n=r.textContent,s=(0,Ht.qs)(e,"content"),a=s.getAttribute("src"),o=parseInt(n,10);return{href:a,page:o}}item(e){var t=(0,Ht.qs)(e,"a"),r=t.getAttribute("href")||"",n=t.textContent||"",s=parseInt(n),a=r.indexOf("epubcfi"),o,u,l;return a!=-1?(o=r.split("#"),u=o[0],l=o.length>1?o[1]:!1,{cfi:l,href:r,packageUrl:u,page:s}):{href:r,page:s}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var r=(0,Ht.indexOfSorted)(e,this.locations,this.epubcfi.compare);return r!=-1?t=this.pages[r]:(r=(0,Ht.locationOf)(e,this.locations,this.epubcfi.compare),t=r-1>=0?this.pages[r-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(t=this.locations[r]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),r=this.percentageFromPage(t);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}},sm=Mf;os.default=sm});var ho=J(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.default=void 0;var am=Ve(),om=Vt(),um=lm(Qt());function lm(i){return i&&i.__esModule?i:{default:i}}var lo=class{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e!="undefined"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,r){var n=1,s=r||0,a=e,o=t,u=Math.floor(a/12),l,c,f,p;this._spread&&a>=this._minSpreadWidth?n=2:n=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(s=u%2==0?u:u-1),this.name==="pre-paginated"&&(s=0),n>1?(l=a/n-s,f=l+s):(l=a,f=a),this.name==="pre-paginated"&&n>1&&(a=l),c=l*n+s,p=a,this.width=a,this.height=o,this.spreadWidth=c,this.pageWidth=f,this.delta=p,this.columnWidth=l,this.gap=s,this.divisor=n,this.update({width:a,height:o,spreadWidth:c,pageWidth:f,delta:p,columnWidth:l,gap:s,divisor:n})}format(e,t,r){var n;return this.name==="pre-paginated"?n=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?n=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?n=e.size(null,this.height):n=e.size(this.width,null),n}count(e,t){let r,n;return this.name==="pre-paginated"?(r=1,n=1):this._flow==="paginated"?(t=t||this.delta,r=Math.ceil(e/t),n=r*this.divisor):(t=t||this.height,r=Math.ceil(e/t),n=r),{spreads:r,pages:n}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=(0,am.extend)(this.props,e);this.emit(om.EVENTS.LAYOUT.UPDATED,t,e)}}};(0,um.default)(lo.prototype);var hm=lo;us.default=hm});var Uf=J(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.default=void 0;var fm=cm(Xi());function cm(i){return i&&i.__esModule?i:{default:i}}var qf=class{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(!!e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var r=new fm.default(t);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(n=>{n.removeClass(t),n.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(r=>{this.add(e,r)})}inject(e){var t=[],r=this._themes,n;for(var s in r)r.hasOwnProperty(s)&&(s===this._current||s==="default")&&(n=r[s],(n.rules&&Object.keys(n.rules).length>0||n.url&&t.indexOf(n.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,t){var r=this._themes[e];!r||!t||(r.url?t.addStylesheet(r.url):r.serialized?(t.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(t.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,t,r){var n=this.rendition.getContents();this._overrides[e]={value:t,priority:r===!0},n.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(r=>{r.css(e)})}overrides(e){var t=this._overrides;for(var r in t)t.hasOwnProperty(r)&&e.css(r,t[r].value,t[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}},dm=qf;ls.default=dm});var fo=J(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.default=void 0;var hs=pm(Rt()),Wf=Ve();function pm(i){return i&&i.__esModule?i:{default:i}}var Vf=class{constructor(e,t,r,n=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=t||"ltr",this._dev=n}section(e){var t=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,t);return r}page(e,t,r,n){var s=e&&e.document?e.document.body:!1,a;if(!!s){if(a=this.rangePairToCfiPair(t,{start:this.findStart(s,r,n),end:this.findEnd(s,r,n)}),this._dev===!0){let o=e.document,u=new hs.default(a.start).toRange(o),l=new hs.default(a.end).toRange(o),c=o.defaultView.getSelection(),f=o.createRange();c.removeAllRanges(),f.setStart(u.startContainer,u.startOffset),f.setEnd(l.endContainer,l.endOffset),c.addRange(f)}return a}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(u){return u.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},n=r.acceptNode;n.acceptNode=r.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n,!1),a,o;(a=s.nextNode())&&(o=t(a),!o););return o}}findRanges(e){for(var t=[],r=e.contents.scrollWidth(),n=Math.ceil(r/this.layout.spreadWidth),s=n*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,u,l,c=0;c<s.pages;c++)u=(a+o)*c,l=a*(c+1)+o*c,t.push({start:this.findStart(e.document.body,u,l),end:this.findEnd(e.document.body,u,l)});return t}findStart(e,t,r){for(var n=[e],s,a,o=e;n.length;)if(s=n.shift(),a=this.walk(s,u=>{var l,c,f,p,v,m;if(v=(0,Wf.nodeBounds)(u),this.horizontal&&this.direction==="ltr"){if(l=this.horizontal?v.left:v.top,c=this.horizontal?v.right:v.bottom,l>=t&&l<=r)return u;if(c>t)return u;o=u,n.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=v.left,c=v.right,c<=r&&c>=t)return u;if(l<r)return u;o=u,n.push(u)}else{if(f=v.top,p=v.bottom,f>=t&&f<=r)return u;if(p>t)return u;o=u,n.push(u)}}),a)return this.findTextStartRange(a,t,r);return this.findTextStartRange(o,t,r)}findEnd(e,t,r){for(var n=[e],s,a=e,o;n.length;)if(s=n.shift(),o=this.walk(s,u=>{var l,c,f,p,v,m;if(v=(0,Wf.nodeBounds)(u),this.horizontal&&this.direction==="ltr"){if(l=Math.round(v.left),c=Math.round(v.right),l>r&&a)return a;if(c>r)return u;a=u,n.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=Math.round(this.horizontal?v.left:v.top),c=Math.round(this.horizontal?v.right:v.bottom),c<t&&a)return a;if(l<t)return u;a=u,n.push(u)}else{if(f=Math.round(v.top),p=Math.round(v.bottom),f>r&&a)return a;if(p>r)return u;a=u,n.push(u)}}),o)return this.findTextEndRange(o,t,r);return this.findTextEndRange(a,t,r)}findTextStartRange(e,t,r){for(var n=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c=0;c<n.length;c++)if(s=n[c],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=t)return s}else if(this.horizontal&&this.direction==="rtl"){if(l=a.right,l<=r)return s}else if(u=a.top,u>=t)return s;return n[0]}findTextEndRange(e,t,r){for(var n=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c,f,p=0;p<n.length;p++){if(a=n[p],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(u=o.left,l=o.right,u>r&&s)return s;if(l>r)return a}else if(this.horizontal&&this.direction==="rtl"){if(u=o.left,l=o.right,l<t&&s)return s;if(u<t)return a}else{if(c=o.top,f=o.bottom,c>r&&s)return s;if(f>r)return a}s=a}return n[n.length-1]}splitTextNodeIntoRanges(e,t){var r=[],n=e.textContent||"",s=n.trim(),a,o=e.ownerDocument,u=t||" ",l=s.indexOf(u);if(l===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,l),r.push(a),a=!1;l!=-1;)l=s.indexOf(u,l+1),l>0&&(a&&(a.setEnd(e,l),r.push(a)),a=o.createRange(),a.setStart(e,l+1));return a&&(a.setEnd(e,s.length),r.push(a)),r}rangePairToCfiPair(e,t){var r=t.start,n=t.end;r.collapse(!0),n.collapse(!1);let s=new hs.default(r,e).toString(),a=new hs.default(n,e).toString();return{start:s,end:a}}rangeListToCfiList(e,t){for(var r=[],n,s=0;s<t.length;s++)n=this.rangePairToCfiPair(e,t[s]),r.push(n);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}},gm=Vf;fs.default=gm});var en=J(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.default=void 0;var vm=co(Qt()),tr=Ve(),fi=co(Rt()),jf=co(fo()),mm=Yi(),mr=Vt();function co(i){return i&&i.__esModule?i:{default:i}}var Hf=typeof navigator!="undefined",_m=Hf&&/Chrome/.test(navigator.userAgent),Zf=Hf&&!_m&&/AppleWebKit/.test(navigator.userAgent),ym=1,po=class{constructor(e,t,r,n){this.epubcfi=new fi.default,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=n||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",mr.EPUBJS_VERSION),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return mr.DOM_EVENTS}width(e){var t=this.content;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,r=this.document.createRange(),n=this.content||this.document.body,s=(0,tr.borders)(n);return r.selectNodeContents(n),e=r.getBoundingClientRect(),t=e.width,s&&s.width&&(t+=s.width),Math.round(t)}textHeight(){let e,t,r=this.document.createRange(),n=this.content||this.document.body;return r.selectNodeContents(n),e=r.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,r){var n=this.content||this.document.body;return t?n.style.setProperty(e,t,r?"important":""):n.style.removeProperty(e),this.window.getComputedStyle(n)[e]}viewport(e){var t,r,n,s,a,o,u=this.document.querySelector("meta[name='viewport']"),l={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},c=[],f={};if(u&&u.hasAttribute("content")){let p=u.getAttribute("content"),v=p.match(/width\s*=\s*([^,]*)/),m=p.match(/height\s*=\s*([^,]*)/),C=p.match(/initial-scale\s*=\s*([^,]*)/),S=p.match(/minimum-scale\s*=\s*([^,]*)/),d=p.match(/maximum-scale\s*=\s*([^,]*)/),g=p.match(/user-scalable\s*=\s*([^,]*)/);v&&v.length&&typeof v[1]!="undefined"&&(l.width=v[1]),m&&m.length&&typeof m[1]!="undefined"&&(l.height=m[1]),C&&C.length&&typeof C[1]!="undefined"&&(l.scale=C[1]),S&&S.length&&typeof S[1]!="undefined"&&(l.minimum=S[1]),d&&d.length&&typeof d[1]!="undefined"&&(l.maximum=d[1]),g&&g.length&&typeof g[1]!="undefined"&&(l.scalable=g[1])}return f=(0,tr.defaults)(e||{},l),e&&(f.width&&c.push("width="+f.width),f.height&&c.push("height="+f.height),f.scale&&c.push("initial-scale="+f.scale),f.scalable==="no"?(c.push("minimum-scale="+f.scale),c.push("maximum-scale="+f.scale),c.push("user-scalable="+f.scalable)):(f.scalable&&c.push("user-scalable="+f.scalable),f.minimum&&c.push("minimum-scale="+f.minimum),f.maximum&&c.push("minimum-scale="+f.maximum)),u||(u=this.document.createElement("meta"),u.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(u)),u.setAttribute("content",c.join(", ")),this.window.scrollTo(0,0)),f}expand(){this.emit(mr.EVENTS.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver=="undefined"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(mr.EVENTS.CONTENTS.RESIZE,this._size))}resizeListeners(){var e,t;clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),r=0;r<e.length;r+=1){var n;try{n=e[r].cssRules}catch(o){return}if(!n)return;for(var s=0;s<n.length;s+=1)if(n[s].media){var a=this.window.matchMedia(n[s].media.mediaText);a.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,r=0;r<e.length;r++)t=e[r],typeof t.naturalWidth!="undefined"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var r,n={left:0,top:0};if(!this.document)return n;if(this.epubcfi.isCfiString(e)){let s=new fi.default(e).toRange(this.document,t);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)r=s.startContainer.getBoundingClientRect(),n.left=r.left,n.top=r.top;else if(Zf){let a=s.startContainer,o=new Range;try{a.nodeType===ym?r=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),r=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),r=o.getBoundingClientRect()):r=a.parentNode.getBoundingClientRect()}catch(u){console.error(u,u.stack)}}else r=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(Zf){let o=new Range;o.selectNode(a),r=o.getBoundingClientRect()}else r=a.getBoundingClientRect()}return r&&(n.left=r.left,n.top=r.top),n}addStylesheet(e){return new Promise(function(t,r){var n,s=!1;if(!this.document){t(!1);return}if(n=this.document.querySelector("link[href='"+e+"']"),n){t(!0);return}n=this.document.createElement("link"),n.type="text/css",n.rel="stylesheet",n.href=e,n.onload=n.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(n)}.bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(t),r.innerHTML=e,!0}addStylesheetRules(e,t){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var n=0,s=e.length;n<s;n++){var a=1,o=e[n],u=e[n][0],l="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var c=o.length;a<c;a++){var f=o[a];l+=f[0]+":"+f[1]+(f[2]?" !important":"")+`;
`}r.insertRule(u+"{"+l+"}",r.cssRules.length)}else Object.keys(e).forEach(v=>{let m=e[v];if(Array.isArray(m))m.forEach(C=>{let d=Object.keys(C).map(g=>`${g}:${C[g]}`).join(";");r.insertRule(`${v}{${d}}`,r.cssRules.length)});else{let S=Object.keys(m).map(d=>`${d}:${m[d]}`).join(";");r.insertRule(`${v}{${S}}`,r.cssRules.length)}})}addScript(e){return new Promise(function(t,r){var n,s=!1;if(!this.document){t(!1);return}n=this.document.createElement("script"),n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(n)}.bind(this))}addClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){!this.document||(this._triggerEvent=this.triggerEvent.bind(this),mr.DOM_EVENTS.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){!this.document||(mr.DOM_EVENTS.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){!this.document||(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){!this.document||(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}.bind(this),250)}triggerSelectedEvent(e){var t,r;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(r=new fi.default(t,this.cfiBase).toString(),this.emit(mr.EVENTS.CONTENTS.SELECTED,r),this.emit(mr.EVENTS.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var r=new fi.default(e);return r.toRange(this.document,t)}cfiFromRange(e,t){return new fi.default(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new fi.default(e,this.cfiBase,t).toString()}map(e){var t=new jf.default(e);return t.section()}size(e,t){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),r.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,t,r,n,s){let a=(0,tr.prefixed)("column-axis"),o=(0,tr.prefixed)("column-gap"),u=(0,tr.prefixed)("column-width"),l=(0,tr.prefixed)("column-fill"),f=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&f==="horizontal"&&this.direction(s),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),f==="vertical"?(this.css("padding-top",n/2+"px",!0),this.css("padding-bottom",n/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",n/2+"px",!0),this.css("padding-right",n/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(l,"auto"),this.css(o,n+"px"),this.css(u,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,r){var n="scale("+e+")",s="";this.css("transform-origin","top left"),(t>=0||r>=0)&&(s=" translate("+(t||0)+"px, "+(r||0)+"px )"),this.css("transform",n+s)}fit(e,t,r){var n=this.viewport(),s=parseInt(n.width),a=parseInt(n.height),o=e/s,u=t/a,l=o<u?o:u;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(l,0,0),this.css("background-size",s*l+"px "+a*l+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var c=e-s*l;this.css("margin-left",c+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,r,n,s){var a=new jf.default(t,s);return a.page(this,e,r,n)}linksHandler(){(0,mm.replaceLinks)(this.content,e=>{this.emit(mr.EVENTS.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=(0,tr.prefixed)("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}};(0,vm.default)(po.prototype);var bm=po;cs.default=bm});var Yf=J(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.default=void 0;var wm=$f(Qt()),Em=$f(Rt()),Gf=Vt();function $f(i){return i&&i.__esModule?i:{default:i}}var Xf=class{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,r,n,s,a){let o=encodeURI(t+e),l=new Em.default(t).spinePos,c=new go({type:e,cfiRange:t,data:r,sectionIndex:l,cb:n,className:s,styles:a});return this._annotations[o]=c,l in this._annotationsBySectionIndex?this._annotationsBySectionIndex[l].push(o):this._annotationsBySectionIndex[l]=[o],this.rendition.views().forEach(p=>{c.sectionIndex===p.index&&c.attach(p)}),c}remove(e,t){let r=encodeURI(e+t);if(r in this._annotations){let n=this._annotations[r];if(t&&n.type!==t)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(n.sectionIndex,r),n.sectionIndex===a.index&&n.detach(a)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,r,n,s){return this.add("highlight",e,t,r,n,s)}underline(e,t,r,n,s){return this.add("underline",e,t,r,n,s)}mark(e,t,r){return this.add("mark",e,t,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(n=>{this._annotations[n].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(n=>{this._annotations[n].detach(e)})}show(){}hide(){}},go=class{constructor({type:e,cfiRange:t,data:r,sectionIndex:n,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=t,this.data=r,this.sectionIndex=n,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:t,data:r,type:n,mark:s,cb:a,className:o,styles:u}=this,l;return n==="highlight"?l=e.highlight(t,r,a,o,u):n==="underline"?l=e.underline(t,r,a,o,u):n==="mark"&&(l=e.mark(t,r,a)),this.mark=l,this.emit(Gf.EVENTS.ANNOTATION.ATTACH,l),l}detach(e){let{cfiRange:t,type:r}=this,n;return e&&(r==="highlight"?n=e.unhighlight(t):r==="underline"?n=e.ununderline(t):r==="mark"&&(n=e.unmark(t))),this.mark=void 0,this.emit(Gf.EVENTS.ANNOTATION.DETACH,n),n}text(){}};(0,wm.default)(go.prototype);var xm=Xf;ds.default=xm});var Jf=J(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.createElement=Kf;function Kf(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}ps.default={createElement:Kf}});var tc=J(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.proxyMouse=Qf;tn.clone=ec;tn.default={proxyMouse:Qf};function Qf(i,e){function t(a){for(var o=e.length-1;o>=0;o--){var u=e[o],l=a.clientX,c=a.clientY;if(a.touches&&a.touches.length&&(l=a.touches[0].clientX,c=a.touches[0].clientY),!!Sm(u,i,l,c)){u.dispatchEvent(ec(a));break}}}if(i.nodeName==="iframe"||i.nodeName==="IFRAME")try{this.target=i.contentDocument}catch(a){this.target=i}else this.target=i;for(var r=["mouseup","mousedown","click","touchstart"],n=0;n<r.length;n++){var s=r[n];this.target.addEventListener(s,function(a){return t(a)},!1)}}function ec(i){var e=Object.assign({},i,{bubbles:!1});try{return new MouseEvent(i.type,e)}catch(r){var t=document.createEvent("MouseEvents");return t.initMouseEvent(i.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}}function Sm(i,e,t,r){var n=e.getBoundingClientRect();function s(c,f,p){var v=c.top-n.top,m=c.left-n.left,C=v+c.height,S=m+c.width;return v<=p&&m<=f&&C>p&&S>f}var a=i.getBoundingClientRect();if(!s(a,t,r))return!1;for(var o=i.getClientRects(),u=0,l=o.length;u<l;u++)if(s(o[u],t,r))return!0;return!1}});var sc=J(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.Underline=hr.Highlight=hr.Mark=hr.Pane=void 0;var Dm=function i(e,t,r){e===null&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(n===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:i(s,t,r)}else{if("value"in n)return n.value;var a=n.get;return a===void 0?void 0:a.call(r)}},gs=function(){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}}(),Cm=Jf(),rn=rc(Cm),Am=tc(),Tm=rc(Am);function rc(i){return i&&i.__esModule?i:{default:i}}function ic(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function nc(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}function vs(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var ub=hr.Pane=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;vs(this,i),this.target=e,this.element=rn.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),Tm.default.proxyMouse(this.target,this.marks),this.container=t,this.container.appendChild(this.element),this.render()}return gs(i,[{key:"addMark",value:function(t){var r=rn.default.createElement("g");return this.element.appendChild(r),t.bind(r,this.container),this.marks.push(t),t.render(),t}},{key:"removeMark",value:function(t){var r=this.marks.indexOf(t);if(r!==-1){var n=t.unbind();this.element.removeChild(n),this.marks.splice(r,1)}}},{key:"render",value:function(){Rm(this.element,Nm(this.target,this.container));var t=!0,r=!1,n=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(t=(a=s.next()).done);t=!0){var o=a.value;o.render()}}catch(u){r=!0,n=u}finally{try{!t&&s.return&&s.return()}finally{if(r)throw n}}}}]),i}(),km=hr.Mark=function(){function i(){vs(this,i),this.element=null}return gs(i,[{key:"bind",value:function(t,r){this.element=t,this.container=r}},{key:"unbind",value:function(){var t=this.element;return this.element=null,t}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(t){!this.element||this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var t=[],r=this.element.firstChild;r;)t.push(r.getBoundingClientRect()),r=r.nextSibling;return t}},{key:"filteredRanges",value:function(){var t=Array.from(this.range.getClientRects());return t.filter(function(r){for(var n=0;n<t.length;n++){if(t[n]===r)return!0;var s=Im(t[n],r);if(s)return!1}return!0})}}]),i}(),Om=hr.Highlight=function(i){nc(e,i);function e(t,r,n,s){vs(this,e);var a=ic(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=t,a.className=r,a.data=n||{},a.attributes=s||{},a}return gs(e,[{key:"bind",value:function(r,n){Dm(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,r,n);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=n.length;o<u;o++){var l=n[o],c=rn.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),r.appendChild(c)}this.element.appendChild(r)}}]),e}(km),lb=hr.Underline=function(i){nc(e,i);function e(t,r,n,s){return vs(this,e),ic(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n,s))}return gs(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=n.length;o<u;o++){var l=n[o],c=rn.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),c.setAttribute("fill","none");var f=rn.default.createElement("line");f.setAttribute("x1",l.left-s.left+a.left),f.setAttribute("x2",l.left-s.left+a.left+l.width),f.setAttribute("y1",l.top-s.top+a.top+l.height-1),f.setAttribute("y2",l.top-s.top+a.top+l.height-1),f.setAttribute("stroke-width",1),f.setAttribute("stroke","black"),f.setAttribute("stroke-linecap","square"),r.appendChild(c),r.appendChild(f)}this.element.appendChild(r)}}]),e}(Om);function Nm(i,e){var t=e.getBoundingClientRect(),r=i.getBoundingClientRect();return{top:r.top-t.top,left:r.left-t.left,height:i.scrollHeight,width:i.scrollWidth}}function Rm(i,e){i.style.setProperty("top",e.top+"px","important"),i.style.setProperty("left",e.left+"px","important"),i.style.setProperty("height",e.height+"px","important"),i.style.setProperty("width",e.width+"px","important")}function Im(i,e){return e.right<=i.right&&e.left>=i.left&&e.top>=i.top&&e.bottom<=i.bottom}});var _o=J(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.default=void 0;var Bm=vo(Qt()),pt=Ve(),Lm=vo(Rt()),Pm=vo(en()),Bt=Vt(),ms=sc();function vo(i){return i&&i.__esModule?i:{default:i}}var mo=class{constructor(e,t){this.settings=(0,pt.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+(0,pt.uuid)(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Lm.default,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=(0,pt.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then(function(r){return this.load(r)}.bind(this)).then(function(){let r=this.contents.writingMode(),n;return this.settings.flow==="scrolled"?n=r.indexOf("vertical")===0?"horizontal":"vertical":n=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(n),this.emit(Bt.EVENTS.VIEWS.AXIS,n),this.setWritingMode(r),this.emit(Bt.EVENTS.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}.bind(this),function(r){return this.emit(Bt.EVENTS.VIEWS.LOAD_ERROR,r),new Promise((n,s)=>{s(r)})}.bind(this)).then(function(){this.emit(Bt.EVENTS.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var r=e||this.settings.width,n=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,n):this.settings.axis==="horizontal"?this.lock("height",r,n):this.lock("width",r,n),this.settings.width=r,this.settings.height=n}lock(e,t,r){var n=(0,pt.borders)(this.element),s;this.iframe?s=(0,pt.borders)(this.iframe):s={width:0,height:0},e=="width"&&(0,pt.isNumber)(t)&&(this.lockedWidth=t-n.width-s.width),e=="height"&&(0,pt.isNumber)(r)&&(this.lockedHeight=r-n.height-s.height),e==="both"&&(0,pt.isNumber)(t)&&(0,pt.isNumber)(r)&&(this.lockedWidth=t-n.width-s.width,this.lockedHeight=r-n.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,r=this.lockedHeight,n,s,a;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(n=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&n%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||r!=this._height)&&this.reframe(t,r),this._expanding=!1)}reframe(e,t){var r;(0,pt.isNumber)(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),(0,pt.isNumber)(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let n=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?t-this.prevBounds.height:t;r={width:e,height:t,widthDelta:n,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,r),this.emit(Bt.EVENTS.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=(0,pt.bounds)(this.element)}load(e){var t=new pt.defer,r=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=function(s){this.onLoad(s,t)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=(0,pt.createBlobUrl)(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var n=this;MSApp.execUnsafeLocalFunction(function(){n.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Pm.default(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(Bt.EVENTS.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(Bt.EVENTS.CONTENTS.RESIZE,n=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new pt.defer;return this.displayed?t.resolve(this):this.render(e).then(function(){this.emit(Bt.EVENTS.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}.bind(this),function(r){t.reject(r,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(Bt.EVENTS.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(Bt.EVENTS.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){var t=this.iframe.getBoundingClientRect(),r=this.contents.locationOf(e,this.settings.ignoreClass);return{left:r.left,top:r.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=(0,pt.bounds)(this.element)),this.elementBounds}highlight(e,t={},r,n="epubjs-hl",s={}){if(!this.contents)return;let a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s),o=this.contents.range(e),u=()=>{this.emit(Bt.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new ms.Pane(this.iframe,this.element));let l=new ms.Highlight(o,n,t,a),c=this.pane.addMark(l);return this.highlights[e]={mark:c,element:c.element,listeners:[u,r]},c.element.setAttribute("ref",n),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),r&&(c.element.addEventListener("click",r),c.element.addEventListener("touchstart",r)),c}underline(e,t={},r,n="epubjs-ul",s={}){if(!this.contents)return;let a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s),o=this.contents.range(e),u=()=>{this.emit(Bt.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new ms.Pane(this.iframe,this.element));let l=new ms.Underline(o,n,t,a),c=this.pane.addMark(l);return this.underlines[e]={mark:c,element:c.element,listeners:[u,r]},c.element.setAttribute("ref",n),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),r&&(c.element.addEventListener("click",r),c.element.addEventListener("touchstart",r)),c}mark(e,t={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let n=this.contents.range(e);if(!n)return;let s=n.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=l=>{this.emit(Bt.EVENTS.VIEWS.MARK_CLICKED,e,t)};n.collapsed&&s.nodeType===1?(n=new Range,n.selectNodeContents(s)):n.collapsed&&(n=new Range,n.selectNodeContents(a));let u=this.document.createElement("a");return u.setAttribute("ref","epubjs-mk"),u.style.position="absolute",u.dataset.epubcfi=e,t&&Object.keys(t).forEach(l=>{u.dataset[l]=t[l]}),r&&(u.addEventListener("click",r),u.addEventListener("touchstart",r)),u.addEventListener("click",o),u.addEventListener("touchstart",o),this.placeMark(u,n),this.element.appendChild(u),this.marks[e]={element:u,range:n,listeners:[o,r]},a}placeMark(e,t){let r,n,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=t.getBoundingClientRect();r=o.top,n=o.right}else{let o=t.getClientRects(),u;for(var a=0;a!=o.length;a++)u=o[a],(!s||u.left<s)&&(s=u.left,n=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=u.top)}e.style.top=`${r}px`,e.style.left=`${n}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&(0,pt.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}};(0,Bm.default)(mo.prototype);var Fm=mo;_s.default=Fm});var oc=J(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.createDefiner=ac;ys.default=Mm;function Mm(){var i="reverse",e=ac();return document.body.appendChild(e),e.scrollLeft>0?i="default":typeof Element!="undefined"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(i="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),document.body.removeChild(e),i}function ac(){var i=document.createElement("div");i.dir="rtl",i.style.position="fixed",i.style.width="1px",i.style.height="1px",i.style.top="0px",i.style.left="0px",i.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(t),e.appendChild(r),i.appendChild(e),i}});var bs=J((db,uc)=>{function zm(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}uc.exports=zm});var hc=J((pb,lc)=>{var qm=typeof global=="object"&&global&&global.Object===Object&&global;lc.exports=qm});var yo=J((gb,fc)=>{var Um=hc(),Wm=typeof self=="object"&&self&&self.Object===Object&&self,Vm=Um||Wm||Function("return this")();fc.exports=Vm});var dc=J((vb,cc)=>{var jm=yo(),Hm=function(){return jm.Date.now()};cc.exports=Hm});var gc=J((mb,pc)=>{var Zm=/\s/;function Gm(i){for(var e=i.length;e--&&Zm.test(i.charAt(e)););return e}pc.exports=Gm});var mc=J((_b,vc)=>{var $m=gc(),Xm=/^\s+/;function Ym(i){return i&&i.slice(0,$m(i)+1).replace(Xm,"")}vc.exports=Ym});var bo=J((yb,_c)=>{var Km=yo(),Jm=Km.Symbol;_c.exports=Jm});var Ec=J((bb,wc)=>{var yc=bo(),bc=Object.prototype,Qm=bc.hasOwnProperty,e0=bc.toString,nn=yc?yc.toStringTag:void 0;function t0(i){var e=Qm.call(i,nn),t=i[nn];try{i[nn]=void 0;var r=!0}catch(s){}var n=e0.call(i);return r&&(e?i[nn]=t:delete i[nn]),n}wc.exports=t0});var Sc=J((wb,xc)=>{var r0=Object.prototype,i0=r0.toString;function n0(i){return i0.call(i)}xc.exports=n0});var Tc=J((Eb,Ac)=>{var Dc=bo(),s0=Ec(),a0=Sc(),o0="[object Null]",u0="[object Undefined]",Cc=Dc?Dc.toStringTag:void 0;function l0(i){return i==null?i===void 0?u0:o0:Cc&&Cc in Object(i)?s0(i):a0(i)}Ac.exports=l0});var Oc=J((xb,kc)=>{function h0(i){return i!=null&&typeof i=="object"}kc.exports=h0});var Rc=J((Sb,Nc)=>{var f0=Tc(),c0=Oc(),d0="[object Symbol]";function p0(i){return typeof i=="symbol"||c0(i)&&f0(i)==d0}Nc.exports=p0});var Pc=J((Db,Lc)=>{var g0=mc(),Ic=bs(),v0=Rc(),Bc=0/0,m0=/^[-+]0x[0-9a-f]+$/i,_0=/^0b[01]+$/i,y0=/^0o[0-7]+$/i,b0=parseInt;function w0(i){if(typeof i=="number")return i;if(v0(i))return Bc;if(Ic(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Ic(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=g0(i);var t=_0.test(i);return t||y0.test(i)?b0(i.slice(2),t?2:8):m0.test(i)?Bc:+i}Lc.exports=w0});var Eo=J((Cb,Mc)=>{var E0=bs(),wo=dc(),Fc=Pc(),x0="Expected a function",S0=Math.max,D0=Math.min;function C0(i,e,t){var r,n,s,a,o,u,l=0,c=!1,f=!1,p=!0;if(typeof i!="function")throw new TypeError(x0);e=Fc(e)||0,E0(t)&&(c=!!t.leading,f="maxWait"in t,s=f?S0(Fc(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function v(w){var A=r,k=n;return r=n=void 0,l=w,a=i.apply(k,A),a}function m(w){return l=w,o=setTimeout(d,e),c?v(w):a}function C(w){var A=w-u,k=w-l,N=e-A;return f?D0(N,s-k):N}function S(w){var A=w-u,k=w-l;return u===void 0||A>=e||A<0||f&&k>=s}function d(){var w=wo();if(S(w))return g(w);o=setTimeout(d,C(w))}function g(w){return o=void 0,p&&r?v(w):(r=n=void 0,a)}function y(){o!==void 0&&clearTimeout(o),l=0,r=u=n=o=void 0}function T(){return o===void 0?a:g(wo())}function I(){var w=wo(),A=S(w);if(r=arguments,n=this,u=w,A){if(o===void 0)return m(u);if(f)return clearTimeout(o),o=setTimeout(d,e),v(u)}return o===void 0&&(o=setTimeout(d,e)),a}return I.cancel=y,I.flush=T,I}Mc.exports=C0});var qc=J((Ab,zc)=>{var A0=Eo(),T0=bs(),k0="Expected a function";function O0(i,e,t){var r=!0,n=!0;if(typeof i!="function")throw new TypeError(k0);return T0(t)&&(r="leading"in t?!!t.leading:r,n="trailing"in t?!!t.trailing:n),A0(i,e,{leading:r,maxWait:e,trailing:n})}zc.exports=O0});var Wc=J(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.default=void 0;var Lt=Ve(),N0=R0(qc());function R0(i){return i&&i.__esModule?i:{default:i}}var Uc=class{constructor(e){this.settings=e||{},this.id="epubjs-container-"+(0,Lt.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,r=e.width,n=e.overflow||!1,s=e.axis||"vertical",a=e.direction;(0,Lt.extend)(this.settings,e),e.height&&(0,Lt.isNumber)(e.height)&&(t=e.height+"px"),e.width&&(0,Lt.isNumber)(e.width)&&(r=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),r&&(o.style.width=r),t&&(o.style.height=t),n&&(n==="scroll"&&s==="vertical"?(o.style["overflow-y"]=n,o.style["overflow-x"]="hidden"):n==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=n):o.style.overflow=n),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if((0,Lt.isElement)(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),r;if(!!t)return this.settings.hidden?r=this.wrapper:r=this.container,t.appendChild(r),this.element=t,t}getContainer(){return this.container}onResize(e){(!(0,Lt.isNumber)(this.settings.width)||!(0,Lt.isNumber)(this.settings.height))&&(this.resizeFunc=(0,N0.default)(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var r;let n=e||this.settings.width,s=t||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):(0,Lt.isNumber)(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+"px")):(0,Lt.isNumber)(t)?this.container.style.height=t+"px":this.container.style.height=t,(0,Lt.isNumber)(e)||(e=this.container.clientWidth),(0,Lt.isNumber)(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=(0,Lt.windowBounds)(),o=window.getComputedStyle(document.body),u={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return n||(e=a.width-u.left-u.right),(this.settings.fullsize&&!s||!s)&&(t=a.height-u.top-u.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?(0,Lt.windowBounds)():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var r="#"+this.id+" ",n="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(n+=a+":"+s[a]+";")}),this.sheet.insertRule(r+e+" {"+n+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){var e;this.element&&(this.settings.hidden?e=this.wrapper:e=this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}},I0=Uc;ws.default=I0});var jc=J(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.default=void 0;var Vc=class{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(!!this.length){for(var r=0;r<t;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,r=this.length,n=0;n<r;n++)if(t=this._views[n],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,r=this.length,n=0;n<r;n++)t=this._views[n],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}},B0=Vc;Es.default=B0});var Ss=J(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.default=void 0;var L0=di(Qt()),ci=Ve(),P0=di(oc()),Hc=di(fo()),F0=di(Jn()),M0=di(Wc()),z0=di(jc()),Pt=Vt();function di(i){return i&&i.__esModule?i:{default:i}}var xo=class{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new F0.default(this),this.settings=(0,ci.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),(0,ci.extend)(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let r=e.tagName;typeof this.settings.fullsize=="undefined"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=(0,P0.default)(),this.stage=new M0.default({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new z0.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",function(t){this.destroy()}.bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(Pt.EVENTS.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)}onResized(e){this.resize()}resize(e,t,r){let n=this.stage.size(e,t);if(this.winBounds=(0,ci.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===n.width&&this._stageSize.height===n.height||(this._stageSize=n,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(Pt.EVENTS.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,t){return new this.View(e,(0,ci.extend)(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,r){let n;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(n=t.next(),n&&!n.properties.includes("page-spread-left"))return r.call(this,n)}}display(e,t){var r=new ci.defer,n=r.promise;(t===e.href||(0,ci.isNumber)(t))&&(t=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let u=s.width();this.scrollTo(o.left+u,o.top,!0)}if(t){let u=s.locationOf(t),l=s.width();this.moveTo(u,l)}return r.resolve(),n}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then(function(o){if(t){let u=o.locationOf(t),l=o.width();this.moveTo(u,l)}}.bind(this),o=>{r.reject(o)}).then(function(){return this.handleNextPrePaginated(a,e,this.add)}.bind(this)).then(function(){this.views.show(),r.resolve()}.bind(this)),n}afterDisplayed(e){this.emit(Pt.EVENTS.MANAGERS.ADDED,e)}afterResized(e){this.emit(Pt.EVENTS.MANAGERS.RESIZE,e.section)}moveTo(e,t){var r=0,n=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),n=Math.floor(e.top/this.layout.delta)*this.layout.delta,n+this.layout.delta>this.container.scrollHeight&&(n=this.container.scrollHeight-this.layout.delta)):n=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-t),this.scrollTo(r,n,!0)}add(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Pt.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(Pt.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}append(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Pt.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(Pt.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}prepend(e,t){var r=this.createView(e,t);return r.on(Pt.EVENTS.VIEWS.RESIZED,n=>{this.counter(n)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Pt.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(Pt.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let r=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let n=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(n=!0),this.append(e,n).then(function(){return this.handleNextPrePaginated(n,e,this.append)}.bind(this),s=>s).then(function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var e,t;let r=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let n=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(n=!0),this.prepend(e,n).then(function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}.bind(this),s=>s).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=t.height<window.innerHeight?t.height:window.innerHeight,n=t.width<window.innerWidth?t.width:window.innerWidth,s=this.settings.axis==="vertical",a=this.settings.direction==="rtl",o=0,u=0;return this.settings.fullsize&&(o=s?window.scrollY:window.scrollX),e.map(c=>{let{index:f,href:p}=c.section,v=c.position(),m=c.width(),C=c.height(),S,d,g,y;s?(S=o+t.top-v.top+u,d=S+r-u,y=this.layout.count(C,r).pages,g=r):(S=o+t.left-v.left+u,d=S+n-u,y=this.layout.count(m,n).pages,g=n);let T=Math.ceil(S/g),I=[],w=Math.ceil(d/g);if(this.settings.direction==="rtl"&&!s){let N=T;T=y-w,w=y-N}I=[];for(var A=T;A<=w;A++){let N=A+1;I.push(N)}let k=this.mapping.page(c.contents,c.section.cfiBase,S,d);return{index:f,href:p,pages:I,totalPages:y,mapping:k}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=0,n=0;return this.settings.fullsize&&(r=window.scrollX),e.map(a=>{let{index:o,href:u}=a.section,l,c=a.position(),f=a.width(),p,v,m;this.settings.direction==="rtl"?(l=t.right-r,m=Math.min(Math.abs(l-c.left),this.layout.width)-n,v=c.width-(c.right-l)-n,p=v-m):(l=t.left+r,m=Math.min(c.right-l,this.layout.width)-n,p=l-c.left+n,v=p+m),n+=m;let C=this.mapping.page(a.contents,a.section.cfiBase,p,v),S=this.layout.count(f).pages,d=Math.floor(p/this.layout.pageWidth),g=[],y=Math.floor(v/this.layout.pageWidth);if(d<0&&(d=0,y=y+1),this.settings.direction==="rtl"){let I=d;d=S-y,y=S-I}for(var T=d+1;T<=y;T++){let I=T;g.push(I)}return{index:o,href:u,pages:g,totalPages:S,mapping:C}})}isVisible(e,t,r,n){var s=e.position(),a=n||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-t&&s.left<a.right+r?!0:this.settings.axis==="vertical"&&s.bottom>a.top-t&&s.top<a.bottom+r}visible(){for(var e=this.bounds(),t=this.views.displayed(),r=t.length,n=[],s,a,o=0;o<r;o++)a=t[o],s=this.isVisible(a,0,0,e),s===!0&&n.push(a);return n}scrollBy(e,t,r){let n=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*n,t*n):(e&&(this.container.scrollLeft+=e*n),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(Pt.EVENTS.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(Pt.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){!this.stage||(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Hc.default(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Hc.default(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){let r=t&&t.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}};(0,L0.default)(xo.prototype);var q0=xo;xs.default=q0});var $c=J(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.default=void 0;var Zc=Ve(),Gc=Vt(),U0=W0(Qt());function W0(i){return i&&i.__esModule?i:{default:i}}var V0=Math.PI/2,j0={easeOutSine:function(i){return Math.sin(i*V0)},easeInOutSine:function(i){return-.5*(Math.cos(Math.PI*i)-1)},easeInOutQuint:function(i){return(i/=.5)<1?.5*Math.pow(i,5):.5*(Math.pow(i-2,5)+2)},easeInCubic:function(i){return Math.pow(i,3)}},So=class{constructor(e,t){this.settings=(0,Zc.extend)({duration:80,minVelocity:.2,minDistance:10,easing:j0.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(Gc.EVENTS.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(Gc.EVENTS.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{t.on(r,n=>this.triggerViewEvent(n,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:r}=e.touches[0],n=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&n<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,r=Math.abs(t),n=this.endTime-this.startTime,s=t/n,a=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!=0}snap(e=0){let t=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,n=Math.round(t/r)*r;return e&&(n+=e*r),this.smoothScrollTo(n)}smoothScrollTo(e){let t=new Zc.defer,r=this.scrollLeft,n=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){let u=this.now(),l=Math.min(1,(u-n)/s),c=a(l);if(this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}l<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(r+(e-r)*l,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return o.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){!this.scroller||(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}};(0,U0.default)(So.prototype);var H0=So;Ds.default=H0});var Co=J(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.default=void 0;var Fr=Ve(),Xc=Do(Ss()),Yc=Do($c()),Zt=Vt(),Z0=Do(Eo());function Do(i){return i&&i.__esModule?i:{default:i}}var Kc=class extends Xc.default{constructor(e){super(e);this.name="continuous",this.settings=(0,Fr.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),(0,Fr.extend)(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return Xc.default.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))}fill(e){var t=e||new Fr.defer;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,r=0,n=0,s=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,n=t+this.settings.offsetDelta):(r=e.top,s=e.top+this.settings.offsetDelta),(t>0||r>0)&&this.scrollBy(t,r,!0)}afterResized(e){this.emit(Zt.EVENTS.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(Zt.EVENTS.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(Zt.EVENTS.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Zt.EVENTS.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(Zt.EVENTS.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(Zt.EVENTS.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Zt.EVENTS.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(Zt.EVENTS.VIEWS.RESIZED,r=>{this.counter(r),t.expanded=!0}),t.on(Zt.EVENTS.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Zt.EVENTS.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),r=this.views.all(),n=r.length,s=[],a=typeof e!="undefined"?e:this.settings.offset||0,o,u,l=new Fr.defer,c=[],f=0;f<n;f++)if(u=r[f],o=this.isVisible(u,a,a,t),o===!0){if(u.displayed)u.show();else{let p=u.display(this.request).then(function(v){v.show()},v=>{u.hide()});c.push(p)}s.push(u)}else this.q.enqueue(u.destroy.bind(u)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return c.length?Promise.all(c).catch(p=>{l.reject(p)}):(l.resolve(),l.promise)}check(e,t){var r=new Fr.defer,n=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),t&&!s&&(a=t);var o=this._bounds;let u=s?this.scrollLeft:this.scrollTop,l=s?Math.floor(o.width):o.height,c=s?this.container.scrollWidth:this.container.scrollHeight,f=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",p=this.settings.rtlScrollType,v=this.settings.direction==="rtl";this.settings.fullsize?(s&&v&&p==="negative"||!s&&v&&p==="default")&&(u=u*-1):(v&&p==="default"&&f==="horizontal"&&(u=c-l-u),v&&p==="negative"&&f==="horizontal"&&(u=u*-1));let m=()=>{let y=this.views.first(),T=y&&y.section.prev();T&&n.push(this.prepend(T))},C=()=>{let y=this.views.last(),T=y&&y.section.next();T&&n.push(this.append(T))},S=u+l+a,d=u-a;S>=c&&C(),d<0&&m();let g=n.map(y=>y.display(this.request));return n.length?Promise.all(g).then(()=>this.check()).then(()=>this.update(a),y=>y):(this.q.enqueue(function(){this.update()}.bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new Fr.defer,t=this.views.displayed(),r=t[0],n=t[t.length-1],s=this.views.indexOf(r),a=this.views.indexOf(n),o=this.views.slice(0,s),u=this.views.slice(a+1),l=0;l<o.length-1;l++)this.erase(o[l],o);for(var c=1;c<u.length;c++)this.erase(u[c]);return e.resolve(),e.promise}erase(e,t){var r,n;this.settings.fullsize?(r=window.scrollY,n=window.scrollX):(r=this.container.scrollTop,n=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,r-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(n+Math.floor(s.width),0,!0):this.scrollTo(n,0,!0):this.scrollTo(n-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",function(t){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Yc.default(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=Fr.requestAnimationFrame;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=(0,Z0.default)(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,t=window.scrollX*r):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(Zt.EVENTS.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(Zt.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Yc.default(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}},G0=Kc;Cs.default=G0});var Ts=J(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.default=void 0;var $0=rr(Qt()),sn=Ve(),Mr=rr(Gn()),Jc=rr(Rt()),X0=rr(Jn()),Y0=rr(ho()),K0=rr(Uf()),Ib=rr(en()),J0=rr(Yf()),je=Vt(),Q0=rr(_o()),e_=rr(Ss()),t_=rr(Co());function rr(i){return i&&i.__esModule?i:{default:i}}var Ao=class{constructor(e,t){this.settings=(0,sn.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),(0,sn.extend)(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Mr.default(this),this.hooks.serialize=new Mr.default(this),this.hooks.content=new Mr.default(this),this.hooks.unloaded=new Mr.default(this),this.hooks.layout=new Mr.default(this),this.hooks.render=new Mr.default(this),this.hooks.show=new Mr.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new K0.default(this),this.annotations=new J0.default(this),this.epubcfi=new Jc.default,this.q=new X0.default(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new sn.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=e_.default:typeof e=="string"&&e==="continuous"?t=t_.default:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=Q0.default:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(je.EVENTS.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(je.EVENTS.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(je.EVENTS.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(je.EVENTS.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(je.EVENTS.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(je.EVENTS.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(je.EVENTS.RENDITION.ATTACHED)}.bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(!!this.book){var t=this.epubcfi.isCfiString(e),r=new sn.defer,n=r.promise,s,a;return this.displaying=r,this.book.locations.length()&&(0,sn.isFloat)(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),s=this.book.spine.get(e),s?(this.manager.display(s,e).then(()=>{r.resolve(s),this.displaying=void 0,this.emit(je.EVENTS.RENDITION.DISPLAYED,s),this.reportLocation()},o=>{this.emit(je.EVENTS.RENDITION.DISPLAY_ERROR,o)}),n):(r.reject(new Error("No Section Found")),n)}}afterDisplayed(e){e.on(je.EVENTS.VIEWS.MARK_CLICKED,(t,r)=>this.triggerMarkEvent(t,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(je.EVENTS.RENDITION.RENDERED,e.section,e)}):this.emit(je.EVENTS.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(je.EVENTS.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(je.EVENTS.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(je.EVENTS.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,r){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,r=this.settings.layout||e.layout||"reflowable",n=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",u=this.settings.minSpreadWidth||e.minSpreadWidth||800,l=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:r,spread:n,orientation:s,flow:a,viewport:o,minSpreadWidth:u,direction:l},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new Y0.default(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(je.EVENTS.LAYOUT.UPDATED,(t,r)=>{this.emit(je.EVENTS.RENDITION.LAYOUT,t,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then(function(n){let s=this.located(n);!s||!s.start||!s.end||(this.location=s,this.emit(je.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(je.EVENTS.RENDITION.RELOCATED,this.location))}.bind(this));else if(r){let n=this.located(r);if(!n||!n.start||!n.end)return;this.location=n,this.emit(je.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(je.EVENTS.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then(function(t){return this.located(t)}.bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],r=e[e.length-1],n={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},s=this.book.locations.locationFromCfi(t.mapping.start),a=this.book.locations.locationFromCfi(r.mapping.end);s!=null&&(n.start.location=s,n.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(n.end.location=a,n.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(t.mapping.start),u=this.book.pageList.pageFromCfi(r.mapping.end);return o!=-1&&(n.start.page=o),u!=-1&&(n.end.page=u),r.index===this.book.spine.last().index&&n.end.displayed.page>=n.end.displayed.total&&(n.atEnd=!0),t.index===this.book.spine.first().index&&n.start.displayed.page===1&&(n.atStart=!0),n}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){je.DOM_EVENTS.forEach(t=>{e.on(t,r=>this.triggerViewEvent(r,e))}),e.on(je.EVENTS.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(je.EVENTS.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,r){this.emit(je.EVENTS.RENDITION.MARK_CLICKED,e,t,r)}getRange(e,t){var r=new Jc.default(e),n=this.manager.visible().filter(function(s){if(r.spinePos===s.index)return!0});if(n.length)return n[0].contents.range(r,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let t=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-n+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-n+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(je.EVENTS.CONTENTS.LINK_CLICKED,t=>{let r=this.book.path.relative(t);this.display(r)})}injectStylesheet(e,t){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,t){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,t){let r=this.book.packaging.metadata.identifier,n=e.createElement("meta");n.setAttribute("name","dc.relation.ispartof"),r&&n.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(n)}};(0,$0.default)(Ao.prototype);var r_=Ao;As.default=r_});var ed=J((Qc,To)=>{(function(i){if(typeof Qc=="object"&&typeof To!="undefined")To.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var e;typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:typeof self!="undefined"?e=self:e=this,e.JSZip=i()}})(function(){var i,e,t;return function r(n,s,a){function o(c,f){if(!s[c]){if(!n[c]){var p=typeof require=="function"&&require;if(!f&&p)return p(c,!0);if(u)return u(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var m=s[c]={exports:{}};n[c][0].call(m.exports,function(C){var S=n[c][1][C];return o(S||C)},m,m.exports,r,n,s,a)}return s[c].exports}for(var u=typeof require=="function"&&require,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(r,n,s){"use strict";var a=r("./utils"),o=r("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c=[],f,p,v,m,C,S,d,g=0,y=l.length,T=y,I=a.getTypeOf(l)!=="string";g<l.length;)T=y-g,I?(f=l[g++],p=g<y?l[g++]:0,v=g<y?l[g++]:0):(f=l.charCodeAt(g++),p=g<y?l.charCodeAt(g++):0,v=g<y?l.charCodeAt(g++):0),m=f>>2,C=(f&3)<<4|p>>4,S=T>1?(p&15)<<2|v>>6:64,d=T>2?v&63:64,c.push(u.charAt(m)+u.charAt(C)+u.charAt(S)+u.charAt(d));return c.join("")},s.decode=function(l){var c,f,p,v,m,C,S,d=0,g=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9+/=]/g,"");var T=l.length*3/4;if(l.charAt(l.length-1)===u.charAt(64)&&T--,l.charAt(l.length-2)===u.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");var I;for(o.uint8array?I=new Uint8Array(T|0):I=new Array(T|0);d<l.length;)v=u.indexOf(l.charAt(d++)),m=u.indexOf(l.charAt(d++)),C=u.indexOf(l.charAt(d++)),S=u.indexOf(l.charAt(d++)),c=v<<2|m>>4,f=(m&15)<<4|C>>2,p=(C&3)<<6|S,I[g++]=c,C!==64&&(I[g++]=f),S!==64&&(I[g++]=p);return I}},{"./support":30,"./utils":32}],2:[function(r,n,s){"use strict";var a=r("./external"),o=r("./stream/DataWorker"),u=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function c(f,p,v,m,C){this.compressedSize=f,this.uncompressedSize=p,this.crc32=v,this.compression=m,this.compressedContent=C}c.prototype={getContentWorker:function(){var f=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,p,v){return f.pipe(new u).pipe(new l("uncompressedSize")).pipe(p.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,s){"use strict";var a=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,s){"use strict";var a=r("./utils");function o(){for(var f,p=[],v=0;v<256;v++){f=v;for(var m=0;m<8;m++)f=f&1?3988292384^f>>>1:f>>>1;p[v]=f}return p}var u=o();function l(f,p,v,m){var C=u,S=m+v;f=f^-1;for(var d=m;d<S;d++)f=f>>>8^C[(f^p[d])&255];return f^-1}function c(f,p,v,m){var C=u,S=m+v;f=f^-1;for(var d=m;d<S;d++)f=f>>>8^C[(f^p.charCodeAt(d))&255];return f^-1}n.exports=function(p,v){if(typeof p=="undefined"||!p.length)return 0;var m=a.getTypeOf(p)!=="string";return m?l(v|0,p,p.length,0):c(v|0,p,p.length,0)}},{"./utils":32}],5:[function(r,n,s){"use strict";s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,n,s){"use strict";var a=null;typeof Promise!="undefined"?a=Promise:a=r("lie"),n.exports={Promise:a}},{lie:37}],7:[function(r,n,s){"use strict";var a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",o=r("pako"),u=r("./utils"),l=r("./stream/GenericWorker"),c=a?"uint8array":"array";s.magic="\b\0";function f(p,v){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=v,this.meta={}}u.inherits(f,l),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(c,p.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(v){p.push({data:v,meta:p.meta})}},s.compressWorker=function(p){return new f("Deflate",p)},s.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,s){"use strict";var a=r("../utils"),o=r("../stream/GenericWorker"),u=r("../utf8"),l=r("../crc32"),c=r("../signature"),f=function(g,y){var T="",I;for(I=0;I<y;I++)T+=String.fromCharCode(g&255),g=g>>>8;return T},p=function(g,y){var T=g;return g||(T=y?16893:33204),(T&65535)<<16},v=function(g){return(g||0)&63},m=function(g,y,T,I,w,A){var k=g.file,N=g.compression,z=A!==u.utf8encode,F=a.transformTo("string",A(k.name)),Z=a.transformTo("string",u.utf8encode(k.name)),j=k.comment,ie=a.transformTo("string",A(j)),pe=a.transformTo("string",u.utf8encode(j)),ne=Z.length!==k.name.length,ge=pe.length!==j.length,ve,he,Ce="",Be="",Re="",de=k.dir,Ie=k.date,Te={crc32:0,compressedSize:0,uncompressedSize:0};(!y||T)&&(Te.crc32=g.crc32,Te.compressedSize=g.compressedSize,Te.uncompressedSize=g.uncompressedSize);var We=0;y&&(We|=8),!z&&(ne||ge)&&(We|=2048);var Ze=0,qe=0;de&&(Ze|=16),w==="UNIX"?(qe=798,Ze|=p(k.unixPermissions,de)):(qe=20,Ze|=v(k.dosPermissions,de)),ve=Ie.getUTCHours(),ve=ve<<6,ve=ve|Ie.getUTCMinutes(),ve=ve<<5,ve=ve|Ie.getUTCSeconds()/2,he=Ie.getUTCFullYear()-1980,he=he<<4,he=he|Ie.getUTCMonth()+1,he=he<<5,he=he|Ie.getUTCDate(),ne&&(Be=f(1,1)+f(l(F),4)+Z,Ce+="up"+f(Be.length,2)+Be),ge&&(Re=f(1,1)+f(l(ie),4)+pe,Ce+="uc"+f(Re.length,2)+Re);var xe="";xe+=`
\0`,xe+=f(We,2),xe+=N.magic,xe+=f(ve,2),xe+=f(he,2),xe+=f(Te.crc32,4),xe+=f(Te.compressedSize,4),xe+=f(Te.uncompressedSize,4),xe+=f(F.length,2),xe+=f(Ce.length,2);var et=c.LOCAL_FILE_HEADER+xe+F+Ce,Ge=c.CENTRAL_FILE_HEADER+f(qe,2)+xe+f(ie.length,2)+"\0\0\0\0"+f(Ze,4)+f(I,4)+F+Ce+ie;return{fileRecord:et,dirRecord:Ge}},C=function(g,y,T,I,w){var A="",k=a.transformTo("string",w(I));return A=c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(g,2)+f(g,2)+f(y,4)+f(T,4)+f(k.length,2)+k,A},S=function(g){var y="";return y=c.DATA_DESCRIPTOR+f(g.crc32,4)+f(g.compressedSize,4)+f(g.uncompressedSize,4),y};function d(g,y,T,I){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=T,this.encodeFileName=I,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,o),d.prototype.push=function(g){var y=g.meta.percent||0,T=this.entriesCount,I=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,o.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:T?(y+100*(T-I-1))/T:100}}))},d.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var y=this.streamFiles&&!g.file.dir;if(y){var T=m(g,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:T.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(g){this.accumulate=!1;var y=this.streamFiles&&!g.file.dir,T=m(g,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(T.dirRecord),y)this.push({data:S(g),meta:{percent:100}});else for(this.push({data:T.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var g=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var T=this.bytesWritten-g,I=C(this.dirRecords.length,T,g,this.zipComment,this.encodeFileName);this.push({data:I,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(g){this._sources.push(g);var y=this;return g.on("data",function(T){y.processChunk(T)}),g.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),g.on("error",function(T){y.error(T)}),this},d.prototype.resume=function(){if(!o.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},d.prototype.error=function(g){var y=this._sources;if(!o.prototype.error.call(this,g))return!1;for(var T=0;T<y.length;T++)try{y[T].error(g)}catch(I){}return!0},d.prototype.lock=function(){o.prototype.lock.call(this);for(var g=this._sources,y=0;y<g.length;y++)g[y].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,s){"use strict";var a=r("../compressions"),o=r("./ZipFileWorker"),u=function(l,c){var f=l||c,p=a[f];if(!p)throw new Error(f+" is not a valid compression method !");return p};s.generateWorker=function(l,c,f){var p=new o(c.streamFiles,f,c.platform,c.encodeFileName),v=0;try{l.forEach(function(m,C){v++;var S=u(C.options.compression,c.compression),d=C.options.compressionOptions||c.compressionOptions||{},g=C.dir,y=C.date;C._compressWorker(S,d).withStreamInfo("file",{name:m,dir:g,date:y,comment:C.comment||"",unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions}).pipe(p)}),p.entriesCount=v}catch(m){p.error(m)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,s){"use strict";function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var u in this)typeof this[u]!="function"&&(o[u]=this[u]);return o}}a.prototype=r("./object"),a.prototype.loadAsync=r("./load"),a.support=r("./support"),a.defaults=r("./defaults"),a.version="3.10.1",a.loadAsync=function(o,u){return new a().loadAsync(o,u)},a.external=r("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,s){"use strict";var a=r("./utils"),o=r("./external"),u=r("./utf8"),l=r("./zipEntries"),c=r("./stream/Crc32Probe"),f=r("./nodejsUtils");function p(v){return new o.Promise(function(m,C){var S=v.decompressed.getContentWorker().pipe(new c);S.on("error",function(d){C(d)}).on("end",function(){S.streamInfo.crc32!==v.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(v,m){var C=this;return m=a.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),f.isNode&&f.isStream(v)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",v,!0,m.optimizedBinaryString,m.base64).then(function(S){var d=new l(m);return d.load(S),d}).then(function(d){var g=[o.Promise.resolve(d)],y=d.files;if(m.checkCRC32)for(var T=0;T<y.length;T++)g.push(p(y[T]));return o.Promise.all(g)}).then(function(d){for(var g=d.shift(),y=g.files,T=0;T<y.length;T++){var I=y[T],w=I.fileNameStr,A=a.resolve(I.fileNameStr);C.file(A,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:m.createFolders}),I.dir||(C.file(A).unsafeOriginalName=w)}return g.zipComment.length&&(C.comment=g.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,s){"use strict";var a=r("../utils"),o=r("../stream/GenericWorker");function u(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}a.inherits(u,o),u.prototype._bindStream=function(l){var c=this;this._stream=l,l.pause(),l.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},u.prototype.pause=function(){return o.prototype.pause.call(this)?(this._stream.pause(),!0):!1},u.prototype.resume=function(){return o.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,s){"use strict";var a=r("readable-stream").Readable,o=r("../utils");o.inherits(u,a);function u(l,c,f){a.call(this,c),this._helper=l;var p=this;l.on("data",function(v,m){p.push(v)||p._helper.pause(),f&&f(m)}).on("error",function(v){p.emit("error",v)}).on("end",function(){p.push(null)})}u.prototype._read=function(){this._helper.resume()},n.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,n,s){"use strict";n.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(r,n,s){"use strict";var a=r("./utf8"),o=r("./utils"),u=r("./stream/GenericWorker"),l=r("./stream/StreamHelper"),c=r("./defaults"),f=r("./compressedObject"),p=r("./zipObject"),v=r("./generate"),m=r("./nodejsUtils"),C=r("./nodejs/NodejsStreamInputAdapter"),S=function(w,A,k){var N=o.getTypeOf(A),z,F=o.extend(k||{},c);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&F.unixPermissions&16384&&(F.dir=!0),F.dosPermissions&&F.dosPermissions&16&&(F.dir=!0),F.dir&&(w=g(w)),F.createFolders&&(z=d(w))&&y.call(this,z,!0);var Z=N==="string"&&F.binary===!1&&F.base64===!1;(!k||typeof k.binary=="undefined")&&(F.binary=!Z);var j=A instanceof f&&A.uncompressedSize===0;(j||F.dir||!A||A.length===0)&&(F.base64=!1,F.binary=!0,A="",F.compression="STORE",N="string");var ie=null;A instanceof f||A instanceof u?ie=A:m.isNode&&m.isStream(A)?ie=new C(w,A):ie=o.prepareContent(w,A,F.binary,F.optimizedBinaryString,F.base64);var pe=new p(w,ie,F);this.files[w]=pe},d=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var A=w.lastIndexOf("/");return A>0?w.substring(0,A):""},g=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},y=function(w,A){return A=typeof A!="undefined"?A:c.createFolders,w=g(w),this.files[w]||S.call(this,w,null,{dir:!0,createFolders:A}),this.files[w]};function T(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var A,k,N;for(A in this.files)N=this.files[A],k=A.slice(this.root.length,A.length),k&&A.slice(0,this.root.length)===this.root&&w(k,N)},filter:function(w){var A=[];return this.forEach(function(k,N){w(k,N)&&A.push(N)}),A},file:function(w,A,k){if(arguments.length===1)if(T(w)){var N=w;return this.filter(function(F,Z){return!Z.dir&&N.test(F)})}else{var z=this.files[this.root+w];return z&&!z.dir?z:null}else w=this.root+w,S.call(this,w,A,k);return this},folder:function(w){if(!w)return this;if(T(w))return this.filter(function(z,F){return F.dir&&w.test(z)});var A=this.root+w,k=y.call(this,A),N=this.clone();return N.root=k.name,N},remove:function(w){w=this.root+w;var A=this.files[w];if(A||(w.slice(-1)!=="/"&&(w+="/"),A=this.files[w]),A&&!A.dir)delete this.files[w];else for(var k=this.filter(function(z,F){return F.name.slice(0,w.length)===w}),N=0;N<k.length;N++)delete this.files[k[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var A,k={};try{if(k=o.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode}),k.type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");o.checkSupport(k.type),(k.platform==="darwin"||k.platform==="freebsd"||k.platform==="linux"||k.platform==="sunos")&&(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var N=k.comment||this.comment||"";A=v.generateWorker(this,k,N)}catch(z){A=new u("error"),A.error(z)}return new l(A,k.type||"string",k.mimeType)},generateAsync:function(w,A){return this.generateInternalStream(w).accumulate(A)},generateNodeStream:function(w,A){return w=w||{},w.type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(A)}};n.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,s){"use strict";n.exports=r("stream")},{stream:void 0}],17:[function(r,n,s){"use strict";var a=r("./DataReader"),o=r("../utils");function u(l){a.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=l[c]&255}o.inherits(u,a),u.prototype.byteAt=function(l){return this.data[this.zero+l]},u.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),f=l.charCodeAt(1),p=l.charCodeAt(2),v=l.charCodeAt(3),m=this.length-4;m>=0;--m)if(this.data[m]===c&&this.data[m+1]===f&&this.data[m+2]===p&&this.data[m+3]===v)return m-this.zero;return-1},u.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),f=l.charCodeAt(1),p=l.charCodeAt(2),v=l.charCodeAt(3),m=this.readData(4);return c===m[0]&&f===m[1]&&p===m[2]&&v===m[3]},u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,n,s){"use strict";var a=r("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var l=0,c;for(this.checkOffset(u),c=this.index+u-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=u,l},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC((u>>25&127)+1980,(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(u&31)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,s){"use strict";var a=r("./Uint8ArrayReader"),o=r("../utils");function u(l){a.call(this,l)}o.inherits(u,a),u.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,s){"use strict";var a=r("./DataReader"),o=r("../utils");function u(l){a.call(this,l)}o.inherits(u,a),u.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},u.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},u.prototype.readAndCheckSignature=function(l){var c=this.readData(4);return l===c},u.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,n,s){"use strict";var a=r("./ArrayReader"),o=r("../utils");function u(l){a.call(this,l)}o.inherits(u,a),u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,s){"use strict";var a=r("../utils"),o=r("../support"),u=r("./ArrayReader"),l=r("./StringReader"),c=r("./NodeBufferReader"),f=r("./Uint8ArrayReader");n.exports=function(p){var v=a.getTypeOf(p);return a.checkSupport(v),v==="string"&&!o.uint8array?new l(p):v==="nodebuffer"?new c(p):o.uint8array?new f(a.transformTo("uint8array",p)):new u(a.transformTo("array",p))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,s){"use strict";s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,s){"use strict";var a=r("./GenericWorker"),o=r("../utils");function u(l){a.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(u,a),u.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,s){"use strict";var a=r("./GenericWorker"),o=r("../crc32"),u=r("../utils");function l(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u.inherits(l,a),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,s){"use strict";var a=r("../utils"),o=r("./GenericWorker");function u(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}a.inherits(u,o),u.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,s){"use strict";var a=r("../utils"),o=r("./GenericWorker"),u=16*1024;function l(c){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=a.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}a.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return o.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=u,f=null,p=Math.min(this.max,this.index+c);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,p);break;case"uint8array":f=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":f=this.data.slice(this.index,p);break}return this.index=p,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,s){"use strict";function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return this.isFinished?!1:(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(l){u.processChunk(l)}),o.on("end",function(){u.end()}),o.on("error",function(l){u.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var o=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)!Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)||(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=a},{}],29:[function(r,n,s){"use strict";var a=r("../utils"),o=r("./ConvertWorker"),u=r("./GenericWorker"),l=r("../base64"),c=r("../support"),f=r("../external"),p=null;if(c.nodestream)try{p=r("../nodejs/NodejsStreamOutputAdapter")}catch(d){}function v(d,g,y){switch(d){case"blob":return a.newBlob(a.transformTo("arraybuffer",g),y);case"base64":return l.encode(g);default:return a.transformTo(d,g)}}function m(d,g){var y,T=0,I=null,w=0;for(y=0;y<g.length;y++)w+=g[y].length;switch(d){case"string":return g.join("");case"array":return Array.prototype.concat.apply([],g);case"uint8array":for(I=new Uint8Array(w),y=0;y<g.length;y++)I.set(g[y],T),T+=g[y].length;return I;case"nodebuffer":return Buffer.concat(g);default:throw new Error("concat : unsupported type '"+d+"'")}}function C(d,g){return new f.Promise(function(y,T){var I=[],w=d._internalType,A=d._outputType,k=d._mimeType;d.on("data",function(N,z){I.push(N),g&&g(z)}).on("error",function(N){I=[],T(N)}).on("end",function(){try{var N=v(A,m(w,I),k);y(N)}catch(z){T(z)}I=[]}).resume()})}function S(d,g,y){var T=g;switch(g){case"blob":case"arraybuffer":T="uint8array";break;case"base64":T="string";break}try{this._internalType=T,this._outputType=g,this._mimeType=y,a.checkSupport(T),this._worker=d.pipe(new o(T)),d.lock()}catch(I){this._worker=new u("error"),this._worker.error(I)}}S.prototype={accumulate:function(d){return C(this,d)},on:function(d,g){var y=this;return d==="data"?this._worker.on(d,function(T){g.call(y,T.data,T.meta)}):this._worker.on(d,function(){a.delay(g,arguments,y)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},d)}},n.exports=S},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,s){"use strict";if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",s.nodebuffer=typeof Buffer!="undefined",s.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")s.blob=!1;else{var a=new ArrayBuffer(0);try{s.blob=new Blob([a],{type:"application/zip"}).size===0}catch(l){try{var o=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,u=new o;u.append(a),s.blob=u.getBlob("application/zip").size===0}catch(c){s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch(l){s.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,s){"use strict";for(var a=r("./utils"),o=r("./support"),u=r("./nodejsUtils"),l=r("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;c[254]=c[254]=1;var p=function(d){var g,y,T,I,w,A=d.length,k=0;for(I=0;I<A;I++)y=d.charCodeAt(I),(y&64512)==55296&&I+1<A&&(T=d.charCodeAt(I+1),(T&64512)==56320&&(y=65536+(y-55296<<10)+(T-56320),I++)),k+=y<128?1:y<2048?2:y<65536?3:4;for(o.uint8array?g=new Uint8Array(k):g=new Array(k),w=0,I=0;w<k;I++)y=d.charCodeAt(I),(y&64512)==55296&&I+1<A&&(T=d.charCodeAt(I+1),(T&64512)==56320&&(y=65536+(y-55296<<10)+(T-56320),I++)),y<128?g[w++]=y:y<2048?(g[w++]=192|y>>>6,g[w++]=128|y&63):y<65536?(g[w++]=224|y>>>12,g[w++]=128|y>>>6&63,g[w++]=128|y&63):(g[w++]=240|y>>>18,g[w++]=128|y>>>12&63,g[w++]=128|y>>>6&63,g[w++]=128|y&63);return g},v=function(d,g){var y;for(g=g||d.length,g>d.length&&(g=d.length),y=g-1;y>=0&&(d[y]&192)==128;)y--;return y<0||y===0?g:y+c[d[y]]>g?y:g},m=function(d){var g,y,T,I,w=d.length,A=new Array(w*2);for(y=0,g=0;g<w;){if(T=d[g++],T<128){A[y++]=T;continue}if(I=c[T],I>4){A[y++]=65533,g+=I-1;continue}for(T&=I===2?31:I===3?15:7;I>1&&g<w;)T=T<<6|d[g++]&63,I--;if(I>1){A[y++]=65533;continue}T<65536?A[y++]=T:(T-=65536,A[y++]=55296|T>>10&1023,A[y++]=56320|T&1023)}return A.length!==y&&(A.subarray?A=A.subarray(0,y):A.length=y),a.applyFromCharCode(A)};s.utf8encode=function(g){return o.nodebuffer?u.newBufferFrom(g,"utf-8"):p(g)},s.utf8decode=function(g){return o.nodebuffer?a.transformTo("nodebuffer",g).toString("utf-8"):(g=a.transformTo(o.uint8array?"uint8array":"array",g),m(g))};function C(){l.call(this,"utf-8 decode"),this.leftOver=null}a.inherits(C,l),C.prototype.processChunk=function(d){var g=a.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=g;g=new Uint8Array(y.length+this.leftOver.length),g.set(this.leftOver,0),g.set(y,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var T=v(g),I=g;T!==g.length&&(o.uint8array?(I=g.subarray(0,T),this.leftOver=g.subarray(T,g.length)):(I=g.slice(0,T),this.leftOver=g.slice(T,g.length))),this.push({data:s.utf8decode(I),meta:d.meta})},C.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=C;function S(){l.call(this,"utf-8 encode")}a.inherits(S,l),S.prototype.processChunk=function(d){this.push({data:s.utf8encode(d.data),meta:d.meta})},s.Utf8EncodeWorker=S},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,s){"use strict";var a=r("./support"),o=r("./base64"),u=r("./nodejsUtils"),l=r("./external");r("setimmediate");function c(d){var g=null;return a.uint8array?g=new Uint8Array(d.length):g=new Array(d.length),p(d,g)}s.newBlob=function(d,g){s.checkSupport("blob");try{return new Blob([d],{type:g})}catch(I){try{var y=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,T=new y;return T.append(d),T.getBlob(g)}catch(w){throw new Error("Bug : can't construct the Blob.")}}};function f(d){return d}function p(d,g){for(var y=0;y<d.length;++y)g[y]=d.charCodeAt(y)&255;return g}var v={stringifyByChunk:function(d,g,y){var T=[],I=0,w=d.length;if(w<=y)return String.fromCharCode.apply(null,d);for(;I<w;)g==="array"||g==="nodebuffer"?T.push(String.fromCharCode.apply(null,d.slice(I,Math.min(I+y,w)))):T.push(String.fromCharCode.apply(null,d.subarray(I,Math.min(I+y,w)))),I+=y;return T.join("")},stringifyByChar:function(d){for(var g="",y=0;y<d.length;y++)g+=String.fromCharCode(d[y]);return g},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(d){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch(d){return!1}}()}};function m(d){var g=65536,y=s.getTypeOf(d),T=!0;if(y==="uint8array"?T=v.applyCanBeUsed.uint8array:y==="nodebuffer"&&(T=v.applyCanBeUsed.nodebuffer),T)for(;g>1;)try{return v.stringifyByChunk(d,y,g)}catch(I){g=Math.floor(g/2)}return v.stringifyByChar(d)}s.applyFromCharCode=m;function C(d,g){for(var y=0;y<d.length;y++)g[y]=d[y];return g}var S={};S.string={string:f,array:function(d){return p(d,new Array(d.length))},arraybuffer:function(d){return S.string.uint8array(d).buffer},uint8array:function(d){return p(d,new Uint8Array(d.length))},nodebuffer:function(d){return p(d,u.allocBuffer(d.length))}},S.array={string:m,array:f,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return u.newBufferFrom(d)}},S.arraybuffer={string:function(d){return m(new Uint8Array(d))},array:function(d){return C(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:f,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return u.newBufferFrom(new Uint8Array(d))}},S.uint8array={string:m,array:function(d){return C(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:f,nodebuffer:function(d){return u.newBufferFrom(d)}},S.nodebuffer={string:m,array:function(d){return C(d,new Array(d.length))},arraybuffer:function(d){return S.nodebuffer.uint8array(d).buffer},uint8array:function(d){return C(d,new Uint8Array(d.length))},nodebuffer:f},s.transformTo=function(d,g){if(g||(g=""),!d)return g;s.checkSupport(d);var y=s.getTypeOf(g),T=S[y][d](g);return T},s.resolve=function(d){for(var g=d.split("/"),y=[],T=0;T<g.length;T++){var I=g[T];I==="."||I===""&&T!==0&&T!==g.length-1||(I===".."?y.pop():y.push(I))}return y.join("/")},s.getTypeOf=function(d){if(typeof d=="string")return"string";if(Object.prototype.toString.call(d)==="[object Array]")return"array";if(a.nodebuffer&&u.isBuffer(d))return"nodebuffer";if(a.uint8array&&d instanceof Uint8Array)return"uint8array";if(a.arraybuffer&&d instanceof ArrayBuffer)return"arraybuffer"},s.checkSupport=function(d){var g=a[d.toLowerCase()];if(!g)throw new Error(d+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(d){var g="",y,T;for(T=0;T<(d||"").length;T++)y=d.charCodeAt(T),g+="\\x"+(y<16?"0":"")+y.toString(16).toUpperCase();return g},s.delay=function(d,g,y){setImmediate(function(){d.apply(y||null,g||[])})},s.inherits=function(d,g){var y=function(){};y.prototype=g.prototype,d.prototype=new y},s.extend=function(){var d={},g,y;for(g=0;g<arguments.length;g++)for(y in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],y)&&typeof d[y]=="undefined"&&(d[y]=arguments[g][y]);return d},s.prepareContent=function(d,g,y,T,I){var w=l.Promise.resolve(g).then(function(A){var k=a.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1);return k&&typeof FileReader!="undefined"?new l.Promise(function(N,z){var F=new FileReader;F.onload=function(Z){N(Z.target.result)},F.onerror=function(Z){z(Z.target.error)},F.readAsArrayBuffer(A)}):A});return w.then(function(A){var k=s.getTypeOf(A);return k?(k==="arraybuffer"?A=s.transformTo("uint8array",A):k==="string"&&(I?A=o.decode(A):y&&T!==!0&&(A=c(A))),A):l.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,s){"use strict";var a=r("./reader/readerFor"),o=r("./utils"),u=r("./signature"),l=r("./zipEntry"),c=r("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(v)+", expected "+o.pretty(p)+")")}},isSignature:function(p,v){var m=this.reader.index;this.reader.setIndex(p);var C=this.reader.readString(4),S=C===v;return this.reader.setIndex(m),S},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),v=c.uint8array?"uint8array":"array",m=o.transformTo(v,p);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p=this.zip64EndOfCentralSize-44,v=0,m,C,S;v<p;)m=this.reader.readInt(2),C=this.reader.readInt(4),S=this.reader.readData(C),this.zip64ExtensibleData[m]={id:m,length:C,value:S}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,v;for(p=0;p<this.files.length;p++)v=this.files[p],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)p=new l({zip64:this.zip64},this.loadOptions),p.readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(p<0){var v=!this.isSignature(0,u.LOCAL_FILE_HEADER);throw v?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(p);var m=p;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,p=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),p<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var C=this.centralDirOffset+this.centralDirSize;this.zip64&&(C+=20,C+=12+this.zip64EndOfCentralSize);var S=m-C;if(S>0)this.isSignature(m,u.CENTRAL_FILE_HEADER)||(this.reader.zero=S);else if(S<0)throw new Error("Corrupted zip: missing "+Math.abs(S)+" bytes.")},prepareReader:function(p){this.reader=a(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,s){"use strict";var a=r("./reader/readerFor"),o=r("./utils"),u=r("./compressedObject"),l=r("./crc32"),c=r("./utf8"),f=r("./compressions"),p=r("./support"),v=0,m=3,C=function(d){for(var g in f)if(!!Object.prototype.hasOwnProperty.call(f,g)&&f[g].magic===d)return f[g];return null};function S(d,g){this.options=d,this.loadOptions=g}S.prototype={isEncrypted:function(){return(this.bitFlag&1)==1},useUTF8:function(){return(this.bitFlag&2048)==2048},readLocalPart:function(d){var g,y;if(d.skip(22),this.fileNameLength=d.readInt(2),y=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(g=C(this.compressionMethod),g===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,g,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var g=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(g),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),d===v&&(this.dosPermissions=this.externalFileAttributes&63),d===m&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(!!this.extraFields[1]){var d=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var g=d.index+this.extraFieldsLength,y,T,I;for(this.extraFields||(this.extraFields={});d.index+4<g;)y=d.readInt(2),T=d.readInt(2),I=d.readData(T),this.extraFields[y]={id:y,length:T,value:I};d.setIndex(g)},handleUTF8:function(){var d=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var y=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var I=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(I)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var g=a(d.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:c.utf8decode(g.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var g=a(d.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:c.utf8decode(g.readData(d.length-5))}return null}},n.exports=S},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,s){"use strict";var a=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),u=r("./utf8"),l=r("./compressedObject"),c=r("./stream/GenericWorker"),f=function(C,S,d){this.name=C,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=S,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}};f.prototype={internalStream:function(C){var S=null,d="string";try{if(!C)throw new Error("No output type specified.");d=C.toLowerCase();var g=d==="string"||d==="text";(d==="binarystring"||d==="text")&&(d="string"),S=this._decompressWorker();var y=!this._dataBinary;y&&!g&&(S=S.pipe(new u.Utf8EncodeWorker)),!y&&g&&(S=S.pipe(new u.Utf8DecodeWorker))}catch(T){S=new c("error"),S.error(T)}return new a(S,d,"")},async:function(C,S){return this.internalStream(C).accumulate(S)},nodeStream:function(C,S){return this.internalStream(C||"nodebuffer").toNodejsStream(S)},_compressWorker:function(C,S){if(this._data instanceof l&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(d,C,S)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<p.length;m++)f.prototype[p[m]]=v;n.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,s){(function(a){"use strict";var o=a.MutationObserver||a.WebKitMutationObserver,u;if(o){var l=0,c=new o(C),f=a.document.createTextNode("");c.observe(f,{characterData:!0}),u=function(){f.data=l=++l%2}}else if(!a.setImmediate&&typeof a.MessageChannel!="undefined"){var p=new a.MessageChannel;p.port1.onmessage=C,u=function(){p.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?u=function(){var d=a.document.createElement("script");d.onreadystatechange=function(){C(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},a.document.documentElement.appendChild(d)}:u=function(){setTimeout(C,0)};var v,m=[];function C(){v=!0;for(var d,g,y=m.length;y;){for(g=m,m=[],d=-1;++d<y;)g[d]();y=m.length}v=!1}n.exports=S;function S(d){m.push(d)===1&&!v&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(r,n,s){"use strict";var a=r("immediate");function o(){}var u={},l=["REJECTED"],c=["FULFILLED"],f=["PENDING"];n.exports=p;function p(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,w!==o&&S(this,w)}p.prototype.finally=function(w){if(typeof w!="function")return this;var A=this.constructor;return this.then(k,N);function k(z){function F(){return z}return A.resolve(w()).then(F)}function N(z){function F(){throw z}return A.resolve(w()).then(F)}},p.prototype.catch=function(w){return this.then(null,w)},p.prototype.then=function(w,A){if(typeof w!="function"&&this.state===c||typeof A!="function"&&this.state===l)return this;var k=new this.constructor(o);if(this.state!==f){var N=this.state===c?w:A;m(k,N,this.outcome)}else this.queue.push(new v(k,w,A));return k};function v(w,A,k){this.promise=w,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(w){u.resolve(this.promise,w)},v.prototype.otherCallFulfilled=function(w){m(this.promise,this.onFulfilled,w)},v.prototype.callRejected=function(w){u.reject(this.promise,w)},v.prototype.otherCallRejected=function(w){m(this.promise,this.onRejected,w)};function m(w,A,k){a(function(){var N;try{N=A(k)}catch(z){return u.reject(w,z)}N===w?u.reject(w,new TypeError("Cannot resolve promise with itself")):u.resolve(w,N)})}u.resolve=function(w,A){var k=d(C,A);if(k.status==="error")return u.reject(w,k.value);var N=k.value;if(N)S(w,N);else{w.state=c,w.outcome=A;for(var z=-1,F=w.queue.length;++z<F;)w.queue[z].callFulfilled(A)}return w},u.reject=function(w,A){w.state=l,w.outcome=A;for(var k=-1,N=w.queue.length;++k<N;)w.queue[k].callRejected(A);return w};function C(w){var A=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof A=="function")return function(){A.apply(w,arguments)}}function S(w,A){var k=!1;function N(j){k||(k=!0,u.reject(w,j))}function z(j){k||(k=!0,u.resolve(w,j))}function F(){A(z,N)}var Z=d(F);Z.status==="error"&&N(Z.value)}function d(w,A){var k={};try{k.value=w(A),k.status="success"}catch(N){k.status="error",k.value=N}return k}p.resolve=g;function g(w){return w instanceof this?w:u.resolve(new this(o),w)}p.reject=y;function y(w){var A=new this(o);return u.reject(A,w)}p.all=T;function T(w){var A=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=w.length,N=!1;if(!k)return this.resolve([]);for(var z=new Array(k),F=0,Z=-1,j=new this(o);++Z<k;)ie(w[Z],Z);return j;function ie(pe,ne){A.resolve(pe).then(ge,function(ve){N||(N=!0,u.reject(j,ve))});function ge(ve){z[ne]=ve,++F===k&&!N&&(N=!0,u.resolve(j,z))}}}p.race=I;function I(w){var A=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=w.length,N=!1;if(!k)return this.resolve([]);for(var z=-1,F=new this(o);++z<k;)Z(w[z]);return F;function Z(j){A.resolve(j).then(function(ie){N||(N=!0,u.resolve(F,ie))},function(ie){N||(N=!0,u.reject(F,ie))})}}},{immediate:36}],38:[function(r,n,s){"use strict";var a=r("./lib/utils/common").assign,o=r("./lib/deflate"),u=r("./lib/inflate"),l=r("./lib/zlib/constants"),c={};a(c,o,u,l),n.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,s){"use strict";var a=r("./zlib/deflate"),o=r("./utils/common"),u=r("./utils/strings"),l=r("./zlib/messages"),c=r("./zlib/zstream"),f=Object.prototype.toString,p=0,v=4,m=0,C=1,S=2,d=-1,g=0,y=8;function T(k){if(!(this instanceof T))return new T(k);this.options=o.assign({level:d,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},k||{});var N=this.options;N.raw&&N.windowBits>0?N.windowBits=-N.windowBits:N.gzip&&N.windowBits>0&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var z=a.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy);if(z!==m)throw new Error(l[z]);if(N.header&&a.deflateSetHeader(this.strm,N.header),N.dictionary){var F;if(typeof N.dictionary=="string"?F=u.string2buf(N.dictionary):f.call(N.dictionary)==="[object ArrayBuffer]"?F=new Uint8Array(N.dictionary):F=N.dictionary,z=a.deflateSetDictionary(this.strm,F),z!==m)throw new Error(l[z]);this._dict_set=!0}}T.prototype.push=function(k,N){var z=this.strm,F=this.options.chunkSize,Z,j;if(this.ended)return!1;j=N===~~N?N:N===!0?v:p,typeof k=="string"?z.input=u.string2buf(k):f.call(k)==="[object ArrayBuffer]"?z.input=new Uint8Array(k):z.input=k,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(F),z.next_out=0,z.avail_out=F),Z=a.deflate(z,j),Z!==C&&Z!==m)return this.onEnd(Z),this.ended=!0,!1;(z.avail_out===0||z.avail_in===0&&(j===v||j===S))&&(this.options.to==="string"?this.onData(u.buf2binstring(o.shrinkBuf(z.output,z.next_out))):this.onData(o.shrinkBuf(z.output,z.next_out)))}while((z.avail_in>0||z.avail_out===0)&&Z!==C);return j===v?(Z=a.deflateEnd(this.strm),this.onEnd(Z),this.ended=!0,Z===m):(j===S&&(this.onEnd(m),z.avail_out=0),!0)},T.prototype.onData=function(k){this.chunks.push(k)},T.prototype.onEnd=function(k){k===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg};function I(k,N){var z=new T(N);if(z.push(k,!0),z.err)throw z.msg||l[z.err];return z.result}function w(k,N){return N=N||{},N.raw=!0,I(k,N)}function A(k,N){return N=N||{},N.gzip=!0,I(k,N)}s.Deflate=T,s.deflate=I,s.deflateRaw=w,s.gzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,s){"use strict";var a=r("./zlib/inflate"),o=r("./utils/common"),u=r("./utils/strings"),l=r("./zlib/constants"),c=r("./zlib/messages"),f=r("./zlib/zstream"),p=r("./zlib/gzheader"),v=Object.prototype.toString;function m(d){if(!(this instanceof m))return new m(d);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},d||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),g.windowBits>=0&&g.windowBits<16&&!(d&&d.windowBits)&&(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&(g.windowBits&15)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var y=a.inflateInit2(this.strm,g.windowBits);if(y!==l.Z_OK)throw new Error(c[y]);this.header=new p,a.inflateGetHeader(this.strm,this.header)}m.prototype.push=function(d,g){var y=this.strm,T=this.options.chunkSize,I=this.options.dictionary,w,A,k,N,z,F,Z=!1;if(this.ended)return!1;A=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof d=="string"?y.input=u.binstring2buf(d):v.call(d)==="[object ArrayBuffer]"?y.input=new Uint8Array(d):y.input=d,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new o.Buf8(T),y.next_out=0,y.avail_out=T),w=a.inflate(y,l.Z_NO_FLUSH),w===l.Z_NEED_DICT&&I&&(typeof I=="string"?F=u.string2buf(I):v.call(I)==="[object ArrayBuffer]"?F=new Uint8Array(I):F=I,w=a.inflateSetDictionary(this.strm,F)),w===l.Z_BUF_ERROR&&Z===!0&&(w=l.Z_OK,Z=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),this.ended=!0,!1;y.next_out&&(y.avail_out===0||w===l.Z_STREAM_END||y.avail_in===0&&(A===l.Z_FINISH||A===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(k=u.utf8border(y.output,y.next_out),N=y.next_out-k,z=u.buf2string(y.output,k),y.next_out=N,y.avail_out=T-N,N&&o.arraySet(y.output,y.output,k,N,0),this.onData(z)):this.onData(o.shrinkBuf(y.output,y.next_out))),y.avail_in===0&&y.avail_out===0&&(Z=!0)}while((y.avail_in>0||y.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(A=l.Z_FINISH),A===l.Z_FINISH?(w=a.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):(A===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),y.avail_out=0),!0)},m.prototype.onData=function(d){this.chunks.push(d)},m.prototype.onEnd=function(d){d===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg};function C(d,g){var y=new m(g);if(y.push(d,!0),y.err)throw y.msg||c[y.err];return y.result}function S(d,g){return g=g||{},g.raw=!0,C(d,g)}s.Inflate=m,s.inflate=C,s.inflateRaw=S,s.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,s){"use strict";var a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(!!f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(l[p]=f[p])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,f,p,v){if(c.subarray&&l.subarray){l.set(c.subarray(f,f+p),v);return}for(var m=0;m<p;m++)l[v+m]=c[f+m]},flattenChunks:function(l){var c,f,p,v,m,C;for(p=0,c=0,f=l.length;c<f;c++)p+=l[c].length;for(C=new Uint8Array(p),v=0,c=0,f=l.length;c<f;c++)m=l[c],C.set(m,v),v+=m.length;return C}},u={arraySet:function(l,c,f,p,v){for(var m=0;m<p;m++)l[v+m]=c[f+m]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,u))},s.setTyped(a)},{}],42:[function(r,n,s){"use strict";var a=r("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch(p){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(p){u=!1}for(var l=new a.Buf8(256),c=0;c<256;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1,s.string2buf=function(p){var v,m,C,S,d,g=p.length,y=0;for(S=0;S<g;S++)m=p.charCodeAt(S),(m&64512)==55296&&S+1<g&&(C=p.charCodeAt(S+1),(C&64512)==56320&&(m=65536+(m-55296<<10)+(C-56320),S++)),y+=m<128?1:m<2048?2:m<65536?3:4;for(v=new a.Buf8(y),d=0,S=0;d<y;S++)m=p.charCodeAt(S),(m&64512)==55296&&S+1<g&&(C=p.charCodeAt(S+1),(C&64512)==56320&&(m=65536+(m-55296<<10)+(C-56320),S++)),m<128?v[d++]=m:m<2048?(v[d++]=192|m>>>6,v[d++]=128|m&63):m<65536?(v[d++]=224|m>>>12,v[d++]=128|m>>>6&63,v[d++]=128|m&63):(v[d++]=240|m>>>18,v[d++]=128|m>>>12&63,v[d++]=128|m>>>6&63,v[d++]=128|m&63);return v};function f(p,v){if(v<65537&&(p.subarray&&u||!p.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(p,v));for(var m="",C=0;C<v;C++)m+=String.fromCharCode(p[C]);return m}s.buf2binstring=function(p){return f(p,p.length)},s.binstring2buf=function(p){for(var v=new a.Buf8(p.length),m=0,C=v.length;m<C;m++)v[m]=p.charCodeAt(m);return v},s.buf2string=function(p,v){var m,C,S,d,g=v||p.length,y=new Array(g*2);for(C=0,m=0;m<g;){if(S=p[m++],S<128){y[C++]=S;continue}if(d=l[S],d>4){y[C++]=65533,m+=d-1;continue}for(S&=d===2?31:d===3?15:7;d>1&&m<g;)S=S<<6|p[m++]&63,d--;if(d>1){y[C++]=65533;continue}S<65536?y[C++]=S:(S-=65536,y[C++]=55296|S>>10&1023,y[C++]=56320|S&1023)}return f(y,C)},s.utf8border=function(p,v){var m;for(v=v||p.length,v>p.length&&(v=p.length),m=v-1;m>=0&&(p[m]&192)==128;)m--;return m<0||m===0?v:m+l[p[m]]>v?m:v}},{"./common":41}],43:[function(r,n,s){"use strict";function a(o,u,l,c){for(var f=o&65535|0,p=o>>>16&65535|0,v=0;l!==0;){v=l>2e3?2e3:l,l-=v;do f=f+u[c++]|0,p=p+f|0;while(--v);f%=65521,p%=65521}return f|p<<16|0}n.exports=a},{}],44:[function(r,n,s){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,s){"use strict";function a(){for(var l,c=[],f=0;f<256;f++){l=f;for(var p=0;p<8;p++)l=l&1?3988292384^l>>>1:l>>>1;c[f]=l}return c}var o=a();function u(l,c,f,p){var v=o,m=p+f;l^=-1;for(var C=p;C<m;C++)l=l>>>8^v[(l^c[C])&255];return l^-1}n.exports=u},{}],46:[function(r,n,s){"use strict";var a=r("../utils/common"),o=r("./trees"),u=r("./adler32"),l=r("./crc32"),c=r("./messages"),f=0,p=1,v=3,m=4,C=5,S=0,d=1,g=-2,y=-3,T=-5,I=-1,w=1,A=2,k=3,N=4,z=0,F=2,Z=8,j=9,ie=15,pe=8,ne=29,ge=256,ve=ge+1+ne,he=30,Ce=19,Be=2*ve+1,Re=15,de=3,Ie=258,Te=Ie+de+1,We=32,Ze=42,qe=69,xe=73,et=91,Ge=103,Ne=113,G=666,Y=1,se=2,le=3,me=4,ye=3;function Ee(h,U){return h.msg=c[U],U}function Ke(h){return(h<<1)-(h>4?9:0)}function Pe(h){for(var U=h.length;--U>=0;)h[U]=0}function $e(h){var U=h.state,W=U.pending;W>h.avail_out&&(W=h.avail_out),W!==0&&(a.arraySet(h.output,U.pending_buf,U.pending_out,W,h.next_out),h.next_out+=W,U.pending_out+=W,h.total_out+=W,h.avail_out-=W,U.pending-=W,U.pending===0&&(U.pending_out=0))}function De(h,U){o._tr_flush_block(h,h.block_start>=0?h.block_start:-1,h.strstart-h.block_start,U),h.block_start=h.strstart,$e(h.strm)}function be(h,U){h.pending_buf[h.pending++]=U}function ft(h,U){h.pending_buf[h.pending++]=U>>>8&255,h.pending_buf[h.pending++]=U&255}function Et(h,U,W,b){var R=h.avail_in;return R>b&&(R=b),R===0?0:(h.avail_in-=R,a.arraySet(U,h.input,h.next_in,R,W),h.state.wrap===1?h.adler=u(h.adler,U,R,W):h.state.wrap===2&&(h.adler=l(h.adler,U,R,W)),h.next_in+=R,h.total_in+=R,R)}function xt(h,U){var W=h.max_chain_length,b=h.strstart,R,q,fe=h.prev_length,ae=h.nice_match,ue=h.strstart>h.w_size-Te?h.strstart-(h.w_size-Te):0,ke=h.window,Kt=h.w_mask,Xe=h.prev,Oe=h.strstart+Ie,tt=ke[b+fe-1],lt=ke[b+fe];h.prev_length>=h.good_match&&(W>>=2),ae>h.lookahead&&(ae=h.lookahead);do if(R=U,!(ke[R+fe]!==lt||ke[R+fe-1]!==tt||ke[R]!==ke[b]||ke[++R]!==ke[b+1])){b+=2,R++;do;while(ke[++b]===ke[++R]&&ke[++b]===ke[++R]&&ke[++b]===ke[++R]&&ke[++b]===ke[++R]&&ke[++b]===ke[++R]&&ke[++b]===ke[++R]&&ke[++b]===ke[++R]&&ke[++b]===ke[++R]&&b<Oe);if(q=Ie-(Oe-b),b=Oe-Ie,q>fe){if(h.match_start=U,fe=q,q>=ae)break;tt=ke[b+fe-1],lt=ke[b+fe]}}while((U=Xe[U&Kt])>ue&&--W!=0);return fe<=h.lookahead?fe:h.lookahead}function ut(h){var U=h.w_size,W,b,R,q,fe;do{if(q=h.window_size-h.lookahead-h.strstart,h.strstart>=U+(U-Te)){a.arraySet(h.window,h.window,U,U,0),h.match_start-=U,h.strstart-=U,h.block_start-=U,b=h.hash_size,W=b;do R=h.head[--W],h.head[W]=R>=U?R-U:0;while(--b);b=U,W=b;do R=h.prev[--W],h.prev[W]=R>=U?R-U:0;while(--b);q+=U}if(h.strm.avail_in===0)break;if(b=Et(h.strm,h.window,h.strstart+h.lookahead,q),h.lookahead+=b,h.lookahead+h.insert>=de)for(fe=h.strstart-h.insert,h.ins_h=h.window[fe],h.ins_h=(h.ins_h<<h.hash_shift^h.window[fe+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[fe+de-1])&h.hash_mask,h.prev[fe&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=fe,fe++,h.insert--,!(h.lookahead+h.insert<de)););}while(h.lookahead<Te&&h.strm.avail_in!==0)}function Ft(h,U){var W=65535;for(W>h.pending_buf_size-5&&(W=h.pending_buf_size-5);;){if(h.lookahead<=1){if(ut(h),h.lookahead===0&&U===f)return Y;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var b=h.block_start+W;if((h.strstart===0||h.strstart>=b)&&(h.lookahead=h.strstart-b,h.strstart=b,De(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-Te&&(De(h,!1),h.strm.avail_out===0))return Y}return h.insert=0,U===m?(De(h,!0),h.strm.avail_out===0?le:me):(h.strstart>h.block_start&&(De(h,!1),h.strm.avail_out===0),Y)}function Xt(h,U){for(var W,b;;){if(h.lookahead<Te){if(ut(h),h.lookahead<Te&&U===f)return Y;if(h.lookahead===0)break}if(W=0,h.lookahead>=de&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+de-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),W!==0&&h.strstart-W<=h.w_size-Te&&(h.match_length=xt(h,W)),h.match_length>=de)if(b=o._tr_tally(h,h.strstart-h.match_start,h.match_length-de),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=de){h.match_length--;do h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+de-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart;while(--h.match_length!=0);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else b=o._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(b&&(De(h,!1),h.strm.avail_out===0))return Y}return h.insert=h.strstart<de-1?h.strstart:de-1,U===m?(De(h,!0),h.strm.avail_out===0?le:me):h.last_lit&&(De(h,!1),h.strm.avail_out===0)?Y:se}function St(h,U){for(var W,b,R;;){if(h.lookahead<Te){if(ut(h),h.lookahead<Te&&U===f)return Y;if(h.lookahead===0)break}if(W=0,h.lookahead>=de&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+de-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=de-1,W!==0&&h.prev_length<h.max_lazy_match&&h.strstart-W<=h.w_size-Te&&(h.match_length=xt(h,W),h.match_length<=5&&(h.strategy===w||h.match_length===de&&h.strstart-h.match_start>4096)&&(h.match_length=de-1)),h.prev_length>=de&&h.match_length<=h.prev_length){R=h.strstart+h.lookahead-de,b=o._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-de),h.lookahead-=h.prev_length-1,h.prev_length-=2;do++h.strstart<=R&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+de-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart);while(--h.prev_length!=0);if(h.match_available=0,h.match_length=de-1,h.strstart++,b&&(De(h,!1),h.strm.avail_out===0))return Y}else if(h.match_available){if(b=o._tr_tally(h,0,h.window[h.strstart-1]),b&&De(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return Y}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(b=o._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<de-1?h.strstart:de-1,U===m?(De(h,!0),h.strm.avail_out===0?le:me):h.last_lit&&(De(h,!1),h.strm.avail_out===0)?Y:se}function fr(h,U){for(var W,b,R,q,fe=h.window;;){if(h.lookahead<=Ie){if(ut(h),h.lookahead<=Ie&&U===f)return Y;if(h.lookahead===0)break}if(h.match_length=0,h.lookahead>=de&&h.strstart>0&&(R=h.strstart-1,b=fe[R],b===fe[++R]&&b===fe[++R]&&b===fe[++R])){q=h.strstart+Ie;do;while(b===fe[++R]&&b===fe[++R]&&b===fe[++R]&&b===fe[++R]&&b===fe[++R]&&b===fe[++R]&&b===fe[++R]&&b===fe[++R]&&R<q);h.match_length=Ie-(q-R),h.match_length>h.lookahead&&(h.match_length=h.lookahead)}if(h.match_length>=de?(W=o._tr_tally(h,1,h.match_length-de),h.lookahead-=h.match_length,h.strstart+=h.match_length,h.match_length=0):(W=o._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++),W&&(De(h,!1),h.strm.avail_out===0))return Y}return h.insert=0,U===m?(De(h,!0),h.strm.avail_out===0?le:me):h.last_lit&&(De(h,!1),h.strm.avail_out===0)?Y:se}function Yt(h,U){for(var W;;){if(h.lookahead===0&&(ut(h),h.lookahead===0)){if(U===f)return Y;break}if(h.match_length=0,W=o._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++,W&&(De(h,!1),h.strm.avail_out===0))return Y}return h.insert=0,U===m?(De(h,!0),h.strm.avail_out===0?le:me):h.last_lit&&(De(h,!1),h.strm.avail_out===0)?Y:se}function at(h,U,W,b,R){this.good_length=h,this.max_lazy=U,this.nice_length=W,this.max_chain=b,this.func=R}var Dt;Dt=[new at(0,0,0,0,Ft),new at(4,4,8,4,Xt),new at(4,5,16,8,Xt),new at(4,6,32,32,Xt),new at(4,4,16,16,St),new at(8,16,32,32,St),new at(8,16,128,128,St),new at(8,32,128,256,St),new at(32,128,258,1024,St),new at(32,258,258,4096,St)];function br(h){h.window_size=2*h.w_size,Pe(h.head),h.max_lazy_match=Dt[h.level].max_lazy,h.good_match=Dt[h.level].good_length,h.nice_match=Dt[h.level].nice_length,h.max_chain_length=Dt[h.level].max_chain,h.strstart=0,h.block_start=0,h.lookahead=0,h.insert=0,h.match_length=h.prev_length=de-1,h.match_available=0,h.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(Be*2),this.dyn_dtree=new a.Buf16((2*he+1)*2),this.bl_tree=new a.Buf16((2*Ce+1)*2),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(Re+1),this.heap=new a.Buf16(2*ve+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*ve+1),Pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function $(h){var U;return!h||!h.state?Ee(h,g):(h.total_in=h.total_out=0,h.data_type=F,U=h.state,U.pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?Ze:Ne,h.adler=U.wrap===2?0:1,U.last_flush=f,o._tr_init(U),S)}function Q(h){var U=$(h);return U===S&&br(h.state),U}function oe(h,U){return!h||!h.state||h.state.wrap!==2?g:(h.state.gzhead=U,S)}function B(h,U,W,b,R,q){if(!h)return g;var fe=1;if(U===I&&(U=6),b<0?(fe=0,b=-b):b>15&&(fe=2,b-=16),R<1||R>j||W!==Z||b<8||b>15||U<0||U>9||q<0||q>N)return Ee(h,g);b===8&&(b=9);var ae=new x;return h.state=ae,ae.strm=h,ae.wrap=fe,ae.gzhead=null,ae.w_bits=b,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=R+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+de-1)/de),ae.window=new a.Buf8(ae.w_size*2),ae.head=new a.Buf16(ae.hash_size),ae.prev=new a.Buf16(ae.w_size),ae.lit_bufsize=1<<R+6,ae.pending_buf_size=ae.lit_bufsize*4,ae.pending_buf=new a.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=(1+2)*ae.lit_bufsize,ae.level=U,ae.strategy=q,ae.method=W,Q(h)}function V(h,U){return B(h,U,Z,ie,pe,z)}function _(h,U){var W,b,R,q;if(!h||!h.state||U>C||U<0)return h?Ee(h,g):g;if(b=h.state,!h.output||!h.input&&h.avail_in!==0||b.status===G&&U!==m)return Ee(h,h.avail_out===0?T:g);if(b.strm=h,W=b.last_flush,b.last_flush=U,b.status===Ze)if(b.wrap===2)h.adler=0,be(b,31),be(b,139),be(b,8),b.gzhead?(be(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),be(b,b.gzhead.time&255),be(b,b.gzhead.time>>8&255),be(b,b.gzhead.time>>16&255),be(b,b.gzhead.time>>24&255),be(b,b.level===9?2:b.strategy>=A||b.level<2?4:0),be(b,b.gzhead.os&255),b.gzhead.extra&&b.gzhead.extra.length&&(be(b,b.gzhead.extra.length&255),be(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(h.adler=l(h.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=qe):(be(b,0),be(b,0),be(b,0),be(b,0),be(b,0),be(b,b.level===9?2:b.strategy>=A||b.level<2?4:0),be(b,ye),b.status=Ne);else{var fe=Z+(b.w_bits-8<<4)<<8,ae=-1;b.strategy>=A||b.level<2?ae=0:b.level<6?ae=1:b.level===6?ae=2:ae=3,fe|=ae<<6,b.strstart!==0&&(fe|=We),fe+=31-fe%31,b.status=Ne,ft(b,fe),b.strstart!==0&&(ft(b,h.adler>>>16),ft(b,h.adler&65535)),h.adler=1}if(b.status===qe)if(b.gzhead.extra){for(R=b.pending;b.gzindex<(b.gzhead.extra.length&65535)&&!(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>R&&(h.adler=l(h.adler,b.pending_buf,b.pending-R,R)),$e(h),R=b.pending,b.pending===b.pending_buf_size));)be(b,b.gzhead.extra[b.gzindex]&255),b.gzindex++;b.gzhead.hcrc&&b.pending>R&&(h.adler=l(h.adler,b.pending_buf,b.pending-R,R)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=xe)}else b.status=xe;if(b.status===xe)if(b.gzhead.name){R=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>R&&(h.adler=l(h.adler,b.pending_buf,b.pending-R,R)),$e(h),R=b.pending,b.pending===b.pending_buf_size)){q=1;break}b.gzindex<b.gzhead.name.length?q=b.gzhead.name.charCodeAt(b.gzindex++)&255:q=0,be(b,q)}while(q!==0);b.gzhead.hcrc&&b.pending>R&&(h.adler=l(h.adler,b.pending_buf,b.pending-R,R)),q===0&&(b.gzindex=0,b.status=et)}else b.status=et;if(b.status===et)if(b.gzhead.comment){R=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>R&&(h.adler=l(h.adler,b.pending_buf,b.pending-R,R)),$e(h),R=b.pending,b.pending===b.pending_buf_size)){q=1;break}b.gzindex<b.gzhead.comment.length?q=b.gzhead.comment.charCodeAt(b.gzindex++)&255:q=0,be(b,q)}while(q!==0);b.gzhead.hcrc&&b.pending>R&&(h.adler=l(h.adler,b.pending_buf,b.pending-R,R)),q===0&&(b.status=Ge)}else b.status=Ge;if(b.status===Ge&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&$e(h),b.pending+2<=b.pending_buf_size&&(be(b,h.adler&255),be(b,h.adler>>8&255),h.adler=0,b.status=Ne)):b.status=Ne),b.pending!==0){if($e(h),h.avail_out===0)return b.last_flush=-1,S}else if(h.avail_in===0&&Ke(U)<=Ke(W)&&U!==m)return Ee(h,T);if(b.status===G&&h.avail_in!==0)return Ee(h,T);if(h.avail_in!==0||b.lookahead!==0||U!==f&&b.status!==G){var ue=b.strategy===A?Yt(b,U):b.strategy===k?fr(b,U):Dt[b.level].func(b,U);if((ue===le||ue===me)&&(b.status=G),ue===Y||ue===le)return h.avail_out===0&&(b.last_flush=-1),S;if(ue===se&&(U===p?o._tr_align(b):U!==C&&(o._tr_stored_block(b,0,0,!1),U===v&&(Pe(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),$e(h),h.avail_out===0))return b.last_flush=-1,S}return U!==m?S:b.wrap<=0?d:(b.wrap===2?(be(b,h.adler&255),be(b,h.adler>>8&255),be(b,h.adler>>16&255),be(b,h.adler>>24&255),be(b,h.total_in&255),be(b,h.total_in>>8&255),be(b,h.total_in>>16&255),be(b,h.total_in>>24&255)):(ft(b,h.adler>>>16),ft(b,h.adler&65535)),$e(h),b.wrap>0&&(b.wrap=-b.wrap),b.pending!==0?S:d)}function X(h){var U;return!h||!h.state?g:(U=h.state.status,U!==Ze&&U!==qe&&U!==xe&&U!==et&&U!==Ge&&U!==Ne&&U!==G?Ee(h,g):(h.state=null,U===Ne?Ee(h,y):S))}function _e(h,U){var W=U.length,b,R,q,fe,ae,ue,ke,Kt;if(!h||!h.state||(b=h.state,fe=b.wrap,fe===2||fe===1&&b.status!==Ze||b.lookahead))return g;for(fe===1&&(h.adler=u(h.adler,U,W,0)),b.wrap=0,W>=b.w_size&&(fe===0&&(Pe(b.head),b.strstart=0,b.block_start=0,b.insert=0),Kt=new a.Buf8(b.w_size),a.arraySet(Kt,U,W-b.w_size,b.w_size,0),U=Kt,W=b.w_size),ae=h.avail_in,ue=h.next_in,ke=h.input,h.avail_in=W,h.next_in=0,h.input=U,ut(b);b.lookahead>=de;){R=b.strstart,q=b.lookahead-(de-1);do b.ins_h=(b.ins_h<<b.hash_shift^b.window[R+de-1])&b.hash_mask,b.prev[R&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=R,R++;while(--q);b.strstart=R,b.lookahead=de-1,ut(b)}return b.strstart+=b.lookahead,b.block_start=b.strstart,b.insert=b.lookahead,b.lookahead=0,b.match_length=b.prev_length=de-1,b.match_available=0,h.next_in=ue,h.input=ke,h.avail_in=ae,b.wrap=fe,S}s.deflateInit=V,s.deflateInit2=B,s.deflateReset=Q,s.deflateResetKeep=$,s.deflateSetHeader=oe,s.deflate=_,s.deflateEnd=X,s.deflateSetDictionary=_e,s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,s){"use strict";function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n.exports=a},{}],48:[function(r,n,s){"use strict";var a=30,o=12;n.exports=function(l,c){var f,p,v,m,C,S,d,g,y,T,I,w,A,k,N,z,F,Z,j,ie,pe,ne,ge,ve,he;f=l.state,p=l.next_in,ve=l.input,v=p+(l.avail_in-5),m=l.next_out,he=l.output,C=m-(c-l.avail_out),S=m+(l.avail_out-257),d=f.dmax,g=f.wsize,y=f.whave,T=f.wnext,I=f.window,w=f.hold,A=f.bits,k=f.lencode,N=f.distcode,z=(1<<f.lenbits)-1,F=(1<<f.distbits)-1;e:do{A<15&&(w+=ve[p++]<<A,A+=8,w+=ve[p++]<<A,A+=8),Z=k[w&z];t:for(;;){if(j=Z>>>24,w>>>=j,A-=j,j=Z>>>16&255,j===0)he[m++]=Z&65535;else if(j&16){ie=Z&65535,j&=15,j&&(A<j&&(w+=ve[p++]<<A,A+=8),ie+=w&(1<<j)-1,w>>>=j,A-=j),A<15&&(w+=ve[p++]<<A,A+=8,w+=ve[p++]<<A,A+=8),Z=N[w&F];r:for(;;){if(j=Z>>>24,w>>>=j,A-=j,j=Z>>>16&255,j&16){if(pe=Z&65535,j&=15,A<j&&(w+=ve[p++]<<A,A+=8,A<j&&(w+=ve[p++]<<A,A+=8)),pe+=w&(1<<j)-1,pe>d){l.msg="invalid distance too far back",f.mode=a;break e}if(w>>>=j,A-=j,j=m-C,pe>j){if(j=pe-j,j>y&&f.sane){l.msg="invalid distance too far back",f.mode=a;break e}if(ne=0,ge=I,T===0){if(ne+=g-j,j<ie){ie-=j;do he[m++]=I[ne++];while(--j);ne=m-pe,ge=he}}else if(T<j){if(ne+=g+T-j,j-=T,j<ie){ie-=j;do he[m++]=I[ne++];while(--j);if(ne=0,T<ie){j=T,ie-=j;do he[m++]=I[ne++];while(--j);ne=m-pe,ge=he}}}else if(ne+=T-j,j<ie){ie-=j;do he[m++]=I[ne++];while(--j);ne=m-pe,ge=he}for(;ie>2;)he[m++]=ge[ne++],he[m++]=ge[ne++],he[m++]=ge[ne++],ie-=3;ie&&(he[m++]=ge[ne++],ie>1&&(he[m++]=ge[ne++]))}else{ne=m-pe;do he[m++]=he[ne++],he[m++]=he[ne++],he[m++]=he[ne++],ie-=3;while(ie>2);ie&&(he[m++]=he[ne++],ie>1&&(he[m++]=he[ne++]))}}else if((j&64)==0){Z=N[(Z&65535)+(w&(1<<j)-1)];continue r}else{l.msg="invalid distance code",f.mode=a;break e}break}}else if((j&64)==0){Z=k[(Z&65535)+(w&(1<<j)-1)];continue t}else if(j&32){f.mode=o;break e}else{l.msg="invalid literal/length code",f.mode=a;break e}break}}while(p<v&&m<S);ie=A>>3,p-=ie,A-=ie<<3,w&=(1<<A)-1,l.next_in=p,l.next_out=m,l.avail_in=p<v?5+(v-p):5-(p-v),l.avail_out=m<S?257+(S-m):257-(m-S),f.hold=w,f.bits=A}},{}],49:[function(r,n,s){"use strict";var a=r("../utils/common"),o=r("./adler32"),u=r("./crc32"),l=r("./inffast"),c=r("./inftrees"),f=0,p=1,v=2,m=4,C=5,S=6,d=0,g=1,y=2,T=-2,I=-3,w=-4,A=-5,k=8,N=1,z=2,F=3,Z=4,j=5,ie=6,pe=7,ne=8,ge=9,ve=10,he=11,Ce=12,Be=13,Re=14,de=15,Ie=16,Te=17,We=18,Ze=19,qe=20,xe=21,et=22,Ge=23,Ne=24,G=25,Y=26,se=27,le=28,me=29,ye=30,Ee=31,Ke=32,Pe=852,$e=592,De=15,be=De;function ft(B){return(B>>>24&255)+(B>>>8&65280)+((B&65280)<<8)+((B&255)<<24)}function Et(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function xt(B){var V;return!B||!B.state?T:(V=B.state,B.total_in=B.total_out=V.total=0,B.msg="",V.wrap&&(B.adler=V.wrap&1),V.mode=N,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new a.Buf32(Pe),V.distcode=V.distdyn=new a.Buf32($e),V.sane=1,V.back=-1,d)}function ut(B){var V;return!B||!B.state?T:(V=B.state,V.wsize=0,V.whave=0,V.wnext=0,xt(B))}function Ft(B,V){var _,X;return!B||!B.state||(X=B.state,V<0?(_=0,V=-V):(_=(V>>4)+1,V<48&&(V&=15)),V&&(V<8||V>15))?T:(X.window!==null&&X.wbits!==V&&(X.window=null),X.wrap=_,X.wbits=V,ut(B))}function Xt(B,V){var _,X;return B?(X=new Et,B.state=X,X.window=null,_=Ft(B,V),_!==d&&(B.state=null),_):T}function St(B){return Xt(B,be)}var fr=!0,Yt,at;function Dt(B){if(fr){var V;for(Yt=new a.Buf32(512),at=new a.Buf32(32),V=0;V<144;)B.lens[V++]=8;for(;V<256;)B.lens[V++]=9;for(;V<280;)B.lens[V++]=7;for(;V<288;)B.lens[V++]=8;for(c(p,B.lens,0,288,Yt,0,B.work,{bits:9}),V=0;V<32;)B.lens[V++]=5;c(v,B.lens,0,32,at,0,B.work,{bits:5}),fr=!1}B.lencode=Yt,B.lenbits=9,B.distcode=at,B.distbits=5}function br(B,V,_,X){var _e,h=B.state;return h.window===null&&(h.wsize=1<<h.wbits,h.wnext=0,h.whave=0,h.window=new a.Buf8(h.wsize)),X>=h.wsize?(a.arraySet(h.window,V,_-h.wsize,h.wsize,0),h.wnext=0,h.whave=h.wsize):(_e=h.wsize-h.wnext,_e>X&&(_e=X),a.arraySet(h.window,V,_-X,_e,h.wnext),X-=_e,X?(a.arraySet(h.window,V,_-X,X,0),h.wnext=X,h.whave=h.wsize):(h.wnext+=_e,h.wnext===h.wsize&&(h.wnext=0),h.whave<h.wsize&&(h.whave+=_e))),0}function x(B,V){var _,X,_e,h,U,W,b,R,q,fe,ae,ue,ke,Kt,Xe=0,Oe,tt,lt,vt,Hr,Zr,Je,Ct,ot=new a.Buf8(4),Jt,Mt,un=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return T;_=B.state,_.mode===Ce&&(_.mode=Be),U=B.next_out,_e=B.output,b=B.avail_out,h=B.next_in,X=B.input,W=B.avail_in,R=_.hold,q=_.bits,fe=W,ae=b,Ct=d;e:for(;;)switch(_.mode){case N:if(_.wrap===0){_.mode=Be;break}for(;q<16;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(_.wrap&2&&R===35615){_.check=0,ot[0]=R&255,ot[1]=R>>>8&255,_.check=u(_.check,ot,2,0),R=0,q=0,_.mode=z;break}if(_.flags=0,_.head&&(_.head.done=!1),!(_.wrap&1)||(((R&255)<<8)+(R>>8))%31){B.msg="incorrect header check",_.mode=ye;break}if((R&15)!==k){B.msg="unknown compression method",_.mode=ye;break}if(R>>>=4,q-=4,Je=(R&15)+8,_.wbits===0)_.wbits=Je;else if(Je>_.wbits){B.msg="invalid window size",_.mode=ye;break}_.dmax=1<<Je,B.adler=_.check=1,_.mode=R&512?ve:Ce,R=0,q=0;break;case z:for(;q<16;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(_.flags=R,(_.flags&255)!==k){B.msg="unknown compression method",_.mode=ye;break}if(_.flags&57344){B.msg="unknown header flags set",_.mode=ye;break}_.head&&(_.head.text=R>>8&1),_.flags&512&&(ot[0]=R&255,ot[1]=R>>>8&255,_.check=u(_.check,ot,2,0)),R=0,q=0,_.mode=F;case F:for(;q<32;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}_.head&&(_.head.time=R),_.flags&512&&(ot[0]=R&255,ot[1]=R>>>8&255,ot[2]=R>>>16&255,ot[3]=R>>>24&255,_.check=u(_.check,ot,4,0)),R=0,q=0,_.mode=Z;case Z:for(;q<16;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}_.head&&(_.head.xflags=R&255,_.head.os=R>>8),_.flags&512&&(ot[0]=R&255,ot[1]=R>>>8&255,_.check=u(_.check,ot,2,0)),R=0,q=0,_.mode=j;case j:if(_.flags&1024){for(;q<16;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}_.length=R,_.head&&(_.head.extra_len=R),_.flags&512&&(ot[0]=R&255,ot[1]=R>>>8&255,_.check=u(_.check,ot,2,0)),R=0,q=0}else _.head&&(_.head.extra=null);_.mode=ie;case ie:if(_.flags&1024&&(ue=_.length,ue>W&&(ue=W),ue&&(_.head&&(Je=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),a.arraySet(_.head.extra,X,h,ue,Je)),_.flags&512&&(_.check=u(_.check,X,ue,h)),W-=ue,h+=ue,_.length-=ue),_.length))break e;_.length=0,_.mode=pe;case pe:if(_.flags&2048){if(W===0)break e;ue=0;do Je=X[h+ue++],_.head&&Je&&_.length<65536&&(_.head.name+=String.fromCharCode(Je));while(Je&&ue<W);if(_.flags&512&&(_.check=u(_.check,X,ue,h)),W-=ue,h+=ue,Je)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=ne;case ne:if(_.flags&4096){if(W===0)break e;ue=0;do Je=X[h+ue++],_.head&&Je&&_.length<65536&&(_.head.comment+=String.fromCharCode(Je));while(Je&&ue<W);if(_.flags&512&&(_.check=u(_.check,X,ue,h)),W-=ue,h+=ue,Je)break e}else _.head&&(_.head.comment=null);_.mode=ge;case ge:if(_.flags&512){for(;q<16;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(R!==(_.check&65535)){B.msg="header crc mismatch",_.mode=ye;break}R=0,q=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),B.adler=_.check=0,_.mode=Ce;break;case ve:for(;q<32;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}B.adler=_.check=ft(R),R=0,q=0,_.mode=he;case he:if(_.havedict===0)return B.next_out=U,B.avail_out=b,B.next_in=h,B.avail_in=W,_.hold=R,_.bits=q,y;B.adler=_.check=1,_.mode=Ce;case Ce:if(V===C||V===S)break e;case Be:if(_.last){R>>>=q&7,q-=q&7,_.mode=se;break}for(;q<3;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}switch(_.last=R&1,R>>>=1,q-=1,R&3){case 0:_.mode=Re;break;case 1:if(Dt(_),_.mode=qe,V===S){R>>>=2,q-=2;break e}break;case 2:_.mode=Te;break;case 3:B.msg="invalid block type",_.mode=ye}R>>>=2,q-=2;break;case Re:for(R>>>=q&7,q-=q&7;q<32;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if((R&65535)!=(R>>>16^65535)){B.msg="invalid stored block lengths",_.mode=ye;break}if(_.length=R&65535,R=0,q=0,_.mode=de,V===S)break e;case de:_.mode=Ie;case Ie:if(ue=_.length,ue){if(ue>W&&(ue=W),ue>b&&(ue=b),ue===0)break e;a.arraySet(_e,X,h,ue,U),W-=ue,h+=ue,b-=ue,U+=ue,_.length-=ue;break}_.mode=Ce;break;case Te:for(;q<14;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(_.nlen=(R&31)+257,R>>>=5,q-=5,_.ndist=(R&31)+1,R>>>=5,q-=5,_.ncode=(R&15)+4,R>>>=4,q-=4,_.nlen>286||_.ndist>30){B.msg="too many length or distance symbols",_.mode=ye;break}_.have=0,_.mode=We;case We:for(;_.have<_.ncode;){for(;q<3;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}_.lens[un[_.have++]]=R&7,R>>>=3,q-=3}for(;_.have<19;)_.lens[un[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,Jt={bits:_.lenbits},Ct=c(f,_.lens,0,19,_.lencode,0,_.work,Jt),_.lenbits=Jt.bits,Ct){B.msg="invalid code lengths set",_.mode=ye;break}_.have=0,_.mode=Ze;case Ze:for(;_.have<_.nlen+_.ndist;){for(;Xe=_.lencode[R&(1<<_.lenbits)-1],Oe=Xe>>>24,tt=Xe>>>16&255,lt=Xe&65535,!(Oe<=q);){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(lt<16)R>>>=Oe,q-=Oe,_.lens[_.have++]=lt;else{if(lt===16){for(Mt=Oe+2;q<Mt;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(R>>>=Oe,q-=Oe,_.have===0){B.msg="invalid bit length repeat",_.mode=ye;break}Je=_.lens[_.have-1],ue=3+(R&3),R>>>=2,q-=2}else if(lt===17){for(Mt=Oe+3;q<Mt;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}R>>>=Oe,q-=Oe,Je=0,ue=3+(R&7),R>>>=3,q-=3}else{for(Mt=Oe+7;q<Mt;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}R>>>=Oe,q-=Oe,Je=0,ue=11+(R&127),R>>>=7,q-=7}if(_.have+ue>_.nlen+_.ndist){B.msg="invalid bit length repeat",_.mode=ye;break}for(;ue--;)_.lens[_.have++]=Je}}if(_.mode===ye)break;if(_.lens[256]===0){B.msg="invalid code -- missing end-of-block",_.mode=ye;break}if(_.lenbits=9,Jt={bits:_.lenbits},Ct=c(p,_.lens,0,_.nlen,_.lencode,0,_.work,Jt),_.lenbits=Jt.bits,Ct){B.msg="invalid literal/lengths set",_.mode=ye;break}if(_.distbits=6,_.distcode=_.distdyn,Jt={bits:_.distbits},Ct=c(v,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,Jt),_.distbits=Jt.bits,Ct){B.msg="invalid distances set",_.mode=ye;break}if(_.mode=qe,V===S)break e;case qe:_.mode=xe;case xe:if(W>=6&&b>=258){B.next_out=U,B.avail_out=b,B.next_in=h,B.avail_in=W,_.hold=R,_.bits=q,l(B,ae),U=B.next_out,_e=B.output,b=B.avail_out,h=B.next_in,X=B.input,W=B.avail_in,R=_.hold,q=_.bits,_.mode===Ce&&(_.back=-1);break}for(_.back=0;Xe=_.lencode[R&(1<<_.lenbits)-1],Oe=Xe>>>24,tt=Xe>>>16&255,lt=Xe&65535,!(Oe<=q);){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(tt&&(tt&240)==0){for(vt=Oe,Hr=tt,Zr=lt;Xe=_.lencode[Zr+((R&(1<<vt+Hr)-1)>>vt)],Oe=Xe>>>24,tt=Xe>>>16&255,lt=Xe&65535,!(vt+Oe<=q);){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}R>>>=vt,q-=vt,_.back+=vt}if(R>>>=Oe,q-=Oe,_.back+=Oe,_.length=lt,tt===0){_.mode=Y;break}if(tt&32){_.back=-1,_.mode=Ce;break}if(tt&64){B.msg="invalid literal/length code",_.mode=ye;break}_.extra=tt&15,_.mode=et;case et:if(_.extra){for(Mt=_.extra;q<Mt;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}_.length+=R&(1<<_.extra)-1,R>>>=_.extra,q-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=Ge;case Ge:for(;Xe=_.distcode[R&(1<<_.distbits)-1],Oe=Xe>>>24,tt=Xe>>>16&255,lt=Xe&65535,!(Oe<=q);){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if((tt&240)==0){for(vt=Oe,Hr=tt,Zr=lt;Xe=_.distcode[Zr+((R&(1<<vt+Hr)-1)>>vt)],Oe=Xe>>>24,tt=Xe>>>16&255,lt=Xe&65535,!(vt+Oe<=q);){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}R>>>=vt,q-=vt,_.back+=vt}if(R>>>=Oe,q-=Oe,_.back+=Oe,tt&64){B.msg="invalid distance code",_.mode=ye;break}_.offset=lt,_.extra=tt&15,_.mode=Ne;case Ne:if(_.extra){for(Mt=_.extra;q<Mt;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}_.offset+=R&(1<<_.extra)-1,R>>>=_.extra,q-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){B.msg="invalid distance too far back",_.mode=ye;break}_.mode=G;case G:if(b===0)break e;if(ue=ae-b,_.offset>ue){if(ue=_.offset-ue,ue>_.whave&&_.sane){B.msg="invalid distance too far back",_.mode=ye;break}ue>_.wnext?(ue-=_.wnext,ke=_.wsize-ue):ke=_.wnext-ue,ue>_.length&&(ue=_.length),Kt=_.window}else Kt=_e,ke=U-_.offset,ue=_.length;ue>b&&(ue=b),b-=ue,_.length-=ue;do _e[U++]=Kt[ke++];while(--ue);_.length===0&&(_.mode=xe);break;case Y:if(b===0)break e;_e[U++]=_.length,b--,_.mode=xe;break;case se:if(_.wrap){for(;q<32;){if(W===0)break e;W--,R|=X[h++]<<q,q+=8}if(ae-=b,B.total_out+=ae,_.total+=ae,ae&&(B.adler=_.check=_.flags?u(_.check,_e,ae,U-ae):o(_.check,_e,ae,U-ae)),ae=b,(_.flags?R:ft(R))!==_.check){B.msg="incorrect data check",_.mode=ye;break}R=0,q=0}_.mode=le;case le:if(_.wrap&&_.flags){for(;q<32;){if(W===0)break e;W--,R+=X[h++]<<q,q+=8}if(R!==(_.total&4294967295)){B.msg="incorrect length check",_.mode=ye;break}R=0,q=0}_.mode=me;case me:Ct=g;break e;case ye:Ct=I;break e;case Ee:return w;case Ke:default:return T}return B.next_out=U,B.avail_out=b,B.next_in=h,B.avail_in=W,_.hold=R,_.bits=q,(_.wsize||ae!==B.avail_out&&_.mode<ye&&(_.mode<se||V!==m))&&br(B,B.output,B.next_out,ae-B.avail_out)?(_.mode=Ee,w):(fe-=B.avail_in,ae-=B.avail_out,B.total_in+=fe,B.total_out+=ae,_.total+=ae,_.wrap&&ae&&(B.adler=_.check=_.flags?u(_.check,_e,ae,B.next_out-ae):o(_.check,_e,ae,B.next_out-ae)),B.data_type=_.bits+(_.last?64:0)+(_.mode===Ce?128:0)+(_.mode===qe||_.mode===de?256:0),(fe===0&&ae===0||V===m)&&Ct===d&&(Ct=A),Ct)}function $(B){if(!B||!B.state)return T;var V=B.state;return V.window&&(V.window=null),B.state=null,d}function Q(B,V){var _;return!B||!B.state||(_=B.state,(_.wrap&2)==0)?T:(_.head=V,V.done=!1,d)}function oe(B,V){var _=V.length,X,_e,h;return!B||!B.state||(X=B.state,X.wrap!==0&&X.mode!==he)?T:X.mode===he&&(_e=1,_e=o(_e,V,_,0),_e!==X.check)?I:(h=br(B,V,_,_),h?(X.mode=Ee,w):(X.havedict=1,d))}s.inflateReset=ut,s.inflateReset2=Ft,s.inflateResetKeep=xt,s.inflateInit=St,s.inflateInit2=Xt,s.inflate=x,s.inflateEnd=$,s.inflateGetHeader=Q,s.inflateSetDictionary=oe,s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,s){"use strict";var a=r("../utils/common"),o=15,u=852,l=592,c=0,f=1,p=2,v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(g,y,T,I,w,A,k,N){var z=N.bits,F=0,Z=0,j=0,ie=0,pe=0,ne=0,ge=0,ve=0,he=0,Ce=0,Be,Re,de,Ie,Te,We=null,Ze=0,qe,xe=new a.Buf16(o+1),et=new a.Buf16(o+1),Ge=null,Ne=0,G,Y,se;for(F=0;F<=o;F++)xe[F]=0;for(Z=0;Z<I;Z++)xe[y[T+Z]]++;for(pe=z,ie=o;ie>=1&&xe[ie]===0;ie--);if(pe>ie&&(pe=ie),ie===0)return w[A++]=1<<24|64<<16|0,w[A++]=1<<24|64<<16|0,N.bits=1,0;for(j=1;j<ie&&xe[j]===0;j++);for(pe<j&&(pe=j),ve=1,F=1;F<=o;F++)if(ve<<=1,ve-=xe[F],ve<0)return-1;if(ve>0&&(g===c||ie!==1))return-1;for(et[1]=0,F=1;F<o;F++)et[F+1]=et[F]+xe[F];for(Z=0;Z<I;Z++)y[T+Z]!==0&&(k[et[y[T+Z]]++]=Z);if(g===c?(We=Ge=k,qe=19):g===f?(We=v,Ze-=257,Ge=m,Ne-=257,qe=256):(We=C,Ge=S,qe=-1),Ce=0,Z=0,F=j,Te=A,ne=pe,ge=0,de=-1,he=1<<pe,Ie=he-1,g===f&&he>u||g===p&&he>l)return 1;for(;;){G=F-ge,k[Z]<qe?(Y=0,se=k[Z]):k[Z]>qe?(Y=Ge[Ne+k[Z]],se=We[Ze+k[Z]]):(Y=32+64,se=0),Be=1<<F-ge,Re=1<<ne,j=Re;do Re-=Be,w[Te+(Ce>>ge)+Re]=G<<24|Y<<16|se|0;while(Re!==0);for(Be=1<<F-1;Ce&Be;)Be>>=1;if(Be!==0?(Ce&=Be-1,Ce+=Be):Ce=0,Z++,--xe[F]==0){if(F===ie)break;F=y[T+k[Z]]}if(F>pe&&(Ce&Ie)!==de){for(ge===0&&(ge=pe),Te+=j,ne=F-ge,ve=1<<ne;ne+ge<ie&&(ve-=xe[ne+ge],!(ve<=0));)ne++,ve<<=1;if(he+=1<<ne,g===f&&he>u||g===p&&he>l)return 1;de=Ce&Ie,w[de]=pe<<24|ne<<16|Te-A|0}}return Ce!==0&&(w[Te+Ce]=F-ge<<24|64<<16|0),N.bits=pe,0}},{"../utils/common":41}],51:[function(r,n,s){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,s){"use strict";var a=r("../utils/common"),o=4,u=0,l=1,c=2;function f(x){for(var $=x.length;--$>=0;)x[$]=0}var p=0,v=1,m=2,C=3,S=258,d=29,g=256,y=g+1+d,T=30,I=19,w=2*y+1,A=15,k=16,N=7,z=256,F=16,Z=17,j=18,ie=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],pe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ge=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=512,he=new Array((y+2)*2);f(he);var Ce=new Array(T*2);f(Ce);var Be=new Array(ve);f(Be);var Re=new Array(S-C+1);f(Re);var de=new Array(d);f(de);var Ie=new Array(T);f(Ie);function Te(x,$,Q,oe,B){this.static_tree=x,this.extra_bits=$,this.extra_base=Q,this.elems=oe,this.max_length=B,this.has_stree=x&&x.length}var We,Ze,qe;function xe(x,$){this.dyn_tree=x,this.max_code=0,this.stat_desc=$}function et(x){return x<256?Be[x]:Be[256+(x>>>7)]}function Ge(x,$){x.pending_buf[x.pending++]=$&255,x.pending_buf[x.pending++]=$>>>8&255}function Ne(x,$,Q){x.bi_valid>k-Q?(x.bi_buf|=$<<x.bi_valid&65535,Ge(x,x.bi_buf),x.bi_buf=$>>k-x.bi_valid,x.bi_valid+=Q-k):(x.bi_buf|=$<<x.bi_valid&65535,x.bi_valid+=Q)}function G(x,$,Q){Ne(x,Q[$*2],Q[$*2+1])}function Y(x,$){var Q=0;do Q|=x&1,x>>>=1,Q<<=1;while(--$>0);return Q>>>1}function se(x){x.bi_valid===16?(Ge(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):x.bi_valid>=8&&(x.pending_buf[x.pending++]=x.bi_buf&255,x.bi_buf>>=8,x.bi_valid-=8)}function le(x,$){var Q=$.dyn_tree,oe=$.max_code,B=$.stat_desc.static_tree,V=$.stat_desc.has_stree,_=$.stat_desc.extra_bits,X=$.stat_desc.extra_base,_e=$.stat_desc.max_length,h,U,W,b,R,q,fe=0;for(b=0;b<=A;b++)x.bl_count[b]=0;for(Q[x.heap[x.heap_max]*2+1]=0,h=x.heap_max+1;h<w;h++)U=x.heap[h],b=Q[Q[U*2+1]*2+1]+1,b>_e&&(b=_e,fe++),Q[U*2+1]=b,!(U>oe)&&(x.bl_count[b]++,R=0,U>=X&&(R=_[U-X]),q=Q[U*2],x.opt_len+=q*(b+R),V&&(x.static_len+=q*(B[U*2+1]+R)));if(fe!==0){do{for(b=_e-1;x.bl_count[b]===0;)b--;x.bl_count[b]--,x.bl_count[b+1]+=2,x.bl_count[_e]--,fe-=2}while(fe>0);for(b=_e;b!==0;b--)for(U=x.bl_count[b];U!==0;)W=x.heap[--h],!(W>oe)&&(Q[W*2+1]!==b&&(x.opt_len+=(b-Q[W*2+1])*Q[W*2],Q[W*2+1]=b),U--)}}function me(x,$,Q){var oe=new Array(A+1),B=0,V,_;for(V=1;V<=A;V++)oe[V]=B=B+Q[V-1]<<1;for(_=0;_<=$;_++){var X=x[_*2+1];X!==0&&(x[_*2]=Y(oe[X]++,X))}}function ye(){var x,$,Q,oe,B,V=new Array(A+1);for(Q=0,oe=0;oe<d-1;oe++)for(de[oe]=Q,x=0;x<1<<ie[oe];x++)Re[Q++]=oe;for(Re[Q-1]=oe,B=0,oe=0;oe<16;oe++)for(Ie[oe]=B,x=0;x<1<<pe[oe];x++)Be[B++]=oe;for(B>>=7;oe<T;oe++)for(Ie[oe]=B<<7,x=0;x<1<<pe[oe]-7;x++)Be[256+B++]=oe;for($=0;$<=A;$++)V[$]=0;for(x=0;x<=143;)he[x*2+1]=8,x++,V[8]++;for(;x<=255;)he[x*2+1]=9,x++,V[9]++;for(;x<=279;)he[x*2+1]=7,x++,V[7]++;for(;x<=287;)he[x*2+1]=8,x++,V[8]++;for(me(he,y+1,V),x=0;x<T;x++)Ce[x*2+1]=5,Ce[x*2]=Y(x,5);We=new Te(he,ie,g+1,y,A),Ze=new Te(Ce,pe,0,T,A),qe=new Te(new Array(0),ne,0,I,N)}function Ee(x){var $;for($=0;$<y;$++)x.dyn_ltree[$*2]=0;for($=0;$<T;$++)x.dyn_dtree[$*2]=0;for($=0;$<I;$++)x.bl_tree[$*2]=0;x.dyn_ltree[z*2]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Ke(x){x.bi_valid>8?Ge(x,x.bi_buf):x.bi_valid>0&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function Pe(x,$,Q,oe){Ke(x),oe&&(Ge(x,Q),Ge(x,~Q)),a.arraySet(x.pending_buf,x.window,$,Q,x.pending),x.pending+=Q}function $e(x,$,Q,oe){var B=$*2,V=Q*2;return x[B]<x[V]||x[B]===x[V]&&oe[$]<=oe[Q]}function De(x,$,Q){for(var oe=x.heap[Q],B=Q<<1;B<=x.heap_len&&(B<x.heap_len&&$e($,x.heap[B+1],x.heap[B],x.depth)&&B++,!$e($,oe,x.heap[B],x.depth));)x.heap[Q]=x.heap[B],Q=B,B<<=1;x.heap[Q]=oe}function be(x,$,Q){var oe,B,V=0,_,X;if(x.last_lit!==0)do oe=x.pending_buf[x.d_buf+V*2]<<8|x.pending_buf[x.d_buf+V*2+1],B=x.pending_buf[x.l_buf+V],V++,oe===0?G(x,B,$):(_=Re[B],G(x,_+g+1,$),X=ie[_],X!==0&&(B-=de[_],Ne(x,B,X)),oe--,_=et(oe),G(x,_,Q),X=pe[_],X!==0&&(oe-=Ie[_],Ne(x,oe,X)));while(V<x.last_lit);G(x,z,$)}function ft(x,$){var Q=$.dyn_tree,oe=$.stat_desc.static_tree,B=$.stat_desc.has_stree,V=$.stat_desc.elems,_,X,_e=-1,h;for(x.heap_len=0,x.heap_max=w,_=0;_<V;_++)Q[_*2]!==0?(x.heap[++x.heap_len]=_e=_,x.depth[_]=0):Q[_*2+1]=0;for(;x.heap_len<2;)h=x.heap[++x.heap_len]=_e<2?++_e:0,Q[h*2]=1,x.depth[h]=0,x.opt_len--,B&&(x.static_len-=oe[h*2+1]);for($.max_code=_e,_=x.heap_len>>1;_>=1;_--)De(x,Q,_);h=V;do _=x.heap[1],x.heap[1]=x.heap[x.heap_len--],De(x,Q,1),X=x.heap[1],x.heap[--x.heap_max]=_,x.heap[--x.heap_max]=X,Q[h*2]=Q[_*2]+Q[X*2],x.depth[h]=(x.depth[_]>=x.depth[X]?x.depth[_]:x.depth[X])+1,Q[_*2+1]=Q[X*2+1]=h,x.heap[1]=h++,De(x,Q,1);while(x.heap_len>=2);x.heap[--x.heap_max]=x.heap[1],le(x,$),me(Q,_e,x.bl_count)}function Et(x,$,Q){var oe,B=-1,V,_=$[0*2+1],X=0,_e=7,h=4;for(_===0&&(_e=138,h=3),$[(Q+1)*2+1]=65535,oe=0;oe<=Q;oe++)V=_,_=$[(oe+1)*2+1],!(++X<_e&&V===_)&&(X<h?x.bl_tree[V*2]+=X:V!==0?(V!==B&&x.bl_tree[V*2]++,x.bl_tree[F*2]++):X<=10?x.bl_tree[Z*2]++:x.bl_tree[j*2]++,X=0,B=V,_===0?(_e=138,h=3):V===_?(_e=6,h=3):(_e=7,h=4))}function xt(x,$,Q){var oe,B=-1,V,_=$[0*2+1],X=0,_e=7,h=4;for(_===0&&(_e=138,h=3),oe=0;oe<=Q;oe++)if(V=_,_=$[(oe+1)*2+1],!(++X<_e&&V===_)){if(X<h)do G(x,V,x.bl_tree);while(--X!=0);else V!==0?(V!==B&&(G(x,V,x.bl_tree),X--),G(x,F,x.bl_tree),Ne(x,X-3,2)):X<=10?(G(x,Z,x.bl_tree),Ne(x,X-3,3)):(G(x,j,x.bl_tree),Ne(x,X-11,7));X=0,B=V,_===0?(_e=138,h=3):V===_?(_e=6,h=3):(_e=7,h=4)}}function ut(x){var $;for(Et(x,x.dyn_ltree,x.l_desc.max_code),Et(x,x.dyn_dtree,x.d_desc.max_code),ft(x,x.bl_desc),$=I-1;$>=3&&x.bl_tree[ge[$]*2+1]===0;$--);return x.opt_len+=3*($+1)+5+5+4,$}function Ft(x,$,Q,oe){var B;for(Ne(x,$-257,5),Ne(x,Q-1,5),Ne(x,oe-4,4),B=0;B<oe;B++)Ne(x,x.bl_tree[ge[B]*2+1],3);xt(x,x.dyn_ltree,$-1),xt(x,x.dyn_dtree,Q-1)}function Xt(x){var $=4093624447,Q;for(Q=0;Q<=31;Q++,$>>>=1)if($&1&&x.dyn_ltree[Q*2]!==0)return u;if(x.dyn_ltree[9*2]!==0||x.dyn_ltree[10*2]!==0||x.dyn_ltree[13*2]!==0)return l;for(Q=32;Q<g;Q++)if(x.dyn_ltree[Q*2]!==0)return l;return u}var St=!1;function fr(x){St||(ye(),St=!0),x.l_desc=new xe(x.dyn_ltree,We),x.d_desc=new xe(x.dyn_dtree,Ze),x.bl_desc=new xe(x.bl_tree,qe),x.bi_buf=0,x.bi_valid=0,Ee(x)}function Yt(x,$,Q,oe){Ne(x,(p<<1)+(oe?1:0),3),Pe(x,$,Q,!0)}function at(x){Ne(x,v<<1,3),G(x,z,he),se(x)}function Dt(x,$,Q,oe){var B,V,_=0;x.level>0?(x.strm.data_type===c&&(x.strm.data_type=Xt(x)),ft(x,x.l_desc),ft(x,x.d_desc),_=ut(x),B=x.opt_len+3+7>>>3,V=x.static_len+3+7>>>3,V<=B&&(B=V)):B=V=Q+5,Q+4<=B&&$!==-1?Yt(x,$,Q,oe):x.strategy===o||V===B?(Ne(x,(v<<1)+(oe?1:0),3),be(x,he,Ce)):(Ne(x,(m<<1)+(oe?1:0),3),Ft(x,x.l_desc.max_code+1,x.d_desc.max_code+1,_+1),be(x,x.dyn_ltree,x.dyn_dtree)),Ee(x),oe&&Ke(x)}function br(x,$,Q){return x.pending_buf[x.d_buf+x.last_lit*2]=$>>>8&255,x.pending_buf[x.d_buf+x.last_lit*2+1]=$&255,x.pending_buf[x.l_buf+x.last_lit]=Q&255,x.last_lit++,$===0?x.dyn_ltree[Q*2]++:(x.matches++,$--,x.dyn_ltree[(Re[Q]+g+1)*2]++,x.dyn_dtree[et($)*2]++),x.last_lit===x.lit_bufsize-1}s._tr_init=fr,s._tr_stored_block=Yt,s._tr_flush_block=Dt,s._tr_tally=br,s._tr_align=at},{"../utils/common":41}],53:[function(r,n,s){"use strict";function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n.exports=a},{}],54:[function(r,n,s){(function(a){(function(o,u){"use strict";if(o.setImmediate)return;var l=1,c={},f=!1,p=o.document,v;function m(N){typeof N!="function"&&(N=new Function(""+N));for(var z=new Array(arguments.length-1),F=0;F<z.length;F++)z[F]=arguments[F+1];var Z={callback:N,args:z};return c[l]=Z,v(l),l++}function C(N){delete c[N]}function S(N){var z=N.callback,F=N.args;switch(F.length){case 0:z();break;case 1:z(F[0]);break;case 2:z(F[0],F[1]);break;case 3:z(F[0],F[1],F[2]);break;default:z.apply(u,F);break}}function d(N){if(f)setTimeout(d,0,N);else{var z=c[N];if(z){f=!0;try{S(z)}finally{C(N),f=!1}}}}function g(){v=function(N){process.nextTick(function(){d(N)})}}function y(){if(o.postMessage&&!o.importScripts){var N=!0,z=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=z,N}}function T(){var N="setImmediate$"+Math.random()+"$",z=function(F){F.source===o&&typeof F.data=="string"&&F.data.indexOf(N)===0&&d(+F.data.slice(N.length))};o.addEventListener?o.addEventListener("message",z,!1):o.attachEvent("onmessage",z),v=function(F){o.postMessage(N+F,"*")}}function I(){var N=new MessageChannel;N.port1.onmessage=function(z){var F=z.data;d(F)},v=function(z){N.port2.postMessage(z)}}function w(){var N=p.documentElement;v=function(z){var F=p.createElement("script");F.onreadystatechange=function(){d(z),F.onreadystatechange=null,N.removeChild(F),F=null},N.appendChild(F)}}function A(){v=function(N){setTimeout(d,0,N)}}var k=Object.getPrototypeOf&&Object.getPrototypeOf(o);k=k&&k.setTimeout?k:o,{}.toString.call(o.process)==="[object process]"?g():y()?T():o.MessageChannel?I():p&&"onreadystatechange"in p.createElement("script")?w():A(),k.setImmediate=m,k.clearImmediate=C})(typeof self=="undefined"?typeof a=="undefined"?this:a:self)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})});var id=J(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.default=void 0;var pi=Ve(),i_=ks(Ki()),td=ks(ns()),n_=ks(xr()),s_=ks(ed());function ks(i){return i&&i.__esModule?i:{default:i}}var rd=class{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new s_.default}catch(e){throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return(0,i_.default)(e,"binary").then(function(r){return this.zip.loadAsync(r,{base64:t})}.bind(this))}request(e,t){var r=new pi.defer,n,s=new n_.default(e);return t||(t=s.extension),t=="blob"?n=this.getBlob(e):n=this.getText(e),n?n.then(function(a){let o=this.handleResponse(a,t);r.resolve(o)}.bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):(0,pi.isXml)(t)?r=(0,pi.parse)(e,"text/xml"):t=="xhtml"?r=(0,pi.parse)(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=(0,pi.parse)(e,"text/html"):r=e,r}getBlob(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return t=t||td.default.lookup(n.name),n.async("uint8array").then(function(s){return new Blob([s],{type:t})})}getText(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return n.async("string").then(function(s){return s})}getBase64(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return t=t||td.default.lookup(n.name),n.async("base64").then(function(s){return"data:"+t+";base64,"+s})}createUrl(e,t){var r=new pi.defer,n=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then(function(u){this.urlCache[e]=u,r.resolve(u)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(u){s=n.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}.bind(this))),a||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}},a_=rd;Os.default=a_});var sd=J((nd,ko)=>{(function(i){if(typeof nd=="object"&&typeof ko!="undefined")ko.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var e;typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:typeof self!="undefined"?e=self:e=this,e.localforage=i()}})(function(){var i,e,t;return function r(n,s,a){function o(c,f){if(!s[c]){if(!n[c]){var p=typeof require=="function"&&require;if(!f&&p)return p(c,!0);if(u)return u(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var m=s[c]={exports:{}};n[c][0].call(m.exports,function(C){var S=n[c][1][C];return o(S||C)},m,m.exports,r,n,s,a)}return s[c].exports}for(var u=typeof require=="function"&&require,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(r,n,s){(function(a){"use strict";var o=a.MutationObserver||a.WebKitMutationObserver,u;if(o){var l=0,c=new o(C),f=a.document.createTextNode("");c.observe(f,{characterData:!0}),u=function(){f.data=l=++l%2}}else if(!a.setImmediate&&typeof a.MessageChannel!="undefined"){var p=new a.MessageChannel;p.port1.onmessage=C,u=function(){p.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?u=function(){var d=a.document.createElement("script");d.onreadystatechange=function(){C(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},a.document.documentElement.appendChild(d)}:u=function(){setTimeout(C,0)};var v,m=[];function C(){v=!0;for(var d,g,y=m.length;y;){for(g=m,m=[],d=-1;++d<y;)g[d]();y=m.length}v=!1}n.exports=S;function S(d){m.push(d)===1&&!v&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(r,n,s){"use strict";var a=r(1);function o(){}var u={},l=["REJECTED"],c=["FULFILLED"],f=["PENDING"];n.exports=p;function p(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,w!==o&&S(this,w)}p.prototype.catch=function(w){return this.then(null,w)},p.prototype.then=function(w,A){if(typeof w!="function"&&this.state===c||typeof A!="function"&&this.state===l)return this;var k=new this.constructor(o);if(this.state!==f){var N=this.state===c?w:A;m(k,N,this.outcome)}else this.queue.push(new v(k,w,A));return k};function v(w,A,k){this.promise=w,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(w){u.resolve(this.promise,w)},v.prototype.otherCallFulfilled=function(w){m(this.promise,this.onFulfilled,w)},v.prototype.callRejected=function(w){u.reject(this.promise,w)},v.prototype.otherCallRejected=function(w){m(this.promise,this.onRejected,w)};function m(w,A,k){a(function(){var N;try{N=A(k)}catch(z){return u.reject(w,z)}N===w?u.reject(w,new TypeError("Cannot resolve promise with itself")):u.resolve(w,N)})}u.resolve=function(w,A){var k=d(C,A);if(k.status==="error")return u.reject(w,k.value);var N=k.value;if(N)S(w,N);else{w.state=c,w.outcome=A;for(var z=-1,F=w.queue.length;++z<F;)w.queue[z].callFulfilled(A)}return w},u.reject=function(w,A){w.state=l,w.outcome=A;for(var k=-1,N=w.queue.length;++k<N;)w.queue[k].callRejected(A);return w};function C(w){var A=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof A=="function")return function(){A.apply(w,arguments)}}function S(w,A){var k=!1;function N(j){k||(k=!0,u.reject(w,j))}function z(j){k||(k=!0,u.resolve(w,j))}function F(){A(z,N)}var Z=d(F);Z.status==="error"&&N(Z.value)}function d(w,A){var k={};try{k.value=w(A),k.status="success"}catch(N){k.status="error",k.value=N}return k}p.resolve=g;function g(w){return w instanceof this?w:u.resolve(new this(o),w)}p.reject=y;function y(w){var A=new this(o);return u.reject(A,w)}p.all=T;function T(w){var A=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=w.length,N=!1;if(!k)return this.resolve([]);for(var z=new Array(k),F=0,Z=-1,j=new this(o);++Z<k;)ie(w[Z],Z);return j;function ie(pe,ne){A.resolve(pe).then(ge,function(ve){N||(N=!0,u.reject(j,ve))});function ge(ve){z[ne]=ve,++F===k&&!N&&(N=!0,u.resolve(j,z))}}}p.race=I;function I(w){var A=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=w.length,N=!1;if(!k)return this.resolve([]);for(var z=-1,F=new this(o);++z<k;)Z(w[z]);return F;function Z(j){A.resolve(j).then(function(ie){N||(N=!0,u.resolve(F,ie))},function(ie){N||(N=!0,u.reject(F,ie))})}}},{"1":1}],3:[function(r,n,s){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=r(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(r,n,s){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E};function o(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(E){return}}var l=u();function c(){try{if(!l||!l.open)return!1;var E=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),O=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!E||O)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(D){return!1}}function f(E,O){E=E||[],O=O||{};try{return new Blob(E,O)}catch(L){if(L.name!=="TypeError")throw L;for(var D=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,P=new D,M=0;M<E.length;M+=1)P.append(E[M]);return P.getBlob(O.type)}}typeof Promise=="undefined"&&r(3);var p=Promise;function v(E,O){O&&E.then(function(D){O(null,D)},function(D){O(D)})}function m(E,O,D){typeof O=="function"&&E.then(O),typeof D=="function"&&E.catch(D)}function C(E){return typeof E!="string"&&(console.warn(E+" used as a key, but it is not a string."),E=String(E)),E}function S(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",g=void 0,y={},T=Object.prototype.toString,I="readonly",w="readwrite";function A(E){for(var O=E.length,D=new ArrayBuffer(O),P=new Uint8Array(D),M=0;M<O;M++)P[M]=E.charCodeAt(M);return D}function k(E){return new p(function(O){var D=E.transaction(d,w),P=f([""]);D.objectStore(d).put(P,"key"),D.onabort=function(M){M.preventDefault(),M.stopPropagation(),O(!1)},D.oncomplete=function(){var M=navigator.userAgent.match(/Chrome\/(\d+)/),L=navigator.userAgent.match(/Edge\//);O(L||!M||parseInt(M[1],10)>=43)}}).catch(function(){return!1})}function N(E){return typeof g=="boolean"?p.resolve(g):k(E).then(function(O){return g=O,g})}function z(E){var O=y[E.name],D={};D.promise=new p(function(P,M){D.resolve=P,D.reject=M}),O.deferredOperations.push(D),O.dbReady?O.dbReady=O.dbReady.then(function(){return D.promise}):O.dbReady=D.promise}function F(E){var O=y[E.name],D=O.deferredOperations.pop();if(D)return D.resolve(),D.promise}function Z(E,O){var D=y[E.name],P=D.deferredOperations.pop();if(P)return P.reject(O),P.promise}function j(E,O){return new p(function(D,P){if(y[E.name]=y[E.name]||de(),E.db)if(O)z(E),E.db.close();else return D(E.db);var M=[E.name];O&&M.push(E.version);var L=l.open.apply(l,M);O&&(L.onupgradeneeded=function(H){var K=L.result;try{K.createObjectStore(E.storeName),H.oldVersion<=1&&K.createObjectStore(d)}catch(ee){if(ee.name==="ConstraintError")console.warn('The database "'+E.name+'" has been upgraded from version '+H.oldVersion+" to version "+H.newVersion+', but the storage "'+E.storeName+'" already exists.');else throw ee}}),L.onerror=function(H){H.preventDefault(),P(L.error)},L.onsuccess=function(){var H=L.result;H.onversionchange=function(K){K.target.close()},D(H),F(E)}})}function ie(E){return j(E,!1)}function pe(E){return j(E,!0)}function ne(E,O){if(!E.db)return!0;var D=!E.db.objectStoreNames.contains(E.storeName),P=E.version<E.db.version,M=E.version>E.db.version;if(P&&(E.version!==O&&console.warn('The database "'+E.name+`" can't be downgraded from version `+E.db.version+" to version "+E.version+"."),E.version=E.db.version),M||D){if(D){var L=E.db.version+1;L>E.version&&(E.version=L)}return!0}return!1}function ge(E){return new p(function(O,D){var P=new FileReader;P.onerror=D,P.onloadend=function(M){var L=btoa(M.target.result||"");O({__local_forage_encoded_blob:!0,data:L,type:E.type})},P.readAsBinaryString(E)})}function ve(E){var O=A(atob(E.data));return f([O],{type:E.type})}function he(E){return E&&E.__local_forage_encoded_blob}function Ce(E){var O=this,D=O._initReady().then(function(){var P=y[O._dbInfo.name];if(P&&P.dbReady)return P.dbReady});return m(D,E,E),D}function Be(E){z(E);for(var O=y[E.name],D=O.forages,P=0;P<D.length;P++){var M=D[P];M._dbInfo.db&&(M._dbInfo.db.close(),M._dbInfo.db=null)}return E.db=null,ie(E).then(function(L){return E.db=L,ne(E)?pe(E):L}).then(function(L){E.db=O.db=L;for(var H=0;H<D.length;H++)D[H]._dbInfo.db=L}).catch(function(L){throw Z(E,L),L})}function Re(E,O,D,P){P===void 0&&(P=1);try{var M=E.db.transaction(E.storeName,O);D(null,M)}catch(L){if(P>0&&(!E.db||L.name==="InvalidStateError"||L.name==="NotFoundError"))return p.resolve().then(function(){if(!E.db||L.name==="NotFoundError"&&!E.db.objectStoreNames.contains(E.storeName)&&E.version<=E.db.version)return E.db&&(E.version=E.db.version+1),pe(E)}).then(function(){return Be(E).then(function(){Re(E,O,D,P-1)})}).catch(D);D(L)}}function de(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ie(E){var O=this,D={db:null};if(E)for(var P in E)D[P]=E[P];var M=y[D.name];M||(M=de(),y[D.name]=M),M.forages.push(O),O._initReady||(O._initReady=O.ready,O.ready=Ce);var L=[];function H(){return p.resolve()}for(var K=0;K<M.forages.length;K++){var ee=M.forages[K];ee!==O&&L.push(ee._initReady().catch(H))}var te=M.forages.slice(0);return p.all(L).then(function(){return D.db=M.db,ie(D)}).then(function(re){return D.db=re,ne(D,O._defaultConfig.version)?pe(D):re}).then(function(re){D.db=M.db=re,O._dbInfo=D;for(var ce=0;ce<te.length;ce++){var Ae=te[ce];Ae!==O&&(Ae._dbInfo.db=D.db,Ae._dbInfo.version=D.version)}})}function Te(E,O){var D=this;E=C(E);var P=new p(function(M,L){D.ready().then(function(){Re(D._dbInfo,I,function(H,K){if(H)return L(H);try{var ee=K.objectStore(D._dbInfo.storeName),te=ee.get(E);te.onsuccess=function(){var re=te.result;re===void 0&&(re=null),he(re)&&(re=ve(re)),M(re)},te.onerror=function(){L(te.error)}}catch(re){L(re)}})}).catch(L)});return v(P,O),P}function We(E,O){var D=this,P=new p(function(M,L){D.ready().then(function(){Re(D._dbInfo,I,function(H,K){if(H)return L(H);try{var ee=K.objectStore(D._dbInfo.storeName),te=ee.openCursor(),re=1;te.onsuccess=function(){var ce=te.result;if(ce){var Ae=ce.value;he(Ae)&&(Ae=ve(Ae));var Le=E(Ae,ce.key,re++);Le!==void 0?M(Le):ce.continue()}else M()},te.onerror=function(){L(te.error)}}catch(ce){L(ce)}})}).catch(L)});return v(P,O),P}function Ze(E,O,D){var P=this;E=C(E);var M=new p(function(L,H){var K;P.ready().then(function(){return K=P._dbInfo,T.call(O)==="[object Blob]"?N(K.db).then(function(ee){return ee?O:ge(O)}):O}).then(function(ee){Re(P._dbInfo,w,function(te,re){if(te)return H(te);try{var ce=re.objectStore(P._dbInfo.storeName);ee===null&&(ee=void 0);var Ae=ce.put(ee,E);re.oncomplete=function(){ee===void 0&&(ee=null),L(ee)},re.onabort=re.onerror=function(){var Le=Ae.error?Ae.error:Ae.transaction.error;H(Le)}}catch(Le){H(Le)}})}).catch(H)});return v(M,D),M}function qe(E,O){var D=this;E=C(E);var P=new p(function(M,L){D.ready().then(function(){Re(D._dbInfo,w,function(H,K){if(H)return L(H);try{var ee=K.objectStore(D._dbInfo.storeName),te=ee.delete(E);K.oncomplete=function(){M()},K.onerror=function(){L(te.error)},K.onabort=function(){var re=te.error?te.error:te.transaction.error;L(re)}}catch(re){L(re)}})}).catch(L)});return v(P,O),P}function xe(E){var O=this,D=new p(function(P,M){O.ready().then(function(){Re(O._dbInfo,w,function(L,H){if(L)return M(L);try{var K=H.objectStore(O._dbInfo.storeName),ee=K.clear();H.oncomplete=function(){P()},H.onabort=H.onerror=function(){var te=ee.error?ee.error:ee.transaction.error;M(te)}}catch(te){M(te)}})}).catch(M)});return v(D,E),D}function et(E){var O=this,D=new p(function(P,M){O.ready().then(function(){Re(O._dbInfo,I,function(L,H){if(L)return M(L);try{var K=H.objectStore(O._dbInfo.storeName),ee=K.count();ee.onsuccess=function(){P(ee.result)},ee.onerror=function(){M(ee.error)}}catch(te){M(te)}})}).catch(M)});return v(D,E),D}function Ge(E,O){var D=this,P=new p(function(M,L){if(E<0){M(null);return}D.ready().then(function(){Re(D._dbInfo,I,function(H,K){if(H)return L(H);try{var ee=K.objectStore(D._dbInfo.storeName),te=!1,re=ee.openKeyCursor();re.onsuccess=function(){var ce=re.result;if(!ce){M(null);return}E===0||te?M(ce.key):(te=!0,ce.advance(E))},re.onerror=function(){L(re.error)}}catch(ce){L(ce)}})}).catch(L)});return v(P,O),P}function Ne(E){var O=this,D=new p(function(P,M){O.ready().then(function(){Re(O._dbInfo,I,function(L,H){if(L)return M(L);try{var K=H.objectStore(O._dbInfo.storeName),ee=K.openKeyCursor(),te=[];ee.onsuccess=function(){var re=ee.result;if(!re){P(te);return}te.push(re.key),re.continue()},ee.onerror=function(){M(ee.error)}}catch(re){M(re)}})}).catch(M)});return v(D,E),D}function G(E,O){O=S.apply(this,arguments);var D=this.config();E=typeof E!="function"&&E||{},E.name||(E.name=E.name||D.name,E.storeName=E.storeName||D.storeName);var P=this,M;if(!E.name)M=p.reject("Invalid arguments");else{var L=E.name===D.name&&P._dbInfo.db,H=L?p.resolve(P._dbInfo.db):ie(E).then(function(K){var ee=y[E.name],te=ee.forages;ee.db=K;for(var re=0;re<te.length;re++)te[re]._dbInfo.db=K;return K});E.storeName?M=H.then(function(K){if(!!K.objectStoreNames.contains(E.storeName)){var ee=K.version+1;z(E);var te=y[E.name],re=te.forages;K.close();for(var ce=0;ce<re.length;ce++){var Ae=re[ce];Ae._dbInfo.db=null,Ae._dbInfo.version=ee}var Le=new p(function(Fe,nt){var rt=l.open(E.name,ee);rt.onerror=function(zt){var Ei=rt.result;Ei.close(),nt(zt)},rt.onupgradeneeded=function(){var zt=rt.result;zt.deleteObjectStore(E.storeName)},rt.onsuccess=function(){var zt=rt.result;zt.close(),Fe(zt)}});return Le.then(function(Fe){te.db=Fe;for(var nt=0;nt<re.length;nt++){var rt=re[nt];rt._dbInfo.db=Fe,F(rt._dbInfo)}}).catch(function(Fe){throw(Z(E,Fe)||p.resolve()).catch(function(){}),Fe})}}):M=H.then(function(K){z(E);var ee=y[E.name],te=ee.forages;K.close();for(var re=0;re<te.length;re++){var ce=te[re];ce._dbInfo.db=null}var Ae=new p(function(Le,Fe){var nt=l.deleteDatabase(E.name);nt.onerror=function(){var rt=nt.result;rt&&rt.close(),Fe(nt.error)},nt.onblocked=function(){console.warn('dropInstance blocked for database "'+E.name+'" until all open connections are closed')},nt.onsuccess=function(){var rt=nt.result;rt&&rt.close(),Le(rt)}});return Ae.then(function(Le){ee.db=Le;for(var Fe=0;Fe<te.length;Fe++){var nt=te[Fe];F(nt._dbInfo)}}).catch(function(Le){throw(Z(E,Le)||p.resolve()).catch(function(){}),Le})})}return v(M,O),M}var Y={_driver:"asyncStorage",_initStorage:Ie,_support:c(),iterate:We,getItem:Te,setItem:Ze,removeItem:qe,clear:xe,length:et,key:Ge,keys:Ne,dropInstance:G};function se(){return typeof openDatabase=="function"}var le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",me="~~local_forage_type~",ye=/^~~local_forage_type~([^~]+)~/,Ee="__lfsc__:",Ke=Ee.length,Pe="arbf",$e="blob",De="si08",be="ui08",ft="uic8",Et="si16",xt="si32",ut="ur16",Ft="ui32",Xt="fl32",St="fl64",fr=Ke+Pe.length,Yt=Object.prototype.toString;function at(E){var O=E.length*.75,D=E.length,P,M=0,L,H,K,ee;E[E.length-1]==="="&&(O--,E[E.length-2]==="="&&O--);var te=new ArrayBuffer(O),re=new Uint8Array(te);for(P=0;P<D;P+=4)L=le.indexOf(E[P]),H=le.indexOf(E[P+1]),K=le.indexOf(E[P+2]),ee=le.indexOf(E[P+3]),re[M++]=L<<2|H>>4,re[M++]=(H&15)<<4|K>>2,re[M++]=(K&3)<<6|ee&63;return te}function Dt(E){var O=new Uint8Array(E),D="",P;for(P=0;P<O.length;P+=3)D+=le[O[P]>>2],D+=le[(O[P]&3)<<4|O[P+1]>>4],D+=le[(O[P+1]&15)<<2|O[P+2]>>6],D+=le[O[P+2]&63];return O.length%3==2?D=D.substring(0,D.length-1)+"=":O.length%3==1&&(D=D.substring(0,D.length-2)+"=="),D}function br(E,O){var D="";if(E&&(D=Yt.call(E)),E&&(D==="[object ArrayBuffer]"||E.buffer&&Yt.call(E.buffer)==="[object ArrayBuffer]")){var P,M=Ee;E instanceof ArrayBuffer?(P=E,M+=Pe):(P=E.buffer,D==="[object Int8Array]"?M+=De:D==="[object Uint8Array]"?M+=be:D==="[object Uint8ClampedArray]"?M+=ft:D==="[object Int16Array]"?M+=Et:D==="[object Uint16Array]"?M+=ut:D==="[object Int32Array]"?M+=xt:D==="[object Uint32Array]"?M+=Ft:D==="[object Float32Array]"?M+=Xt:D==="[object Float64Array]"?M+=St:O(new Error("Failed to get type for BinaryArray"))),O(M+Dt(P))}else if(D==="[object Blob]"){var L=new FileReader;L.onload=function(){var H=me+E.type+"~"+Dt(this.result);O(Ee+$e+H)},L.readAsArrayBuffer(E)}else try{O(JSON.stringify(E))}catch(H){console.error("Couldn't convert value into a JSON string: ",E),O(null,H)}}function x(E){if(E.substring(0,Ke)!==Ee)return JSON.parse(E);var O=E.substring(fr),D=E.substring(Ke,fr),P;if(D===$e&&ye.test(O)){var M=O.match(ye);P=M[1],O=O.substring(M[0].length)}var L=at(O);switch(D){case Pe:return L;case $e:return f([L],{type:P});case De:return new Int8Array(L);case be:return new Uint8Array(L);case ft:return new Uint8ClampedArray(L);case Et:return new Int16Array(L);case ut:return new Uint16Array(L);case xt:return new Int32Array(L);case Ft:return new Uint32Array(L);case Xt:return new Float32Array(L);case St:return new Float64Array(L);default:throw new Error("Unkown type: "+D)}}var $={serialize:br,deserialize:x,stringToBuffer:at,bufferToString:Dt};function Q(E,O,D,P){E.executeSql("CREATE TABLE IF NOT EXISTS "+O.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],D,P)}function oe(E){var O=this,D={db:null};if(E)for(var P in E)D[P]=typeof E[P]!="string"?E[P].toString():E[P];var M=new p(function(L,H){try{D.db=openDatabase(D.name,String(D.version),D.description,D.size)}catch(K){return H(K)}D.db.transaction(function(K){Q(K,D,function(){O._dbInfo=D,L()},function(ee,te){H(te)})},H)});return D.serializer=$,M}function B(E,O,D,P,M,L){E.executeSql(D,P,M,function(H,K){K.code===K.SYNTAX_ERR?H.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[O.storeName],function(ee,te){te.rows.length?L(ee,K):Q(ee,O,function(){ee.executeSql(D,P,M,L)},L)},L):L(H,K)},L)}function V(E,O){var D=this;E=C(E);var P=new p(function(M,L){D.ready().then(function(){var H=D._dbInfo;H.db.transaction(function(K){B(K,H,"SELECT * FROM "+H.storeName+" WHERE key = ? LIMIT 1",[E],function(ee,te){var re=te.rows.length?te.rows.item(0).value:null;re&&(re=H.serializer.deserialize(re)),M(re)},function(ee,te){L(te)})})}).catch(L)});return v(P,O),P}function _(E,O){var D=this,P=new p(function(M,L){D.ready().then(function(){var H=D._dbInfo;H.db.transaction(function(K){B(K,H,"SELECT * FROM "+H.storeName,[],function(ee,te){for(var re=te.rows,ce=re.length,Ae=0;Ae<ce;Ae++){var Le=re.item(Ae),Fe=Le.value;if(Fe&&(Fe=H.serializer.deserialize(Fe)),Fe=E(Fe,Le.key,Ae+1),Fe!==void 0){M(Fe);return}}M()},function(ee,te){L(te)})})}).catch(L)});return v(P,O),P}function X(E,O,D,P){var M=this;E=C(E);var L=new p(function(H,K){M.ready().then(function(){O===void 0&&(O=null);var ee=O,te=M._dbInfo;te.serializer.serialize(O,function(re,ce){ce?K(ce):te.db.transaction(function(Ae){B(Ae,te,"INSERT OR REPLACE INTO "+te.storeName+" (key, value) VALUES (?, ?)",[E,re],function(){H(ee)},function(Le,Fe){K(Fe)})},function(Ae){if(Ae.code===Ae.QUOTA_ERR){if(P>0){H(X.apply(M,[E,ee,D,P-1]));return}K(Ae)}})})}).catch(K)});return v(L,D),L}function _e(E,O,D){return X.apply(this,[E,O,D,1])}function h(E,O){var D=this;E=C(E);var P=new p(function(M,L){D.ready().then(function(){var H=D._dbInfo;H.db.transaction(function(K){B(K,H,"DELETE FROM "+H.storeName+" WHERE key = ?",[E],function(){M()},function(ee,te){L(te)})})}).catch(L)});return v(P,O),P}function U(E){var O=this,D=new p(function(P,M){O.ready().then(function(){var L=O._dbInfo;L.db.transaction(function(H){B(H,L,"DELETE FROM "+L.storeName,[],function(){P()},function(K,ee){M(ee)})})}).catch(M)});return v(D,E),D}function W(E){var O=this,D=new p(function(P,M){O.ready().then(function(){var L=O._dbInfo;L.db.transaction(function(H){B(H,L,"SELECT COUNT(key) as c FROM "+L.storeName,[],function(K,ee){var te=ee.rows.item(0).c;P(te)},function(K,ee){M(ee)})})}).catch(M)});return v(D,E),D}function b(E,O){var D=this,P=new p(function(M,L){D.ready().then(function(){var H=D._dbInfo;H.db.transaction(function(K){B(K,H,"SELECT key FROM "+H.storeName+" WHERE id = ? LIMIT 1",[E+1],function(ee,te){var re=te.rows.length?te.rows.item(0).key:null;M(re)},function(ee,te){L(te)})})}).catch(L)});return v(P,O),P}function R(E){var O=this,D=new p(function(P,M){O.ready().then(function(){var L=O._dbInfo;L.db.transaction(function(H){B(H,L,"SELECT key FROM "+L.storeName,[],function(K,ee){for(var te=[],re=0;re<ee.rows.length;re++)te.push(ee.rows.item(re).key);P(te)},function(K,ee){M(ee)})})}).catch(M)});return v(D,E),D}function q(E){return new p(function(O,D){E.transaction(function(P){P.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(M,L){for(var H=[],K=0;K<L.rows.length;K++)H.push(L.rows.item(K).name);O({db:E,storeNames:H})},function(M,L){D(L)})},function(P){D(P)})})}function fe(E,O){O=S.apply(this,arguments);var D=this.config();E=typeof E!="function"&&E||{},E.name||(E.name=E.name||D.name,E.storeName=E.storeName||D.storeName);var P=this,M;return E.name?M=new p(function(L){var H;E.name===D.name?H=P._dbInfo.db:H=openDatabase(E.name,"","",0),E.storeName?L({db:H,storeNames:[E.storeName]}):L(q(H))}).then(function(L){return new p(function(H,K){L.db.transaction(function(ee){function te(Le){return new p(function(Fe,nt){ee.executeSql("DROP TABLE IF EXISTS "+Le,[],function(){Fe()},function(rt,zt){nt(zt)})})}for(var re=[],ce=0,Ae=L.storeNames.length;ce<Ae;ce++)re.push(te(L.storeNames[ce]));p.all(re).then(function(){H()}).catch(function(Le){K(Le)})},function(ee){K(ee)})})}):M=p.reject("Invalid arguments"),v(M,O),M}var ae={_driver:"webSQLStorage",_initStorage:oe,_support:se(),iterate:_,getItem:V,setItem:_e,removeItem:h,clear:U,length:W,key:b,keys:R,dropInstance:fe};function ue(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(E){return!1}}function ke(E,O){var D=E.name+"/";return E.storeName!==O.storeName&&(D+=E.storeName+"/"),D}function Kt(){var E="_localforage_support_test";try{return localStorage.setItem(E,!0),localStorage.removeItem(E),!1}catch(O){return!0}}function Xe(){return!Kt()||localStorage.length>0}function Oe(E){var O=this,D={};if(E)for(var P in E)D[P]=E[P];return D.keyPrefix=ke(E,O._defaultConfig),Xe()?(O._dbInfo=D,D.serializer=$,p.resolve()):p.reject()}function tt(E){var O=this,D=O.ready().then(function(){for(var P=O._dbInfo.keyPrefix,M=localStorage.length-1;M>=0;M--){var L=localStorage.key(M);L.indexOf(P)===0&&localStorage.removeItem(L)}});return v(D,E),D}function lt(E,O){var D=this;E=C(E);var P=D.ready().then(function(){var M=D._dbInfo,L=localStorage.getItem(M.keyPrefix+E);return L&&(L=M.serializer.deserialize(L)),L});return v(P,O),P}function vt(E,O){var D=this,P=D.ready().then(function(){for(var M=D._dbInfo,L=M.keyPrefix,H=L.length,K=localStorage.length,ee=1,te=0;te<K;te++){var re=localStorage.key(te);if(re.indexOf(L)===0){var ce=localStorage.getItem(re);if(ce&&(ce=M.serializer.deserialize(ce)),ce=E(ce,re.substring(H),ee++),ce!==void 0)return ce}}});return v(P,O),P}function Hr(E,O){var D=this,P=D.ready().then(function(){var M=D._dbInfo,L;try{L=localStorage.key(E)}catch(H){L=null}return L&&(L=L.substring(M.keyPrefix.length)),L});return v(P,O),P}function Zr(E){var O=this,D=O.ready().then(function(){for(var P=O._dbInfo,M=localStorage.length,L=[],H=0;H<M;H++){var K=localStorage.key(H);K.indexOf(P.keyPrefix)===0&&L.push(K.substring(P.keyPrefix.length))}return L});return v(D,E),D}function Je(E){var O=this,D=O.keys().then(function(P){return P.length});return v(D,E),D}function Ct(E,O){var D=this;E=C(E);var P=D.ready().then(function(){var M=D._dbInfo;localStorage.removeItem(M.keyPrefix+E)});return v(P,O),P}function ot(E,O,D){var P=this;E=C(E);var M=P.ready().then(function(){O===void 0&&(O=null);var L=O;return new p(function(H,K){var ee=P._dbInfo;ee.serializer.serialize(O,function(te,re){if(re)K(re);else try{localStorage.setItem(ee.keyPrefix+E,te),H(L)}catch(ce){(ce.name==="QuotaExceededError"||ce.name==="NS_ERROR_DOM_QUOTA_REACHED")&&K(ce),K(ce)}})})});return v(M,D),M}function Jt(E,O){if(O=S.apply(this,arguments),E=typeof E!="function"&&E||{},!E.name){var D=this.config();E.name=E.name||D.name,E.storeName=E.storeName||D.storeName}var P=this,M;return E.name?M=new p(function(L){E.storeName?L(ke(E,P._defaultConfig)):L(E.name+"/")}).then(function(L){for(var H=localStorage.length-1;H>=0;H--){var K=localStorage.key(H);K.indexOf(L)===0&&localStorage.removeItem(K)}}):M=p.reject("Invalid arguments"),v(M,O),M}var Mt={_driver:"localStorageWrapper",_initStorage:Oe,_support:ue(),iterate:vt,getItem:lt,setItem:ot,removeItem:Ct,clear:tt,length:Je,key:Hr,keys:Zr,dropInstance:Jt},un=function(O,D){return O===D||typeof O=="number"&&typeof D=="number"&&isNaN(O)&&isNaN(D)},Yd=function(O,D){for(var P=O.length,M=0;M<P;){if(un(O[M],D))return!0;M++}return!1},Yo=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"},wi={},Ko={},Gr={INDEXEDDB:Y,WEBSQL:ae,LOCALSTORAGE:Mt},Kd=[Gr.INDEXEDDB._driver,Gr.WEBSQL._driver,Gr.LOCALSTORAGE._driver],ln=["dropInstance"],$s=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ln),Jd={description:"",driver:Kd.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Qd(E,O){E[O]=function(){var D=arguments;return E.ready().then(function(){return E[O].apply(E,D)})}}function Xs(){for(var E=1;E<arguments.length;E++){var O=arguments[E];if(O)for(var D in O)O.hasOwnProperty(D)&&(Yo(O[D])?arguments[0][D]=O[D].slice():arguments[0][D]=O[D])}return arguments[0]}var ep=function(){function E(O){o(this,E);for(var D in Gr)if(Gr.hasOwnProperty(D)){var P=Gr[D],M=P._driver;this[D]=M,wi[M]||this.defineDriver(P)}this._defaultConfig=Xs({},Jd),this._config=Xs({},this._defaultConfig,O),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return E.prototype.config=function(D){if((typeof D=="undefined"?"undefined":a(D))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var P in D){if(P==="storeName"&&(D[P]=D[P].replace(/\W/g,"_")),P==="version"&&typeof D[P]!="number")return new Error("Database version must be a number.");this._config[P]=D[P]}return"driver"in D&&D.driver?this.setDriver(this._config.driver):!0}else return typeof D=="string"?this._config[D]:this._config},E.prototype.defineDriver=function(D,P,M){var L=new p(function(H,K){try{var ee=D._driver,te=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!D._driver){K(te);return}for(var re=$s.concat("_initStorage"),ce=0,Ae=re.length;ce<Ae;ce++){var Le=re[ce],Fe=!Yd(ln,Le);if((Fe||D[Le])&&typeof D[Le]!="function"){K(te);return}}var nt=function(){for(var Ei=function(ip){return function(){var np=new Error("Method "+ip+" is not implemented by the current driver"),Jo=p.reject(np);return v(Jo,arguments[arguments.length-1]),Jo}},Ys=0,rp=ln.length;Ys<rp;Ys++){var Ks=ln[Ys];D[Ks]||(D[Ks]=Ei(Ks))}};nt();var rt=function(Ei){wi[ee]&&console.info("Redefining LocalForage driver: "+ee),wi[ee]=D,Ko[ee]=Ei,H()};"_support"in D?D._support&&typeof D._support=="function"?D._support().then(rt,K):rt(!!D._support):rt(!0)}catch(zt){K(zt)}});return m(L,P,M),L},E.prototype.driver=function(){return this._driver||null},E.prototype.getDriver=function(D,P,M){var L=wi[D]?p.resolve(wi[D]):p.reject(new Error("Driver not found."));return m(L,P,M),L},E.prototype.getSerializer=function(D){var P=p.resolve($);return m(P,D),P},E.prototype.ready=function(D){var P=this,M=P._driverSet.then(function(){return P._ready===null&&(P._ready=P._initDriver()),P._ready});return m(M,D,D),M},E.prototype.setDriver=function(D,P,M){var L=this;Yo(D)||(D=[D]);var H=this._getSupportedDrivers(D);function K(){L._config.driver=L.driver()}function ee(ce){return L._extend(ce),K(),L._ready=L._initStorage(L._config),L._ready}function te(ce){return function(){var Ae=0;function Le(){for(;Ae<ce.length;){var Fe=ce[Ae];return Ae++,L._dbInfo=null,L._ready=null,L.getDriver(Fe).then(ee).catch(Le)}K();var nt=new Error("No available storage method found.");return L._driverSet=p.reject(nt),L._driverSet}return Le()}}var re=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=re.then(function(){var ce=H[0];return L._dbInfo=null,L._ready=null,L.getDriver(ce).then(function(Ae){L._driver=Ae._driver,K(),L._wrapLibraryMethodsWithReady(),L._initDriver=te(H)})}).catch(function(){K();var ce=new Error("No available storage method found.");return L._driverSet=p.reject(ce),L._driverSet}),m(this._driverSet,P,M),this._driverSet},E.prototype.supports=function(D){return!!Ko[D]},E.prototype._extend=function(D){Xs(this,D)},E.prototype._getSupportedDrivers=function(D){for(var P=[],M=0,L=D.length;M<L;M++){var H=D[M];this.supports(H)&&P.push(H)}return P},E.prototype._wrapLibraryMethodsWithReady=function(){for(var D=0,P=$s.length;D<P;D++)Qd(this,$s[D])},E.prototype.createInstance=function(D){return new E(D)},E}(),tp=new ep;n.exports=tp},{"3":3}]},{},[4])(4)})});var od=J(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.default=void 0;var _r=Ve(),o_=an(Ki()),Oo=an(ns()),u_=an(xr()),l_=an(Qt()),ad=an(sd());function an(i){return i&&i.__esModule?i:{default:i}}var No=class{constructor(e,t,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||o_.default,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof ad.default=="undefined"&&(e=ad.default),this.storage=e.createInstance({name:this.name})}catch(e){throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let r=e.resources.map(n=>{let{href:s}=n,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(u=>!u||t?this.requester(a,"binary").then(l=>this.storage.setItem(o,l)):u)});return Promise.all(r)}put(e,t,r){let n=window.encodeURIComponent(e);return this.storage.getItem(n).then(s=>s||this.requester(e,"binary",t,r).then(a=>this.storage.setItem(n,a)))}request(e,t,r,n){return this.online?this.requester(e,t,r,n).then(s=>(this.put(e),s)):this.retrieve(e,t)}retrieve(e,t){var r=new _r.defer,n,s=new u_.default(e);return t||(t=s.extension),t=="blob"?n=this.getBlob(e):n=this.getText(e),n.then(a=>{var o=new _r.defer,u;return a?(u=this.handleResponse(a,t),o.resolve(u)):o.reject({message:"File not found in storage: "+e,stack:new Error().stack}),o.promise})}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):(0,_r.isXml)(t)?r=(0,_r.parse)(e,"text/xml"):t=="xhtml"?r=(0,_r.parse)(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=(0,_r.parse)(e,"text/html"):r=e,r}getBlob(e,t){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(n){if(!!n)return t=t||Oo.default.lookup(e),new Blob([n],{type:t})})}getText(e,t){let r=window.encodeURIComponent(e);return t=t||Oo.default.lookup(e),this.storage.getItem(r).then(function(n){var s=new _r.defer,a=new FileReader,o;if(!!n)return o=new Blob([n],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,t),s.promise})}getBase64(e,t){let r=window.encodeURIComponent(e);return t=t||Oo.default.lookup(e),this.storage.getItem(r).then(n=>{var s=new _r.defer,a=new FileReader,o;if(!!n)return o=new Blob([n],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,t),s.promise})}createUrl(e,t){var r=new _r.defer,n=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then(function(u){this.urlCache[e]=u,r.resolve(u)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(u){s=n.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}.bind(this))),a||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}};(0,l_.default)(No.prototype);var h_=No;Ns.default=h_});var hd=J(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.default=void 0;var ud=Ve(),ld=class{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;let t=(0,ud.qs)(e,"display_options");return t?((0,ud.qsa)(t,"option").forEach(n=>{let s="";switch(n.childNodes.length&&(s=n.childNodes[0].nodeValue),n.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}},f_=ld;Rs.default=f_});var Po=J(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.default=void 0;var c_=yt(Qt()),ir=Ve(),Tr=yt(Xi()),fd=yt(xr()),d_=yt(Sf()),p_=yt(Af()),g_=yt(kf()),cd=yt(Nf()),Ro=yt(If()),v_=yt(Ff()),Io=yt(zf()),m_=yt(Ts()),__=yt(id()),dd=yt(Ki()),y_=yt(Rt()),b_=yt(od()),Bo=yt(hd()),pd=Vt();function yt(i){return i&&i.__esModule?i:{default:i}}var gd="META-INF/container.xml",w_="META-INF/com.apple.ibooks.display-options.xml",nr={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"},Lo=class{constructor(e,t){typeof t=="undefined"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=(0,ir.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),(0,ir.extend)(this.settings,t),this.opening=new ir.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new ir.defer,spine:new ir.defer,metadata:new ir.defer,cover:new ir.defer,navigation:new ir.defer,pageList:new ir.defer,resources:new ir.defer,displayOptions:new ir.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||dd.default,this.spine=new d_.default,this.locations=new p_.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var n=new Error("Cannot load book at "+e);this.emit(pd.EVENTS.BOOK.OPEN_FAILED,n)})}open(e,t){var r,n=t||this.determineType(e);return n===nr.BINARY?(this.archived=!0,this.url=new Tr.default("/",""),r=this.openEpub(e)):n===nr.BASE64?(this.archived=!0,this.url=new Tr.default("/",""),r=this.openEpub(e,n)):n===nr.EPUB?(this.archived=!0,this.url=new Tr.default("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):n==nr.OPF?(this.url=new Tr.default(e),r=this.openPackaging(this.url.Path.toString())):n==nr.MANIFEST?(this.url=new Tr.default(e),r=this.openManifest(this.url.Path.toString())):(this.url=new Tr.default(e),r=this.openContainer(gd).then(this.openPackaging.bind(this))),r}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(gd)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(t=>(this.container=new g_.default(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new fd.default(e),this.load(e).then(t=>(this.packaging=new cd.default(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new fd.default(e),this.load(e).then(t=>(this.packaging=new cd.default,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(!!e){var r=e,n=e.indexOf("://")>-1;return n?e:(this.path&&(r=this.path.resolve(e)),t!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,r,n;if(this.settings.encoding==="base64")return nr.BASE64;if(typeof e!="string")return nr.BINARY;if(t=new Tr.default(e),r=t.path(),n=r.extension,n&&(n=n.replace(/\?.*$/,"")),!n)return nr.DIRECTORY;if(n==="epub")return nr.EPUB;if(n==="opf")return nr.OPF;if(n==="json")return nr.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(w_)).then(t=>{this.displayOptions=new Bo.default(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new Bo.default,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new Bo.default,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new v_.default(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((n,s)=>{this.navigation=new Ro.default(r),e.pageList&&(this.pageList=new Io.default(e.pageList)),n(this.navigation)}):t?this.load(t,"xml").then(n=>(this.navigation=new Ro.default(n),this.pageList=new Io.default(n),this.navigation)):new Promise((n,s)=>{this.navigation=new Ro.default,this.pageList=new Io.default,n(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new m_.default(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new __.default,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,n=this.settings.requestMethod||dd.default.bind(this);return this.storage=new b_.default(e,n,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Tr.default("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new y_.default(e),r=this.spine.get(t.spinePos),n=this.load.bind(this);return r?r.load(n).then(function(s){var a=t.toRange(r.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${pd.EPUBJS_VERSION}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}};(0,c_.default)(Lo.prototype);var E_=Lo;Is.default=E_});var yd=J(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.default=void 0;var vd=zr(Po()),x_=zr(Ts()),S_=zr(Rt()),D_=zr(en()),C_=A_(Ve()),md=Vt(),zb=zr(_o()),qb=zr(Ss()),Ub=zr(Co());function _d(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(_d=function(r){return r?t:e})(i)}function A_(i,e){if(!e&&i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var t=_d(e);if(t&&t.has(i))return t.get(i);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if(s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)){var a=n?Object.getOwnPropertyDescriptor(i,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=i[s]}return r.default=i,t&&t.set(i,r),r}function zr(i){return i&&i.__esModule?i:{default:i}}function qr(i,e){return new vd.default(i,e)}qr.VERSION=md.EPUBJS_VERSION;typeof global!="undefined"&&(global.EPUBJS_VERSION=md.EPUBJS_VERSION);qr.Book=vd.default;qr.Rendition=x_.default;qr.Contents=D_.default;qr.CFI=S_.default;qr.utils=C_;var T_=qr;Bs.default=T_});var bd=J(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});Object.defineProperty(yr,"Book",{enumerable:!0,get:function(){return k_.default}});Object.defineProperty(yr,"Contents",{enumerable:!0,get:function(){return R_.default}});Object.defineProperty(yr,"EpubCFI",{enumerable:!0,get:function(){return O_.default}});Object.defineProperty(yr,"Layout",{enumerable:!0,get:function(){return I_.default}});Object.defineProperty(yr,"Rendition",{enumerable:!0,get:function(){return N_.default}});yr.default=void 0;var k_=gi(Po()),O_=gi(Rt()),N_=gi(Ts()),R_=gi(en()),I_=gi(ho()),B_=gi(yd());function gi(i){return i&&i.__esModule?i:{default:i}}var L_=B_.default;yr.default=L_});var Fo=J(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.EpubViewStyle=void 0;var P_={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}};Ls.EpubViewStyle=P_});var Cd=J(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.default=void 0;var Ps=z_(Dn()),wt=wd(xa()),F_=wd(bd()),M_=Fo();function wd(i){return i&&i.__esModule?i:{default:i}}function Ed(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ed=function(n){return n?t:e})(i)}function z_(i,e){if(!e&&i&&i.__esModule)return i;if(i===null||Ur(i)!=="object"&&typeof i!="function")return{default:i};var t=Ed(e);if(t&&t.has(i))return t.get(i);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if(s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)){var a=n?Object.getOwnPropertyDescriptor(i,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=i[s]}return r.default=i,t&&t.set(i,r),r}function Ur(i){return Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(i)}function xd(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function q_(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xd(Object(t),!0).forEach(function(r){qo(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):xd(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function U_(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Sd(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Dd(r.key),r)}}function W_(i,e,t){return e&&Sd(i.prototype,e),t&&Sd(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function V_(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Mo(i,e)}function Mo(i,e){return Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Mo(i,e)}function j_(i){var e=Z_();return function(){var r=Fs(i),n;if(e){var s=Fs(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return H_(this,n)}}function H_(i,e){if(e&&(Ur(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zo(i)}function zo(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Z_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Fs(i){return Fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fs(i)}function qo(i,e,t){return e=Dd(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Dd(i){var e=G_(i,"string");return Ur(e)==="symbol"?e:String(e)}function G_(i,e){if(Ur(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Ur(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var Uo=function(i){V_(t,i);var e=j_(t);function t(r){var n;return U_(this,t),n=e.call(this,r),qo(zo(n),"onLocationChange",function(s){var a=n.props,o=a.location,u=a.locationChanged,l=s&&s.start;o!==l&&(n.location=l,u&&u(l))}),qo(zo(n),"handleKeyPress",function(s){var a=s.key;a&&a==="ArrowRight"&&n.nextPage(),a&&a==="ArrowLeft"&&n.prevPage()}),n.state={isLoaded:!1,toc:[]},n.viewerRef=Ps.default.createRef(),n.location=r.location,n.book=n.rendition=n.prevPage=n.nextPage=null,n}return W_(t,[{key:"componentDidMount",value:function(){this.initBook(!0),document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"initBook",value:function(){var n=this,s=this.props,a=s.url,o=s.tocChanged,u=s.epubInitOptions;this.book&&this.book.destroy(),this.book=new F_.default(a,u),this.book.loaded.navigation.then(function(l){var c=l.toc;n.setState({isLoaded:!0,toc:c},function(){o&&o(c),n.initReader()})})}},{key:"componentWillUnmount",value:function(){this.book&&this.book.destroy(),this.book=this.rendition=this.prevPage=this.nextPage=null,document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"shouldComponentUpdate",value:function(n){return!this.state.isLoaded||n.location!==this.props.location||n.url!==this.props.url}},{key:"componentDidUpdate",value:function(n){n.location!==this.props.location&&this.location!==this.props.location&&this.rendition.display(this.props.location),n.url!==this.props.url&&this.initBook()}},{key:"initReader",value:function(){var n=this,s=this.state.toc,a=this.props,o=a.location,u=a.epubOptions,l=a.getRendition,c=this.viewerRef.current;this.rendition=this.book.renderTo(c,q_({contained:!0,width:"100%",height:"100%"},u)),this.prevPage=function(){n.rendition.prev()},this.nextPage=function(){n.rendition.next()},this.registerEvents(),l&&l(this.rendition),typeof o=="string"||typeof o=="number"?this.rendition.display(o):s.length>0&&s[0].href?this.rendition.display(s[0].href):this.rendition.display()}},{key:"registerEvents",value:function(){var n=this.props,s=n.handleKeyPress,a=n.handleTextSelected;this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",s||this.handleKeyPress),a&&this.rendition.on("selected",a)}},{key:"renderBook",value:function(){var n=this.props.epubViewStyles;return Ps.default.createElement("div",{ref:this.viewerRef,style:n.view})}},{key:"render",value:function(){var n=this.state.isLoaded,s=this.props,a=s.loadingView,o=s.epubViewStyles;return Ps.default.createElement("div",{style:o.viewHolder},n&&this.renderBook()||a)}}]),t}(Ps.Component);Uo.defaultProps={loadingView:null,locationChanged:null,tocChanged:null,epubViewStyles:M_.EpubViewStyle,epubOptions:{},epubInitOptions:{}};Uo.propTypes={url:wt.default.oneOfType([wt.default.string,wt.default.instanceOf(ArrayBuffer)]),loadingView:wt.default.element,location:wt.default.oneOfType([wt.default.string,wt.default.number]),locationChanged:wt.default.func,tocChanged:wt.default.func,epubViewStyles:wt.default.object,epubInitOptions:wt.default.object,epubOptions:wt.default.object,getRendition:wt.default.func,handleKeyPress:wt.default.func,handleTextSelected:wt.default.func};var $_=Uo;Ms.default=$_});var Bd=J(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});var zs=Dn(),Ad="Left",Td="Right",kd="Up",Od="Down",vi={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Wo={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Nd="mousemove",Rd="mouseup",X_="touchend",Y_="touchmove",K_="touchstart";function J_(i,e,t,r){return i>e?t>0?Td:Ad:r>0?Od:kd}function Id(i,e){if(e===0)return i;let t=Math.PI/180*e,r=i[0]*Math.cos(t)+i[1]*Math.sin(t),n=i[1]*Math.cos(t)-i[0]*Math.sin(t);return[r,n]}function Q_(i,e){let t=c=>{let f="touches"in c;f&&c.touches.length>1||i((p,v)=>{v.trackMouse&&!f&&(document.addEventListener(Nd,r),document.addEventListener(Rd,a));let{clientX:m,clientY:C}=f?c.touches[0]:c,S=Id([m,C],v.rotationAngle);return v.onTouchStartOrOnMouseDown&&v.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},p),Wo),{initial:S.slice(),xy:S,start:c.timeStamp||0})})},r=c=>{i((f,p)=>{let v="touches"in c;if(v&&c.touches.length>1)return f;if(c.timeStamp-f.start>p.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;let{clientX:m,clientY:C}=v?c.touches[0]:c,[S,d]=Id([m,C],p.rotationAngle),g=S-f.xy[0],y=d-f.xy[1],T=Math.abs(g),I=Math.abs(y),w=(c.timeStamp||0)-f.start,A=Math.sqrt(T*T+I*I)/(w||1),k=[g/(w||1),y/(w||1)],N=J_(T,I,g,y),z=typeof p.delta=="number"?p.delta:p.delta[N.toLowerCase()]||vi.delta;if(T<z&&I<z&&!f.swiping)return f;let F={absX:T,absY:I,deltaX:g,deltaY:y,dir:N,event:c,first:f.first,initial:f.initial,velocity:A,vxvy:k};F.first&&p.onSwipeStart&&p.onSwipeStart(F),p.onSwiping&&p.onSwiping(F);let Z=!1;return(p.onSwiping||p.onSwiped||p[`onSwiped${N}`])&&(Z=!0),Z&&p.preventScrollOnSwipe&&p.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:F,swiping:!0})})},n=c=>{i((f,p)=>{let v;if(f.swiping&&f.eventData){if(c.timeStamp-f.start<p.swipeDuration){v=Object.assign(Object.assign({},f.eventData),{event:c}),p.onSwiped&&p.onSwiped(v);let m=p[`onSwiped${v.dir}`];m&&m(v)}}else p.onTap&&p.onTap({event:c});return p.onTouchEndOrOnMouseUp&&p.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},f),Wo),{eventData:v})})},s=()=>{document.removeEventListener(Nd,r),document.removeEventListener(Rd,a)},a=c=>{s(),n(c)},o=(c,f)=>{let p=()=>{};if(c&&c.addEventListener){let v=Object.assign(Object.assign({},vi.touchEventOptions),f.touchEventOptions),m=[[K_,t,v],[Y_,r,Object.assign(Object.assign({},v),f.preventScrollOnSwipe?{passive:!1}:{})],[X_,n,v]];m.forEach(([C,S,d])=>c.addEventListener(C,S,d)),p=()=>m.forEach(([C,S])=>c.removeEventListener(C,S))}return p},l={ref:c=>{c!==null&&i((f,p)=>{if(f.el===c)return f;let v={};return f.el&&f.el!==c&&f.cleanUpTouch&&(f.cleanUpTouch(),v.cleanUpTouch=void 0),p.trackTouch&&c&&(v.cleanUpTouch=o(c,p)),Object.assign(Object.assign(Object.assign({},f),{el:c}),v)})}};return e.trackMouse&&(l.onMouseDown=t),[l,o]}function e2(i,e,t,r){return!e.trackTouch||!i.el?(i.cleanUpTouch&&i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:void 0})):i.cleanUpTouch?e.preventScrollOnSwipe!==t.preventScrollOnSwipe||e.touchEventOptions.passive!==t.touchEventOptions.passive?(i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:r(i.el,e)})):i:Object.assign(Object.assign({},i),{cleanUpTouch:r(i.el,e)})}function t2(i){let{trackMouse:e}=i,t=zs.useRef(Object.assign({},Wo)),r=zs.useRef(Object.assign({},vi)),n=zs.useRef(Object.assign({},r.current));n.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},vi),i);let s;for(s in vi)r.current[s]===void 0&&(r.current[s]=vi[s]);let[a,o]=zs.useMemo(()=>Q_(u=>t.current=u(t.current,r.current),{trackMouse:e}),[e]);return t.current=e2(t.current,r.current,n.current,o),a}Wr.DOWN=Od;Wr.LEFT=Ad;Wr.RIGHT=Td;Wr.UP=kd;Wr.useSwipeable=t2});var Vo=J(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.ReactReaderStyle=void 0;var r2={container:{overflow:"hidden",position:"relative",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:50,left:50,bottom:20,right:50},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 10px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",margintop:"-.5em"}};qs.ReactReaderStyle=r2});var Hd=J(Ws=>{"use strict";function Vr(i){return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(i)}Object.defineProperty(Ws,"__esModule",{value:!0});Ws.default=void 0;var He=u2(Dn()),Gt=o2(xa()),i2=Bd(),n2=Zo(),Ld=Vo(),s2=["children"],a2=["title","showToc","loadingView","readerStyles","locationChanged","swipeable","epubViewStyles"];function o2(i){return i&&i.__esModule?i:{default:i}}function Pd(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Pd=function(n){return n?t:e})(i)}function u2(i,e){if(!e&&i&&i.__esModule)return i;if(i===null||Vr(i)!=="object"&&typeof i!="function")return{default:i};var t=Pd(e);if(t&&t.has(i))return t.get(i);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if(s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)){var a=n?Object.getOwnPropertyDescriptor(i,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=i[s]}return r.default=i,t&&t.set(i,r),r}function on(){return on=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},on.apply(this,arguments)}function Fd(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Md(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Wd(r.key),r)}}function zd(i,e,t){return e&&Md(i.prototype,e),t&&Md(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function qd(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&jo(i,e)}function jo(i,e){return jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},jo(i,e)}function Ud(i){var e=h2();return function(){var r=Us(i),n;if(e){var s=Us(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return l2(this,n)}}function l2(i,e){if(e&&(Vr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jr(i)}function jr(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function h2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Us(i){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Us(i)}function mi(i,e,t){return e=Wd(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Wd(i){var e=f2(i,"string");return Vr(e)==="symbol"?e:String(e)}function f2(i,e){if(Vr(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Vr(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Vd(i,e){if(i==null)return{};var t=c2(i,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,r)||(t[r]=i[r]))}return t}function c2(i,e){if(i==null)return{};var t={},r=Object.keys(i),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(t[n]=i[n]);return t}var d2=function(e){var t=e.children,r=Vd(e,s2),n=(0,i2.useSwipeable)(r);return He.default.createElement("div",n,t)},jd=function(i){qd(t,i);var e=Ud(t);function t(){var r;Fd(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),mi(jr(r),"setLocation",function(){r.props.setLocation(r.props.href)}),r}return zd(t,[{key:"render",value:function(){var n=this,s=this.props,a=s.label,o=s.styles,u=s.subitems;return He.default.createElement("div",null,He.default.createElement("button",{onClick:this.setLocation,style:o},a),u&&u.length>0&&He.default.createElement("div",{style:{paddingLeft:10}},u.map(function(l,c){return He.default.createElement(t,on({key:c},n.props,l))})))}}]),t}(He.PureComponent);jd.propTypes={label:Gt.default.string,href:Gt.default.string,setLocation:Gt.default.func,styles:Gt.default.object};var Ho=function(i){qd(t,i);var e=Ud(t);function t(r){var n;return Fd(this,t),n=e.call(this,r),mi(jr(n),"toggleToc",function(){n.setState({expandedToc:!n.state.expandedToc})}),mi(jr(n),"next",function(){var s=n.readerRef.current;s.nextPage()}),mi(jr(n),"prev",function(){var s=n.readerRef.current;s.prevPage()}),mi(jr(n),"onTocChange",function(s){var a=n.props.tocChanged;n.setState({toc:s},function(){return a&&a(s)})}),mi(jr(n),"setLocation",function(s){var a=n.props.locationChanged;n.setState({expandedToc:!1},function(){return a&&a(s)})}),n.readerRef=He.default.createRef(),n.state={expandedToc:!1,toc:!1},n}return zd(t,[{key:"renderToc",value:function(){var n=this,s=this.state,a=s.toc,o=s.expandedToc,u=this.props.readerStyles;return He.default.createElement("div",null,He.default.createElement("div",{style:u.tocArea},He.default.createElement("div",{style:u.toc},a.map(function(l,c){return He.default.createElement(jd,on({},l,{key:c,setLocation:n.setLocation,styles:u.tocAreaButton}))}))),o&&He.default.createElement("div",{style:u.tocBackground,onClick:this.toggleToc}))}},{key:"renderTocToggle",value:function(){var n=this.state.expandedToc,s=this.props.readerStyles;return He.default.createElement("button",{style:Object.assign({},s.tocButton,n?s.tocButtonExpanded:{}),onClick:this.toggleToc},He.default.createElement("span",{style:Object.assign({},s.tocButtonBar,s.tocButtonBarTop)}),He.default.createElement("span",{style:Object.assign({},s.tocButtonBar,s.tocButtonBottom)}))}},{key:"render",value:function(){var n=this.props,s=n.title,a=n.showToc,o=n.loadingView,u=n.readerStyles,l=n.locationChanged,c=n.swipeable,f=n.epubViewStyles,p=Vd(n,a2),v=this.state,m=v.toc,C=v.expandedToc;return He.default.createElement("div",{style:u.container},He.default.createElement("div",{style:Object.assign({},u.readerArea,C?u.containerExpanded:{})},a&&this.renderTocToggle(),He.default.createElement("div",{style:u.titleArea},s),He.default.createElement(d2,{onSwipedRight:this.prev,onSwipedLeft:this.next,trackMouse:!0},He.default.createElement("div",{style:u.reader},He.default.createElement(n2.EpubView,on({ref:this.readerRef,loadingView:o,epubViewStyles:f},p,{tocChanged:this.onTocChange,locationChanged:l})),c&&He.default.createElement("div",{style:u.swipeWrapper}))),He.default.createElement("button",{style:Object.assign({},u.arrow,u.prev),onClick:this.prev},"\u2039"),He.default.createElement("button",{style:Object.assign({},u.arrow,u.next),onClick:this.next},"\u203A")),a&&m&&this.renderToc())}}]),t}(He.PureComponent);Ho.defaultProps={loadingView:He.default.createElement("div",{style:Ld.ReactReaderStyle.loadingView},"Loading\u2026"),locationChanged:null,tocChanged:null,showToc:!0,readerStyles:Ld.ReactReaderStyle};Ho.propTypes={title:Gt.default.string,loadingView:Gt.default.element,showToc:Gt.default.bool,locationChanged:Gt.default.func,tocChanged:Gt.default.func,readerStyles:Gt.default.object,epubViewStyles:Gt.default.object,swipeable:Gt.default.bool};var p2=Ho;Ws.default=p2});var Zo=J(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});Object.defineProperty(_i,"EpubView",{enumerable:!0,get:function(){return g2.default}});Object.defineProperty(_i,"EpubViewStyle",{enumerable:!0,get:function(){return v2.EpubViewStyle}});Object.defineProperty(_i,"ReactReader",{enumerable:!0,get:function(){return m2.default}});Object.defineProperty(_i,"ReactReaderStyle",{enumerable:!0,get:function(){return _2.ReactReaderStyle}});var g2=Zd(Cd()),v2=Fo(),m2=Zd(Hd()),_2=Vo();function Zd(i){return i&&i.__esModule?i:{default:i}}});iu(exports,{default:()=>Xo});var $t=kr(require("obsidian"));var ct=kr(require("obsidian"));var Qs=kr(require("obsidian"));function nu(i){let e=new TextEncoder().encode(i),t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}function hn(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");for(;e.length%4;)e+="=";let t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new TextDecoder().decode(r)}function su(i){return(i!=null?i:"").replace(/\|/g," ").replace(/[\[\]]/g,"").replace(/[\r\n]+/g," ").replace(/\s+/g," ").trim()}function au(i){var a;if(!i)return null;let e=i;if(e.startsWith("obsidian://"))try{let o=new URL(e),u=o.searchParams.get("file");u&&(e=decodeURIComponent(u)+((a=o.hash)!=null?a:""))}catch(o){}let[t,r]=e.split("#",2),n=decodeURIComponent(t);if(!n.toLowerCase().endsWith(".epub")||!r)return null;let s=r.match(/cfi64=([A-Za-z0-9_-]+)/);return(s==null?void 0:s[1])?{path:(0,Qs.normalizePath)(n),cfi64:s[1]}:null}function Si(i){return(0,Qs.normalizePath)(i)}function dp(i){let e=(i!=null?i:"").trim();if(!e)return null;let t=e.replace(/\s+/g,"");if(t.startsWith("#")){let o=t.slice(1);if(o.length===3&&/^[0-9a-fA-F]{3}$/.test(o))return`#${o.split("").map(u=>u+u).join("").toLowerCase()}`;if(o.length===4&&/^[0-9a-fA-F]{4}$/.test(o))return`#${o.split("").map(u=>u+u).join("").toLowerCase()}`;if(o.length===6&&/^[0-9a-fA-F]{6}$/.test(o))return`#${o.toLowerCase()}`;if(o.length===8&&/^[0-9a-fA-F]{8}$/.test(o))return`#${o.toLowerCase()}`}let r=t.match(/^rgb\((\d+),(\d+),(\d+)\)$/i);if(r){let o=Math.min(255,Math.max(0,parseInt(r[1],10))),u=Math.min(255,Math.max(0,parseInt(r[2],10))),l=Math.min(255,Math.max(0,parseInt(r[3],10)));return`#${o.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}`}let n=t.match(/^rgba\((\d+),(\d+),(\d+),([\d.]+)\)$/i);if(n){let o=Math.min(255,Math.max(0,parseInt(n[1],10))),u=Math.min(255,Math.max(0,parseInt(n[2],10))),l=Math.min(255,Math.max(0,parseInt(n[3],10))),c=Math.min(1,Math.max(0,parseFloat(n[4]))),f=Math.round(c*255).toString(16).padStart(2,"0");return`#${o.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}${f}`}let s={red:"#ff0000",green:"#008000",blue:"#0000ff",yellow:"#ffff00",orange:"#ffa500",purple:"#800080",pink:"#ffc0cb",brown:"#a52a2a",black:"#000000",white:"#ffffff",gray:"#808080",grey:"#808080",gold:"#ffd700",lightblue:"#add8e6",lightgreen:"#90ee90",lightyellow:"#ffffe0",lightpink:"#ffb6c1",cyan:"#00ffff",magenta:"#ff00ff",lime:"#00ff00",teal:"#008080",navy:"#000080",maroon:"#800000",olive:"#808000",silver:"#c0c0c0"},a=t.toLowerCase();return s[a]?s[a]:/^[0-9a-fA-F]{6}$/.test(t)?`#${t.toLowerCase()}`:/^[0-9a-fA-F]{3}$/.test(t)?`#${t.split("").map(o=>o+o).join("").toLowerCase()}`:null}function fn(i,e="#ffd700"){var u;let t=(u=dp(i))!=null?u:e,r=t.startsWith("#")?t.slice(1):t,n=parseInt(r.slice(0,2),16),s=parseInt(r.slice(2,4),16),a=parseInt(r.slice(4,6),16),o=r.length===8?parseInt(r.slice(6,8),16)/255:1;return{r:n,g:s,b:a,alpha:o}}var $r={scrolledView:!1,fontSizePercent:100,highlightColor:"#ffd700",highlightOpacity:35,followObsidianTheme:!0,followObsidianFont:!0,notePath:"/",useSameFolder:!0,tags:"notes/booknotes"},ea=class extends ct.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"EPUB \u8BBE\u7F6E"});let t=(S,d,g)=>{let y=S.createDiv({cls:d});y.createSpan({cls:"epub-setting-note__badge",text:"\u63D0\u793A"}),y.createSpan({text:g})},r=e.createDiv({cls:"epub-setting-intro"});r.createDiv({cls:"epub-setting-intro__title",text:"\u5C0F\u8D34\u58EB"}),t(r,"epub-setting-intro__note","\u8FD9\u91CC\u7684\u8BBE\u7F6E\u4F1A\u5F71\u54CD\u9605\u8BFB\u5668\u663E\u793A\u4E0E\u9AD8\u4EAE\u6837\u5F0F\u3002");let n=e.createDiv({cls:"epub-setting-section"});n.createEl("h3",{text:"\u9605\u8BFB\u4F53\u9A8C",cls:"epub-setting-section__title"}),t(n,"epub-setting-section__note","\u5B57\u4F53\u3001\u6EDA\u52A8\u4E0E\u4E3B\u9898\u76F8\u5173\u8BBE\u7F6E\u3002"),new ct.Setting(n).setName("\u6EDA\u52A8\u9605\u8BFB").setDesc("\u542F\u7528\u540E\u53EF\u5728\u9875\u9762\u4E4B\u95F4\u8FDE\u7EED\u6EDA\u52A8\u3002").addToggle(S=>S.setValue(this.plugin.settings.scrolledView).onChange(d=>Me(this,null,function*(){this.plugin.settings.scrolledView=d,yield this.plugin.saveSettings()}))),new ct.Setting(n).setName("\u9ED8\u8BA4\u5B57\u53F7").setDesc("\u9605\u8BFB\u5668\u9ED8\u8BA4\u5B57\u4F53\u5927\u5C0F\uFF08\u767E\u5206\u6BD4\uFF09\u3002").addSlider(S=>S.setLimits(80,160,5).setValue(this.plugin.settings.fontSizePercent).setDynamicTooltip().onChange(d=>Me(this,null,function*(){this.plugin.settings.fontSizePercent=d,yield this.plugin.saveSettings()}))),new ct.Setting(n).setName("\u8DDF\u968F Obsidian \u4E3B\u9898").setDesc("\u5F00\u542F\u540E\uFF0C\u9605\u8BFB\u5668\u660E\u6697\u4E3B\u9898\u8DDF\u968F Obsidian\u3002").addToggle(S=>S.setValue(this.plugin.settings.followObsidianTheme).onChange(d=>Me(this,null,function*(){this.plugin.settings.followObsidianTheme=d,yield this.plugin.saveSettings()}))),new ct.Setting(n).setName("\u8DDF\u968F Obsidian \u5B57\u4F53").setDesc("\u5F00\u542F\u540E\uFF0C\u9605\u8BFB\u5668\u5B57\u4F53\u4E0E\u5B57\u53F7\u5C06\u8DDF\u968F Obsidian \u8BBE\u7F6E\u3002").addToggle(S=>S.setValue(this.plugin.settings.followObsidianFont).onChange(d=>Me(this,null,function*(){this.plugin.settings.followObsidianFont=d,yield this.plugin.saveSettings()})));let s=e.createDiv({cls:"epub-setting-section"});s.createEl("h3",{text:"\u9AD8\u4EAE\u6837\u5F0F",cls:"epub-setting-section__title"}),t(s,"epub-setting-section__note","\u5F71\u54CD\u9AD8\u4EAE\u989C\u8272\u4E0E\u900F\u660E\u5EA6\uFF0C\u5E76\u63D0\u4F9B\u9884\u89C8\u6548\u679C\u3002");let a=s.createDiv({cls:"epub-highlight-preview"}),o=a.createDiv({cls:"epub-highlight-preview__swatch"}),u=a.createDiv({cls:"epub-highlight-preview__text"});u.createDiv({cls:"epub-highlight-preview__title",text:"\u9884\u89C8\u6548\u679C"});let l=u.createDiv({cls:"epub-highlight-preview__body"}),c=()=>{let S=this.plugin.settings.highlightColor,d=this.plugin.settings.highlightOpacity/100;o.style.backgroundColor=S;let g=gp(S,d);l.innerHTML=`\u8FD9\u6BB5<span class="epub-highlight-preview__mark" style="background-color: ${g};">\u6587\u5B57</span>\u5C55\u793A\u4E86\u9AD8\u4EAE\u989C\u8272\u7684\u6548\u679C`};c();let f=[{name:"\u91D1\u8272",value:"#ffd700"},{name:"\u9EC4\u8272",value:"#ffff00"},{name:"\u6D45\u84DD",value:"#add8e6"},{name:"\u6D45\u7EFF",value:"#90ee90"},{name:"\u6D45\u7C89",value:"#ffb6c1"},{name:"\u6A59\u8272",value:"#ffa500"},{name:"\u9752\u8272",value:"#00ffff"},{name:"\u7D2B\u8272",value:"#800080"}],p=s.createDiv({cls:"epub-preset-colors"});p.createDiv({cls:"epub-preset-title",text:"\u9884\u8BBE\u989C\u8272:"});let v=p.createDiv({cls:"epub-preset-grid"});f.forEach(S=>{let d=v.createEl("button",{cls:"epub-preset-button"});d.type="button",d.style.setProperty("--epub-preset-color",S.value),d.createSpan({cls:"epub-preset-swatch"}),d.createSpan({text:S.name}),d.onclick=()=>Me(this,null,function*(){this.plugin.settings.highlightColor=S.value,yield this.plugin.saveSettings(),c()})}),t(s,"epub-setting-note","\u53EF\u7C98\u8D34 Hex \u6216 rgb/rgba \u989C\u8272\u503C\u3002"),new ct.Setting(s).setName("\u81EA\u5B9A\u4E49\u989C\u8272").setDesc("\u9009\u62E9\u81EA\u5B9A\u4E49\u9AD8\u4EAE\u989C\u8272").addColorPicker(S=>{S.setValue(this.plugin.settings.highlightColor).onChange(d=>Me(this,null,function*(){this.plugin.settings.highlightColor=d,yield this.plugin.saveSettings(),c()}))});let m=new ct.Setting(s).setName("\u9AD8\u4EAE\u900F\u660E\u5EA6").setDesc(`\u8C03\u6574\u9AD8\u4EAE\u989C\u8272\u7684\u900F\u660E\u5EA6 (${this.plugin.settings.highlightOpacity}%)`).addSlider(S=>S.setLimits(10,100,5).setValue(this.plugin.settings.highlightOpacity).setDynamicTooltip().onChange(d=>Me(this,null,function*(){this.plugin.settings.highlightOpacity=d,yield this.plugin.saveSettings(),m.setDesc(`\u8C03\u6574\u9AD8\u4EAE\u989C\u8272\u7684\u900F\u660E\u5EA6 (${d}%)`),c()})));new ct.Setting(s).setName("\u91CD\u7F6E\u4E3A\u9ED8\u8BA4").setDesc("\u6062\u590D\u9ED8\u8BA4\u9AD8\u4EAE\u989C\u8272\u8BBE\u7F6E").addButton(S=>S.setButtonText("\u91CD\u7F6E").setCta().onClick(()=>Me(this,null,function*(){this.plugin.settings.highlightColor=$r.highlightColor,this.plugin.settings.highlightOpacity=$r.highlightOpacity,yield this.plugin.saveSettings(),c(),this.display()})));let C=e.createDiv({cls:"epub-setting-section"});C.createEl("h3",{text:"\u7B14\u8BB0\u4E0E\u5B58\u653E",cls:"epub-setting-section__title"}),t(C,"epub-setting-section__note","\u7528\u4E8E\u521B\u5EFA epub \u7B14\u8BB0\u7684\u9ED8\u8BA4\u4F4D\u7F6E\u4E0E\u6807\u7B7E\u3002"),new ct.Setting(C).setName("\u540C\u76EE\u5F55").setDesc("\u5F00\u542F\u540E\uFF0Cepub \u7B14\u8BB0\u6587\u4EF6\u5C06\u521B\u5EFA\u5728\u4E0E\u4E66\u7C4D\u76F8\u540C\u7684\u6587\u4EF6\u5939\u3002").addToggle(S=>S.setValue(this.plugin.settings.useSameFolder).onChange(d=>Me(this,null,function*(){this.plugin.settings.useSameFolder=d,yield this.plugin.saveSettings()}))),new ct.Setting(C).setName("\u7B14\u8BB0\u6587\u4EF6\u5939").setDesc("\u9009\u62E9 epub \u7B14\u8BB0\u9ED8\u8BA4\u4FDD\u5B58\u4F4D\u7F6E\u3002\u5F00\u542F\u201C\u540C\u76EE\u5F55\u201D\u540E\u6B64\u9879\u65E0\u6548\u3002").addDropdown(S=>S.addOptions(pp(this.app)).setValue(this.plugin.settings.notePath).onChange(d=>Me(this,null,function*(){this.plugin.settings.notePath=d,yield this.plugin.saveSettings()}))),new ct.Setting(C).setName("\u6807\u7B7E").setDesc("\u65B0\u5EFA\u7B14\u8BB0\u7684\u5143\u6570\u636E\u6807\u7B7E\u3002").addText(S=>{S.inputEl.size=50,S.setValue(this.plugin.settings.tags).onChange(d=>Me(this,null,function*(){this.plugin.settings.tags=d,yield this.plugin.saveSettings()}))})}};function pp(i){let e={};return ct.Vault.recurseChildren(i.vault.getRoot(),t=>{t instanceof ct.TFolder&&(e[t.path]=t.path)}),e}function gp(i,e){let{r:t,g:r,b:n,alpha:s}=fn(i),a=Math.min(1,Math.max(0,e*s));return`rgba(${t}, ${r}, ${n}, ${a})`}var yi=kr(require("obsidian"));Qr();Qr();Qr();Qr();var Vs=kr(require("obsidian")),gt=kr(Zo());var y2="#ffd700";function js(i,e){let t=getComputedStyle(i).getPropertyValue(e).trim();return t||null}function Gd(){let i=document.body,e=document.documentElement,t=getComputedStyle(i),r=getComputedStyle(e),n=js(i,"--font-text")||js(e,"--font-text")||t.fontFamily||r.fontFamily||"",s=js(i,"--font-text-size")||js(e,"--font-text-size")||t.fontSize||r.fontSize||"";return{fontFamily:n,fontSize:s}}function b2(i){let e=i.match(/^epubcfi\((.+?),/);return(e==null?void 0:e[1])?`epubcfi(${e[1]})`:null}var $d=({app:i,file:e,title:t,contents:r,scrolled:n,highlightColor:s,highlightOpacity:a,fontSizePercent:o,followObsidianTheme:u,followObsidianFont:l,initialLocation:c,jumpCfiRange:f,highlights:p,onLocationChange:v,onOpenNote:m})=>{let C=Ut(null),S=Ut(null),d=Ut(null),g=Ut(0),y=Ut([]),T=Ut(""),[I,w]=Nt(null),[A,k]=Nt(c),[N,z]=Nt(null),[F,Z]=Nt(()=>document.body.classList.contains("theme-dark")),[j,ie]=Nt(()=>Gd()),[pe,ne]=Nt(null),ge=Ut([]);mt(()=>{if(!u)return;let G=document.body,Y=()=>Z(G.classList.contains("theme-dark")),se=new MutationObserver(()=>Y());return Y(),se.observe(G,{attributes:!0,attributeFilter:["class"]}),()=>se.disconnect()},[u]),mt(()=>{if(!l)return;let G=()=>{let ye=Gd();ie(Ee=>Ee.fontFamily===ye.fontFamily&&Ee.fontSize===ye.fontSize?Ee:ye)};G();let Y=document.body,se=document.documentElement,le=document.head,me=new MutationObserver(()=>G());return me.observe(Y,{attributes:!0,attributeFilter:["class","style"]}),me.observe(se,{attributes:!0,attributeFilter:["class","style"]}),me.observe(le,{childList:!0,subtree:!0}),()=>me.disconnect()},[l]),mt(()=>{var G,Y,se;ne((se=(Y=(G=d.current)==null?void 0:G.ownerDocument)==null?void 0:Y.body)!=null?se:null)},[]);let ve=dt(()=>{var le,me,ye,Ee,Ke;let G=C.current;if(!G)return;let Y=(le=G.getContents)==null?void 0:le.call(G),se=Array.isArray(Y)?Y:Y?[Y]:[];for(let Pe of se)try{(Ke=(Ee=(ye=(me=Pe==null?void 0:Pe.window)==null?void 0:me.getSelection)==null?void 0:ye.call(me))==null?void 0:Ee.removeAllRanges)==null||Ke.call(Ee)}catch($e){}},[]),he=dt(G=>Me(void 0,null,function*(){let Y=i.clipboardManager;if(Y==null?void 0:Y.writeText){yield Y.writeText(G);return}yield navigator.clipboard.writeText(G)}),[i]),Ce=dt(G=>{k(G),v(G),z(null)},[v]),Be=dt(G=>{let Y=G.themes;Y.override("color",F?"#fff":"#000"),Y.override("background",F?"#000":"#fff")},[F]),Re=dt((G,Y)=>{G.themes.fontSize(`${Y}%`)},[]),de=dt(G=>{var se,le;let Y=G.themes;if(l){j.fontFamily&&Y.override("font-family",j.fontFamily),j.fontSize&&Y.override("font-size",j.fontSize);return}(se=Y.remove)==null||se.call(Y,"font-family"),(le=Y.remove)==null||le.call(Y,"font-size"),Re(G,o)},[l,j,o,Re]);mt(()=>{!I||Be(I)},[I,Be]);let Ie=dt((G,Y)=>Me(void 0,null,function*(){var le;let se=(le=G==null?void 0:G.book)==null?void 0:le.ready;if(se&&typeof se.then=="function")try{yield se}catch(me){}try{return yield G.display(Y),!0}catch(me){return!1}}),[]),Te=dt(G=>Me(void 0,null,function*(){var le;let Y=C.current;if(!Y)return!1;let se=(le=b2(G))!=null?le:G;return(yield Ie(Y,se))?!0:se!==G?yield Ie(Y,G):!1}),[Ie]),We=dr(()=>{let{r:G,g:Y,b:se,alpha:le}=fn(s,y2),me=a/100*le,ye=`rgb(${G}, ${Y}, ${se})`,Ee=me*.35,Ke=Math.min(.5,me*.5),Pe=`rgba(${G}, ${Y}, ${se}, ${Ke})`;return{fillColor:ye,fillOpacity:Ee,selectionColor:Pe,cornerRadius:2}},[s,a]),Ze=dt((G,Y)=>{try{let se=G.document.getElementById("epubjs-selection-style"),le=se!=null?se:G.document.createElement("style");le.id="epubjs-selection-style",le.innerHTML=`::selection { background: ${Y}; }`,se||G.document.head.appendChild(le)}catch(se){}},[]);mt(()=>{!f||(S.current=f,Te(f).then(G=>{G&&(S.current=null)}))},[f,Te]);let qe=dt((G,Y)=>{for(let le of ge.current)try{G.annotations.remove(le,"highlight")}catch(me){}ge.current=[];let se=(Y!=null?Y:[]).slice(0,80);for(let le of se)try{G.annotations.add("highlight",le.cfiRange,{},()=>{new Vs.Notice(`Open backlink: ${le.display}`),m(le.sourceFile)},"epubjs-backlink-hl"),ge.current.push(le.cfiRange)}catch(me){}},[m]);mt(()=>{y.current=p},[p]),mt(()=>{var le;T.current=We.selectionColor;let G=C.current,Y=(le=G==null?void 0:G.getContents)==null?void 0:le.call(G),se=Array.isArray(Y)?Y:Y?[Y]:[];for(let me of se)Ze(me,T.current)},[We,Ze]),mt(()=>{if(!I)return;de(I);let G=!1;return(()=>Me(void 0,null,function*(){var le;let se=(le=I==null?void 0:I.book)==null?void 0:le.ready;if(se&&typeof se.then=="function")try{yield se}catch(me){}G||qe(I,p)}))(),()=>{G=!0}},[I,p,de,qe]);let xe=dt((G,Y)=>{var Et,xt,ut,Ft;let se=(xt=(Et=Y.window)==null?void 0:Et.getSelection)==null?void 0:xt.call(Et);if(!se||se.rangeCount===0)return;let le=se.toString();if(!le||!le.trim())return;let me=se.getRangeAt(0),ye=me.getClientRects(),Ee=ye.length?ye[0]:me.getBoundingClientRect();if(!Ee||Ee.width===0&&Ee.height===0)return;let Ke=(Ft=(ut=Y.document)==null?void 0:ut.defaultView)==null?void 0:Ft.frameElement;if(!Ke)return;let Pe=Ke.getBoundingClientRect(),$e=Pe.left+Ee.left+Ee.width/2,De=Pe.top+Ee.top-44;De<24&&(De=Pe.top+Ee.bottom+10);let be=$e,ft=De;g.current=Date.now(),z({visible:!0,x:be,y:ft,cfiRange:G,text:le})},[]);mt(()=>{var Ke,Pe,$e;if(!I)return;let G=()=>{Date.now()-g.current<200||z(null)},Y=()=>z(null),se=()=>{qe(I,y.current)},le=De=>{try{let be=De.window.document.body;be.oncontextmenu=()=>!1,Ze(De,T.current)}catch(be){}};I.on("selected",xe),I.on("click",G),I.on("relocated",Y),I.on("rendered",se);let me=(Ke=I.hooks)==null?void 0:Ke.content;(Pe=me==null?void 0:me.register)==null||Pe.call(me,le);let ye=($e=I.getContents)==null?void 0:$e.call(I),Ee=Array.isArray(ye)?ye:ye?[ye]:[];if(Ee.length){for(let De of Ee)le(De);se()}return()=>{var De;I.off("selected",xe),I.off("click",G),I.off("relocated",Y),I.off("rendered",se),(De=me==null?void 0:me.unregister)==null||De.call(me,le)}},[I,xe,qe,Ze]),mt(()=>{var me;let G=(me=d.current)==null?void 0:me.ownerDocument;if(!G)return;let Y="epubjs-backlink-overlay-style",se=G.getElementById(Y),le=se!=null?se:G.createElement("style");le.id=Y,le.innerHTML=`
      .epubjs-backlink-hl rect {
        fill: ${We.fillColor} !important;
        fill-opacity: ${We.fillOpacity} !important;
        stroke: none !important;
        stroke-opacity: 0 !important;
        stroke-width: 0 !important;
        rx: ${We.cornerRadius}px;
        ry: ${We.cornerRadius}px;
        cursor: pointer;
      }
    `,se||G.head.appendChild(le)},[We]);let et=dt(()=>Me(void 0,null,function*(){if(!N)return;let G=su(N.text);G||(G="Quote"),G.length>60&&(G=G.slice(0,60)+"...");let Y=nu(N.cfiRange),se=`[[${e.path}#cfi64=${Y}|${G}]]`;try{yield he(se),new Vs.Notice("EPUB link copied")}catch(le){new Vs.Notice("Copy failed")}finally{z(null),ve()}}),[N,e.path,he,ve]),Ge=dr(()=>F?E2:w2,[F]),Ne=N&&N.visible?st("div",{className:"epub-toolbar",style:{left:N.x,top:N.y,position:"fixed"},onMouseDown:G=>G.preventDefault()},st("button",{className:"mod-cta epub-toolbar__button",onClick:et},"Copy Link")):null;return st("div",{ref:d,style:{height:"100%",width:"100%",position:"relative",overflow:n?"auto":"hidden"}},pe&&Ne?xn(Ne,pe):Ne,st(gt.ReactReader,{title:t,showToc:!0,location:A,locationChanged:Ce,swipeable:!1,url:r,getRendition:G=>{if(C.current=G,ge.current=[],w(G),Be(G),de(G),S.current){let Y=S.current;Te(Y).then(se=>{se&&(S.current=null)})}},epubOptions:n?{allowPopups:!0,flow:"scrolled",manager:"continuous"}:void 0,readerStyles:Ge}))},w2=bt(Qe({},gt.ReactReaderStyle),{arrow:bt(Qe({},gt.ReactReaderStyle.arrow),{backgroundColor:"transparent",border:"none",boxShadow:"none"}),arrowHover:bt(Qe({},gt.ReactReaderStyle.arrowHover),{backgroundColor:"transparent",boxShadow:"none"}),readerArea:bt(Qe({},gt.ReactReaderStyle.readerArea),{padding:"0 6px",transition:void 0}),titleArea:bt(Qe({},gt.ReactReaderStyle.titleArea),{display:"none",height:0,margin:0,padding:0})}),E2=bt(Qe({},gt.ReactReaderStyle),{arrow:bt(Qe({},gt.ReactReaderStyle.arrow),{color:"white",backgroundColor:"transparent",border:"none",boxShadow:"none"}),arrowHover:bt(Qe({},gt.ReactReaderStyle.arrowHover),{color:"#ccc",backgroundColor:"transparent",boxShadow:"none"}),readerArea:bt(Qe({},gt.ReactReaderStyle.readerArea),{padding:"0 6px",backgroundColor:"#000",transition:void 0}),titleArea:bt(Qe({},gt.ReactReaderStyle.titleArea),{display:"none",height:0,margin:0,padding:0}),tocArea:bt(Qe({},gt.ReactReaderStyle.tocArea),{background:"#111"}),tocButtonExpanded:bt(Qe({},gt.ReactReaderStyle.tocButtonExpanded),{background:"#222"}),tocButtonBar:bt(Qe({},gt.ReactReaderStyle.tocButtonBar),{background:"#fff"}),tocButton:bt(Qe({},gt.ReactReaderStyle.tocButton),{color:"white"})});var Hs=kr(require("obsidian"));var Xd=/#cfi64=([A-Za-z0-9_-]+)/g,Go=class{constructor(e){this.app=e}getHighlightsForBook(e,t=200){var l,c,f,p,v,m,C;let r=e.path,n=this.app.metadataCache.resolvedLinks,s=(c=(l=this.app.metadataCache).getBacklinksForFile)==null?void 0:c.call(l,e),a=[];if(s==null?void 0:s.data){let S=s.data;if(typeof(S==null?void 0:S.keys)=="function")for(let d of S.keys()){let g=this.app.vault.getAbstractFileByPath(d);g instanceof Hs.TFile&&a.push(g)}else for(let d of Object.keys(S)){let g=this.app.vault.getAbstractFileByPath(d);g instanceof Hs.TFile&&a.push(g)}}if(!a.length)for(let[S,d]of Object.entries(n)){if(!d||!Object.prototype.hasOwnProperty.call(d,r))continue;let g=this.app.vault.getAbstractFileByPath(S);g instanceof Hs.TFile&&a.push(g)}let o=new Set,u=[];for(let S of a){let d=this.app.metadataCache.getFileCache(S);if(!d)continue;let g=[...(f=d.links)!=null?f:[],...(p=d.embeds)!=null?p:[]];if(!!g.length)for(let y of g){let T=String((v=y.link)!=null?v:""),w=T.split("#")[0];if(!w){let ie=String((m=y.original)!=null?m:"").match(/\[\[([^|\]]+)/);(ie==null?void 0:ie[1])&&(w=ie[1].split("#")[0])}let A=this.app.metadataCache.getFirstLinkpathDest(w,S.path);if(!A||A.path!==e.path)continue;let k=y.original,N=y.subpath,z=[k,T,N].filter(Boolean);if(!z.some(j=>j.indexOf("#cfi64=")!==-1))continue;let Z=String((C=y.displayText)!=null?C:S.basename);for(let j of z){Xd.lastIndex=0;let ie;for(;(ie=Xd.exec(j))!==null;){let pe=ie[1];if(!!pe&&!o.has(pe)){o.add(pe);try{let ne=hn(pe);if(u.push({cfiRange:ne,sourceFile:S,display:Z}),u.length>=t)return u}catch(ne){}}}}}}return u}};var Zs="epub",bi="epub",$o="doc-epub",Gs=class extends yi.FileView{constructor(e,t,r){super(e);this.settings=t;this.plugin=r;this.fileContent=null;this.jumpCfiRange=null;this.highlights=[];this.highlightsKey=null;this.refreshTimer=null;this.backlinkManager=new Go(this.app)}onPaneMenu(e,t){e.addItem(r=>{r.setTitle("Create new epub note").setIcon("document").onClick(()=>Me(this,null,function*(){let n=this.getFileName(),s=this.app.vault.getAbstractFileByPath(n);(s==null||!(s instanceof yi.TFile))&&(s=yield this.app.vault.create(n,this.getFileContent())),this.app.workspace.createLeafBySplit(this.leaf).openFile(s,{active:!0})}))}),e.addSeparator(),super.onPaneMenu(e,t)}getFileName(){let e,t=this.plugin.settings;return t.useSameFolder?e=`${this.file.parent.path}/`:e=t.notePath.endsWith("/")?t.notePath:`${t.notePath}/`,`${e}${this.file.basename}.md`}getFileContent(){return`---
Tags: ${this.plugin.settings.tags}
Date: ${(0,yi.moment)().toLocaleString()}
---

# ${this.file.basename}
`}onLoadFile(e){return Me(this,null,function*(){var r,n,s,a;Ri(this.contentEl),this.contentEl.empty(),this.fileContent=yield this.app.vault.readBinary(e),this.highlights=this.backlinkManager.getHighlightsForBook(e),this.highlightsKey=this.getHighlightsKey(this.highlights),this.registerEvent(this.app.metadataCache.on("resolved",()=>{!this.file||(this.refreshTimer&&window.clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(()=>{if(!this.file)return;let o=this.backlinkManager.getHighlightsForBook(this.file),u=this.getHighlightsKey(o);u!==this.highlightsKey&&(this.highlights=o,this.highlightsKey=u,this.renderReader())},150))}));let t=(a=(n=(r=this.leaf).getEphemeralState)==null?void 0:n.call(r))!=null?a:(s=this.leaf.viewState)==null?void 0:s.eState;(t==null?void 0:t.cfi64)&&this.handleJumpFromCfi64(String(t.cfi64)),this.renderReader()})}setEphemeralState(e){return Me(this,null,function*(){if(!!e){if(e.cfi64){this.handleJumpFromCfi64(String(e.cfi64));return}if(typeof e.subpath=="string"){let t=e.subpath.match(/#?cfi64=([A-Za-z0-9_-]+)/);(t==null?void 0:t[1])&&this.handleJumpFromCfi64(t[1])}}})}handleJumpFromCfi64(e){try{this.jumpCfiRange=hn(e),this.renderReader()}catch(t){}}renderReader(){var S,d,g;if(!this.file||!this.fileContent)return;let e=(S=this.containerEl.parentElement)==null?void 0:S.querySelector("div.view-header"),t=(d=this.containerEl.parentElement)==null?void 0:d.querySelector("div.view-content"),r=e?getComputedStyle(e):null,n=r?parseFloat(r.height):0,s=r?parseFloat(r.width):0,a=t?getComputedStyle(t):null,o=a?parseFloat(a.paddingBottom):0,u=a?parseFloat(a.paddingTop):0,l=(n<s?n:0)+u+1,c=o,f=0,p=0,v=(g=this.plugin.getProgress(this.file.path))!=null?g:0,m=this.plugin.settings,C={paddingTop:f,paddingBottom:p,height:"100%",boxSizing:"border-box",overflow:m.scrolledView?"auto":"hidden"};Sn(st("div",{style:C},st($d,{app:this.app,file:this.file,contents:this.fileContent,title:this.file.basename,scrolled:m.scrolledView,highlightColor:m.highlightColor,highlightOpacity:m.highlightOpacity,fontSizePercent:m.fontSizePercent,followObsidianTheme:m.followObsidianTheme,followObsidianFont:m.followObsidianFont,initialLocation:v,jumpCfiRange:this.jumpCfiRange,highlights:this.highlights,onLocationChange:y=>{!this.file||this.plugin.setProgress(this.file.path,y)},onOpenNote:y=>{var I;((I=this.app.workspace.getLeaf("split","vertical"))!=null?I:this.app.workspace.getLeaf(!1)).openFile(y)}})),this.contentEl),this.jumpCfiRange=null}getHighlightsKey(e){return e.map(t=>`${t.cfiRange}|${t.sourceFile.path}`).join(`
`)}onunload(){Ri(this.contentEl)}getDisplayText(){return this.file?this.file.basename:"No File"}canAcceptExtension(e){return e==Zs}getViewType(){return bi}getIcon(){return $o}};function x2(i){return Boolean(i.closest(".cm-editor, .markdown-source-view"))}function S2(i){let e=i.closest("[data-href]"),t=e==null?void 0:e.getAttribute("data-href"),r=i.closest("a.internal-link, span.internal-link, a");if(!r)return null;let n=r.getAttribute("href");return t&&t.indexOf("#cfi64=")!==-1?t:n||t||null}var Xo=class extends $t.Plugin{constructor(){super(...arguments);this.data={version:1,settings:Qe({},$r),progress:{}};this.saveTimer=null}onload(){return Me(this,null,function*(){yield this.loadPluginData(),this.settings=this.data.settings,(0,$t.addIcon)($o,`
			<path
				fill="currentColor"
				stroke="currentColor"
				d="M 90.695312 47.296875 C 90.046875 46.589844 89.136719 46.1875 88.175781 46.1875 C 87.21875 46.1875 86.304688 46.589844 85.660156 47.296875 L 70.535156 63.277344 L 52.855469 81.933594 C 51.558594 83.339844 49.734375 84.144531 47.820312 84.144531 C 45.90625 84.144531 44.078125 83.339844 42.785156 81.933594 L 17.582031 55.292969 C 14.792969 52.292969 14.792969 47.648438 17.582031 44.648438 L 42.785156 18.023438 C 44.078125 16.617188 45.90625 15.816406 47.820312 15.816406 C 49.734375 15.816406 51.558594 16.617188 52.855469 18.023438 L 64.382812 30.207031 L 40.417969 55.5 C 39.730469 56.257812 39.730469 57.410156 40.417969 58.167969 L 42.945312 60.839844 C 43.652344 61.566406 44.761719 61.566406 45.472656 60.839844 L 73.222656 31.566406 C 73.90625 30.808594 73.90625 29.652344 73.222656 28.894531 L 70.691406 26.226562 L 70.511719 26.054688 L 57.886719 12.722656 C 55.28125 9.921875 51.628906 8.332031 47.804688 8.332031 C 43.980469 8.332031 40.332031 9.921875 37.726562 12.722656 L 12.503906 39.347656 C 6.941406 45.222656 6.941406 54.769531 12.503906 60.644531 L 37.703125 87.269531 C 40.308594 90.070312 43.960938 91.664062 47.789062 91.664062 C 51.613281 91.664062 55.265625 90.070312 57.871094 87.269531 L 83.070312 60.644531 L 90.632812 52.679688 C 92.007812 51.171875 92.007812 48.863281 90.632812 47.359375 L 90.695312 47.292969 Z M 90.695312 47.296875"
			/>
		`),this.registerView(bi,e=>new Gs(e,this.settings,this));try{this.registerExtensions([Zs],bi)}catch(e){console.log(`Existing file extension ${Zs}`)}this.addSettingTab(new ea(this.app,this)),this.registerEvent(this.app.workspace.on("click",e=>Me(this,null,function*(){var f,p;let t=e.target;if(!t||x2(t)&&!(e.ctrlKey||e.metaKey))return;let r=S2(t);if(!r)return;let n=au(r);if(!n)return;e.preventDefault(),e.stopPropagation();let s=this.app.workspace.getActiveFile(),a=(f=s==null?void 0:s.path)!=null?f:"",o=this.app.metadataCache.getFirstLinkpathDest(n.path,a);if(!(o instanceof $t.TFile))return;let u=this.app.workspace.getLeavesOfType(bi).find(v=>{var m,C;return((C=(m=v.view)==null?void 0:m.file)==null?void 0:C.path)===o.path}),l=(p=u!=null?u:this.app.workspace.getLeaf("split","vertical"))!=null?p:this.app.workspace.getLeaf(!1),c=()=>{var v,m,C,S;(m=(v=l.view)==null?void 0:v.setEphemeralState)==null||m.call(v,{cfi64:n.cfi64}),(S=(C=this.app.workspace)==null?void 0:C.setActiveLeaf)==null||S.call(C,l,{focus:!1})};if(u){c();return}yield l.openFile(o,{active:!0,eState:{cfi64:n.cfi64}}),c()}))),this.registerEvent(this.app.vault.on("rename",(e,t)=>{let r=Si(t),n=e.path;if(e instanceof $t.TFolder){let s=(0,$t.normalizePath)(t)+"/",a=(0,$t.normalizePath)(n)+"/",o=Qe({},this.data.progress),u=!1;for(let[l,c]of Object.entries(this.data.progress)){if(!l.startsWith(s))continue;let f=a+l.slice(s.length);o[f]||(o[f]=c),delete o[l],u=!0}u&&(this.data.progress=o,this.requestSave());return}if(e instanceof $t.TFile){let s=Si(n);this.data.progress[r]&&!this.data.progress[s]&&(this.data.progress[s]=this.data.progress[r]),this.data.progress[r]&&(delete this.data.progress[r],this.requestSave())}}))})}onunload(){}getProgress(e){var r,n;let t=Si(e);return(n=(r=this.data.progress[t])==null?void 0:r.location)!=null?n:null}setProgress(e,t){let r=Si(e);this.data.progress[r]={location:t,updatedAt:Date.now()},this.requestSave()}requestSave(){this.saveTimer&&window.clearTimeout(this.saveTimer),this.saveTimer=window.setTimeout(()=>{this.saveTimer=null,this.savePluginData().catch(()=>{})},500)}loadPluginData(){return Me(this,null,function*(){var r,n;let e=yield this.loadData();if(e&&typeof e=="object"&&e.version===1){let s=e;this.data={version:1,settings:Qe(Qe({},$r),(r=s.settings)!=null?r:{}),progress:(n=s.progress)!=null?n:{}};return}let t=e&&typeof e=="object"?e:{};this.data={version:1,settings:Qe(Qe({},$r),t),progress:{}}})}savePluginData(){return Me(this,null,function*(){this.data.settings=this.settings,yield this.saveData(this.data)})}loadSettings(){return Me(this,null,function*(){yield this.loadPluginData(),this.settings=this.data.settings})}saveSettings(){return Me(this,null,function*(){yield this.savePluginData(),this.notifyViewsToRerender()})}notifyViewsToRerender(){this.app.workspace.getLeavesOfType(bi).forEach(t=>{let r=t.view;r&&r instanceof Gs&&r.renderReader()})}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
