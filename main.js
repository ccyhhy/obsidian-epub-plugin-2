/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var lp=Object.create;var Ei=Object.defineProperty,hp=Object.defineProperties,fp=Object.getOwnPropertyDescriptor,cp=Object.getOwnPropertyDescriptors,dp=Object.getOwnPropertyNames,Qo=Object.getOwnPropertySymbols,pp=Object.getPrototypeOf,eu=Object.prototype.hasOwnProperty,vp=Object.prototype.propertyIsEnumerable;var tu=(i,e,t)=>e in i?Ei(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,rt=(i,e)=>{for(var t in e||(e={}))eu.call(e,t)&&tu(i,t,e[t]);if(Qo)for(var t of Qo(e))vp.call(e,t)&&tu(i,t,e[t]);return i},Et=(i,e)=>hp(i,cp(e)),ru=i=>Ei(i,"__esModule",{value:!0});var $s=(i,e)=>()=>(i&&(e=i(i=0)),e);var K=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),iu=(i,e)=>{ru(i);for(var t in e)Ei(i,t,{get:e[t],enumerable:!0})},gp=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of dp(e))!eu.call(i,r)&&r!=="default"&&Ei(i,r,{get:()=>e[r],enumerable:!(t=fp(e,r))||t.enumerable});return i},Nr=i=>gp(ru(Ei(i!=null?lp(pp(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var Le=(i,e,t)=>new Promise((r,n)=>{var s=u=>{try{o(t.next(u))}catch(l){n(l)}},a=u=>{try{o(t.throw(u))}catch(l){n(l)}},o=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(i,e)).next())});function ar(i,e){for(var t in e)i[t]=e[t];return i}function ea(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function at(i,e,t){var r,n,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?n=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?xi.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)a[s]===void 0&&(a[s]=i.defaultProps[s]);return Ci(i,a,r,n,null)}function Ci(i,e,t,r,n){var s={type:i,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n==null?++su:n,__i:-1,__u:0};return n==null&&xe.vnode!=null&&xe.vnode(s),s}function fn(){return{current:null}}function zt(i){return i.children}function Nt(i,e){this.props=i,this.context=e}function $r(i,e){if(e==null)return i.__?$r(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?$r(i):null}function cu(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return cu(i)}}function ta(i){(!i.__d&&(i.__d=!0)&&Or.push(i)&&!cn.__r++||au!=xe.debounceRendering)&&((au=xe.debounceRendering)||ou)(cn)}function cn(){for(var i,e,t,r,n,s,a,o=1;Or.length;)Or.length>o&&Or.sort(uu),i=Or.shift(),o=Or.length,i.__d&&(t=void 0,r=void 0,n=(r=(e=i).__v).__e,s=[],a=[],e.__P&&((t=ar({},r)).__v=r.__v+1,xe.vnode&&xe.vnode(t),ra(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[n]:null,s,n==null?$r(r):n,!!(32&r.__u),a),t.__v=r.__v,t.__.__k[t.__i]=t,mu(s,t,a),r.__e=r.__=null,t.__e!=n&&cu(t)));cn.__r=0}function du(i,e,t,r,n,s,a,o,u,l,c){var f,d,g,_,C,D,p,v=r&&r.__k||fu,b=e.length;for(u=yp(t,e,v,u,b),f=0;f<b;f++)(g=t.__k[f])!=null&&(d=g.__i==-1?Si:v[g.__i]||Si,g.__i=f,D=ra(i,g,d,n,s,a,o,u,l,c),_=g.__e,g.ref&&d.ref!=g.ref&&(d.ref&&na(d.ref,null,g),c.push(g.ref,g.__c||_,g)),C==null&&_!=null&&(C=_),(p=!!(4&g.__u))||d.__k===g.__k?u=pu(g,u,i,p):typeof g.type=="function"&&D!==void 0?u=D:_&&(u=_.nextSibling),g.__u&=-7);return t.__e=C,u}function yp(i,e,t,r,n){var s,a,o,u,l,c=t.length,f=c,d=0;for(i.__k=new Array(n),s=0;s<n;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=i.__k[s]=Ci(null,a,null,null,null):Di(a)?a=i.__k[s]=Ci(zt,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=i.__k[s]=Ci(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):i.__k[s]=a,u=s+d,a.__=i,a.__b=i.__b+1,o=null,(l=a.__i=bp(a,t,u,f))!=-1&&(f--,(o=t[l])&&(o.__u|=2)),o==null||o.__v==null?(l==-1&&(n>c?d--:n<c&&d++),typeof a.type!="function"&&(a.__u|=4)):l!=u&&(l==u-1?d--:l==u+1?d++:(l>u?d--:d++,a.__u|=4))):i.__k[s]=null;if(f)for(s=0;s<c;s++)(o=t[s])!=null&&(2&o.__u)==0&&(o.__e==r&&(r=$r(o)),yu(o,o));return r}function pu(i,e,t,r){var n,s;if(typeof i.type=="function"){for(n=i.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=i,e=pu(n[s],e,t,r));return e}i.__e!=e&&(r&&(e&&i.type&&!e.parentNode&&(e=$r(i)),t.insertBefore(i.__e,e||null)),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function or(i,e){return e=e||[],i==null||typeof i=="boolean"||(Di(i)?i.some(function(t){or(t,e)}):e.push(i)),e}function bp(i,e,t,r){var n,s,a,o=i.key,u=i.type,l=e[t],c=l!=null&&(2&l.__u)==0;if(l===null&&o==null||c&&o==l.key&&u==l.type)return t;if(r>(c?1:0)){for(n=t-1,s=t+1;n>=0||s<e.length;)if((l=e[a=n>=0?n--:s++])!=null&&(2&l.__u)==0&&o==l.key&&u==l.type)return a}return-1}function vu(i,e,t){e[0]=="-"?i.setProperty(e,t==null?"":t):i[e]=t==null?"":typeof t!="number"||_p.test(e)?t:t+"px"}function dn(i,e,t,r,n){var s,a;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof r=="string"&&(i.style.cssText=r=""),r)for(e in r)t&&e in t||vu(i.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||vu(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(lu,"$1")),a=e.toLowerCase(),e=a in i||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?r?t.u=r.u:(t.u=Ks,i.addEventListener(e,s?Qs:Js,s)):i.removeEventListener(e,s?Qs:Js,s);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t==null?"":t;break e}catch(o){}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function gu(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=Ks++;else if(e.t<t.u)return;return t(xe.event?xe.event(e):e)}}}function ra(i,e,t,r,n,s,a,o,u,l){var c,f,d,g,_,C,D,p,v,b,A,P,y,T,k,R,z,F=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(u=!!(32&t.__u),s=[o=e.__e=t.__e]),(c=xe.__b)&&c(e);e:if(typeof F=="function")try{if(p=e.props,v="prototype"in F&&F.prototype.render,b=(c=F.contextType)&&r[c.__c],A=c?b?b.props.value:c.__:r,t.__c?D=(f=e.__c=t.__c).__=f.__E:(v?e.__c=f=new F(p,A):(e.__c=f=new Nt(p,A),f.constructor=F,f.render=Ep),b&&b.sub(f),f.state||(f.state={}),f.__n=r,d=f.__d=!0,f.__h=[],f._sb=[]),v&&f.__s==null&&(f.__s=f.state),v&&F.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=ar({},f.__s)),ar(f.__s,F.getDerivedStateFromProps(p,f.__s))),g=f.props,_=f.state,f.__v=e,d)v&&F.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),v&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(v&&F.getDerivedStateFromProps==null&&p!==g&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(p,A),e.__v==t.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(p,f.__s,A)===!1){for(e.__v!=t.__v&&(f.props=p,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),P=0;P<f._sb.length;P++)f.__h.push(f._sb[P]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(p,f.__s,A),v&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(g,_,C)})}if(f.context=A,f.props=p,f.__P=i,f.__e=!1,y=xe.__r,T=0,v){for(f.state=f.__s,f.__d=!1,y&&y(e),c=f.render(f.props,f.state,f.context),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[]}else do f.__d=!1,y&&y(e),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++T<25);f.state=f.__s,f.getChildContext!=null&&(r=ar(ar({},r),f.getChildContext())),v&&!d&&f.getSnapshotBeforeUpdate!=null&&(C=f.getSnapshotBeforeUpdate(g,_)),R=c,c!=null&&c.type===zt&&c.key==null&&(R=_u(c.props.children)),o=du(i,Di(R)?R:[R],e,t,r,n,s,a,o,u,l),f.base=e.__e,e.__u&=-161,f.__h.length&&a.push(f),D&&(f.__E=f.__=null)}catch(Z){if(e.__v=null,u||s!=null)if(Z.then){for(e.__u|=u?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,e.__e=o}else{for(z=s.length;z--;)ea(s[z]);ia(e)}else e.__e=t.__e,e.__k=t.__k,Z.then||ia(e);xe.__e(Z,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):o=e.__e=wp(t.__e,e,t,r,n,s,a,u,l);return(c=xe.diffed)&&c(e),128&e.__u?void 0:o}function ia(i){i&&i.__c&&(i.__c.__e=!0),i&&i.__k&&i.__k.forEach(ia)}function mu(i,e,t){for(var r=0;r<t.length;r++)na(t[r],t[++r],t[++r]);xe.__c&&xe.__c(e,i),i.some(function(n){try{i=n.__h,n.__h=[],i.some(function(s){s.call(n)})}catch(s){xe.__e(s,n.__v)}})}function _u(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:Di(i)?i.map(_u):ar({},i)}function wp(i,e,t,r,n,s,a,o,u){var l,c,f,d,g,_,C,D=t.props||Si,p=e.props,v=e.type;if(v=="svg"?n="http://www.w3.org/2000/svg":v=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((g=s[l])&&"setAttribute"in g==!!v&&(v?g.localName==v:g.nodeType==3)){i=g,s[l]=null;break}}if(i==null){if(v==null)return document.createTextNode(p);i=document.createElementNS(n,v,p.is&&p),o&&(xe.__m&&xe.__m(e,s),o=!1),s=null}if(v==null)D===p||o&&i.data==p||(i.data=p);else{if(s=s&&xi.call(i.childNodes),!o&&s!=null)for(D={},l=0;l<i.attributes.length;l++)D[(g=i.attributes[l]).name]=g.value;for(l in D)if(g=D[l],l!="children"){if(l=="dangerouslySetInnerHTML")f=g;else if(!(l in p)){if(l=="value"&&"defaultValue"in p||l=="checked"&&"defaultChecked"in p)continue;dn(i,l,null,g,n)}}for(l in p)g=p[l],l=="children"?d=g:l=="dangerouslySetInnerHTML"?c=g:l=="value"?_=g:l=="checked"?C=g:o&&typeof g!="function"||D[l]===g||dn(i,l,g,D[l],n);if(c)o||f&&(c.__html==f.__html||c.__html==i.innerHTML)||(i.innerHTML=c.__html),e.__k=[];else if(f&&(i.innerHTML=""),du(e.type=="template"?i.content:i,Di(d)?d:[d],e,t,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":n,s,a,s?s[0]:t.__k&&$r(t,0),o,u),s!=null)for(l=s.length;l--;)ea(s[l]);o||(l="value",v=="progress"&&_==null?i.removeAttribute("value"):_!=null&&(_!==i[l]||v=="progress"&&!_||v=="option"&&_!=D[l])&&dn(i,l,_,D[l],n),l="checked",C!=null&&C!=i[l]&&dn(i,l,C,D[l],n))}return i}function na(i,e,t){try{if(typeof i=="function"){var r=typeof i.__u=="function";r&&i.__u(),r&&e==null||(i.__u=i(e))}else i.current=e}catch(n){xe.__e(n,t)}}function yu(i,e,t){var r,n;if(xe.unmount&&xe.unmount(i),(r=i.ref)&&(r.current&&r.current!=i.__e||na(r,null,e)),(r=i.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){xe.__e(s,e)}r.base=r.__P=null}if(r=i.__k)for(n=0;n<r.length;n++)r[n]&&yu(r[n],e,t||typeof i.type!="function");t||ea(i.__e),i.__c=i.__=i.__e=void 0}function Ep(i,e,t){return this.constructor(i,t)}function Yr(i,e,t){var r,n,s,a;e==document&&(e=document.documentElement),xe.__&&xe.__(i,e),n=(r=typeof t=="function")?null:t&&t.__k||e.__k,s=[],a=[],ra(e,i=(!r&&t||e).__k=at(zt,null,[i]),n||Si,Si,e.namespaceURI,!r&&t?[t]:n?null:e.firstChild?xi.call(e.childNodes):null,s,!r&&t?t:n?n.__e:e.firstChild,r,a),mu(s,i,a)}function sa(i,e){Yr(i,e,sa)}function bu(i,e,t){var r,n,s,a,o=ar({},i.props);for(s in i.type&&i.type.defaultProps&&(a=i.type.defaultProps),e)s=="key"?r=e[s]:s=="ref"?n=e[s]:o[s]=e[s]===void 0&&a!=null?a[s]:e[s];return arguments.length>2&&(o.children=arguments.length>3?xi.call(arguments,2):t),Ci(i.type,o,r||i.key,n||i.ref,null)}function pn(i){function e(t){var r,n;return this.getChildContext||(r=new Set,(n={})[e.__c]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&r.forEach(function(a){a.__e=!0,ta(a)})},this.sub=function(s){r.add(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){r&&r.delete(s),a&&a.call(s)}}),t.children}return e.__c="__cC"+hu++,e.__=i,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}var xi,xe,su,mp,Or,au,ou,uu,lu,Ks,Js,Qs,hu,Si,fu,_p,Di,vn=$s(()=>{Si={},fu=[],_p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Di=Array.isArray;xi=fu.slice,xe={__e:function(i,e,t,r){for(var n,s,a;e=e.__;)if((n=e.__c)&&!n.__)try{if((s=n.constructor)&&s.getDerivedStateFromError!=null&&(n.setState(s.getDerivedStateFromError(i)),a=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(i,r||{}),a=n.__d),a)return n.__E=n}catch(o){i=o}throw i}},su=0,mp=function(i){return i!=null&&i.constructor===void 0},Nt.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ar({},this.state),typeof i=="function"&&(i=i(ar({},t),this.props)),i&&ar(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),ta(this))},Nt.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),ta(this))},Nt.prototype.render=zt,Or=[],ou=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,uu=function(i,e){return i.__v.__b-e.__v.__b},cn.__r=0,lu=/(PointerCapture)$|Capture$/i,Ks=0,Js=gu(!1),Qs=gu(!0),hu=0});function Rr(i,e){Je.__h&&Je.__h(Ue,i,Kr||e),Kr=0;var t=Ue.__H||(Ue.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({}),t.__[i]}function qt(i){return Kr=1,Ai(Nu,i)}function Ai(i,e,t){var r=Rr(dr++,2);if(r.t=i,!r.__c&&(r.__=[t?t(e):Nu(void 0,e),function(o){var u=r.__N?r.__N[0]:r.__[0],l=r.t(u,o);u!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=Ue,!Ue.__f)){var n=function(o,u,l){if(!r.__c.__H)return!0;var c=r.__c.__H.__.filter(function(d){return!!d.__c});if(c.every(function(d){return!d.__N}))return!s||s.call(this,o,u,l);var f=r.__c.props!==o;return c.forEach(function(d){if(d.__N){var g=d.__[0];d.__=d.__N,d.__N=void 0,g!==d.__[0]&&(f=!0)}}),s&&s.call(this,o,u,l)||f};Ue.__f=!0;var s=Ue.shouldComponentUpdate,a=Ue.componentWillUpdate;Ue.componentWillUpdate=function(o,u,l){if(this.__e){var c=s;s=void 0,n(o,u,l),s=c}a&&a.call(this,o,u,l)},Ue.shouldComponentUpdate=n}return r.__N||r.__}function Ot(i,e){var t=Rr(dr++,3);!Je.__s&&ua(t.__H,e)&&(t.__=i,t.u=e,Ue.__H.__h.push(t))}function Ir(i,e){var t=Rr(dr++,4);!Je.__s&&ua(t.__H,e)&&(t.__=i,t.u=e,Ue.__h.push(t))}function Jt(i){return Kr=5,wr(function(){return{current:i}},[])}function gn(i,e,t){Kr=6,Ir(function(){if(typeof i=="function"){var r=i(e());return function(){i(null),r&&typeof r=="function"&&r()}}if(i)return i.current=e(),function(){return i.current=null}},t==null?t:t.concat(i))}function wr(i,e){var t=Rr(dr++,7);return ua(t.__H,e)&&(t.__=i(),t.__H=e,t.__h=i),t.__}function ct(i,e){return Kr=8,wr(function(){return i},e)}function mn(i){var e=Ue.context[i.__c],t=Rr(dr++,9);return t.c=i,e?(t.__==null&&(t.__=!0,e.sub(Ue)),e.props.value):i.__}function _n(i,e){Je.useDebugValue&&Je.useDebugValue(e?e(i):i)}function xp(i){var e=Rr(dr++,10),t=qt();return e.__=i,Ue.componentDidCatch||(Ue.componentDidCatch=function(r,n){e.__&&e.__(r,n),t[1](r)}),[t[0],function(){t[1](void 0)}]}function yn(){var i=Rr(dr++,11);if(!i.__){for(var e=Ue.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);i.__="P"+t[0]+"-"+t[1]++}return i.__}function Sp(){for(var i;i=Eu.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(bn),i.__H.__h.forEach(oa),i.__H.__h=[]}catch(e){i.__H.__h=[],Je.__e(e,i.__v)}}function Dp(i){var e,t=function(){clearTimeout(r),ku&&cancelAnimationFrame(e),setTimeout(i)},r=setTimeout(t,35);ku&&(e=requestAnimationFrame(t))}function bn(i){var e=Ue,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),Ue=e}function oa(i){var e=Ue;i.__c=i.__(),Ue=e}function ua(i,e){return!i||i.length!==e.length||e.some(function(t,r){return t!==i[r]})}function Nu(i,e){return typeof e=="function"?e(i):e}var dr,Ue,aa,wu,Kr,Eu,Je,xu,Su,Du,Cu,Au,Tu,ku,la=$s(()=>{vn();Kr=0,Eu=[],Je=xe,xu=Je.__b,Su=Je.__r,Du=Je.diffed,Cu=Je.__c,Au=Je.unmount,Tu=Je.__;Je.__b=function(i){Ue=null,xu&&xu(i)},Je.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),Tu&&Tu(i,e)},Je.__r=function(i){Su&&Su(i),dr=0;var e=(Ue=i.__c).__H;e&&(aa===Ue?(e.__h=[],Ue.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(bn),e.__h.forEach(oa),e.__h=[],dr=0)),aa=Ue},Je.diffed=function(i){Du&&Du(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Eu.push(e)!==1&&wu===Je.requestAnimationFrame||((wu=Je.requestAnimationFrame)||Dp)(Sp)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),aa=Ue=null},Je.__c=function(i,e){e.some(function(t){try{t.__h.forEach(bn),t.__h=t.__h.filter(function(r){return!r.__||oa(r)})}catch(r){e.some(function(n){n.__h&&(n.__h=[])}),e=[],Je.__e(r,t.__v)}}),Cu&&Cu(i,e)},Je.unmount=function(i){Au&&Au(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{bn(r)}catch(n){e=n}}),t.__H=void 0,e&&Je.__e(e,t.__v))};ku=typeof requestAnimationFrame=="function"});var al={};iu(al,{Children:()=>Pu,Component:()=>Nt,Fragment:()=>zt,PureComponent:()=>wn,StrictMode:()=>nl,Suspense:()=>Ti,SuspenseList:()=>Jr,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>Yu,cloneElement:()=>el,createContext:()=>pn,createElement:()=>at,createFactory:()=>Ku,createPortal:()=>Vu,createRef:()=>fn,default:()=>_a,findDOMNode:()=>tl,flushSync:()=>il,forwardRef:()=>Bu,hydrate:()=>Hu,isElement:()=>sl,isFragment:()=>Ju,isMemo:()=>Qu,isValidElement:()=>ki,lazy:()=>Uu,memo:()=>Ru,render:()=>En,startTransition:()=>da,unmountComponentAtNode:()=>Ni,unstable_batchedUpdates:()=>rl,useCallback:()=>ct,useContext:()=>mn,useDebugValue:()=>_n,useDeferredValue:()=>pa,useEffect:()=>Ot,useErrorBoundary:()=>xp,useId:()=>yn,useImperativeHandle:()=>gn,useInsertionEffect:()=>ga,useLayoutEffect:()=>Ir,useMemo:()=>wr,useReducer:()=>Ai,useRef:()=>Jt,useState:()=>qt,useSyncExternalStore:()=>fa,useTransition:()=>va,version:()=>zp});function Ou(i,e){for(var t in e)i[t]=e[t];return i}function ha(i,e){for(var t in i)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&i[r]!==e[r])return!0;return!1}function fa(i,e){var t=e(),r=qt({t:{__:t,u:e}}),n=r[0].t,s=r[1];return Ir(function(){n.__=t,n.u=e,ca(n)&&s({t:n})},[i,t,e]),Ot(function(){return ca(n)&&s({t:n}),i(function(){ca(n)&&s({t:n})})},[i]),t}function ca(i){var e,t,r=i.u,n=i.__;try{var s=r();return!((e=n)===(t=s)&&(e!==0||1/e==1/t)||e!=e&&t!=t)}catch(a){return!0}}function da(i){i()}function pa(i){return i}function va(){return[!1,da]}function wn(i,e){this.props=i,this.context=e}function Ru(i,e){function t(n){var s=this.props.ref,a=s==n.ref;return!a&&s&&(s.call?s(null):s.current=null),e?!e(this.props,n)||!a:ha(this.props,n)}function r(n){return this.shouldComponentUpdate=t,at(i,n)}return r.displayName="Memo("+(i.displayName||i.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r.type=i,r}function Bu(i){function e(t){var r=Ou({},t);return delete r.ref,i(r,t.ref||null)}return e.$$typeof=Cp,e.render=i,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(i.displayName||i.name)+")",e}function Mu(i,e,t){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),i.__c.__H=null),(i=Ou({},i)).__c!=null&&(i.__c.__P===t&&(i.__c.__P=e),i.__c.__e=!0,i.__c=null),i.__k=i.__k&&i.__k.map(function(r){return Mu(r,e,t)})),i}function zu(i,e,t){return i&&t&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(r){return zu(r,e,t)}),i.__c&&i.__c.__P===e&&(i.__e&&t.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=t)),i}function Ti(){this.__u=0,this.o=null,this.__b=null}function qu(i){var e=i.__.__c;return e&&e.__a&&e.__a(i)}function Uu(i){var e,t,r,n=null;function s(a){if(e||(e=i()).then(function(o){o&&(n=o.default||o),r=!0},function(o){t=o,r=!0}),t)throw t;if(!r)throw e;return n?at(n,a):null}return s.displayName="Lazy",s.__f=!0,s}function Jr(){this.i=null,this.l=null}function Tp(i){return this.getChildContext=function(){return i.context},i.children}function kp(i){var e=this,t=i.h;if(e.componentWillUnmount=function(){Yr(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),!e.v){for(var r=e.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(n,s){this.childNodes.push(n),e.h.insertBefore(n,s)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.h.removeChild(n)}}}Yr(at(Tp,{context:e.context},i.__v),e.v)}function Vu(i,e){var t=at(kp,{__v:i,h:e});return t.containerInfo=e,t}function En(i,e,t){return e.__k==null&&(e.textContent=""),Yr(i,e),typeof t=="function"&&t(),i?i.__c:null}function Hu(i,e,t){return sa(i,e),typeof t=="function"&&t(),i?i.__c:null}function Lp(){}function Pp(){return this.cancelBubble}function Fp(){return this.defaultPrevented}function Ku(i){return at.bind(null,i)}function ki(i){return!!i&&i.$$typeof===ju}function Ju(i){return ki(i)&&i.type===zt}function Qu(i){return!!i&&!!i.displayName&&(typeof i.displayName=="string"||i.displayName instanceof String)&&i.displayName.startsWith("Memo(")}function el(i){return ki(i)?bu.apply(null,arguments):i}function Ni(i){return!!i.__k&&(Yr(null,i),!0)}function tl(i){return i&&(i.base||i.nodeType===1&&i)||null}var ga,Iu,Cp,Lu,Pu,Ap,Fu,Wu,ju,Np,Op,Rp,Ip,Bp,Zu,ma,Mp,Gu,Xu,$u,Yu,zp,rl,il,nl,sl,_a,Qr=$s(()=>{vn();vn();la();la();ga=Ir;(wn.prototype=new Nt).isPureReactComponent=!0,wn.prototype.shouldComponentUpdate=function(i,e){return ha(this.props,i)||ha(this.state,e)};Iu=xe.__b;xe.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),Iu&&Iu(i)};Cp=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;Lu=function(i,e){return i==null?null:or(or(i).map(e))},Pu={map:Lu,forEach:Lu,count:function(i){return i?or(i).length:0},only:function(i){var e=or(i);if(e.length!==1)throw"Children.only";return e[0]},toArray:or},Ap=xe.__e;xe.__e=function(i,e,t,r){if(i.then){for(var n,s=e;s=s.__;)if((n=s.__c)&&n.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),n.__c(i,e)}Ap(i,e,t,r)};Fu=xe.unmount;xe.unmount=function(i){var e=i.__c;e&&e.__R&&e.__R(),e&&32&i.__u&&(i.type=null),Fu&&Fu(i)},(Ti.prototype=new Nt).__c=function(i,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var n=qu(r.__v),s=!1,a=function(){s||(s=!0,t.__R=null,n?n(o):o())};t.__R=a;var o=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=zu(u,u.__c.__P,u.__c.__O)}var l;for(r.setState({__a:r.__b=null});l=r.o.pop();)l.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),i.then(a,a)},Ti.prototype.componentWillUnmount=function(){this.o=[]},Ti.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Mu(this.__b,t,r.__O=r.__P)}this.__b=null}var n=e.__a&&at(zt,null,i.fallback);return n&&(n.__u&=-33),[at(zt,null,e.__a?null:i.children),n]};Wu=function(i,e,t){if(++t[1]===t[0]&&i.l.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(t=i.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;i.i=t=t[2]}};(Jr.prototype=new Nt).__a=function(i){var e=this,t=qu(e.__v),r=e.l.get(i);return r[0]++,function(n){var s=function(){e.props.revealOrder?(r.push(n),Wu(e,i,r)):n()};t?t(s):s()}},Jr.prototype.render=function(i){this.i=null,this.l=new Map;var e=or(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return i.children},Jr.prototype.componentDidUpdate=Jr.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(e,t){Wu(i,t,e)})};ju=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Np=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Op=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Rp=/[A-Z0-9]/g,Ip=typeof document!="undefined",Bp=function(i){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};Nt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(Nt.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});Zu=xe.event;xe.event=function(i){return Zu&&(i=Zu(i)),i.persist=Lp,i.isPropagationStopped=Pp,i.isDefaultPrevented=Fp,i.nativeEvent=i};Mp={enumerable:!1,configurable:!0,get:function(){return this.class}},Gu=xe.vnode;xe.vnode=function(i){typeof i.type=="string"&&function(e){var t=e.props,r=e.type,n={},s=r.indexOf("-")===-1;for(var a in t){var o=t[a];if(!(a==="value"&&"defaultValue"in t&&o==null||Ip&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var u=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&o===!0?o="":u==="translate"&&o==="no"?o=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?a="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||Bp(t.type)?u==="onfocus"?a="onfocusin":u==="onblur"?a="onfocusout":Op.test(a)&&(a=u):u=a="oninput":s&&Np.test(a)?a=a.replace(Rp,"-$&").toLowerCase():o===null&&(o=void 0),u==="oninput"&&n[a=u]&&(a="oninputCapture"),n[a]=o}}r=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=or(t.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),r=="select"&&n.defaultValue!=null&&(n.value=or(t.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),t.class&&!t.className?(n.class=t.class,Object.defineProperty(n,"className",Mp)):(t.className&&!t.class||t.class&&t.className)&&(n.class=n.className=t.className),e.props=n}(i),i.$$typeof=ju,Gu&&Gu(i)};Xu=xe.__r;xe.__r=function(i){Xu&&Xu(i),ma=i.__c};$u=xe.diffed;xe.diffed=function(i){$u&&$u(i);var e=i.props,t=i.__e;t!=null&&i.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),ma=null};Yu={ReactCurrentDispatcher:{current:{readContext:function(i){return ma.__n[i.__c].props.value},useCallback:ct,useContext:mn,useDebugValue:_n,useDeferredValue:pa,useEffect:Ot,useId:yn,useImperativeHandle:gn,useInsertionEffect:ga,useLayoutEffect:Ir,useMemo:wr,useReducer:Ai,useRef:Jt,useState:qt,useSyncExternalStore:fa,useTransition:va}}},zp="18.3.1";rl=function(i,e){return i(e)},il=function(i,e){return i(e)},nl=zt,sl=ki,_a={useState:qt,useId:yn,useReducer:Ai,useEffect:Ot,useLayoutEffect:Ir,useInsertionEffect:ga,useTransition:va,useDeferredValue:pa,useSyncExternalStore:fa,startTransition:da,useRef:Jt,useImperativeHandle:gn,useMemo:wr,useCallback:ct,useContext:mn,useDebugValue:_n,version:"18.3.1",Children:Pu,render:En,hydrate:Hu,unmountComponentAtNode:Ni,createPortal:Vu,createElement:at,createContext:pn,createFactory:Ku,cloneElement:el,createRef:fn,Fragment:zt,isValidElement:ki,isElement:sl,isFragment:Ju,isMemo:Qu,findDOMNode:tl,Component:Nt,PureComponent:wn,memo:Ru,forwardRef:Bu,flushSync:il,unstable_batchedUpdates:rl,StrictMode:nl,Suspense:Ti,SuspenseList:Jr,lazy:Uu,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Yu}});var xn=K((V2,ol)=>{ol.exports=(Qr(),al)});var ll=K((j2,ul)=>{"use strict";var qp="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";ul.exports=qp});var dl=K((H2,cl)=>{"use strict";var Up=ll();function hl(){}function fl(){}fl.resetWarningCache=hl;cl.exports=function(){function i(r,n,s,a,o,u){if(u!==Up){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}i.isRequired=i;function e(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:fl,resetWarningCache:hl};return t.PropTypes=t,t}});var ya=K((X2,pl)=>{pl.exports=dl()();var Z2,G2});var ba=K(($2,vl)=>{"use strict";var Wp=void 0;vl.exports=function(i){return i!==Wp&&i!==null}});var ml=K((Y2,gl)=>{"use strict";var Vp=ba(),jp={object:!0,function:!0,undefined:!0};gl.exports=function(i){return Vp(i)?hasOwnProperty.call(jp,typeof i):!1}});var yl=K((K2,_l)=>{"use strict";var Hp=ml();_l.exports=function(i){if(!Hp(i))return!1;try{return i.constructor?i.constructor.prototype===i:!1}catch(e){return!1}}});var wl=K((J2,bl)=>{"use strict";var Zp=yl();bl.exports=function(i){if(typeof i!="function"||!hasOwnProperty.call(i,"length"))return!1;try{if(typeof i.length!="number"||typeof i.call!="function"||typeof i.apply!="function")return!1}catch(e){return!1}return!Zp(i)}});var xl=K((Q2,El)=>{"use strict";var Gp=wl(),Xp=/^\s*class[\s{/}]/,$p=Function.prototype.toString;El.exports=function(i){return!(!Gp(i)||Xp.test($p.call(i)))}});var Dl=K((ey,Sl)=>{"use strict";Sl.exports=function(){var i=Object.assign,e;return typeof i!="function"?!1:(e={foo:"raz"},i(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}});var Al=K((ty,Cl)=>{"use strict";Cl.exports=function(){try{return Object.keys("primitive"),!0}catch(i){return!1}}});var kl=K((ry,Tl)=>{"use strict";Tl.exports=function(){}});var Sn=K((iy,Nl)=>{"use strict";var Yp=kl()();Nl.exports=function(i){return i!==Yp&&i!==null}});var Rl=K((ny,Ol)=>{"use strict";var Kp=Sn(),Jp=Object.keys;Ol.exports=function(i){return Jp(Kp(i)?Object(i):i)}});var Bl=K((sy,Il)=>{"use strict";Il.exports=Al()()?Object.keys:Rl()});var Pl=K((ay,Ll)=>{"use strict";var Qp=Sn();Ll.exports=function(i){if(!Qp(i))throw new TypeError("Cannot use null or undefined");return i}});var Ml=K((oy,Fl)=>{"use strict";var ev=Bl(),tv=Pl(),rv=Math.max;Fl.exports=function(i,e){var t,r,n=rv(arguments.length,2),s;for(i=Object(tv(i)),s=function(a){try{i[a]=e[a]}catch(o){t||(t=o)}},r=1;r<n;++r)e=arguments[r],ev(e).forEach(s);if(t!==void 0)throw t;return i}});var ql=K((uy,zl)=>{"use strict";zl.exports=Dl()()?Object.assign:Ml()});var Wl=K((ly,Ul)=>{"use strict";var iv=Sn(),nv=Array.prototype.forEach,sv=Object.create,av=function(i,e){var t;for(t in i)e[t]=i[t]};Ul.exports=function(i){var e=sv(null);return nv.call(arguments,function(t){!iv(t)||av(Object(t),e)}),e}});var jl=K((hy,Vl)=>{"use strict";var wa="razdwatrzy";Vl.exports=function(){return typeof wa.contains!="function"?!1:wa.contains("dwa")===!0&&wa.contains("foo")===!1}});var Zl=K((fy,Hl)=>{"use strict";var ov=String.prototype.indexOf;Hl.exports=function(i){return ov.call(this,i,arguments[1])>-1}});var Xl=K((cy,Gl)=>{"use strict";Gl.exports=jl()()?String.prototype.contains:Zl()});var Ql=K((dy,Jl)=>{"use strict";var Dn=ba(),$l=xl(),Yl=ql(),Kl=Wl(),Oi=Xl(),uv=Jl.exports=function(i,e){var t,r,n,s,a;return arguments.length<2||typeof i!="string"?(s=e,e=i,i=null):s=arguments[2],Dn(i)?(t=Oi.call(i,"c"),r=Oi.call(i,"e"),n=Oi.call(i,"w")):(t=n=!0,r=!1),a={value:e,configurable:t,enumerable:r,writable:n},s?Yl(Kl(s),a):a};uv.gs=function(i,e,t){var r,n,s,a;return typeof i!="string"?(s=t,t=e,e=i,i=null):s=arguments[3],Dn(e)?$l(e)?Dn(t)?$l(t)||(s=t,t=void 0):t=void 0:(s=e,e=t=void 0):e=void 0,Dn(i)?(r=Oi.call(i,"c"),n=Oi.call(i,"e")):(r=!0,n=!1),a={get:e,set:t,configurable:r,enumerable:n},s?Yl(Kl(s),a):a}});var th=K((py,eh)=>{"use strict";eh.exports=function(i){if(typeof i!="function")throw new TypeError(i+" is not a function");return i}});var Qt=K((Na,ah)=>{"use strict";var Cn=Ql(),Ea=th(),xa=Function.prototype.apply,Sa=Function.prototype.call,rh=Object.create,lv=Object.defineProperty,ih=Object.defineProperties,Da=Object.prototype.hasOwnProperty,Ca={configurable:!0,enumerable:!1,writable:!0},An,Aa,Tn,Ta,nh,ka,sh;An=function(i,e){var t;return Ea(e),Da.call(this,"__ee__")?t=this.__ee__:(t=Ca.value=rh(null),lv(this,"__ee__",Ca),Ca.value=null),t[i]?typeof t[i]=="object"?t[i].push(e):t[i]=[t[i],e]:t[i]=e,this};Aa=function(i,e){var t,r;return Ea(e),r=this,An.call(this,i,t=function(){Tn.call(r,i,t),xa.call(e,this,arguments)}),t.__eeOnceListener__=e,this};Tn=function(i,e){var t,r,n,s;if(Ea(e),!Da.call(this,"__ee__"))return this;if(t=this.__ee__,!t[i])return this;if(r=t[i],typeof r=="object")for(s=0;n=r[s];++s)(n===e||n.__eeOnceListener__===e)&&(r.length===2?t[i]=r[s?0:1]:r.splice(s,1));else(r===e||r.__eeOnceListener__===e)&&delete t[i];return this};Ta=function(i){var e,t,r,n,s;if(!!Da.call(this,"__ee__")&&(n=this.__ee__[i],!!n))if(typeof n=="object"){for(t=arguments.length,s=new Array(t-1),e=1;e<t;++e)s[e-1]=arguments[e];for(n=n.slice(),e=0;r=n[e];++e)xa.call(r,this,s)}else switch(arguments.length){case 1:Sa.call(n,this);break;case 2:Sa.call(n,this,arguments[1]);break;case 3:Sa.call(n,this,arguments[1],arguments[2]);break;default:for(t=arguments.length,s=new Array(t-1),e=1;e<t;++e)s[e-1]=arguments[e];xa.call(n,this,s)}};nh={on:An,once:Aa,off:Tn,emit:Ta};ka={on:Cn(An),once:Cn(Aa),off:Cn(Tn),emit:Cn(Ta)};sh=ih({},ka);ah.exports=Na=function(i){return i==null?rh(sh):ih(Object(i),ka)};Na.methods=nh});var Ii=K(Ri=>{"use strict";function hv(i,e,t){if(t===void 0&&(t=Array.prototype),i&&typeof t.find=="function")return t.find.call(i,e);for(var r=0;r<i.length;r++)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r];if(e.call(void 0,n,r,i))return n}}function Oa(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}var oh=Oa({HTML:"text/html",isHTML:function(i){return i===oh.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),uh=Oa({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===uh.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ri.find=hv;Ri.freeze=Oa;Ri.MIME_TYPE=oh;Ri.NAMESPACE=uh});var Wa=K(Er=>{var lh=Ii(),ur=lh.find,Bi=lh.NAMESPACE;function fv(i){return i!==""}function cv(i){return i?i.split(/[\t\n\f\r ]+/).filter(fv):[]}function dv(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function hh(i){if(!i)return[];var e=cv(i);return Object.keys(e.reduce(dv,{}))}function pv(i){return function(e){return i&&i.indexOf(e)!==-1}}function Li(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function At(i,e){var t=i.prototype;if(!(t instanceof e)){let n=function(){};var r=n;n.prototype=e.prototype,n=new n,Li(t,n),i.prototype=t=n}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var Tt={},er=Tt.ELEMENT_NODE=1,ei=Tt.ATTRIBUTE_NODE=2,kn=Tt.TEXT_NODE=3,fh=Tt.CDATA_SECTION_NODE=4,ch=Tt.ENTITY_REFERENCE_NODE=5,vv=Tt.ENTITY_NODE=6,dh=Tt.PROCESSING_INSTRUCTION_NODE=7,ph=Tt.COMMENT_NODE=8,vh=Tt.DOCUMENT_NODE=9,gh=Tt.DOCUMENT_TYPE_NODE=10,pr=Tt.DOCUMENT_FRAGMENT_NODE=11,gv=Tt.NOTATION_NODE=12,bt={},pt={},gy=bt.INDEX_SIZE_ERR=(pt[1]="Index size error",1),my=bt.DOMSTRING_SIZE_ERR=(pt[2]="DOMString size error",2),kt=bt.HIERARCHY_REQUEST_ERR=(pt[3]="Hierarchy request error",3),_y=bt.WRONG_DOCUMENT_ERR=(pt[4]="Wrong document",4),yy=bt.INVALID_CHARACTER_ERR=(pt[5]="Invalid character",5),by=bt.NO_DATA_ALLOWED_ERR=(pt[6]="No data allowed",6),wy=bt.NO_MODIFICATION_ALLOWED_ERR=(pt[7]="No modification allowed",7),mh=bt.NOT_FOUND_ERR=(pt[8]="Not found",8),Ey=bt.NOT_SUPPORTED_ERR=(pt[9]="Not supported",9),_h=bt.INUSE_ATTRIBUTE_ERR=(pt[10]="Attribute in use",10),xy=bt.INVALID_STATE_ERR=(pt[11]="Invalid state",11),Sy=bt.SYNTAX_ERR=(pt[12]="Syntax error",12),Dy=bt.INVALID_MODIFICATION_ERR=(pt[13]="Invalid modification",13),Cy=bt.NAMESPACE_ERR=(pt[14]="Invalid namespace",14),Ay=bt.INVALID_ACCESS_ERR=(pt[15]="Invalid access",15);function ot(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,pt[i]),this.message=pt[i],Error.captureStackTrace&&Error.captureStackTrace(this,ot);return t.code=i,e&&(this.message=this.message+": "+e),t}ot.prototype=Error.prototype;Li(bt,ot);function vr(){}vr.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var t=[],r=0;r<this.length;r++)ri(this[r],t,i,e);return t.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function ti(i,e){this._node=i,this._refresh=e,Ra(this)}function Ra(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var t=i._refresh(i._node);if(Lh(i,"length",t.length),!i.$$length||t.length<i.$$length)for(var r=t.length;r in i;r++)Object.prototype.hasOwnProperty.call(i,r)&&delete i[r];Li(t,i),i._inc=e}}ti.prototype.item=function(i){return Ra(this),this[i]||null};At(ti,vr);function Nn(){}function yh(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function bh(i,e,t,r){if(r?e[yh(e,r)]=t:e[e.length++]=t,i){t.ownerElement=i;var n=i.ownerDocument;n&&(r&&Sh(n,i,r),mv(n,i,t))}}function wh(i,e,t){var r=yh(e,t);if(r>=0){for(var n=e.length-1;r<n;)e[r]=e[++r];if(e.length=n,i){var s=i.ownerDocument;s&&(Sh(s,i,t),t.ownerElement=null)}}else throw new ot(mh,new Error(i.tagName+"@"+t))}Nn.prototype={length:0,item:vr.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new ot(_h);var t=this.getNamedItem(i.nodeName);return bh(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new ot(_h);return t=this.getNamedItemNS(i.namespaceURI,i.localName),bh(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return wh(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return wh(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var r=this[t];if(r.localName==e&&r.namespaceURI==i)return r}return null}};function Eh(){}Eh.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var r=new Fi;if(r.implementation=this,r.childNodes=new vr,r.doctype=t||null,t&&r.appendChild(t),e){var n=r.createElementNS(i,e);r.appendChild(n)}return r},createDocumentType:function(i,e,t){var r=new In;return r.name=i,r.nodeName=i,r.publicId=e||"",r.systemId=t||"",r}};function Me(){}Me.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return On(this,i,e)},replaceChild:function(i,e){On(this,i,e,Th),e&&this.removeChild(e)},removeChild:function(i){return Dh(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return Ua(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==kn&&i.nodeType==kn?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&t[r]===i)return r}e=e.nodeType==ei?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&i in t&&Object.prototype.hasOwnProperty.call(t,i))return t[i];e=e.nodeType==ei?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function xh(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}Li(Tt,Me);Li(Tt,Me.prototype);function Pi(i,e){if(e(i))return!0;if(i=i.firstChild)do if(Pi(i,e))return!0;while(i=i.nextSibling)}function Fi(){this.ownerDocument=this}function mv(i,e,t){i&&i._inc++;var r=t.namespaceURI;r===Bi.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Sh(i,e,t,r){i&&i._inc++;var n=t.namespaceURI;n===Bi.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Ia(i,e,t){if(i&&i._inc){i._inc++;var r=e.childNodes;if(t)r[r.length++]=t;else{for(var n=e.firstChild,s=0;n;)r[s++]=n,n=n.nextSibling;r.length=s,delete r[r.length]}}}function Dh(i,e){var t=e.previousSibling,r=e.nextSibling;return t?t.nextSibling=r:i.firstChild=r,r?r.previousSibling=t:i.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Ia(i.ownerDocument,i),e}function _v(i){return i&&(i.nodeType===Me.DOCUMENT_NODE||i.nodeType===Me.DOCUMENT_FRAGMENT_NODE||i.nodeType===Me.ELEMENT_NODE)}function yv(i){return i&&(lr(i)||Ba(i)||gr(i)||i.nodeType===Me.DOCUMENT_FRAGMENT_NODE||i.nodeType===Me.COMMENT_NODE||i.nodeType===Me.PROCESSING_INSTRUCTION_NODE)}function gr(i){return i&&i.nodeType===Me.DOCUMENT_TYPE_NODE}function lr(i){return i&&i.nodeType===Me.ELEMENT_NODE}function Ba(i){return i&&i.nodeType===Me.TEXT_NODE}function Ch(i,e){var t=i.childNodes||[];if(ur(t,lr)||gr(e))return!1;var r=ur(t,gr);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function Ah(i,e){var t=i.childNodes||[];function r(s){return lr(s)&&s!==e}if(ur(t,r))return!1;var n=ur(t,gr);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function bv(i,e,t){if(!_v(i))throw new ot(kt,"Unexpected parent node type "+i.nodeType);if(t&&t.parentNode!==i)throw new ot(mh,"child not in parent");if(!yv(e)||gr(e)&&i.nodeType!==Me.DOCUMENT_NODE)throw new ot(kt,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function wv(i,e,t){var r=i.childNodes||[],n=e.childNodes||[];if(e.nodeType===Me.DOCUMENT_FRAGMENT_NODE){var s=n.filter(lr);if(s.length>1||ur(n,Ba))throw new ot(kt,"More than one element or text in fragment");if(s.length===1&&!Ch(i,t))throw new ot(kt,"Element in fragment can not be inserted before doctype")}if(lr(e)&&!Ch(i,t))throw new ot(kt,"Only one element can be added and only after doctype");if(gr(e)){if(ur(r,gr))throw new ot(kt,"Only one doctype is allowed");var a=ur(r,lr);if(t&&r.indexOf(a)<r.indexOf(t))throw new ot(kt,"Doctype can only be inserted before an element");if(!t&&a)throw new ot(kt,"Doctype can not be appended since element is present")}}function Th(i,e,t){var r=i.childNodes||[],n=e.childNodes||[];if(e.nodeType===Me.DOCUMENT_FRAGMENT_NODE){var s=n.filter(lr);if(s.length>1||ur(n,Ba))throw new ot(kt,"More than one element or text in fragment");if(s.length===1&&!Ah(i,t))throw new ot(kt,"Element in fragment can not be inserted before doctype")}if(lr(e)&&!Ah(i,t))throw new ot(kt,"Only one element can be added and only after doctype");if(gr(e)){let u=function(l){return gr(l)&&l!==t};var o=u;if(ur(r,u))throw new ot(kt,"Only one doctype is allowed");var a=ur(r,lr);if(t&&r.indexOf(a)<r.indexOf(t))throw new ot(kt,"Doctype can only be inserted before an element")}}function On(i,e,t,r){bv(i,e,t),i.nodeType===Me.DOCUMENT_NODE&&(r||wv)(i,e,t);var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===pr){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:i.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:i.firstChild=s,t==null?i.lastChild=a:t.previousSibling=a;do s.parentNode=i;while(s!==a&&(s=s.nextSibling));return Ia(i.ownerDocument||i,i),e.nodeType==pr&&(e.firstChild=e.lastChild=null),e}function Ev(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,Ia(i.ownerDocument,i,e),e}Fi.prototype={nodeName:"#document",nodeType:vh,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==pr){for(var t=i.firstChild;t;){var r=t.nextSibling;this.insertBefore(t,e),t=r}return i}return On(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===er&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),Dh(this,i)},replaceChild:function(i,e){On(this,i,e,Th),i.ownerDocument=this,e&&this.removeChild(e),lr(i)&&(this.documentElement=i)},importNode:function(i,e){return Bh(this,i,e)},getElementById:function(i){var e=null;return Pi(this.documentElement,function(t){if(t.nodeType==er&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=hh(i);return new ti(this,function(t){var r=[];return e.length>0&&Pi(t.documentElement,function(n){if(n!==t&&n.nodeType===er){var s=n.getAttribute("class");if(s){var a=i===s;if(!a){var o=hh(s);a=e.every(pv(o))}a&&r.push(n)}}}),r})},createElement:function(i){var e=new Br;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new vr;var t=e.attributes=new Nn;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new Bn;return i.ownerDocument=this,i.childNodes=new vr,i},createTextNode:function(i){var e=new La;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new Pa;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new Fa;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new za;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new Rn;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new Ma;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new Br,r=e.split(":"),n=t.attributes=new Nn;return t.childNodes=new vr,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,n._ownerElement=t,t},createAttributeNS:function(i,e){var t=new Rn,r=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,t}};At(Fi,Me);function Br(){this._nsMap={}}Br.prototype={nodeType:er,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===pr?this.insertBefore(i,null):Ev(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var r=this.ownerDocument.createAttributeNS(i,e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new ti(this,function(e){var t=[];return Pi(e,function(r){r!==e&&r.nodeType==er&&(i==="*"||r.tagName==i)&&t.push(r)}),t})},getElementsByTagNameNS:function(i,e){return new ti(this,function(t){var r=[];return Pi(t,function(n){n!==t&&n.nodeType===er&&(i==="*"||n.namespaceURI===i)&&(e==="*"||n.localName==e)&&r.push(n)}),r})}};Fi.prototype.getElementsByTagName=Br.prototype.getElementsByTagName;Fi.prototype.getElementsByTagNameNS=Br.prototype.getElementsByTagNameNS;At(Br,Me);function Rn(){}Rn.prototype.nodeType=ei;At(Rn,Me);function Mi(){}Mi.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(pt[kt])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var r=this.data.substring(0,i),n=this.data.substring(i+e);t=r+t+n,this.nodeValue=this.data=t,this.length=t.length}};At(Mi,Me);function La(){}La.prototype={nodeName:"#text",nodeType:kn,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};At(La,Mi);function Pa(){}Pa.prototype={nodeName:"#comment",nodeType:ph};At(Pa,Mi);function Fa(){}Fa.prototype={nodeName:"#cdata-section",nodeType:fh};At(Fa,Mi);function In(){}In.prototype.nodeType=gh;At(In,Me);function kh(){}kh.prototype.nodeType=gv;At(kh,Me);function Nh(){}Nh.prototype.nodeType=vv;At(Nh,Me);function Ma(){}Ma.prototype.nodeType=ch;At(Ma,Me);function Bn(){}Bn.prototype.nodeName="#document-fragment";Bn.prototype.nodeType=pr;At(Bn,Me);function za(){}za.prototype.nodeType=dh;At(za,Me);function Oh(){}Oh.prototype.serializeToString=function(i,e,t){return Rh.call(i,e,t)};Me.prototype.toString=Rh;function Rh(i,e){var t=[],r=this.nodeType==9&&this.documentElement||this,n=r.prefix,s=r.namespaceURI;if(s&&n==null){var n=r.lookupPrefix(s);if(n==null)var a=[{namespace:s,prefix:null}]}return ri(this,t,i,e,a),t.join("")}function Ih(i,e,t){var r=i.prefix||"",n=i.namespaceURI;if(!n||r==="xml"&&n===Bi.XML||n===Bi.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===r)return a.namespace!==n}return!0}function qa(i,e,t){i.push(" ",e,'="',t.replace(/[<&"]/g,xh),'"')}function ri(i,e,t,r,n){if(n||(n=[]),r)if(i=r(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case er:var s=i.attributes,a=s.length,o=i.firstChild,u=i.tagName;t=Bi.isHTML(i.namespaceURI)||t;var l=u;if(!t&&!i.prefix&&i.namespaceURI){for(var c,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){c=s.item(f).value;break}if(!c)for(var d=n.length-1;d>=0;d--){var g=n[d];if(g.prefix===""&&g.namespace===i.namespaceURI){c=g.namespace;break}}if(c!==i.namespaceURI)for(var d=n.length-1;d>=0;d--){var g=n[d];if(g.namespace===i.namespaceURI){g.prefix&&(l=g.prefix+":"+u);break}}}e.push("<",l);for(var _=0;_<a;_++){var C=s.item(_);C.prefix=="xmlns"?n.push({prefix:C.localName,namespace:C.value}):C.nodeName=="xmlns"&&n.push({prefix:"",namespace:C.value})}for(var _=0;_<a;_++){var C=s.item(_);if(Ih(C,t,n)){var D=C.prefix||"",p=C.namespaceURI;qa(e,D?"xmlns:"+D:"xmlns",p),n.push({prefix:D,namespace:p})}ri(C,e,t,r,n)}if(u===l&&Ih(i,t,n)){var D=i.prefix||"",p=i.namespaceURI;qa(e,D?"xmlns:"+D:"xmlns",p),n.push({prefix:D,namespace:p})}if(o||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(e.push(">"),t&&/^script$/i.test(u))for(;o;)o.data?e.push(o.data):ri(o,e,t,r,n.slice()),o=o.nextSibling;else for(;o;)ri(o,e,t,r,n.slice()),o=o.nextSibling;e.push("</",l,">")}else e.push("/>");return;case vh:case pr:for(var o=i.firstChild;o;)ri(o,e,t,r,n.slice()),o=o.nextSibling;return;case ei:return qa(e,i.name,i.value);case kn:return e.push(i.data.replace(/[<&]/g,xh).replace(/]]>/g,"]]&gt;"));case fh:return e.push("<![CDATA[",i.data,"]]>");case ph:return e.push("<!--",i.data,"-->");case gh:var v=i.publicId,b=i.systemId;if(e.push("<!DOCTYPE ",i.name),v)e.push(" PUBLIC ",v),b&&b!="."&&e.push(" ",b),e.push(">");else if(b&&b!=".")e.push(" SYSTEM ",b,">");else{var A=i.internalSubset;A&&e.push(" [",A,"]"),e.push(">")}return;case dh:return e.push("<?",i.target," ",i.data,"?>");case ch:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function Bh(i,e,t){var r;switch(e.nodeType){case er:r=e.cloneNode(!1),r.ownerDocument=i;case pr:break;case ei:t=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=i,r.parentNode=null,t)for(var n=e.firstChild;n;)r.appendChild(Bh(i,n,t)),n=n.nextSibling;return r}function Ua(i,e,t){var r=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=e[n];typeof s!="object"&&s!=r[n]&&(r[n]=s)}switch(e.childNodes&&(r.childNodes=new vr),r.ownerDocument=i,r.nodeType){case er:var a=e.attributes,o=r.attributes=new Nn,u=a.length;o._ownerElement=r;for(var l=0;l<u;l++)r.setAttributeNode(Ua(i,a.item(l),!0));break;case ei:t=!0}if(t)for(var c=e.firstChild;c;)r.appendChild(Ua(i,c,t)),c=c.nextSibling;return r}function Lh(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case er:case pr:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Ty=i,Object.defineProperty(ti.prototype,"length",{get:function(){return Ra(this),this.$$length}}),Object.defineProperty(Me.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case er:case pr:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Lh=function(e,t,r){e["$$"+t]=r}}}catch(i){}var Ty;Er.DocumentType=In;Er.DOMException=ot;Er.DOMImplementation=Eh;Er.Element=Br;Er.Node=Me;Er.NodeList=vr;Er.XMLSerializer=Oh});var Fh=K(zi=>{"use strict";var Ph=Ii().freeze;zi.XML_ENTITIES=Ph({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});zi.HTML_ENTITIES=Ph({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});zi.entityMap=zi.HTML_ENTITIES});var Hh=K(ja=>{var qi=Ii().NAMESPACE,Va=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Mh=new RegExp("[\\-\\.0-9"+Va.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),zh=new RegExp("^"+Va.source+Mh.source+"*(?::"+Va.source+Mh.source+"*)?$"),Ui=0,xr=1,ii=2,Wi=3,ni=4,si=5,Vi=6,Ln=7;function ai(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ai)}ai.prototype=new Error;ai.prototype.name=ai.name;function qh(){}qh.prototype={parse:function(i,e,t){var r=this.domBuilder;r.startDocument(),Vh(e,e={}),xv(i,e,t,r,this.errorHandler),r.endDocument()}};function xv(i,e,t,r,n){function s(ne){if(ne>65535){ne-=65536;var pe=55296+(ne>>10),ge=56320+(ne&1023);return String.fromCharCode(pe,ge)}else return String.fromCharCode(ne)}function a(ne){var pe=ne.slice(1,-1);return pe in t?t[pe]:pe.charAt(0)==="#"?s(parseInt(pe.substr(1).replace("x","0x"))):(n.error("entity not found:"+ne),ne)}function o(ne){if(ne>C){var pe=i.substring(C,ne).replace(/&#?\w+;/g,a);d&&u(C),r.characters(pe,0,ne-C),C=ne}}function u(ne,pe){for(;ne>=c&&(pe=f.exec(i));)l=pe.index,c=l+pe[0].length,d.lineNumber++;d.columnNumber=ne-l+1}for(var l=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,d=r.locator,g=[{currentNSMap:e}],_={},C=0;;){try{var D=i.indexOf("<",C);if(D<0){if(!i.substr(C).match(/^\s*$/)){var p=r.doc,v=p.createTextNode(i.substr(C));p.appendChild(v),r.currentElement=v}return}switch(D>C&&o(D),i.charAt(D+1)){case"/":var b=i.indexOf(">",D+3),A=i.substring(D+2,b).replace(/[ \t\n\r]+$/g,""),P=g.pop();b<0?(A=i.substring(D+2).replace(/[\s<].*/,""),n.error("end tag name: "+A+" is not complete:"+P.tagName),b=D+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),n.error("end tag name: "+A+" maybe not complete"),b=D+1+A.length);var y=P.localNSMap,T=P.tagName==A,k=T||P.tagName&&P.tagName.toLowerCase()==A.toLowerCase();if(k){if(r.endElement(P.uri,P.localName,A),y)for(var R in y)Object.prototype.hasOwnProperty.call(y,R)&&r.endPrefixMapping(R);T||n.fatalError("end tag name: "+A+" is not match the current start tagName:"+P.tagName)}else g.push(P);b++;break;case"?":d&&u(D),b=Tv(i,D,r);break;case"!":d&&u(D),b=Av(i,D,r,n);break;default:d&&u(D);var z=new jh,F=g[g.length-1].currentNSMap,b=Sv(i,D,z,F,a,n),Z=z.length;if(!z.closed&&Cv(i,b,z.tagName,_)&&(z.closed=!0,t.nbsp||n.warning("unclosed xml attribute")),d&&Z){for(var H=Uh(d,{}),te=0;te<Z;te++){var ve=z[te];u(ve.offset),ve.locator=Uh(d,{})}r.locator=H,Wh(z,r,F)&&g.push(z),r.locator=d}else Wh(z,r,F)&&g.push(z);qi.isHTML(z.uri)&&!z.closed?b=Dv(i,b,z.tagName,a,r):b++}}catch(ne){if(ne instanceof ai)throw ne;n.error("element parse error: "+ne),b=-1}b>C?C=b:o(Math.max(D,C)+1)}}function Uh(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function Sv(i,e,t,r,n,s){function a(g,_,C){t.attributeNames.hasOwnProperty(g)&&s.fatalError("Attribute "+g+" redefined"),t.addValue(g,_,C)}for(var o,u,l=++e,c=Ui;;){var f=i.charAt(l);switch(f){case"=":if(c===xr)o=i.slice(e,l),c=Wi;else if(c===ii)c=Wi;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===Wi||c===xr)if(c===xr&&(s.warning('attribute value must after "="'),o=i.slice(e,l)),e=l+1,l=i.indexOf(f,e),l>0)u=i.slice(e,l).replace(/&#?\w+;/g,n),a(o,u,e-1),c=si;else throw new Error("attribute value no end '"+f+"' match");else if(c==ni)u=i.slice(e,l).replace(/&#?\w+;/g,n),a(o,u,e),s.warning('attribute "'+o+'" missed start quot('+f+")!!"),e=l+1,c=si;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Ui:t.setTagName(i.slice(e,l));case si:case Vi:case Ln:c=Ln,t.closed=!0;case ni:case xr:break;case ii:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==Ui&&t.setTagName(i.slice(e,l)),l;case">":switch(c){case Ui:t.setTagName(i.slice(e,l));case si:case Vi:case Ln:break;case ni:case xr:u=i.slice(e,l),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case ii:c===ii&&(u=o),c==ni?(s.warning('attribute "'+u+'" missed quot(")!'),a(o,u.replace(/&#?\w+;/g,n),e)):((!qi.isHTML(r[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),a(u,u,e));break;case Wi:throw new Error("attribute value missed!!")}return l;case"\x80":f=" ";default:if(f<=" ")switch(c){case Ui:t.setTagName(i.slice(e,l)),c=Vi;break;case xr:o=i.slice(e,l),c=ii;break;case ni:var u=i.slice(e,l).replace(/&#?\w+;/g,n);s.warning('attribute "'+u+'" missed quot(")!!'),a(o,u,e);case si:c=Vi;break}else switch(c){case ii:var d=t.tagName;(!qi.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=l,c=xr;break;case si:s.warning('attribute space is required"'+o+'"!!');case Vi:c=xr,e=l;break;case Wi:c=ni,e=l;break;case Ln:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function Wh(i,e,t){for(var r=i.tagName,n=null,s=i.length;s--;){var a=i[s],o=a.qName,u=a.value,d=o.indexOf(":");if(d>0)var l=a.prefix=o.slice(0,d),c=o.slice(d+1),f=l==="xmlns"&&c;else c=o,l=null,f=o==="xmlns"&&"";a.localName=c,f!==!1&&(n==null&&(n={},Vh(t,t={})),t[f]=n[f]=u,a.uri=qi.XMLNS,e.startPrefixMapping(f,u))}for(var s=i.length;s--;){a=i[s];var l=a.prefix;l&&(l==="xml"&&(a.uri=qi.XML),l!=="xmlns"&&(a.uri=t[l||""]))}var d=r.indexOf(":");d>0?(l=i.prefix=r.slice(0,d),c=i.localName=r.slice(d+1)):(l=null,c=i.localName=r);var g=i.uri=t[l||""];if(e.startElement(g,c,r,i),i.closed){if(e.endElement(g,c,r),n)for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&e.endPrefixMapping(l)}else return i.currentNSMap=t,i.localNSMap=n,!0}function Dv(i,e,t,r,n){if(/^(?:script|textarea)$/i.test(t)){var s=i.indexOf("</"+t+">",e),a=i.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(n.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),n.characters(a,0,a.length),s)}return e+1}function Cv(i,e,t,r){var n=r[t];return n==null&&(n=i.lastIndexOf("</"+t+">"),n<e&&(n=i.lastIndexOf("</"+t)),r[t]=n),n<e}function Vh(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function Av(i,e,t,r){var n=i.charAt(e+2);switch(n){case"-":if(i.charAt(e+3)==="-"){var s=i.indexOf("-->",e+4);return s>e?(t.comment(i,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var s=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,s-e-9),t.endCDATA(),s+3}var a=kv(i,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],l=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var f=a[o-1];return t.startDTD(u,l,c),t.endDTD(),f.index+f[0].length}}return-1}function Tv(i,e,t){var r=i.indexOf("?>",e);if(r){var n=i.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){var s=n[0].length;return t.processingInstruction(n[1],n[2]),r+2}else return-1}return-1}function jh(){this.attributeNames={}}jh.prototype={setTagName:function(i){if(!zh.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!zh.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function kv(i,e){var t,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(i);t=n.exec(i);)if(r.push(t),t[1])return r}ja.XMLReader=qh;ja.ParseError=ai});var Kh=K(Hi=>{var Nv=Ii(),Ha=Wa(),Zh=Fh(),Gh=Hh(),Ov=Ha.DOMImplementation,Xh=Nv.NAMESPACE,Rv=Gh.ParseError,Iv=Gh.XMLReader;function $h(i){this.options=i||{locator:{}}}$h.prototype.parseFromString=function(i,e){var t=this.options,r=new Iv,n=t.domBuilder||new ji,s=t.errorHandler,a=t.locator,o=t.xmlns||{},u=/\/x?html?$/.test(e),l=u?Zh.HTML_ENTITIES:Zh.XML_ENTITIES;return a&&n.setDocumentLocator(a),r.errorHandler=Bv(s,n,a),r.domBuilder=t.domBuilder||n,u&&(o[""]=Xh.HTML),o.xml=o.xml||Xh.XML,i&&typeof i=="string"?r.parse(i,o,l):r.errorHandler.error("invalid doc source"),n.doc};function Bv(i,e,t){if(!i){if(e instanceof ji)return e;i=e}var r={},n=i instanceof Function;t=t||{};function s(a){var o=i[a];!o&&n&&(o=i.length==2?function(u){i(a,u)}:i),r[a]=o&&function(u){o("[xmldom "+a+"]	"+u+Za(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function ji(){this.cdata=!1}function oi(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}ji.prototype={startDocument:function(){this.doc=new Ov().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,r){var n=this.doc,s=n.createElementNS(i,t||e),a=r.length;Pn(this,s),this.currentElement=s,this.locator&&oi(this.locator,s);for(var o=0;o<a;o++){var i=r.getURI(o),u=r.getValue(o),t=r.getQName(o),l=n.createAttributeNS(i,t);this.locator&&oi(r.getLocator(o),l),l.value=l.nodeValue=u,s.setAttributeNode(l)}},endElement:function(i,e,t){var r=this.currentElement,n=r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&oi(this.locator,t),Pn(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=Yh.apply(this,arguments),i){if(this.cdata)var r=this.doc.createCDATASection(i);else var r=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(i)&&this.doc.appendChild(r),this.locator&&oi(this.locator,r)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=Yh.apply(this,arguments);var r=this.doc.createComment(i);this.locator&&oi(this.locator,r),Pn(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(i,e,t);this.locator&&oi(this.locator,n),Pn(this,n),this.doc.doctype=n}},warning:function(i){console.warn("[xmldom warning]	"+i,Za(this.locator))},error:function(i){console.error("[xmldom error]	"+i,Za(this.locator))},fatalError:function(i){throw new Rv(i,this.locator)}};function Za(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function Yh(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){ji.prototype[i]=function(){return null}});function Pn(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}Hi.__DOMHandler=ji;Hi.DOMParser=$h;Hi.DOMImplementation=Ha.DOMImplementation;Hi.XMLSerializer=Ha.XMLSerializer});var Ga=K(Fn=>{var Jh=Wa();Fn.DOMImplementation=Jh.DOMImplementation;Fn.XMLSerializer=Jh.XMLSerializer;Fn.DOMParser=Kh().DOMParser});var He=K(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.RangeObject=void 0;we.blob2base64=og;we.borders=Gv;we.bounds=Zv;we.createBase64Url=tg;we.createBlob=rf;we.createBlobUrl=Qv;we.defaults=Vv;we.defer=ug;we.documentHeight=zv;we.extend=jv;we.filterChildren=fg;we.findChildren=hg;we.getParentByTagName=cg;we.indexOfElementNode=Kv;we.indexOfNode=$a;we.indexOfSorted=Xa;we.indexOfTextNode=Yv;we.insert=Hv;we.isElement=qv;we.isFloat=Uv;we.isNumber=tf;we.isXml=Jv;we.locationOf=Mn;we.nodeBounds=Xv;we.parents=Ka;we.parse=ig;we.prefixed=Wv;we.qs=ng;we.qsa=nf;we.qsp=sg;we.querySelectorByType=lg;we.requestAnimationFrame=void 0;we.revokeBlobUrl=eg;we.sprint=ag;we.treeWalker=sf;we.type=rg;we.uuid=ef;we.walk=Ya;we.windowBounds=$v;var Lv=Ga(),Pv=typeof window!="undefined"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1;we.requestAnimationFrame=Pv;var Fv=1,Mv=3,Qh=typeof URL!="undefined"?URL:typeof window!="undefined"?window.URL||window.webkitURL||window.mozURL:void 0;function ef(){var i=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(t=="x"?r:r&7|8).toString(16)});return e}function zv(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function qv(i){return!!(i&&i.nodeType==1)}function tf(i){return!isNaN(parseFloat(i))&&isFinite(i)}function Uv(i){let e=parseFloat(i);return tf(i)===!1?!1:typeof i=="string"&&i.indexOf(".")>-1?!0:Math.floor(e)!==e}function Wv(i){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=i.toLowerCase(),n=e.length;if(typeof document=="undefined"||typeof document.body.style[r]!="undefined")return i;for(var s=0;s<n;s++)if(typeof document.body.style[t[s]+r]!="undefined")return t[s]+r;return i}function Vv(i){for(var e=1,t=arguments.length;e<t;e++){var r=arguments[e];for(var n in r)i[n]===void 0&&(i[n]=r[n])}return i}function jv(i){var e=[].slice.call(arguments,1);return e.forEach(function(t){!t||Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}),i}function Hv(i,e,t){var r=Mn(i,e,t);return e.splice(r,0,i),r}function Mn(i,e,t,r,n){var s=r||0,a=n||e.length,o=parseInt(s+(a-s)/2),u;return t||(t=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?o:(u=t(e[o],i),a-s==1?u>=0?o:o+1:u===0?o:u===-1?Mn(i,e,t,o,a):Mn(i,e,t,s,o))}function Xa(i,e,t,r,n){var s=r||0,a=n||e.length,o=parseInt(s+(a-s)/2),u;return t||(t=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?-1:(u=t(e[o],i),a-s==1?u===0?o:-1:u===0?o:u===-1?Xa(i,e,t,o,a):Xa(i,e,t,s,o))}function Zv(i){var e=window.getComputedStyle(i),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],n=0,s=0;return t.forEach(function(a){n+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:n}}function Gv(i){var e=window.getComputedStyle(i),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],n=0,s=0;return t.forEach(function(a){n+=parseFloat(e[a])||0}),r.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:n}}function Xv(i){let e,t=i.ownerDocument;if(i.nodeType==Node.TEXT_NODE){let r=t.createRange();r.selectNodeContents(i),e=r.getBoundingClientRect()}else e=i.getBoundingClientRect();return e}function $v(){var i=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:i,bottom:e,width:i,height:e}}function $a(i,e){for(var t=i.parentNode,r=t.childNodes,n,s=-1,a=0;a<r.length&&(n=r[a],n.nodeType===e&&s++,n!=i);a++);return s}function Yv(i){return $a(i,Mv)}function Kv(i){return $a(i,Fv)}function Jv(i){return["xml","opf","ncx"].indexOf(i)>-1}function rf(i,e){return new Blob([i],{type:e})}function Qv(i,e){var t,r=rf(i,e);return t=Qh.createObjectURL(r),t}function eg(i){return Qh.revokeObjectURL(i)}function tg(i,e){var t,r;if(typeof i=="string")return t=btoa(i),r="data:"+e+";base64,"+t,r}function rg(i){return Object.prototype.toString.call(i).slice(8,-1)}function ig(i,e,t){var r,n;return typeof DOMParser=="undefined"||t?n=Lv.DOMParser:n=DOMParser,i.charCodeAt(0)===65279&&(i=i.slice(1)),r=new n().parseFromString(i,e),r}function ng(i,e){var t;if(!i)throw new Error("No Element Provided");if(typeof i.querySelector!="undefined")return i.querySelector(e);if(t=i.getElementsByTagName(e),t.length)return t[0]}function nf(i,e){return typeof i.querySelector!="undefined"?i.querySelectorAll(e):i.getElementsByTagName(e)}function sg(i,e,t){var r,n;if(typeof i.querySelector!="undefined"){e+="[";for(var s in t)e+=s+"~='"+t[s]+"'";return e+="]",i.querySelector(e)}else if(r=i.getElementsByTagName(e),n=Array.prototype.slice.call(r,0).filter(function(a){for(var o in t)if(a.getAttribute(o)===t[o])return!0;return!1}),n)return n[0]}function ag(i,e){var t=i.ownerDocument||i;typeof t.createTreeWalker!="undefined"?sf(i,e,NodeFilter.SHOW_TEXT):Ya(i,function(r){r&&r.nodeType===3&&e(r)},!0)}function sf(i,e,t){var r=document.createTreeWalker(i,t,null,!1);let n;for(;n=r.nextNode();)e(n)}function Ya(i,e){if(e(i))return!0;if(i=i.firstChild,i)do{if(Ya(i,e))return!0;i=i.nextSibling}while(i)}function og(i){return new Promise(function(e,t){var r=new FileReader;r.readAsDataURL(i),r.onloadend=function(){e(r.result)}})}function ug(){this.resolve=null,this.reject=null,this.id=ef(),this.promise=new Promise((i,e)=>{this.resolve=i,this.reject=e}),Object.freeze(this)}function lg(i,e,t){var r;if(typeof i.querySelector!="undefined"&&(r=i.querySelector(`${e}[*|type="${t}"]`)),!r||r.length===0){r=nf(i,e);for(var n=0;n<r.length;n++)if(r[n].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||r[n].getAttribute("epub:type")===t)return r[n]}else return r}function hg(i){for(var e=[],t=i.childNodes,r=0;r<t.length;r++){let n=t[r];n.nodeType===1&&e.push(n)}return e}function Ka(i){for(var e=[i];i;i=i.parentNode)e.unshift(i);return e}function fg(i,e,t){for(var r=[],n=i.childNodes,s=0;s<n.length;s++){let a=n[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(t)return a;r.push(a)}}if(!t)return r}function cg(i,e){let t;if(!(i===null||e===""))for(t=i.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}var af=class{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,r=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,r),this.setEnd(t,r+1)}selectNodeContents(e){let t=e.childNodes[e.childNodes-1],r=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,r)}_commonAncestorContainer(e,t){var r=Ka(e||this.startContainer),n=Ka(t||this.endContainer);if(r[0]==n[0]){for(var s=0;s<r.length;s++)if(r[s]!=n[s])return r[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}};we.RangeObject=af});var Zi=K((Ly,uf)=>{"use strict";Ja||(Ja={cwd:function(){return"/"}});var Ja;function hr(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+i)}function of(i,e){for(var t="",r=-1,n=0,s,a=0;a<=i.length;++a){if(a<i.length)s=i.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(t.length<2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){for(var o=t.length-1,u=o;u>=0&&t.charCodeAt(u)!==47;--u);if(u!==o){u===-1?t="":t=t.slice(0,u),r=a,n=0;continue}}else if(t.length===2||t.length===1){t="",r=a,n=0;continue}}e&&(t.length>0?t+="/..":t="..")}else t.length>0?t+="/"+i.slice(r+1,a):t=i.slice(r+1,a);r=a,n=0}else s===46&&n!==-1?++n:n=-1}return t}function dg(i,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+i+r:r}var zn={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var s;n>=0?s=arguments[n]:(r===void 0&&(r=Ja.cwd()),s=r),hr(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=of(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(hr(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=of(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return hr(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];hr(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":zn.normalize(e)},relative:function(e,t){if(hr(e),hr(t),e===t||(e=zn.resolve(e),t=zn.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,s=n-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var o=t.length,u=o-a,l=s<u?s:u,c=-1,f=0;f<=l;++f){if(f===l){if(u>l){if(t.charCodeAt(a+f)===47)return t.slice(a+f+1);if(f===0)return t.slice(a+f)}else s>l&&(e.charCodeAt(r+f)===47?c=f:f===0&&(c=0));break}var d=e.charCodeAt(r+f),g=t.charCodeAt(a+f);if(d!==g)break;d===47&&(c=f)}var _="";for(f=r+c+1;f<=n;++f)(f===n||e.charCodeAt(f)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+t.slice(a+c):(a+=c,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(hr(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,s=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){n=a;break}}else s=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');hr(e);var r=0,n=-1,s=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,u=-1;for(a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){r=a+1;break}}else u===-1&&(s=!1,u=a+1),o>=0&&(l===t.charCodeAt(o)?--o==-1&&(n=a):(o=-1,n=u))}return r===n?n=u:n===-1&&(n=e.length),e.slice(r,n)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else n===-1&&(s=!1,n=a+1);return n===-1?"":e.slice(r,n)}},extname:function(e){hr(e);for(var t=-1,r=0,n=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(u===47){if(!s){r=o+1;break}continue}n===-1&&(s=!1,n=o+1),u===46?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||n===-1||a===0||a===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return dg("/",e)},parse:function(e){hr(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,s;n?(t.root="/",s=1):s=0;for(var a=-1,o=0,u=-1,l=!0,c=e.length-1,f=0;c>=s;--c){if(r=e.charCodeAt(c),r===47){if(!l){o=c+1;break}continue}u===-1&&(l=!1,u=c+1),r===46?a===-1?a=c:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||u===-1||f===0||f===1&&a===u-1&&a===o+1?u!==-1&&(o===0&&n?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(o,u)):(o===0&&n?(t.name=e.slice(1,a),t.base=e.slice(1,u)):(t.name=e.slice(o,a),t.base=e.slice(o,u)),t.ext=e.slice(a,u)),o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",posix:null};uf.exports=zn});var Sr=K(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.default=void 0;var qn=pg(Zi());function pg(i){return i&&i.__esModule?i:{default:i}}var lf=class{constructor(e){var t,r;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return qn.default.parse(e)}isAbsolute(e){return qn.default.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return qn.default.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:qn.default.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}},vg=lf;Un.default=vg});var Gi=K(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.default=void 0;var hf=cf(Sr()),ff=cf(Zi());function cf(i){return i&&i.__esModule?i:{default:i}}var df=class{constructor(e,t){var r=e.indexOf("://")>-1,n=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!r&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,n=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch(a){this.Url=void 0,this.base&&(s=new hf.default(this.base),n=s.resolve(n))}this.Path=new hf.default(n),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,r;return t?e:(r=ff.default.resolve(this.directory,e),this.origin+r)}relative(e){return ff.default.relative(e,this.directory)}toString(){return this.href}},gg=df;Wn.default=gg});var Rt=K(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.default=void 0;var Dr=He(),ui=1,Ut=3,mg=9,Cr=class{constructor(e,t,r){var n;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Cr))return new Cr(e,t,r);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),n=this.checkType(e),n==="string")return this.str=e,(0,Dr.extend)(this,this.parse(e));if(n==="range")return(0,Dr.extend)(this,this.fromRange(e,this.base,r));if(n==="node")return(0,Dr.extend)(this,this.fromNode(e,this.base,r));if(n==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&((0,Dr.type)(e)==="Range"||typeof e.startContainer!="undefined")?"range":e&&typeof e=="object"&&typeof e.nodeType!="undefined"?"node":e&&typeof e=="object"&&e instanceof Cr?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,n,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(t.base=this.parseComponent(r),n=this.getPathComponent(e),t.path=this.parseComponent(n),s=this.getRange(e),s&&(t.range=!0,t.start=this.parseComponent(s[0]),t.end=this.parseComponent(s[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),n=r[0].split("/"),s;return r.length>1&&(s=r[1],t.terminal=this.parseTerminal(s)),n[0]===""&&n.shift(),t.steps=n.map(function(a){return this.parseStep(a)}.bind(this)),t}parseStep(e){var t,r,n,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),r=parseInt(e),!isNaN(r))return r%2==0?(t="element",n=r/2-1):(t="text",n=(r-1)/2),{type:t,index:n,id:a||null}}parseTerminal(e){var t,r,n=e.match(/\[(.*)\]/);return n&&n[1]?(t=parseInt(e.split("[")[0]),r=n[1]):t=parseInt(e),(0,Dr.isNumber)(t)||(t=null),{offset:t,assertion:r}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var r="";return t.type==="element"&&(r+=(t.index+1)*2),t.type==="text"&&(r+=1+2*t.index),t.id&&(r+="["+t.id+"]"),r}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var r,n,s,a,o,u,l,l,c,f,d,g;if(typeof e=="string"&&(e=new Cr(e)),typeof t=="string"&&(t=new Cr(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),s=e.start.terminal):(r=e.path.steps,s=e.path.terminal),t.range?(n=t.path.steps.concat(t.start.steps),a=t.start.terminal):(n=t.path.steps,a=t.path.terminal);for(var _=0;_<r.length;_++){if(!r[_])return-1;if(!n[_]||r[_].index>n[_].index)return 1;if(r[_].index<n[_].index)return-1}return r.length<n.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var t=e.nodeType===Ut?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var r=this.filter(e,t),n;if(!!r)return n=r.nodeType===Ut?"text":"element",{id:r.id,tagName:r.tagName,type:n,index:this.filteredPosition(r,t)}}pathTo(e,t,r){for(var n={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=mg;)r?a=this.filteredStep(s,r):a=this.step(s),a&&n.steps.unshift(a),s=s.parentNode;return t!=null&&t>=0&&(n.terminal.offset=t,n.steps[n.steps.length-1].type!="text"&&n.steps.push({type:"text",index:0})),n}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,r){var n={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,u=e.endOffset,l=!1;if(r&&(l=s.ownerDocument.querySelector("."+r)!=null),typeof t=="string"?(n.base=this.parseComponent(t),n.spinePos=n.base.steps[1].index):typeof t=="object"&&(n.base=t),e.collapsed)l&&(o=this.patchOffset(s,o,r)),n.path=this.pathTo(s,o,r);else{n.range=!0,l&&(o=this.patchOffset(s,o,r)),n.start=this.pathTo(s,o,r),l&&(u=this.patchOffset(a,u,r)),n.end=this.pathTo(a,u,r),n.path={steps:[],terminal:null};var c=n.start.steps.length,f;for(f=0;f<c&&this.equalStep(n.start.steps[f],n.end.steps[f]);f++)f===c-1?n.start.terminal===n.end.terminal&&(n.path.steps.push(n.start.steps[f]),n.range=!1):n.path.steps.push(n.start.steps[f]);n.start.steps=n.start.steps.slice(n.path.steps.length),n.end.steps=n.end.steps.slice(n.path.steps.length)}return n}fromNode(e,t,r){var n={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(n.base=this.parseComponent(t),n.spinePos=n.base.steps[1].index):typeof t=="object"&&(n.base=t),n.path=this.pathTo(e,null,r),n}filter(e,t){var r,n,s,a,o,u=!1;return e.nodeType===Ut?(u=!0,s=e.parentNode,r=e.parentNode.classList.contains(t)):(u=!1,r=e.classList.contains(t)),r&&u?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===Ut?n=a:o&&o.nodeType===Ut&&(n=o),n||e):r&&!u?!1:e}patchOffset(e,t,r){if(e.nodeType!=Ut)throw new Error("Anchor must be a text node");var n=e,s=t;for(e.parentNode.classList.contains(r)&&(n=e.parentNode);n.previousSibling;){if(n.previousSibling.nodeType===ui)if(n.previousSibling.classList.contains(r))s+=n.previousSibling.textContent.length;else break;else s+=n.previousSibling.textContent.length;n=n.previousSibling}return s}normalizedMap(e,t,r){var n={},s=-1,a,o=e.length,u,l;for(a=0;a<o;a++)u=e[a].nodeType,u===ui&&e[a].classList.contains(r)&&(u=Ut),a>0&&u===Ut&&l===Ut?n[a]=s:t===u&&(s=s+1,n[a]=s),l=u;return n}position(e){var t,r;return e.nodeType===ui?(t=e.parentNode.children,t||(t=(0,Dr.findChildren)(e.parentNode)),r=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),r=t.indexOf(e)),r}filteredPosition(e,t){var r,n,s;return e.nodeType===ui?(r=e.parentNode.children,s=this.normalizedMap(r,ui,t)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,r=e.parentNode.childNodes),s=this.normalizedMap(r,Ut,t)),n=Array.prototype.indexOf.call(r,e),s[n]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(r){var n=r.index+1;r.id?t.push("*[position()="+n+" and @id='"+r.id+"']"):r.type==="text"?t.push("text()["+n+"]"):t.push("*["+n+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(r){var n=r.index+1;r.id?t.push("#"+r.id):r.type==="text"||t.push("*:nth-child("+n+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===Ut?!0:!!(t&&r.classList.contains(t))})}walkToNode(e,t,r){var n=t||document,s=n.documentElement,a,o,u=e.length,l;for(l=0;l<u&&(o=e[l],o.type==="element"?o.id?s=n.getElementById(o.id):(a=s.children||(0,Dr.findChildren)(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,r)[o.index]),!!s);l++);return s}findNode(e,t,r){var n=t||document,s,a;return!r&&typeof n.evaluate!="undefined"?(a=this.stepsToXpath(e),s=n.evaluate(a,n,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?s=this.walkToNode(e,n,r):s=this.walkToNode(e,n),s}fixMiss(e,t,r,n){var s=this.findNode(e.slice(0,-1),r,n),a=s.childNodes,o=this.normalizedMap(a,Ut,n),u,l,c=e[e.length-1].index;for(let f in o){if(!o.hasOwnProperty(f))return;if(o[f]===c)if(u=a[f],l=u.textContent.length,t>l)t=t-l;else{u.nodeType===ui?s=u.childNodes[0]:s=u;break}}return{container:s,offset:t}}toRange(e,t){var r=e||document,n,s,a,o,u,l=this,c,f,d=t?r.querySelector("."+t)!=null:!1,g;if(typeof r.createRange!="undefined"?n=r.createRange():n=new Dr.RangeObject,l.range?(s=l.start,c=l.path.steps.concat(s.steps),o=this.findNode(c,r,d?t:null),a=l.end,f=l.path.steps.concat(a.steps),u=this.findNode(f,r,d?t:null)):(s=l.path,c=l.path.steps,o=this.findNode(l.path.steps,r,d?t:null)),o)try{s.terminal.offset!=null?n.setStart(o,s.terminal.offset):n.setStart(o,0)}catch(_){g=this.fixMiss(c,s.terminal.offset,r,d?t:null),n.setStart(g.container,g.offset)}else return console.log("No startContainer found for",this.toString()),null;if(u)try{a.terminal.offset!=null?n.setEnd(u,a.terminal.offset):n.setEnd(u,0)}catch(_){g=this.fixMiss(f,l.end.terminal.offset,r,d?t:null),n.setEnd(g.container,g.offset)}return n}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,r){var n=parseInt(t),s=(e+1)*2,a="/"+s+"/";return a+=(n+1)*2,r&&(a+="["+r+"]"),a}collapse(e){!this.range||(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}},_g=Cr;Vn.default=_g});var Hn=K(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.default=void 0;var pf=class{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let r=0;r<this.hooks.length;r++)if(t=this.hooks[r],t===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,t=this.context,r=[];return this.hooks.forEach(function(n){try{var s=n.apply(t,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&r.push(s)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}},yg=pf;jn.default=yg});var Xi=K(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.replaceBase=wg;Pr.replaceCanonical=Eg;Pr.replaceLinks=Sg;Pr.replaceMeta=xg;Pr.substitute=Dg;var Lr=He(),bg=vf(Gi()),qy=vf(Sr());function vf(i){return i&&i.__esModule?i:{default:i}}function wg(i,e){var t,r,n=e.url,s=n.indexOf("://")>-1;!i||(r=(0,Lr.qs)(i,"head"),t=(0,Lr.qs)(r,"base"),t||(t=i.createElement("base"),r.insertBefore(t,r.firstChild)),!s&&window&&window.location&&(n=window.location.origin+n),t.setAttribute("href",n))}function Eg(i,e){var t,r,n=e.canonical;!i||(t=(0,Lr.qs)(i,"head"),r=(0,Lr.qs)(t,"link[rel='canonical']"),r?r.setAttribute("href",n):(r=i.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",n),t.appendChild(r)))}function xg(i,e){var t,r,n=e.idref;!i||(t=(0,Lr.qs)(i,"head"),r=(0,Lr.qs)(t,"link[property='dc.identifier']"),r?r.setAttribute("content",n):(r=i.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",n),t.appendChild(r)))}function Sg(i,e){var t=i.querySelectorAll("a[href]");if(!!t.length)for(var r=(0,Lr.qs)(i.ownerDocument,"base"),n=r?r.getAttribute("href"):void 0,s=function(o){var u=o.getAttribute("href");if(u.indexOf("mailto:")!==0){var l=u.indexOf("://")>-1;if(l)o.setAttribute("target","_blank");else{var c;try{c=new bg.default(u,n)}catch(f){}o.onclick=function(){return c&&c.hash?e(c.Path.path+c.hash):e(c?c.Path.path:u),!1}}}}.bind(this),a=0;a<t.length;a++)s(t[a])}function Dg(i,e,t){return e.forEach(function(r,n){r&&t[n]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=i.replace(new RegExp(r,"g"),t[n]))}),i}});var $i=K(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.default=void 0;var li=He(),Cg=Ag(Sr());function Ag(i){return i&&i.__esModule?i:{default:i}}function Tg(i,e,t,r){var n=typeof window!="undefined"?window.URL:!1,s=n?"blob":"arraybuffer",a=new li.defer,o=new XMLHttpRequest,u=XMLHttpRequest.prototype,l;"overrideMimeType"in u||Object.defineProperty(u,"overrideMimeType",{value:function(){}}),t&&(o.withCredentials=!0),o.onreadystatechange=f,o.onerror=c,o.open("GET",i,!0);for(l in r)o.setRequestHeader(l,r[l]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new Cg.default(i).extension),e=="blob"&&(o.responseType=s),(0,li.isXml)(e)&&o.overrideMimeType("text/xml"),e=="xhtml",e=="html"||e=="htm",e=="binary"&&(o.responseType="arraybuffer"),o.send();function c(d){a.reject(d)}function f(){if(this.readyState===XMLHttpRequest.DONE){var d=!1;if((this.responseType===""||this.responseType==="document")&&(d=this.responseXML),this.status===200||this.status===0||d){var g;if(!this.response&&!d)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;d?g=this.responseXML:(0,li.isXml)(e)?g=(0,li.parse)(this.response,"text/xml"):e=="xhtml"?g=(0,li.parse)(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?g=(0,li.parse)(this.response,"text/html"):e=="json"?g=JSON.parse(this.response):e=="blob"?n?g=this.response:g=new Blob([this.response]):g=this.response,a.resolve(g)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}var kg=Tg;Zn.default=kg});var yf=K(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.default=void 0;var Qa=He(),gf=eo(Rt()),mf=eo(Hn()),Ng=Xi(),Og=eo($i()),Rg=Ga();function eo(i){return i&&i.__esModule?i:{default:i}}var _f=class{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new mf.default(this),this.hooks.content=new mf.default(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||Og.default,r=new Qa.defer,n=r.promise;return this.contents?r.resolve(this.contents):t(this.url).then(function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){r.resolve(this.contents)}.bind(this)).catch(function(s){r.reject(s)}),n}base(){return(0,Ng.replaceBase)(this.document,this)}render(e){var t=new Qa.defer,r=t.promise;return this.output,this.load(e).then(function(n){var s=typeof navigator!="undefined"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer=="undefined"||a?o=Rg.DOMParser:o=XMLSerializer;var u=new o;return this.output=u.serializeToString(n),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch(function(n){t.reject(n)}),r}find(e){var t=this,r=[],n=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),u=t.document.createRange(),l,c,f=-1,d,g=150;c!=-1;)c=o.indexOf(n,f+1),c!=-1&&(u=t.document.createRange(),u.setStart(a,c),u.setEnd(a,c+n.length),l=t.cfiFromRange(u),a.textContent.length<g?d=a.textContent:(d=a.textContent.substring(c-g/2,c+g/2),d="..."+d+"..."),r.push({cfi:l,excerpt:d})),f=c};return(0,Qa.sprint)(t.document,function(a){s(a)}),r}search(e,t=5){if(typeof document.createTreeWalker=="undefined")return this.find(e);let r=[],n=150,s=this,a=e.toLowerCase(),o=function(f){let _=f.reduce((C,D)=>C+D.textContent,"").toLowerCase().indexOf(a);if(_!=-1){let C=0,D=_+a.length,p=0,v=0;if(_<f[C].length){let b;for(;p<f.length-1&&(v+=f[p].length,!(D<=v));)p+=1;let A=f[C],P=f[p],y=s.document.createRange();y.setStart(A,_);let T=f.slice(0,p).reduce((R,z)=>R+z.textContent.length,0);y.setEnd(P,T>D?D:D-T),b=s.cfiFromRange(y);let k=f.slice(0,p+1).reduce((R,z)=>R+z.textContent,"");k.length>n&&(k=k.substring(_-n/2,_+n/2),k="..."+k+"..."),r.push({cfi:b,excerpt:k})}}},u=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1),l,c=[];for(;l=u.nextNode();)c.push(l),c.length==t&&(o(c.slice(0,t)),c=c.slice(1,t));return c.length>0&&o(c),r}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var n=r.replace("rendition:",""),s=n.indexOf("-"),a,o;s!=-1&&(a=n.slice(0,s),o=n.slice(s+1),t[a]=o)}),t}cfiFromRange(e){return new gf.default(e,this.cfiBase).toString()}cfiFromElement(e){return new gf.default(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}},Ig=_f;Gn.default=Ig});var xf=K(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.default=void 0;var bf=ro(Rt()),wf=ro(Hn()),Bg=ro(yf()),to=Xi();function ro(i){return i&&i.__esModule?i:{default:i}}var Ef=class{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new wf.default,this.hooks.content=new wf.default,this.hooks.content.register(to.replaceBase),this.hooks.content.register(to.replaceCanonical),this.hooks.content.register(to.replaceMeta),this.epubcfi=new bf.default,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((n,s)=>{var a=this.manifest[n.idref],o;n.index=s,n.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,n.index,n.id),n.href&&(n.url=t(n.href,!0),n.canonical=r(n.href)),a&&(n.href=a.href,n.url=t(n.href,!0),n.canonical=r(n.href),a.properties.length&&n.properties.push.apply(n.properties,a.properties)),n.linear==="yes"?(n.prev=function(){let u=n.index;for(;u>0;){let l=this.get(u-1);if(l&&l.linear)return l;u-=1}}.bind(this),n.next=function(){let u=n.index;for(;u<this.spineItems.length-1;){let l=this.get(u+1);if(l&&l.linear)return l;u+=1}}.bind(this)):(n.prev=function(){},n.next=function(){}),o=new Bg.default(n,this.hooks),this.append(o)}),this.loaded=!0}get(e){var t=0;if(typeof e=="undefined")for(;t<this.spineItems.length;){let r=this.spineItems[t];if(r&&r.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new bf.default(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,r){t.index=r}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}},Lg=Ef;Xn.default=Lg});var Yn=K(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.default=hi.Task=void 0;var $n=He(),Sf=class{constructor(e){this._q=[],this.context=e,this.tick=$n.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var e,t,r,n=[].shift.call(arguments),s=arguments;if(!n)throw new Error("No Task Provided");return typeof n=="function"?(e=new $n.defer,t=e.promise,r={task:n,args:s,deferred:e,promise:t}):r={promise:n},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,t,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return r=t.apply(this.context,e.args),r&&typeof r.then=="function"?r.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new $n.defer,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new $n.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}},Df=class{constructor(e,t,r){return function(){var n=arguments||[];return new Promise((s,a)=>{var o=function(u,l){!u&&l?a(l):s(u)};n.push(o),e.apply(r||this,n)})}}};hi.Task=Df;var Pg=Sf;hi.default=Pg});var Wt=K(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.EVENTS=Ar.EPUBJS_VERSION=Ar.DOM_EVENTS=void 0;var Fg="0.3";Ar.EPUBJS_VERSION=Fg;var Mg=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"];Ar.DOM_EVENTS=Mg;var zg={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};Ar.EVENTS=zg});var Cf=K(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.default=void 0;var Fr=He(),qg=io(Yn()),Tr=io(Rt()),Ug=Wt(),Wg=io(Qt());function io(i){return i&&i.__esModule?i:{default:i}}var no=class{constructor(e,t,r){this.spine=e,this.request=t,this.pause=r||100,this.q=new qg.default(this),this.epubcfi=new Tr.default,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each(function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then(function(t){var r=new Fr.defer,n=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(n),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(n),this.pause),r.promise}.bind(this))}parse(e,t,r){var n=[],s,a=e.ownerDocument,o=(0,Fr.qs)(a,"body"),u=0,l,c=r||this.break,f=function(d){var g=d.length,_,C=0;if(d.textContent.trim().length===0)return!1;for(u==0&&(s=this.createRange(),s.startContainer=d,s.startOffset=0),_=c-u,_>g&&(u+=g,C=g);C<g;)if(_=c-u,u===0&&(C+=1,s=this.createRange(),s.startContainer=d,s.startOffset=C),C+_>=g)u+=g-C,C=g;else{C+=_,s.endContainer=d,s.endOffset=C;let D=new Tr.default(s,t).toString();n.push(D),u=0}l=d};if((0,Fr.sprint)(o,f.bind(this)),s&&s.startContainer&&l){s.endContainer=l,s.endOffset=l.length;let d=new Tr.default(s,t).toString();n.push(d),u=0}return n}generateFromWords(e,t,r){var n=e?new Tr.default(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(s){s.linear&&(n?s.index>=n.spinePos&&this.q.enqueue(this.processWords.bind(this),s,t,n,r):this.q.enqueue(this.processWords.bind(this),s,t,n,r))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(e,t,r,n){return n&&this._locationsWords.length>=n?Promise.resolve():e.load(this.request).then(function(s){var a=new Fr.defer,o=this.parseWords(s,e,t,r),u=n-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=n?o.slice(0,u):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}.bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,r,n){var s=t.cfiBase,a=[],o=e.ownerDocument,u=(0,Fr.qs)(o,"body"),l,c=r,f=n?n.spinePos!==t.index:!0,d;n&&t.index===n.spinePos&&(d=n.findNode(n.range?n.path.steps.concat(n.start.steps):n.path.steps,e.ownerDocument));var g=function(_){if(!f)if(_===d)f=!0;else return!1;if(_.textContent.length<10&&_.textContent.trim().length===0)return!1;var C=this.countWords(_.textContent),D,p=0;if(C===0)return!1;for(D=c-this._wordCounter,D>C&&(this._wordCounter+=C,p=C);p<C;)if(D=c-this._wordCounter,p+D>=C)this._wordCounter+=C-p,p=C;else{p+=D;let v=new Tr.default(_,s);a.push({cfi:v.toString(),wordCount:this._wordCounter}),this._wordCounter=0}l=_};return(0,Fr.sprint)(u,g.bind(this)),a}locationFromCfi(e){let t;return Tr.default.prototype.isCfiString(e)&&(e=new Tr.default(e)),this._locations.length===0?-1:(t=(0,Fr.locationOf)(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new Tr.default(this._locations[this.total]);return r.collapse(),r.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(Ug.EVENTS.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}};(0,Wg.default)(no.prototype);var Vg=no;Kn.default=Vg});var Tf=K(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.default=void 0;var jg=Zg(Zi()),Hg=He();function Zg(i){return i&&i.__esModule?i:{default:i}}var Af=class{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=(0,Hg.qs)(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=jg.default.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}},Gg=Af;Jn.default=Gg});var Nf=K(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.default=void 0;var Vt=He(),kf=class{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,r,n;if(!e)throw new Error("Package File Not Found");if(t=(0,Vt.qs)(e,"metadata"),!t)throw new Error("No Metadata Found");if(r=(0,Vt.qs)(e,"manifest"),!r)throw new Error("No Manifest Found");if(n=(0,Vt.qs)(e,"spine"),!n)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,n),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=(0,Vt.indexOfElementNode)(n),this.spine=this.parseSpine(n,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=n.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},r=(0,Vt.qsa)(e,"item"),n=Array.prototype.slice.call(r);return n.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",u=s.getAttribute("media-type")||"",l=s.getAttribute("media-overlay")||"",c=s.getAttribute("properties")||"";t[a]={href:o,type:u,overlay:l,properties:c.length?c.split(" "):[]}}),t}parseSpine(e,t){var r=[],n=(0,Vt.qsa)(e,"itemref"),s=Array.prototype.slice.call(n);return s.forEach(function(a,o){var u=a.getAttribute("idref"),l=a.getAttribute("properties")||"",c=l.length?l.split(" "):[],f={id:a.getAttribute("id"),idref:u,linear:a.getAttribute("linear")||"yes",properties:c,index:o};r.push(f)}),r}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var r=e.getElementById(t);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=(0,Vt.qsp)(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var r=(0,Vt.qsp)(e,"item",{"media-type":"application/x-dtbncx+xml"}),n;return r||(n=t.getAttribute("toc"),n&&(r=e.querySelector(`#${n}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var t=(0,Vt.qs)(e,"package"),r=t.getAttribute("version"),n=(0,Vt.qsp)(e,"item",{properties:"cover-image"});if(n)return n.getAttribute("href");var s=(0,Vt.qsp)(e,"meta",{name:"cover"});if(s){var a=s.getAttribute("content"),o=e.getElementById(a);return o?o.getAttribute("href"):""}else return!1}getElementText(e,t){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),n;return!r||r.length===0?"":(n=r[0],n.childNodes.length?n.childNodes[0].nodeValue:"")}getPropertyText(e,t){var r=(0,Vt.qsp)(e,"meta",{property:t});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((r,n)=>(r.index=n,r.linear=r.linear||"yes",r)),e.resources.forEach((r,n)=>{this.manifest[n]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,n)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}},Xg=kf;Qn.default=Xg});var Rf=K(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.default=void 0;var It=He(),Of=class{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,r,n;t&&(r=(0,It.qs)(e,"html"),n=(0,It.qs)(e,"ncx")),t?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):n&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,r=0;r<e.length;r++)t=e[r],t.href&&(this.tocByHref[t.href]=r),t.id&&(this.tocById[t.id]=r),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,r){if(r.length===0)return;let n=r[t];if(n&&(e===n.id||e===n.href))return n;{let s;for(let a=0;a<r.length&&(s=this.getByIndex(e,t,r[a].subitems),!s);++a);return s}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=(0,It.querySelectorByType)(e,"nav","toc"),r=[];if(!t)return r;let n=(0,It.filterChildren)(t,"ol",!0);return n&&(r=this.parseNavList(n)),r}parseNavList(e,t){let r=[];if(!e||!e.children)return r;for(let n=0;n<e.children.length;n++){let s=this.navItem(e.children[n],t);s&&r.push(s)}return r}navItem(e,t){let r=e.getAttribute("id")||void 0,n=(0,It.filterChildren)(e,"a",!0)||(0,It.filterChildren)(e,"span",!0);if(!n)return;let s=n.getAttribute("href")||"";r||(r=s);let a=n.textContent||"",o=[],u=(0,It.filterChildren)(e,"ol",!0);return u&&(o=this.parseNavList(u,r)),{id:r,href:s,label:a,subitems:o,parent:t}}parseLandmarks(e){var t=(0,It.querySelectorByType)(e,"nav","landmarks"),r=t?(0,It.qsa)(t,"li"):[],n=r.length,s,a=[],o;if(!r||n===0)return a;for(s=0;s<n;++s)o=this.landmarkItem(r[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let t=(0,It.filterChildren)(e,"a",!0);if(!t)return;let r=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,n=t.getAttribute("href")||"",s=t.textContent||"";return{href:n,label:s,type:r}}parseNcx(e){var t=(0,It.qsa)(e,"navPoint"),r=t.length,n,s={},a=[],o,u;if(!t||r===0)return a;for(n=0;n<r;++n)o=this.ncxItem(t[n]),s[o.id]=o,o.parent?(u=s[o.parent],u.subitems.push(o)):a.push(o);return a}ncxItem(e){var t=e.getAttribute("id")||!1,r=(0,It.qs)(e,"content"),n=r.getAttribute("src"),s=(0,It.qs)(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],u=e.parentNode,l;return u&&(u.nodeName==="navPoint"||u.nodeName.split(":").slice(-1)[0]==="navPoint")&&(l=u.getAttribute("id")),{id:t,href:n,label:a,subitems:o,parent:l}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}},$g=Of;es.default=$g});var rs=K(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.default=void 0;var Yi={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},Yg=function(){var i,e,t,r,n={};for(i in Yi)if(Yi.hasOwnProperty(i)){for(e in Yi[i])if(Yi[i].hasOwnProperty(e))if(t=Yi[i][e],typeof t=="string")n[t]=i+"/"+e;else for(r=0;r<t.length;r++)n[t[r]]=i+"/"+e}return n}(),Kg="text/plain";function Jg(i){return i&&Yg[i.split(".").pop().toLowerCase()]||Kg}var Qg={lookup:Jg};ts.default=Qg});var Pf=K(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.default=void 0;var If=Xi(),Ki=He(),em=is(Gi()),tm=is(rs()),Bf=is(Sr()),rm=is(Zi());function is(i){return i&&i.__esModule?i:{default:i}}var Lf=class{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(e){return e.href}.bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new em.default(e),r=tm.default.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(n=>(0,Ki.blob2base64)(n)).then(n=>(0,Ki.createBase64Url)(n,r)):this.settings.request(e,"blob").then(n=>(0,Ki.createBlobUrl)(n,r))}replacements(){if(this.settings.replacements==="none")return new Promise(function(t){t(this.urls)}.bind(this));var e=this.urls.map(t=>{var r=this.settings.resolver(t);return this.createUrl(r).catch(n=>(console.error(n),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(r=>typeof r=="string"),t))}replaceCss(e,t){var r=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach(function(n){var s=this.createCssFile(n,e,t).then(function(a){var o=this.urls.indexOf(n);o>-1&&(this.replacementUrls[o]=a)}.bind(this));r.push(s)}.bind(this)),Promise.all(r)}createCssFile(e){var t;if(rm.default.isAbsolute(e))return new Promise(function(a){a()});var r=this.settings.resolver(e),n;this.settings.archive?n=this.settings.archive.getText(r):n=this.settings.request(r,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),u=new Bf.default(r).relative(o);return u});return n?n.then(a=>(a=(0,If.substitute)(a,s,this.replacementUrls),this.settings.replacements==="base64"?t=(0,Ki.createBase64Url)(a,"text/css"):t=(0,Ki.createBlobUrl)(a,"text/css"),t),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map(function(r){var n=t(r),s=new Bf.default(e).relative(n);return s}.bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise(function(r,n){r(this.replacementUrls[t])}.bind(this)):this.createUrl(e)}substitute(e,t){var r;return t?r=this.relativeTo(t):r=this.urls,(0,If.substitute)(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}},im=Lf;ns.default=im});var Mf=K(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.default=void 0;var nm=sm(Rt()),jt=He();function sm(i){return i&&i.__esModule?i:{default:i}}var Ff=class{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new nm.default,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=(0,jt.qs)(e,"html"),r=(0,jt.qs)(e,"ncx");if(t)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var t=(0,jt.querySelectorByType)(e,"nav","page-list"),r=t?(0,jt.qsa)(t,"li"):[],n=r.length,s,a=[],o;if(!r||n===0)return a;for(s=0;s<n;++s)o=this.item(r[s]),a.push(o);return a}parseNcx(e){var t=[],r=0,n,s,a,o=0;if(s=(0,jt.qs)(e,"pageList"),!s||(a=(0,jt.qsa)(s,"pageTarget"),o=a.length,!a||a.length===0))return t;for(r=0;r<o;++r)n=this.ncxItem(a[r]),t.push(n);return t}ncxItem(e){var t=(0,jt.qs)(e,"navLabel"),r=(0,jt.qs)(t,"text"),n=r.textContent,s=(0,jt.qs)(e,"content"),a=s.getAttribute("src"),o=parseInt(n,10);return{href:a,page:o}}item(e){var t=(0,jt.qs)(e,"a"),r=t.getAttribute("href")||"",n=t.textContent||"",s=parseInt(n),a=r.indexOf("epubcfi"),o,u,l;return a!=-1?(o=r.split("#"),u=o[0],l=o.length>1?o[1]:!1,{cfi:l,href:r,packageUrl:u,page:s}):{href:r,page:s}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var r=(0,jt.indexOfSorted)(e,this.locations,this.epubcfi.compare);return r!=-1?t=this.pages[r]:(r=(0,jt.locationOf)(e,this.locations,this.epubcfi.compare),t=r-1>=0?this.pages[r-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(t=this.locations[r]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),r=this.percentageFromPage(t);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}},am=Ff;ss.default=am});var ao=K(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.default=void 0;var om=He(),um=Wt(),lm=hm(Qt());function hm(i){return i&&i.__esModule?i:{default:i}}var so=class{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e!="undefined"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,r){var n=1,s=r||0,a=e,o=t,u=Math.floor(a/12),l,c,f,d;this._spread&&a>=this._minSpreadWidth?n=2:n=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(s=u%2==0?u:u-1),this.name==="pre-paginated"&&(s=0),n>1?(l=a/n-s,f=l+s):(l=a,f=a),this.name==="pre-paginated"&&n>1&&(a=l),c=l*n+s,d=a,this.width=a,this.height=o,this.spreadWidth=c,this.pageWidth=f,this.delta=d,this.columnWidth=l,this.gap=s,this.divisor=n,this.update({width:a,height:o,spreadWidth:c,pageWidth:f,delta:d,columnWidth:l,gap:s,divisor:n})}format(e,t,r){var n;return this.name==="pre-paginated"?n=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?n=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?n=e.size(null,this.height):n=e.size(this.width,null),n}count(e,t){let r,n;return this.name==="pre-paginated"?(r=1,n=1):this._flow==="paginated"?(t=t||this.delta,r=Math.ceil(e/t),n=r*this.divisor):(t=t||this.height,r=Math.ceil(e/t),n=r),{spreads:r,pages:n}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=(0,om.extend)(this.props,e);this.emit(um.EVENTS.LAYOUT.UPDATED,t,e)}}};(0,lm.default)(so.prototype);var fm=so;as.default=fm});var qf=K(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.default=void 0;var cm=dm(Gi());function dm(i){return i&&i.__esModule?i:{default:i}}var zf=class{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(!!e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var r=new cm.default(t);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(n=>{n.removeClass(t),n.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(r=>{this.add(e,r)})}inject(e){var t=[],r=this._themes,n;for(var s in r)r.hasOwnProperty(s)&&(s===this._current||s==="default")&&(n=r[s],(n.rules&&Object.keys(n.rules).length>0||n.url&&t.indexOf(n.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,t){var r=this._themes[e];!r||!t||(r.url?t.addStylesheet(r.url):r.serialized?(t.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(t.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,t,r){var n=this.rendition.getContents();this._overrides[e]={value:t,priority:r===!0},n.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(r=>{r.css(e)})}overrides(e){var t=this._overrides;for(var r in t)t.hasOwnProperty(r)&&e.css(r,t[r].value,t[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}},pm=zf;os.default=pm});var oo=K(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.default=void 0;var us=vm(Rt()),Uf=He();function vm(i){return i&&i.__esModule?i:{default:i}}var Wf=class{constructor(e,t,r,n=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=t||"ltr",this._dev=n}section(e){var t=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,t);return r}page(e,t,r,n){var s=e&&e.document?e.document.body:!1,a;if(!!s){if(a=this.rangePairToCfiPair(t,{start:this.findStart(s,r,n),end:this.findEnd(s,r,n)}),this._dev===!0){let o=e.document,u=new us.default(a.start).toRange(o),l=new us.default(a.end).toRange(o),c=o.defaultView.getSelection(),f=o.createRange();c.removeAllRanges(),f.setStart(u.startContainer,u.startOffset),f.setEnd(l.endContainer,l.endOffset),c.addRange(f)}return a}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(u){return u.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},n=r.acceptNode;n.acceptNode=r.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n,!1),a,o;(a=s.nextNode())&&(o=t(a),!o););return o}}findRanges(e){for(var t=[],r=e.contents.scrollWidth(),n=Math.ceil(r/this.layout.spreadWidth),s=n*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,u,l,c=0;c<s.pages;c++)u=(a+o)*c,l=a*(c+1)+o*c,t.push({start:this.findStart(e.document.body,u,l),end:this.findEnd(e.document.body,u,l)});return t}findStart(e,t,r){for(var n=[e],s,a,o=e;n.length;)if(s=n.shift(),a=this.walk(s,u=>{var l,c,f,d,g,_;if(g=(0,Uf.nodeBounds)(u),this.horizontal&&this.direction==="ltr"){if(l=this.horizontal?g.left:g.top,c=this.horizontal?g.right:g.bottom,l>=t&&l<=r)return u;if(c>t)return u;o=u,n.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=g.left,c=g.right,c<=r&&c>=t)return u;if(l<r)return u;o=u,n.push(u)}else{if(f=g.top,d=g.bottom,f>=t&&f<=r)return u;if(d>t)return u;o=u,n.push(u)}}),a)return this.findTextStartRange(a,t,r);return this.findTextStartRange(o,t,r)}findEnd(e,t,r){for(var n=[e],s,a=e,o;n.length;)if(s=n.shift(),o=this.walk(s,u=>{var l,c,f,d,g,_;if(g=(0,Uf.nodeBounds)(u),this.horizontal&&this.direction==="ltr"){if(l=Math.round(g.left),c=Math.round(g.right),l>r&&a)return a;if(c>r)return u;a=u,n.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=Math.round(this.horizontal?g.left:g.top),c=Math.round(this.horizontal?g.right:g.bottom),c<t&&a)return a;if(l<t)return u;a=u,n.push(u)}else{if(f=Math.round(g.top),d=Math.round(g.bottom),f>r&&a)return a;if(d>r)return u;a=u,n.push(u)}}),o)return this.findTextEndRange(o,t,r);return this.findTextEndRange(a,t,r)}findTextStartRange(e,t,r){for(var n=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c=0;c<n.length;c++)if(s=n[c],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=t)return s}else if(this.horizontal&&this.direction==="rtl"){if(l=a.right,l<=r)return s}else if(u=a.top,u>=t)return s;return n[0]}findTextEndRange(e,t,r){for(var n=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c,f,d=0;d<n.length;d++){if(a=n[d],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(u=o.left,l=o.right,u>r&&s)return s;if(l>r)return a}else if(this.horizontal&&this.direction==="rtl"){if(u=o.left,l=o.right,l<t&&s)return s;if(u<t)return a}else{if(c=o.top,f=o.bottom,c>r&&s)return s;if(f>r)return a}s=a}return n[n.length-1]}splitTextNodeIntoRanges(e,t){var r=[],n=e.textContent||"",s=n.trim(),a,o=e.ownerDocument,u=t||" ",l=s.indexOf(u);if(l===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,l),r.push(a),a=!1;l!=-1;)l=s.indexOf(u,l+1),l>0&&(a&&(a.setEnd(e,l),r.push(a)),a=o.createRange(),a.setStart(e,l+1));return a&&(a.setEnd(e,s.length),r.push(a)),r}rangePairToCfiPair(e,t){var r=t.start,n=t.end;r.collapse(!0),n.collapse(!1);let s=new us.default(r,e).toString(),a=new us.default(n,e).toString();return{start:s,end:a}}rangeListToCfiList(e,t){for(var r=[],n,s=0;s<t.length;s++)n=this.rangePairToCfiPair(e,t[s]),r.push(n);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}},gm=Wf;ls.default=gm});var Ji=K(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.default=void 0;var mm=uo(Qt()),tr=He(),fi=uo(Rt()),Vf=uo(oo()),_m=Xi(),mr=Wt();function uo(i){return i&&i.__esModule?i:{default:i}}var jf=typeof navigator!="undefined",ym=jf&&/Chrome/.test(navigator.userAgent),Hf=jf&&!ym&&/AppleWebKit/.test(navigator.userAgent),bm=1,lo=class{constructor(e,t,r,n){this.epubcfi=new fi.default,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=n||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",mr.EPUBJS_VERSION),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return mr.DOM_EVENTS}width(e){var t=this.content;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&(0,tr.isNumber)(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,r=this.document.createRange(),n=this.content||this.document.body,s=(0,tr.borders)(n);return r.selectNodeContents(n),e=r.getBoundingClientRect(),t=e.width,s&&s.width&&(t+=s.width),Math.round(t)}textHeight(){let e,t,r=this.document.createRange(),n=this.content||this.document.body;return r.selectNodeContents(n),e=r.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,r){var n=this.content||this.document.body;return t?n.style.setProperty(e,t,r?"important":""):n.style.removeProperty(e),this.window.getComputedStyle(n)[e]}viewport(e){var t,r,n,s,a,o,u=this.document.querySelector("meta[name='viewport']"),l={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},c=[],f={};if(u&&u.hasAttribute("content")){let d=u.getAttribute("content"),g=d.match(/width\s*=\s*([^,]*)/),_=d.match(/height\s*=\s*([^,]*)/),C=d.match(/initial-scale\s*=\s*([^,]*)/),D=d.match(/minimum-scale\s*=\s*([^,]*)/),p=d.match(/maximum-scale\s*=\s*([^,]*)/),v=d.match(/user-scalable\s*=\s*([^,]*)/);g&&g.length&&typeof g[1]!="undefined"&&(l.width=g[1]),_&&_.length&&typeof _[1]!="undefined"&&(l.height=_[1]),C&&C.length&&typeof C[1]!="undefined"&&(l.scale=C[1]),D&&D.length&&typeof D[1]!="undefined"&&(l.minimum=D[1]),p&&p.length&&typeof p[1]!="undefined"&&(l.maximum=p[1]),v&&v.length&&typeof v[1]!="undefined"&&(l.scalable=v[1])}return f=(0,tr.defaults)(e||{},l),e&&(f.width&&c.push("width="+f.width),f.height&&c.push("height="+f.height),f.scale&&c.push("initial-scale="+f.scale),f.scalable==="no"?(c.push("minimum-scale="+f.scale),c.push("maximum-scale="+f.scale),c.push("user-scalable="+f.scalable)):(f.scalable&&c.push("user-scalable="+f.scalable),f.minimum&&c.push("minimum-scale="+f.minimum),f.maximum&&c.push("minimum-scale="+f.maximum)),u||(u=this.document.createElement("meta"),u.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(u)),u.setAttribute("content",c.join(", ")),this.window.scrollTo(0,0)),f}expand(){this.emit(mr.EVENTS.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver=="undefined"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(mr.EVENTS.CONTENTS.RESIZE,this._size))}resizeListeners(){var e,t;clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),r=0;r<e.length;r+=1){var n;try{n=e[r].cssRules}catch(o){return}if(!n)return;for(var s=0;s<n.length;s+=1)if(n[s].media){var a=this.window.matchMedia(n[s].media.mediaText);a.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,r=0;r<e.length;r++)t=e[r],typeof t.naturalWidth!="undefined"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var r,n={left:0,top:0};if(!this.document)return n;if(this.epubcfi.isCfiString(e)){let s=new fi.default(e).toRange(this.document,t);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)r=s.startContainer.getBoundingClientRect(),n.left=r.left,n.top=r.top;else if(Hf){let a=s.startContainer,o=new Range;try{a.nodeType===bm?r=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),r=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),r=o.getBoundingClientRect()):r=a.parentNode.getBoundingClientRect()}catch(u){console.error(u,u.stack)}}else r=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(Hf){let o=new Range;o.selectNode(a),r=o.getBoundingClientRect()}else r=a.getBoundingClientRect()}return r&&(n.left=r.left,n.top=r.top),n}addStylesheet(e){return new Promise(function(t,r){var n,s=!1;if(!this.document){t(!1);return}if(n=this.document.querySelector("link[href='"+e+"']"),n){t(!0);return}n=this.document.createElement("link"),n.type="text/css",n.rel="stylesheet",n.href=e,n.onload=n.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(n)}.bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(t),r.innerHTML=e,!0}addStylesheetRules(e,t){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var n=0,s=e.length;n<s;n++){var a=1,o=e[n],u=e[n][0],l="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var c=o.length;a<c;a++){var f=o[a];l+=f[0]+":"+f[1]+(f[2]?" !important":"")+`;
`}r.insertRule(u+"{"+l+"}",r.cssRules.length)}else Object.keys(e).forEach(g=>{let _=e[g];if(Array.isArray(_))_.forEach(C=>{let p=Object.keys(C).map(v=>`${v}:${C[v]}`).join(";");r.insertRule(`${g}{${p}}`,r.cssRules.length)});else{let D=Object.keys(_).map(p=>`${p}:${_[p]}`).join(";");r.insertRule(`${g}{${D}}`,r.cssRules.length)}})}addScript(e){return new Promise(function(t,r){var n,s=!1;if(!this.document){t(!1);return}n=this.document.createElement("script"),n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(n)}.bind(this))}addClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){!this.document||(this._triggerEvent=this.triggerEvent.bind(this),mr.DOM_EVENTS.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){!this.document||(mr.DOM_EVENTS.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){!this.document||(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){!this.document||(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}.bind(this),250)}triggerSelectedEvent(e){var t,r;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(r=new fi.default(t,this.cfiBase).toString(),this.emit(mr.EVENTS.CONTENTS.SELECTED,r),this.emit(mr.EVENTS.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var r=new fi.default(e);return r.toRange(this.document,t)}cfiFromRange(e,t){return new fi.default(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new fi.default(e,this.cfiBase,t).toString()}map(e){var t=new Vf.default(e);return t.section()}size(e,t){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),r.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,t,r,n,s){let a=(0,tr.prefixed)("column-axis"),o=(0,tr.prefixed)("column-gap"),u=(0,tr.prefixed)("column-width"),l=(0,tr.prefixed)("column-fill"),f=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&f==="horizontal"&&this.direction(s),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),f==="vertical"?(this.css("padding-top",n/2+"px",!0),this.css("padding-bottom",n/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",n/2+"px",!0),this.css("padding-right",n/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(l,"auto"),this.css(o,n+"px"),this.css(u,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,r){var n="scale("+e+")",s="";this.css("transform-origin","top left"),(t>=0||r>=0)&&(s=" translate("+(t||0)+"px, "+(r||0)+"px )"),this.css("transform",n+s)}fit(e,t,r){var n=this.viewport(),s=parseInt(n.width),a=parseInt(n.height),o=e/s,u=t/a,l=o<u?o:u;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(l,0,0),this.css("background-size",s*l+"px "+a*l+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var c=e-s*l;this.css("margin-left",c+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,r,n,s){var a=new Vf.default(t,s);return a.page(this,e,r,n)}linksHandler(){(0,_m.replaceLinks)(this.content,e=>{this.emit(mr.EVENTS.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=(0,tr.prefixed)("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}};(0,mm.default)(lo.prototype);var wm=lo;hs.default=wm});var $f=K(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.default=void 0;var Em=Gf(Qt()),xm=Gf(Rt()),Zf=Wt();function Gf(i){return i&&i.__esModule?i:{default:i}}var Xf=class{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,r,n,s,a){let o=encodeURI(t+e),l=new xm.default(t).spinePos,c=new ho({type:e,cfiRange:t,data:r,sectionIndex:l,cb:n,className:s,styles:a});return this._annotations[o]=c,l in this._annotationsBySectionIndex?this._annotationsBySectionIndex[l].push(o):this._annotationsBySectionIndex[l]=[o],this.rendition.views().forEach(d=>{c.sectionIndex===d.index&&c.attach(d)}),c}remove(e,t){let r=encodeURI(e+t);if(r in this._annotations){let n=this._annotations[r];if(t&&n.type!==t)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(n.sectionIndex,r),n.sectionIndex===a.index&&n.detach(a)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,r,n,s){return this.add("highlight",e,t,r,n,s)}underline(e,t,r,n,s){return this.add("underline",e,t,r,n,s)}mark(e,t,r){return this.add("mark",e,t,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(n=>{this._annotations[n].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(n=>{this._annotations[n].detach(e)})}show(){}hide(){}},ho=class{constructor({type:e,cfiRange:t,data:r,sectionIndex:n,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=t,this.data=r,this.sectionIndex=n,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:t,data:r,type:n,mark:s,cb:a,className:o,styles:u}=this,l;return n==="highlight"?l=e.highlight(t,r,a,o,u):n==="underline"?l=e.underline(t,r,a,o,u):n==="mark"&&(l=e.mark(t,r,a)),this.mark=l,this.emit(Zf.EVENTS.ANNOTATION.ATTACH,l),l}detach(e){let{cfiRange:t,type:r}=this,n;return e&&(r==="highlight"?n=e.unhighlight(t):r==="underline"?n=e.ununderline(t):r==="mark"&&(n=e.unmark(t))),this.mark=void 0,this.emit(Zf.EVENTS.ANNOTATION.DETACH,n),n}text(){}};(0,Em.default)(ho.prototype);var Sm=Xf;fs.default=Sm});var Kf=K(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.createElement=Yf;function Yf(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}cs.default={createElement:Yf}});var ec=K(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.proxyMouse=Jf;Qi.clone=Qf;Qi.default={proxyMouse:Jf};function Jf(i,e){function t(a){for(var o=e.length-1;o>=0;o--){var u=e[o],l=a.clientX,c=a.clientY;if(a.touches&&a.touches.length&&(l=a.touches[0].clientX,c=a.touches[0].clientY),!!Dm(u,i,l,c)){u.dispatchEvent(Qf(a));break}}}if(i.nodeName==="iframe"||i.nodeName==="IFRAME")try{this.target=i.contentDocument}catch(a){this.target=i}else this.target=i;for(var r=["mouseup","mousedown","click","touchstart"],n=0;n<r.length;n++){var s=r[n];this.target.addEventListener(s,function(a){return t(a)},!1)}}function Qf(i){var e=Object.assign({},i,{bubbles:!1});try{return new MouseEvent(i.type,e)}catch(r){var t=document.createEvent("MouseEvents");return t.initMouseEvent(i.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}}function Dm(i,e,t,r){var n=e.getBoundingClientRect();function s(c,f,d){var g=c.top-n.top,_=c.left-n.left,C=g+c.height,D=_+c.width;return g<=d&&_<=f&&C>d&&D>f}var a=i.getBoundingClientRect();if(!s(a,t,r))return!1;for(var o=i.getClientRects(),u=0,l=o.length;u<l;u++)if(s(o[u],t,r))return!0;return!1}});var nc=K(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.Underline=fr.Highlight=fr.Mark=fr.Pane=void 0;var Cm=function i(e,t,r){e===null&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(n===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:i(s,t,r)}else{if("value"in n)return n.value;var a=n.get;return a===void 0?void 0:a.call(r)}},ds=function(){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}}(),Am=Kf(),en=tc(Am),Tm=ec(),km=tc(Tm);function tc(i){return i&&i.__esModule?i:{default:i}}function rc(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function ic(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}function ps(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var ob=fr.Pane=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;ps(this,i),this.target=e,this.element=en.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),km.default.proxyMouse(this.target,this.marks),this.container=t,this.container.appendChild(this.element),this.render()}return ds(i,[{key:"addMark",value:function(t){var r=en.default.createElement("g");return this.element.appendChild(r),t.bind(r,this.container),this.marks.push(t),t.render(),t}},{key:"removeMark",value:function(t){var r=this.marks.indexOf(t);if(r!==-1){var n=t.unbind();this.element.removeChild(n),this.marks.splice(r,1)}}},{key:"render",value:function(){Im(this.element,Rm(this.target,this.container));var t=!0,r=!1,n=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(t=(a=s.next()).done);t=!0){var o=a.value;o.render()}}catch(u){r=!0,n=u}finally{try{!t&&s.return&&s.return()}finally{if(r)throw n}}}}]),i}(),Nm=fr.Mark=function(){function i(){ps(this,i),this.element=null}return ds(i,[{key:"bind",value:function(t,r){this.element=t,this.container=r}},{key:"unbind",value:function(){var t=this.element;return this.element=null,t}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(t){!this.element||this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var t=[],r=this.element.firstChild;r;)t.push(r.getBoundingClientRect()),r=r.nextSibling;return t}},{key:"filteredRanges",value:function(){var t=Array.from(this.range.getClientRects());return t.filter(function(r){for(var n=0;n<t.length;n++){if(t[n]===r)return!0;var s=Bm(t[n],r);if(s)return!1}return!0})}}]),i}(),Om=fr.Highlight=function(i){ic(e,i);function e(t,r,n,s){ps(this,e);var a=rc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=t,a.className=r,a.data=n||{},a.attributes=s||{},a}return ds(e,[{key:"bind",value:function(r,n){Cm(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,r,n);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=n.length;o<u;o++){var l=n[o],c=en.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),r.appendChild(c)}this.element.appendChild(r)}}]),e}(Nm),ub=fr.Underline=function(i){ic(e,i);function e(t,r,n,s){return ps(this,e),rc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n,s))}return ds(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var r=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=n.length;o<u;o++){var l=n[o],c=en.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),c.setAttribute("fill","none");var f=en.default.createElement("line");f.setAttribute("x1",l.left-s.left+a.left),f.setAttribute("x2",l.left-s.left+a.left+l.width),f.setAttribute("y1",l.top-s.top+a.top+l.height-1),f.setAttribute("y2",l.top-s.top+a.top+l.height-1),f.setAttribute("stroke-width",1),f.setAttribute("stroke","black"),f.setAttribute("stroke-linecap","square"),r.appendChild(c),r.appendChild(f)}this.element.appendChild(r)}}]),e}(Om);function Rm(i,e){var t=e.getBoundingClientRect(),r=i.getBoundingClientRect();return{top:r.top-t.top,left:r.left-t.left,height:i.scrollHeight,width:i.scrollWidth}}function Im(i,e){i.style.setProperty("top",e.top+"px","important"),i.style.setProperty("left",e.left+"px","important"),i.style.setProperty("height",e.height+"px","important"),i.style.setProperty("width",e.width+"px","important")}function Bm(i,e){return e.right<=i.right&&e.left>=i.left&&e.top>=i.top&&e.bottom<=i.bottom}});var po=K(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.default=void 0;var Lm=fo(Qt()),gt=He(),Pm=fo(Rt()),Fm=fo(Ji()),Bt=Wt(),vs=nc();function fo(i){return i&&i.__esModule?i:{default:i}}var co=class{constructor(e,t){this.settings=(0,gt.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+(0,gt.uuid)(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Pm.default,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=(0,gt.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then(function(r){return this.load(r)}.bind(this)).then(function(){let r=this.contents.writingMode(),n;return this.settings.flow==="scrolled"?n=r.indexOf("vertical")===0?"horizontal":"vertical":n=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(n),this.emit(Bt.EVENTS.VIEWS.AXIS,n),this.setWritingMode(r),this.emit(Bt.EVENTS.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}.bind(this),function(r){return this.emit(Bt.EVENTS.VIEWS.LOAD_ERROR,r),new Promise((n,s)=>{s(r)})}.bind(this)).then(function(){this.emit(Bt.EVENTS.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var r=e||this.settings.width,n=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,n):this.settings.axis==="horizontal"?this.lock("height",r,n):this.lock("width",r,n),this.settings.width=r,this.settings.height=n}lock(e,t,r){var n=(0,gt.borders)(this.element),s;this.iframe?s=(0,gt.borders)(this.iframe):s={width:0,height:0},e=="width"&&(0,gt.isNumber)(t)&&(this.lockedWidth=t-n.width-s.width),e=="height"&&(0,gt.isNumber)(r)&&(this.lockedHeight=r-n.height-s.height),e==="both"&&(0,gt.isNumber)(t)&&(0,gt.isNumber)(r)&&(this.lockedWidth=t-n.width-s.width,this.lockedHeight=r-n.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,r=this.lockedHeight,n,s,a;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(n=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&n%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||r!=this._height)&&this.reframe(t,r),this._expanding=!1)}reframe(e,t){var r;(0,gt.isNumber)(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),(0,gt.isNumber)(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let n=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?t-this.prevBounds.height:t;r={width:e,height:t,widthDelta:n,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,r),this.emit(Bt.EVENTS.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=(0,gt.bounds)(this.element)}load(e){var t=new gt.defer,r=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=function(s){this.onLoad(s,t)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=(0,gt.createBlobUrl)(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var n=this;MSApp.execUnsafeLocalFunction(function(){n.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Fm.default(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(Bt.EVENTS.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(Bt.EVENTS.CONTENTS.RESIZE,n=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new gt.defer;return this.displayed?t.resolve(this):this.render(e).then(function(){this.emit(Bt.EVENTS.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}.bind(this),function(r){t.reject(r,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(Bt.EVENTS.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(Bt.EVENTS.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){var t=this.iframe.getBoundingClientRect(),r=this.contents.locationOf(e,this.settings.ignoreClass);return{left:r.left,top:r.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=(0,gt.bounds)(this.element)),this.elementBounds}highlight(e,t={},r,n="epubjs-hl",s={}){if(!this.contents)return;let a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s),o=this.contents.range(e),u=()=>{this.emit(Bt.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new vs.Pane(this.iframe,this.element));let l=new vs.Highlight(o,n,t,a),c=this.pane.addMark(l);return this.highlights[e]={mark:c,element:c.element,listeners:[u,r]},c.element.setAttribute("ref",n),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),r&&(c.element.addEventListener("click",r),c.element.addEventListener("touchstart",r)),c}underline(e,t={},r,n="epubjs-ul",s={}){if(!this.contents)return;let a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s),o=this.contents.range(e),u=()=>{this.emit(Bt.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new vs.Pane(this.iframe,this.element));let l=new vs.Underline(o,n,t,a),c=this.pane.addMark(l);return this.underlines[e]={mark:c,element:c.element,listeners:[u,r]},c.element.setAttribute("ref",n),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),r&&(c.element.addEventListener("click",r),c.element.addEventListener("touchstart",r)),c}mark(e,t={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let n=this.contents.range(e);if(!n)return;let s=n.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=l=>{this.emit(Bt.EVENTS.VIEWS.MARK_CLICKED,e,t)};n.collapsed&&s.nodeType===1?(n=new Range,n.selectNodeContents(s)):n.collapsed&&(n=new Range,n.selectNodeContents(a));let u=this.document.createElement("a");return u.setAttribute("ref","epubjs-mk"),u.style.position="absolute",u.dataset.epubcfi=e,t&&Object.keys(t).forEach(l=>{u.dataset[l]=t[l]}),r&&(u.addEventListener("click",r),u.addEventListener("touchstart",r)),u.addEventListener("click",o),u.addEventListener("touchstart",o),this.placeMark(u,n),this.element.appendChild(u),this.marks[e]={element:u,range:n,listeners:[o,r]},a}placeMark(e,t){let r,n,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=t.getBoundingClientRect();r=o.top,n=o.right}else{let o=t.getClientRects(),u;for(var a=0;a!=o.length;a++)u=o[a],(!s||u.left<s)&&(s=u.left,n=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=u.top)}e.style.top=`${r}px`,e.style.left=`${n}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&(0,gt.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}};(0,Lm.default)(co.prototype);var Mm=co;gs.default=Mm});var ac=K(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.createDefiner=sc;ms.default=zm;function zm(){var i="reverse",e=sc();return document.body.appendChild(e),e.scrollLeft>0?i="default":typeof Element!="undefined"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(i="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),document.body.removeChild(e),i}function sc(){var i=document.createElement("div");i.dir="rtl",i.style.position="fixed",i.style.width="1px",i.style.height="1px",i.style.top="0px",i.style.left="0px",i.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(t),e.appendChild(r),i.appendChild(e),i}});var _s=K((cb,oc)=>{function qm(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}oc.exports=qm});var lc=K((db,uc)=>{var Um=typeof global=="object"&&global&&global.Object===Object&&global;uc.exports=Um});var vo=K((pb,hc)=>{var Wm=lc(),Vm=typeof self=="object"&&self&&self.Object===Object&&self,jm=Wm||Vm||Function("return this")();hc.exports=jm});var cc=K((vb,fc)=>{var Hm=vo(),Zm=function(){return Hm.Date.now()};fc.exports=Zm});var pc=K((gb,dc)=>{var Gm=/\s/;function Xm(i){for(var e=i.length;e--&&Gm.test(i.charAt(e)););return e}dc.exports=Xm});var gc=K((mb,vc)=>{var $m=pc(),Ym=/^\s+/;function Km(i){return i&&i.slice(0,$m(i)+1).replace(Ym,"")}vc.exports=Km});var go=K((_b,mc)=>{var Jm=vo(),Qm=Jm.Symbol;mc.exports=Qm});var wc=K((yb,bc)=>{var _c=go(),yc=Object.prototype,e0=yc.hasOwnProperty,t0=yc.toString,tn=_c?_c.toStringTag:void 0;function r0(i){var e=e0.call(i,tn),t=i[tn];try{i[tn]=void 0;var r=!0}catch(s){}var n=t0.call(i);return r&&(e?i[tn]=t:delete i[tn]),n}bc.exports=r0});var xc=K((bb,Ec)=>{var i0=Object.prototype,n0=i0.toString;function s0(i){return n0.call(i)}Ec.exports=s0});var Ac=K((wb,Cc)=>{var Sc=go(),a0=wc(),o0=xc(),u0="[object Null]",l0="[object Undefined]",Dc=Sc?Sc.toStringTag:void 0;function h0(i){return i==null?i===void 0?l0:u0:Dc&&Dc in Object(i)?a0(i):o0(i)}Cc.exports=h0});var kc=K((Eb,Tc)=>{function f0(i){return i!=null&&typeof i=="object"}Tc.exports=f0});var Oc=K((xb,Nc)=>{var c0=Ac(),d0=kc(),p0="[object Symbol]";function v0(i){return typeof i=="symbol"||d0(i)&&c0(i)==p0}Nc.exports=v0});var Lc=K((Sb,Bc)=>{var g0=gc(),Rc=_s(),m0=Oc(),Ic=0/0,_0=/^[-+]0x[0-9a-f]+$/i,y0=/^0b[01]+$/i,b0=/^0o[0-7]+$/i,w0=parseInt;function E0(i){if(typeof i=="number")return i;if(m0(i))return Ic;if(Rc(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Rc(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=g0(i);var t=y0.test(i);return t||b0.test(i)?w0(i.slice(2),t?2:8):_0.test(i)?Ic:+i}Bc.exports=E0});var _o=K((Db,Fc)=>{var x0=_s(),mo=cc(),Pc=Lc(),S0="Expected a function",D0=Math.max,C0=Math.min;function A0(i,e,t){var r,n,s,a,o,u,l=0,c=!1,f=!1,d=!0;if(typeof i!="function")throw new TypeError(S0);e=Pc(e)||0,x0(t)&&(c=!!t.leading,f="maxWait"in t,s=f?D0(Pc(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function g(y){var T=r,k=n;return r=n=void 0,l=y,a=i.apply(k,T),a}function _(y){return l=y,o=setTimeout(p,e),c?g(y):a}function C(y){var T=y-u,k=y-l,R=e-T;return f?C0(R,s-k):R}function D(y){var T=y-u,k=y-l;return u===void 0||T>=e||T<0||f&&k>=s}function p(){var y=mo();if(D(y))return v(y);o=setTimeout(p,C(y))}function v(y){return o=void 0,d&&r?g(y):(r=n=void 0,a)}function b(){o!==void 0&&clearTimeout(o),l=0,r=u=n=o=void 0}function A(){return o===void 0?a:v(mo())}function P(){var y=mo(),T=D(y);if(r=arguments,n=this,u=y,T){if(o===void 0)return _(u);if(f)return clearTimeout(o),o=setTimeout(p,e),g(u)}return o===void 0&&(o=setTimeout(p,e)),a}return P.cancel=b,P.flush=A,P}Fc.exports=A0});var zc=K((Cb,Mc)=>{var T0=_o(),k0=_s(),N0="Expected a function";function O0(i,e,t){var r=!0,n=!0;if(typeof i!="function")throw new TypeError(N0);return k0(t)&&(r="leading"in t?!!t.leading:r,n="trailing"in t?!!t.trailing:n),T0(i,e,{leading:r,maxWait:e,trailing:n})}Mc.exports=O0});var Uc=K(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.default=void 0;var Lt=He(),R0=I0(zc());function I0(i){return i&&i.__esModule?i:{default:i}}var qc=class{constructor(e){this.settings=e||{},this.id="epubjs-container-"+(0,Lt.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,r=e.width,n=e.overflow||!1,s=e.axis||"vertical",a=e.direction;(0,Lt.extend)(this.settings,e),e.height&&(0,Lt.isNumber)(e.height)&&(t=e.height+"px"),e.width&&(0,Lt.isNumber)(e.width)&&(r=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),r&&(o.style.width=r),t&&(o.style.height=t),n&&(n==="scroll"&&s==="vertical"?(o.style["overflow-y"]=n,o.style["overflow-x"]="hidden"):n==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=n):o.style.overflow=n),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if((0,Lt.isElement)(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),r;if(!!t)return this.settings.hidden?r=this.wrapper:r=this.container,t.appendChild(r),this.element=t,t}getContainer(){return this.container}onResize(e){(!(0,Lt.isNumber)(this.settings.width)||!(0,Lt.isNumber)(this.settings.height))&&(this.resizeFunc=(0,R0.default)(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var r;let n=e||this.settings.width,s=t||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):(0,Lt.isNumber)(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+"px")):(0,Lt.isNumber)(t)?this.container.style.height=t+"px":this.container.style.height=t,(0,Lt.isNumber)(e)||(e=this.container.clientWidth),(0,Lt.isNumber)(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=(0,Lt.windowBounds)(),o=window.getComputedStyle(document.body),u={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return n||(e=a.width-u.left-u.right),(this.settings.fullsize&&!s||!s)&&(t=a.height-u.top-u.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?(0,Lt.windowBounds)():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var r="#"+this.id+" ",n="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(n+=a+":"+s[a]+";")}),this.sheet.insertRule(r+e+" {"+n+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){var e;this.element&&(this.settings.hidden?e=this.wrapper:e=this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}},B0=qc;ys.default=B0});var Vc=K(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.default=void 0;var Wc=class{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(!!this.length){for(var r=0;r<t;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,r=this.length,n=0;n<r;n++)if(t=this._views[n],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,r=this.length,n=0;n<r;n++)t=this._views[n],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}},L0=Wc;bs.default=L0});var Es=K(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.default=void 0;var P0=di(Qt()),ci=He(),F0=di(ac()),jc=di(oo()),M0=di(Yn()),z0=di(Uc()),q0=di(Vc()),Pt=Wt();function di(i){return i&&i.__esModule?i:{default:i}}var yo=class{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new M0.default(this),this.settings=(0,ci.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),(0,ci.extend)(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let r=e.tagName;typeof this.settings.fullsize=="undefined"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=(0,F0.default)(),this.stage=new z0.default({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new q0.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",function(t){this.destroy()}.bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(Pt.EVENTS.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)}onResized(e){this.resize()}resize(e,t,r){let n=this.stage.size(e,t);if(this.winBounds=(0,ci.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===n.width&&this._stageSize.height===n.height||(this._stageSize=n,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(Pt.EVENTS.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,t){return new this.View(e,(0,ci.extend)(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,r){let n;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(n=t.next(),n&&!n.properties.includes("page-spread-left"))return r.call(this,n)}}display(e,t){var r=new ci.defer,n=r.promise;(t===e.href||(0,ci.isNumber)(t))&&(t=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let u=s.width();this.scrollTo(o.left+u,o.top,!0)}if(t){let u=s.locationOf(t),l=s.width();this.moveTo(u,l)}return r.resolve(),n}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then(function(o){if(t){let u=o.locationOf(t),l=o.width();this.moveTo(u,l)}}.bind(this),o=>{r.reject(o)}).then(function(){return this.handleNextPrePaginated(a,e,this.add)}.bind(this)).then(function(){this.views.show(),r.resolve()}.bind(this)),n}afterDisplayed(e){this.emit(Pt.EVENTS.MANAGERS.ADDED,e)}afterResized(e){this.emit(Pt.EVENTS.MANAGERS.RESIZE,e.section)}moveTo(e,t){var r=0,n=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),n=Math.floor(e.top/this.layout.delta)*this.layout.delta,n+this.layout.delta>this.container.scrollHeight&&(n=this.container.scrollHeight-this.layout.delta)):n=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-t),this.scrollTo(r,n,!0)}add(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Pt.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(Pt.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}append(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Pt.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(Pt.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}prepend(e,t){var r=this.createView(e,t);return r.on(Pt.EVENTS.VIEWS.RESIZED,n=>{this.counter(n)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Pt.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),r.on(Pt.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let r=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let n=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(n=!0),this.append(e,n).then(function(){return this.handleNextPrePaginated(n,e,this.append)}.bind(this),s=>s).then(function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var e,t;let r=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let n=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(n=!0),this.prepend(e,n).then(function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}.bind(this),s=>s).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=t.height<window.innerHeight?t.height:window.innerHeight,n=t.width<window.innerWidth?t.width:window.innerWidth,s=this.settings.axis==="vertical",a=this.settings.direction==="rtl",o=0,u=0;return this.settings.fullsize&&(o=s?window.scrollY:window.scrollX),e.map(c=>{let{index:f,href:d}=c.section,g=c.position(),_=c.width(),C=c.height(),D,p,v,b;s?(D=o+t.top-g.top+u,p=D+r-u,b=this.layout.count(C,r).pages,v=r):(D=o+t.left-g.left+u,p=D+n-u,b=this.layout.count(_,n).pages,v=n);let A=Math.ceil(D/v),P=[],y=Math.ceil(p/v);if(this.settings.direction==="rtl"&&!s){let R=A;A=b-y,y=b-R}P=[];for(var T=A;T<=y;T++){let R=T+1;P.push(R)}let k=this.mapping.page(c.contents,c.section.cfiBase,D,p);return{index:f,href:d,pages:P,totalPages:b,mapping:k}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=0,n=0;return this.settings.fullsize&&(r=window.scrollX),e.map(a=>{let{index:o,href:u}=a.section,l,c=a.position(),f=a.width(),d,g,_;this.settings.direction==="rtl"?(l=t.right-r,_=Math.min(Math.abs(l-c.left),this.layout.width)-n,g=c.width-(c.right-l)-n,d=g-_):(l=t.left+r,_=Math.min(c.right-l,this.layout.width)-n,d=l-c.left+n,g=d+_),n+=_;let C=this.mapping.page(a.contents,a.section.cfiBase,d,g),D=this.layout.count(f).pages,p=Math.floor(d/this.layout.pageWidth),v=[],b=Math.floor(g/this.layout.pageWidth);if(p<0&&(p=0,b=b+1),this.settings.direction==="rtl"){let P=p;p=D-b,b=D-P}for(var A=p+1;A<=b;A++){let P=A;v.push(P)}return{index:o,href:u,pages:v,totalPages:D,mapping:C}})}isVisible(e,t,r,n){var s=e.position(),a=n||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-t&&s.left<a.right+r?!0:this.settings.axis==="vertical"&&s.bottom>a.top-t&&s.top<a.bottom+r}visible(){for(var e=this.bounds(),t=this.views.displayed(),r=t.length,n=[],s,a,o=0;o<r;o++)a=t[o],s=this.isVisible(a,0,0,e),s===!0&&n.push(a);return n}scrollBy(e,t,r){let n=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*n,t*n):(e&&(this.container.scrollLeft+=e*n),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(Pt.EVENTS.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(Pt.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){!this.stage||(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new jc.default(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new jc.default(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){let r=t&&t.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}};(0,P0.default)(yo.prototype);var U0=yo;ws.default=U0});var Gc=K(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.default=void 0;var Hc=He(),Zc=Wt(),W0=V0(Qt());function V0(i){return i&&i.__esModule?i:{default:i}}var j0=Math.PI/2,H0={easeOutSine:function(i){return Math.sin(i*j0)},easeInOutSine:function(i){return-.5*(Math.cos(Math.PI*i)-1)},easeInOutQuint:function(i){return(i/=.5)<1?.5*Math.pow(i,5):.5*(Math.pow(i-2,5)+2)},easeInCubic:function(i){return Math.pow(i,3)}},bo=class{constructor(e,t){this.settings=(0,Hc.extend)({duration:80,minVelocity:.2,minDistance:10,easing:H0.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(Zc.EVENTS.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(Zc.EVENTS.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{t.on(r,n=>this.triggerViewEvent(n,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:r}=e.touches[0],n=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&n<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,r=Math.abs(t),n=this.endTime-this.startTime,s=t/n,a=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!=0}snap(e=0){let t=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,n=Math.round(t/r)*r;return e&&(n+=e*r),this.smoothScrollTo(n)}smoothScrollTo(e){let t=new Hc.defer,r=this.scrollLeft,n=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){let u=this.now(),l=Math.min(1,(u-n)/s),c=a(l);if(this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}l<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(r+(e-r)*l,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return o.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){!this.scroller||(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}};(0,W0.default)(bo.prototype);var Z0=bo;xs.default=Z0});var Eo=K(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.default=void 0;var Mr=He(),Xc=wo(Es()),$c=wo(Gc()),Ht=Wt(),G0=wo(_o());function wo(i){return i&&i.__esModule?i:{default:i}}var Yc=class extends Xc.default{constructor(e){super(e);this.name="continuous",this.settings=(0,Mr.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),(0,Mr.extend)(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return Xc.default.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))}fill(e){var t=e||new Mr.defer;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,r=0,n=0,s=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,n=t+this.settings.offsetDelta):(r=e.top,s=e.top+this.settings.offsetDelta),(t>0||r>0)&&this.scrollBy(t,r,!0)}afterResized(e){this.emit(Ht.EVENTS.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(Ht.EVENTS.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(Ht.EVENTS.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Ht.EVENTS.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(Ht.EVENTS.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(Ht.EVENTS.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Ht.EVENTS.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(Ht.EVENTS.VIEWS.RESIZED,r=>{this.counter(r),t.expanded=!0}),t.on(Ht.EVENTS.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Ht.EVENTS.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),r=this.views.all(),n=r.length,s=[],a=typeof e!="undefined"?e:this.settings.offset||0,o,u,l=new Mr.defer,c=[],f=0;f<n;f++)if(u=r[f],o=this.isVisible(u,a,a,t),o===!0){if(u.displayed)u.show();else{let d=u.display(this.request).then(function(g){g.show()},g=>{u.hide()});c.push(d)}s.push(u)}else this.q.enqueue(u.destroy.bind(u)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return c.length?Promise.all(c).catch(d=>{l.reject(d)}):(l.resolve(),l.promise)}check(e,t){var r=new Mr.defer,n=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),t&&!s&&(a=t);var o=this._bounds;let u=s?this.scrollLeft:this.scrollTop,l=s?Math.floor(o.width):o.height,c=s?this.container.scrollWidth:this.container.scrollHeight,f=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",d=this.settings.rtlScrollType,g=this.settings.direction==="rtl";this.settings.fullsize?(s&&g&&d==="negative"||!s&&g&&d==="default")&&(u=u*-1):(g&&d==="default"&&f==="horizontal"&&(u=c-l-u),g&&d==="negative"&&f==="horizontal"&&(u=u*-1));let _=()=>{let b=this.views.first(),A=b&&b.section.prev();A&&n.push(this.prepend(A))},C=()=>{let b=this.views.last(),A=b&&b.section.next();A&&n.push(this.append(A))},D=u+l+a,p=u-a;D>=c&&C(),p<0&&_();let v=n.map(b=>b.display(this.request));return n.length?Promise.all(v).then(()=>this.check()).then(()=>this.update(a),b=>b):(this.q.enqueue(function(){this.update()}.bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new Mr.defer,t=this.views.displayed(),r=t[0],n=t[t.length-1],s=this.views.indexOf(r),a=this.views.indexOf(n),o=this.views.slice(0,s),u=this.views.slice(a+1),l=0;l<o.length-1;l++)this.erase(o[l],o);for(var c=1;c<u.length;c++)this.erase(u[c]);return e.resolve(),e.promise}erase(e,t){var r,n;this.settings.fullsize?(r=window.scrollY,n=window.scrollX):(r=this.container.scrollTop,n=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,r-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(n+Math.floor(s.width),0,!0):this.scrollTo(n,0,!0):this.scrollTo(n-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",function(t){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new $c.default(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=Mr.requestAnimationFrame;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=(0,G0.default)(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,t=window.scrollX*r):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(Ht.EVENTS.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(Ht.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new $c.default(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}},X0=Yc;Ss.default=X0});var Cs=K(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.default=void 0;var $0=rr(Qt()),rn=He(),zr=rr(Hn()),Kc=rr(Rt()),Y0=rr(Yn()),K0=rr(ao()),J0=rr(qf()),Rb=rr(Ji()),Q0=rr($f()),Ze=Wt(),e_=rr(po()),t_=rr(Es()),r_=rr(Eo());function rr(i){return i&&i.__esModule?i:{default:i}}var xo=class{constructor(e,t){this.settings=(0,rn.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),(0,rn.extend)(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new zr.default(this),this.hooks.serialize=new zr.default(this),this.hooks.content=new zr.default(this),this.hooks.unloaded=new zr.default(this),this.hooks.layout=new zr.default(this),this.hooks.render=new zr.default(this),this.hooks.show=new zr.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new J0.default(this),this.annotations=new Q0.default(this),this.epubcfi=new Kc.default,this.q=new Y0.default(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new rn.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=t_.default:typeof e=="string"&&e==="continuous"?t=r_.default:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=e_.default:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(Ze.EVENTS.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(Ze.EVENTS.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(Ze.EVENTS.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(Ze.EVENTS.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(Ze.EVENTS.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(Ze.EVENTS.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(Ze.EVENTS.RENDITION.ATTACHED)}.bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(!!this.book){var t=this.epubcfi.isCfiString(e),r=new rn.defer,n=r.promise,s,a;return this.displaying=r,this.book.locations.length()&&(0,rn.isFloat)(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),s=this.book.spine.get(e),s?(this.manager.display(s,e).then(()=>{r.resolve(s),this.displaying=void 0,this.emit(Ze.EVENTS.RENDITION.DISPLAYED,s),this.reportLocation()},o=>{this.emit(Ze.EVENTS.RENDITION.DISPLAY_ERROR,o)}),n):(r.reject(new Error("No Section Found")),n)}}afterDisplayed(e){e.on(Ze.EVENTS.VIEWS.MARK_CLICKED,(t,r)=>this.triggerMarkEvent(t,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(Ze.EVENTS.RENDITION.RENDERED,e.section,e)}):this.emit(Ze.EVENTS.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(Ze.EVENTS.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(Ze.EVENTS.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(Ze.EVENTS.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,r){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,r=this.settings.layout||e.layout||"reflowable",n=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",u=this.settings.minSpreadWidth||e.minSpreadWidth||800,l=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:r,spread:n,orientation:s,flow:a,viewport:o,minSpreadWidth:u,direction:l},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new K0.default(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(Ze.EVENTS.LAYOUT.UPDATED,(t,r)=>{this.emit(Ze.EVENTS.RENDITION.LAYOUT,t,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then(function(n){let s=this.located(n);!s||!s.start||!s.end||(this.location=s,this.emit(Ze.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Ze.EVENTS.RENDITION.RELOCATED,this.location))}.bind(this));else if(r){let n=this.located(r);if(!n||!n.start||!n.end)return;this.location=n,this.emit(Ze.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Ze.EVENTS.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then(function(t){return this.located(t)}.bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],r=e[e.length-1],n={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},s=this.book.locations.locationFromCfi(t.mapping.start),a=this.book.locations.locationFromCfi(r.mapping.end);s!=null&&(n.start.location=s,n.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(n.end.location=a,n.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(t.mapping.start),u=this.book.pageList.pageFromCfi(r.mapping.end);return o!=-1&&(n.start.page=o),u!=-1&&(n.end.page=u),r.index===this.book.spine.last().index&&n.end.displayed.page>=n.end.displayed.total&&(n.atEnd=!0),t.index===this.book.spine.first().index&&n.start.displayed.page===1&&(n.atStart=!0),n}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){Ze.DOM_EVENTS.forEach(t=>{e.on(t,r=>this.triggerViewEvent(r,e))}),e.on(Ze.EVENTS.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(Ze.EVENTS.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,r){this.emit(Ze.EVENTS.RENDITION.MARK_CLICKED,e,t,r)}getRange(e,t){var r=new Kc.default(e),n=this.manager.visible().filter(function(s){if(r.spinePos===s.index)return!0});if(n.length)return n[0].contents.range(r,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let t=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-n+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-n+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(Ze.EVENTS.CONTENTS.LINK_CLICKED,t=>{let r=this.book.path.relative(t);this.display(r)})}injectStylesheet(e,t){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,t){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,t){let r=this.book.packaging.metadata.identifier,n=e.createElement("meta");n.setAttribute("name","dc.relation.ispartof"),r&&n.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(n)}};(0,$0.default)(xo.prototype);var i_=xo;Ds.default=i_});var Qc=K((Jc,So)=>{(function(i){if(typeof Jc=="object"&&typeof So!="undefined")So.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var e;typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:typeof self!="undefined"?e=self:e=this,e.JSZip=i()}})(function(){var i,e,t;return function r(n,s,a){function o(c,f){if(!s[c]){if(!n[c]){var d=typeof require=="function"&&require;if(!f&&d)return d(c,!0);if(u)return u(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var _=s[c]={exports:{}};n[c][0].call(_.exports,function(C){var D=n[c][1][C];return o(D||C)},_,_.exports,r,n,s,a)}return s[c].exports}for(var u=typeof require=="function"&&require,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(r,n,s){"use strict";var a=r("./utils"),o=r("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c=[],f,d,g,_,C,D,p,v=0,b=l.length,A=b,P=a.getTypeOf(l)!=="string";v<l.length;)A=b-v,P?(f=l[v++],d=v<b?l[v++]:0,g=v<b?l[v++]:0):(f=l.charCodeAt(v++),d=v<b?l.charCodeAt(v++):0,g=v<b?l.charCodeAt(v++):0),_=f>>2,C=(f&3)<<4|d>>4,D=A>1?(d&15)<<2|g>>6:64,p=A>2?g&63:64,c.push(u.charAt(_)+u.charAt(C)+u.charAt(D)+u.charAt(p));return c.join("")},s.decode=function(l){var c,f,d,g,_,C,D,p=0,v=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9+/=]/g,"");var A=l.length*3/4;if(l.charAt(l.length-1)===u.charAt(64)&&A--,l.charAt(l.length-2)===u.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");var P;for(o.uint8array?P=new Uint8Array(A|0):P=new Array(A|0);p<l.length;)g=u.indexOf(l.charAt(p++)),_=u.indexOf(l.charAt(p++)),C=u.indexOf(l.charAt(p++)),D=u.indexOf(l.charAt(p++)),c=g<<2|_>>4,f=(_&15)<<4|C>>2,d=(C&3)<<6|D,P[v++]=c,C!==64&&(P[v++]=f),D!==64&&(P[v++]=d);return P}},{"./support":30,"./utils":32}],2:[function(r,n,s){"use strict";var a=r("./external"),o=r("./stream/DataWorker"),u=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function c(f,d,g,_,C){this.compressedSize=f,this.uncompressedSize=d,this.crc32=g,this.compression=_,this.compressedContent=C}c.prototype={getContentWorker:function(){var f=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return f.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,d,g){return f.pipe(new u).pipe(new l("uncompressedSize")).pipe(d.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,s){"use strict";var a=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,s){"use strict";var a=r("./utils");function o(){for(var f,d=[],g=0;g<256;g++){f=g;for(var _=0;_<8;_++)f=f&1?3988292384^f>>>1:f>>>1;d[g]=f}return d}var u=o();function l(f,d,g,_){var C=u,D=_+g;f=f^-1;for(var p=_;p<D;p++)f=f>>>8^C[(f^d[p])&255];return f^-1}function c(f,d,g,_){var C=u,D=_+g;f=f^-1;for(var p=_;p<D;p++)f=f>>>8^C[(f^d.charCodeAt(p))&255];return f^-1}n.exports=function(d,g){if(typeof d=="undefined"||!d.length)return 0;var _=a.getTypeOf(d)!=="string";return _?l(g|0,d,d.length,0):c(g|0,d,d.length,0)}},{"./utils":32}],5:[function(r,n,s){"use strict";s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,n,s){"use strict";var a=null;typeof Promise!="undefined"?a=Promise:a=r("lie"),n.exports={Promise:a}},{lie:37}],7:[function(r,n,s){"use strict";var a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",o=r("pako"),u=r("./utils"),l=r("./stream/GenericWorker"),c=a?"uint8array":"array";s.magic="\b\0";function f(d,g){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=g,this.meta={}}u.inherits(f,l),f.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(c,d.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(g){d.push({data:g,meta:d.meta})}},s.compressWorker=function(d){return new f("Deflate",d)},s.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,s){"use strict";var a=r("../utils"),o=r("../stream/GenericWorker"),u=r("../utf8"),l=r("../crc32"),c=r("../signature"),f=function(v,b){var A="",P;for(P=0;P<b;P++)A+=String.fromCharCode(v&255),v=v>>>8;return A},d=function(v,b){var A=v;return v||(A=b?16893:33204),(A&65535)<<16},g=function(v){return(v||0)&63},_=function(v,b,A,P,y,T){var k=v.file,R=v.compression,z=T!==u.utf8encode,F=a.transformTo("string",T(k.name)),Z=a.transformTo("string",u.utf8encode(k.name)),H=k.comment,te=a.transformTo("string",T(H)),ve=a.transformTo("string",u.utf8encode(H)),ne=Z.length!==k.name.length,pe=ve.length!==H.length,ge,le,Se="",Pe="",Oe="",ce=k.dir,Ie=k.date,Ce={crc32:0,compressedSize:0,uncompressedSize:0};(!b||A)&&(Ce.crc32=v.crc32,Ce.compressedSize=v.compressedSize,Ce.uncompressedSize=v.uncompressedSize);var Qe=0;b&&(Qe|=8),!z&&(ne||pe)&&(Qe|=2048);var et=0,We=0;ce&&(et|=16),y==="UNIX"?(We=798,et|=d(k.unixPermissions,ce)):(We=20,et|=g(k.dosPermissions,ce)),ge=Ie.getUTCHours(),ge=ge<<6,ge=ge|Ie.getUTCMinutes(),ge=ge<<5,ge=ge|Ie.getUTCSeconds()/2,le=Ie.getUTCFullYear()-1980,le=le<<4,le=le|Ie.getUTCMonth()+1,le=le<<5,le=le|Ie.getUTCDate(),ne&&(Pe=f(1,1)+f(l(F),4)+Z,Se+="up"+f(Pe.length,2)+Pe),pe&&(Oe=f(1,1)+f(l(te),4)+ve,Se+="uc"+f(Oe.length,2)+Oe);var De="";De+=`
\0`,De+=f(Qe,2),De+=R.magic,De+=f(ge,2),De+=f(le,2),De+=f(Ce.crc32,4),De+=f(Ce.compressedSize,4),De+=f(Ce.uncompressedSize,4),De+=f(F.length,2),De+=f(Se.length,2);var it=c.LOCAL_FILE_HEADER+De+F+Se,$e=c.CENTRAL_FILE_HEADER+f(We,2)+De+f(te.length,2)+"\0\0\0\0"+f(et,4)+f(P,4)+F+Se+te;return{fileRecord:it,dirRecord:$e}},C=function(v,b,A,P,y){var T="",k=a.transformTo("string",y(P));return T=c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(v,2)+f(v,2)+f(b,4)+f(A,4)+f(k.length,2)+k,T},D=function(v){var b="";return b=c.DATA_DESCRIPTOR+f(v.crc32,4)+f(v.compressedSize,4)+f(v.uncompressedSize,4),b};function p(v,b,A,P){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=A,this.encodeFileName=P,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,o),p.prototype.push=function(v){var b=v.meta.percent||0,A=this.entriesCount,P=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,o.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:A?(b+100*(A-P-1))/A:100}}))},p.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var b=this.streamFiles&&!v.file.dir;if(b){var A=_(v,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:A.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(v){this.accumulate=!1;var b=this.streamFiles&&!v.file.dir,A=_(v,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(A.dirRecord),b)this.push({data:D(v),meta:{percent:100}});else for(this.push({data:A.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var v=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var A=this.bytesWritten-v,P=C(this.dirRecords.length,A,v,this.zipComment,this.encodeFileName);this.push({data:P,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(v){this._sources.push(v);var b=this;return v.on("data",function(A){b.processChunk(A)}),v.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),v.on("error",function(A){b.error(A)}),this},p.prototype.resume=function(){if(!o.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},p.prototype.error=function(v){var b=this._sources;if(!o.prototype.error.call(this,v))return!1;for(var A=0;A<b.length;A++)try{b[A].error(v)}catch(P){}return!0},p.prototype.lock=function(){o.prototype.lock.call(this);for(var v=this._sources,b=0;b<v.length;b++)v[b].lock()},n.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,s){"use strict";var a=r("../compressions"),o=r("./ZipFileWorker"),u=function(l,c){var f=l||c,d=a[f];if(!d)throw new Error(f+" is not a valid compression method !");return d};s.generateWorker=function(l,c,f){var d=new o(c.streamFiles,f,c.platform,c.encodeFileName),g=0;try{l.forEach(function(_,C){g++;var D=u(C.options.compression,c.compression),p=C.options.compressionOptions||c.compressionOptions||{},v=C.dir,b=C.date;C._compressWorker(D,p).withStreamInfo("file",{name:_,dir:v,date:b,comment:C.comment||"",unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions}).pipe(d)}),d.entriesCount=g}catch(_){d.error(_)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,s){"use strict";function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var u in this)typeof this[u]!="function"&&(o[u]=this[u]);return o}}a.prototype=r("./object"),a.prototype.loadAsync=r("./load"),a.support=r("./support"),a.defaults=r("./defaults"),a.version="3.10.1",a.loadAsync=function(o,u){return new a().loadAsync(o,u)},a.external=r("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,s){"use strict";var a=r("./utils"),o=r("./external"),u=r("./utf8"),l=r("./zipEntries"),c=r("./stream/Crc32Probe"),f=r("./nodejsUtils");function d(g){return new o.Promise(function(_,C){var D=g.decompressed.getContentWorker().pipe(new c);D.on("error",function(p){C(p)}).on("end",function(){D.streamInfo.crc32!==g.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):_()}).resume()})}n.exports=function(g,_){var C=this;return _=a.extend(_||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),f.isNode&&f.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",g,!0,_.optimizedBinaryString,_.base64).then(function(D){var p=new l(_);return p.load(D),p}).then(function(p){var v=[o.Promise.resolve(p)],b=p.files;if(_.checkCRC32)for(var A=0;A<b.length;A++)v.push(d(b[A]));return o.Promise.all(v)}).then(function(p){for(var v=p.shift(),b=v.files,A=0;A<b.length;A++){var P=b[A],y=P.fileNameStr,T=a.resolve(P.fileNameStr);C.file(T,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:_.createFolders}),P.dir||(C.file(T).unsafeOriginalName=y)}return v.zipComment.length&&(C.comment=v.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,s){"use strict";var a=r("../utils"),o=r("../stream/GenericWorker");function u(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}a.inherits(u,o),u.prototype._bindStream=function(l){var c=this;this._stream=l,l.pause(),l.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},u.prototype.pause=function(){return o.prototype.pause.call(this)?(this._stream.pause(),!0):!1},u.prototype.resume=function(){return o.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,s){"use strict";var a=r("readable-stream").Readable,o=r("../utils");o.inherits(u,a);function u(l,c,f){a.call(this,c),this._helper=l;var d=this;l.on("data",function(g,_){d.push(g)||d._helper.pause(),f&&f(_)}).on("error",function(g){d.emit("error",g)}).on("end",function(){d.push(null)})}u.prototype._read=function(){this._helper.resume()},n.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,n,s){"use strict";n.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(r,n,s){"use strict";var a=r("./utf8"),o=r("./utils"),u=r("./stream/GenericWorker"),l=r("./stream/StreamHelper"),c=r("./defaults"),f=r("./compressedObject"),d=r("./zipObject"),g=r("./generate"),_=r("./nodejsUtils"),C=r("./nodejs/NodejsStreamInputAdapter"),D=function(y,T,k){var R=o.getTypeOf(T),z,F=o.extend(k||{},c);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&F.unixPermissions&16384&&(F.dir=!0),F.dosPermissions&&F.dosPermissions&16&&(F.dir=!0),F.dir&&(y=v(y)),F.createFolders&&(z=p(y))&&b.call(this,z,!0);var Z=R==="string"&&F.binary===!1&&F.base64===!1;(!k||typeof k.binary=="undefined")&&(F.binary=!Z);var H=T instanceof f&&T.uncompressedSize===0;(H||F.dir||!T||T.length===0)&&(F.base64=!1,F.binary=!0,T="",F.compression="STORE",R="string");var te=null;T instanceof f||T instanceof u?te=T:_.isNode&&_.isStream(T)?te=new C(y,T):te=o.prepareContent(y,T,F.binary,F.optimizedBinaryString,F.base64);var ve=new d(y,te,F);this.files[y]=ve},p=function(y){y.slice(-1)==="/"&&(y=y.substring(0,y.length-1));var T=y.lastIndexOf("/");return T>0?y.substring(0,T):""},v=function(y){return y.slice(-1)!=="/"&&(y+="/"),y},b=function(y,T){return T=typeof T!="undefined"?T:c.createFolders,y=v(y),this.files[y]||D.call(this,y,null,{dir:!0,createFolders:T}),this.files[y]};function A(y){return Object.prototype.toString.call(y)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var T,k,R;for(T in this.files)R=this.files[T],k=T.slice(this.root.length,T.length),k&&T.slice(0,this.root.length)===this.root&&y(k,R)},filter:function(y){var T=[];return this.forEach(function(k,R){y(k,R)&&T.push(R)}),T},file:function(y,T,k){if(arguments.length===1)if(A(y)){var R=y;return this.filter(function(F,Z){return!Z.dir&&R.test(F)})}else{var z=this.files[this.root+y];return z&&!z.dir?z:null}else y=this.root+y,D.call(this,y,T,k);return this},folder:function(y){if(!y)return this;if(A(y))return this.filter(function(z,F){return F.dir&&y.test(z)});var T=this.root+y,k=b.call(this,T),R=this.clone();return R.root=k.name,R},remove:function(y){y=this.root+y;var T=this.files[y];if(T||(y.slice(-1)!=="/"&&(y+="/"),T=this.files[y]),T&&!T.dir)delete this.files[y];else for(var k=this.filter(function(z,F){return F.name.slice(0,y.length)===y}),R=0;R<k.length;R++)delete this.files[k[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var T,k={};try{if(k=o.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode}),k.type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");o.checkSupport(k.type),(k.platform==="darwin"||k.platform==="freebsd"||k.platform==="linux"||k.platform==="sunos")&&(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var R=k.comment||this.comment||"";T=g.generateWorker(this,k,R)}catch(z){T=new u("error"),T.error(z)}return new l(T,k.type||"string",k.mimeType)},generateAsync:function(y,T){return this.generateInternalStream(y).accumulate(T)},generateNodeStream:function(y,T){return y=y||{},y.type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(T)}};n.exports=P},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,s){"use strict";n.exports=r("stream")},{stream:void 0}],17:[function(r,n,s){"use strict";var a=r("./DataReader"),o=r("../utils");function u(l){a.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=l[c]&255}o.inherits(u,a),u.prototype.byteAt=function(l){return this.data[this.zero+l]},u.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),f=l.charCodeAt(1),d=l.charCodeAt(2),g=l.charCodeAt(3),_=this.length-4;_>=0;--_)if(this.data[_]===c&&this.data[_+1]===f&&this.data[_+2]===d&&this.data[_+3]===g)return _-this.zero;return-1},u.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),f=l.charCodeAt(1),d=l.charCodeAt(2),g=l.charCodeAt(3),_=this.readData(4);return c===_[0]&&f===_[1]&&d===_[2]&&g===_[3]},u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,n,s){"use strict";var a=r("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var l=0,c;for(this.checkOffset(u),c=this.index+u-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=u,l},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC((u>>25&127)+1980,(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(u&31)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,s){"use strict";var a=r("./Uint8ArrayReader"),o=r("../utils");function u(l){a.call(this,l)}o.inherits(u,a),u.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,s){"use strict";var a=r("./DataReader"),o=r("../utils");function u(l){a.call(this,l)}o.inherits(u,a),u.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},u.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},u.prototype.readAndCheckSignature=function(l){var c=this.readData(4);return l===c},u.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,n,s){"use strict";var a=r("./ArrayReader"),o=r("../utils");function u(l){a.call(this,l)}o.inherits(u,a),u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,s){"use strict";var a=r("../utils"),o=r("../support"),u=r("./ArrayReader"),l=r("./StringReader"),c=r("./NodeBufferReader"),f=r("./Uint8ArrayReader");n.exports=function(d){var g=a.getTypeOf(d);return a.checkSupport(g),g==="string"&&!o.uint8array?new l(d):g==="nodebuffer"?new c(d):o.uint8array?new f(a.transformTo("uint8array",d)):new u(a.transformTo("array",d))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,s){"use strict";s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,s){"use strict";var a=r("./GenericWorker"),o=r("../utils");function u(l){a.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(u,a),u.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,s){"use strict";var a=r("./GenericWorker"),o=r("../crc32"),u=r("../utils");function l(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u.inherits(l,a),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,s){"use strict";var a=r("../utils"),o=r("./GenericWorker");function u(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}a.inherits(u,o),u.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,s){"use strict";var a=r("../utils"),o=r("./GenericWorker"),u=16*1024;function l(c){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){f.dataIsReady=!0,f.data=d,f.max=d&&d.length||0,f.type=a.getTypeOf(d),f.isPaused||f._tickAndRepeat()},function(d){f.error(d)})}a.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return o.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=u,f=null,d=Math.min(this.max,this.index+c);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,d);break;case"uint8array":f=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":f=this.data.slice(this.index,d);break}return this.index=d,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,s){"use strict";function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return this.isFinished?!1:(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(l){u.processChunk(l)}),o.on("end",function(){u.end()}),o.on("error",function(l){u.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var o=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)!Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)||(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=a},{}],29:[function(r,n,s){"use strict";var a=r("../utils"),o=r("./ConvertWorker"),u=r("./GenericWorker"),l=r("../base64"),c=r("../support"),f=r("../external"),d=null;if(c.nodestream)try{d=r("../nodejs/NodejsStreamOutputAdapter")}catch(p){}function g(p,v,b){switch(p){case"blob":return a.newBlob(a.transformTo("arraybuffer",v),b);case"base64":return l.encode(v);default:return a.transformTo(p,v)}}function _(p,v){var b,A=0,P=null,y=0;for(b=0;b<v.length;b++)y+=v[b].length;switch(p){case"string":return v.join("");case"array":return Array.prototype.concat.apply([],v);case"uint8array":for(P=new Uint8Array(y),b=0;b<v.length;b++)P.set(v[b],A),A+=v[b].length;return P;case"nodebuffer":return Buffer.concat(v);default:throw new Error("concat : unsupported type '"+p+"'")}}function C(p,v){return new f.Promise(function(b,A){var P=[],y=p._internalType,T=p._outputType,k=p._mimeType;p.on("data",function(R,z){P.push(R),v&&v(z)}).on("error",function(R){P=[],A(R)}).on("end",function(){try{var R=g(T,_(y,P),k);b(R)}catch(z){A(z)}P=[]}).resume()})}function D(p,v,b){var A=v;switch(v){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string";break}try{this._internalType=A,this._outputType=v,this._mimeType=b,a.checkSupport(A),this._worker=p.pipe(new o(A)),p.lock()}catch(P){this._worker=new u("error"),this._worker.error(P)}}D.prototype={accumulate:function(p){return C(this,p)},on:function(p,v){var b=this;return p==="data"?this._worker.on(p,function(A){v.call(b,A.data,A.meta)}):this._worker.on(p,function(){a.delay(v,arguments,b)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=D},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,s){"use strict";if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",s.nodebuffer=typeof Buffer!="undefined",s.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")s.blob=!1;else{var a=new ArrayBuffer(0);try{s.blob=new Blob([a],{type:"application/zip"}).size===0}catch(l){try{var o=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,u=new o;u.append(a),s.blob=u.getBlob("application/zip").size===0}catch(c){s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch(l){s.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,s){"use strict";for(var a=r("./utils"),o=r("./support"),u=r("./nodejsUtils"),l=r("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;c[254]=c[254]=1;var d=function(p){var v,b,A,P,y,T=p.length,k=0;for(P=0;P<T;P++)b=p.charCodeAt(P),(b&64512)==55296&&P+1<T&&(A=p.charCodeAt(P+1),(A&64512)==56320&&(b=65536+(b-55296<<10)+(A-56320),P++)),k+=b<128?1:b<2048?2:b<65536?3:4;for(o.uint8array?v=new Uint8Array(k):v=new Array(k),y=0,P=0;y<k;P++)b=p.charCodeAt(P),(b&64512)==55296&&P+1<T&&(A=p.charCodeAt(P+1),(A&64512)==56320&&(b=65536+(b-55296<<10)+(A-56320),P++)),b<128?v[y++]=b:b<2048?(v[y++]=192|b>>>6,v[y++]=128|b&63):b<65536?(v[y++]=224|b>>>12,v[y++]=128|b>>>6&63,v[y++]=128|b&63):(v[y++]=240|b>>>18,v[y++]=128|b>>>12&63,v[y++]=128|b>>>6&63,v[y++]=128|b&63);return v},g=function(p,v){var b;for(v=v||p.length,v>p.length&&(v=p.length),b=v-1;b>=0&&(p[b]&192)==128;)b--;return b<0||b===0?v:b+c[p[b]]>v?b:v},_=function(p){var v,b,A,P,y=p.length,T=new Array(y*2);for(b=0,v=0;v<y;){if(A=p[v++],A<128){T[b++]=A;continue}if(P=c[A],P>4){T[b++]=65533,v+=P-1;continue}for(A&=P===2?31:P===3?15:7;P>1&&v<y;)A=A<<6|p[v++]&63,P--;if(P>1){T[b++]=65533;continue}A<65536?T[b++]=A:(A-=65536,T[b++]=55296|A>>10&1023,T[b++]=56320|A&1023)}return T.length!==b&&(T.subarray?T=T.subarray(0,b):T.length=b),a.applyFromCharCode(T)};s.utf8encode=function(v){return o.nodebuffer?u.newBufferFrom(v,"utf-8"):d(v)},s.utf8decode=function(v){return o.nodebuffer?a.transformTo("nodebuffer",v).toString("utf-8"):(v=a.transformTo(o.uint8array?"uint8array":"array",v),_(v))};function C(){l.call(this,"utf-8 decode"),this.leftOver=null}a.inherits(C,l),C.prototype.processChunk=function(p){var v=a.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=v;v=new Uint8Array(b.length+this.leftOver.length),v.set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var A=g(v),P=v;A!==v.length&&(o.uint8array?(P=v.subarray(0,A),this.leftOver=v.subarray(A,v.length)):(P=v.slice(0,A),this.leftOver=v.slice(A,v.length))),this.push({data:s.utf8decode(P),meta:p.meta})},C.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=C;function D(){l.call(this,"utf-8 encode")}a.inherits(D,l),D.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=D},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,s){"use strict";var a=r("./support"),o=r("./base64"),u=r("./nodejsUtils"),l=r("./external");r("setimmediate");function c(p){var v=null;return a.uint8array?v=new Uint8Array(p.length):v=new Array(p.length),d(p,v)}s.newBlob=function(p,v){s.checkSupport("blob");try{return new Blob([p],{type:v})}catch(P){try{var b=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,A=new b;return A.append(p),A.getBlob(v)}catch(y){throw new Error("Bug : can't construct the Blob.")}}};function f(p){return p}function d(p,v){for(var b=0;b<p.length;++b)v[b]=p.charCodeAt(b)&255;return v}var g={stringifyByChunk:function(p,v,b){var A=[],P=0,y=p.length;if(y<=b)return String.fromCharCode.apply(null,p);for(;P<y;)v==="array"||v==="nodebuffer"?A.push(String.fromCharCode.apply(null,p.slice(P,Math.min(P+b,y)))):A.push(String.fromCharCode.apply(null,p.subarray(P,Math.min(P+b,y)))),P+=b;return A.join("")},stringifyByChar:function(p){for(var v="",b=0;b<p.length;b++)v+=String.fromCharCode(p[b]);return v},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(p){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch(p){return!1}}()}};function _(p){var v=65536,b=s.getTypeOf(p),A=!0;if(b==="uint8array"?A=g.applyCanBeUsed.uint8array:b==="nodebuffer"&&(A=g.applyCanBeUsed.nodebuffer),A)for(;v>1;)try{return g.stringifyByChunk(p,b,v)}catch(P){v=Math.floor(v/2)}return g.stringifyByChar(p)}s.applyFromCharCode=_;function C(p,v){for(var b=0;b<p.length;b++)v[b]=p[b];return v}var D={};D.string={string:f,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return D.string.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:function(p){return d(p,u.allocBuffer(p.length))}},D.array={string:_,array:f,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return u.newBufferFrom(p)}},D.arraybuffer={string:function(p){return _(new Uint8Array(p))},array:function(p){return C(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:f,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return u.newBufferFrom(new Uint8Array(p))}},D.uint8array={string:_,array:function(p){return C(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:f,nodebuffer:function(p){return u.newBufferFrom(p)}},D.nodebuffer={string:_,array:function(p){return C(p,new Array(p.length))},arraybuffer:function(p){return D.nodebuffer.uint8array(p).buffer},uint8array:function(p){return C(p,new Uint8Array(p.length))},nodebuffer:f},s.transformTo=function(p,v){if(v||(v=""),!p)return v;s.checkSupport(p);var b=s.getTypeOf(v),A=D[b][p](v);return A},s.resolve=function(p){for(var v=p.split("/"),b=[],A=0;A<v.length;A++){var P=v[A];P==="."||P===""&&A!==0&&A!==v.length-1||(P===".."?b.pop():b.push(P))}return b.join("/")},s.getTypeOf=function(p){if(typeof p=="string")return"string";if(Object.prototype.toString.call(p)==="[object Array]")return"array";if(a.nodebuffer&&u.isBuffer(p))return"nodebuffer";if(a.uint8array&&p instanceof Uint8Array)return"uint8array";if(a.arraybuffer&&p instanceof ArrayBuffer)return"arraybuffer"},s.checkSupport=function(p){var v=a[p.toLowerCase()];if(!v)throw new Error(p+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(p){var v="",b,A;for(A=0;A<(p||"").length;A++)b=p.charCodeAt(A),v+="\\x"+(b<16?"0":"")+b.toString(16).toUpperCase();return v},s.delay=function(p,v,b){setImmediate(function(){p.apply(b||null,v||[])})},s.inherits=function(p,v){var b=function(){};b.prototype=v.prototype,p.prototype=new b},s.extend=function(){var p={},v,b;for(v=0;v<arguments.length;v++)for(b in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],b)&&typeof p[b]=="undefined"&&(p[b]=arguments[v][b]);return p},s.prepareContent=function(p,v,b,A,P){var y=l.Promise.resolve(v).then(function(T){var k=a.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1);return k&&typeof FileReader!="undefined"?new l.Promise(function(R,z){var F=new FileReader;F.onload=function(Z){R(Z.target.result)},F.onerror=function(Z){z(Z.target.error)},F.readAsArrayBuffer(T)}):T});return y.then(function(T){var k=s.getTypeOf(T);return k?(k==="arraybuffer"?T=s.transformTo("uint8array",T):k==="string"&&(P?T=o.decode(T):b&&A!==!0&&(T=c(T))),T):l.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,s){"use strict";var a=r("./reader/readerFor"),o=r("./utils"),u=r("./signature"),l=r("./zipEntry"),c=r("./support");function f(d){this.files=[],this.loadOptions=d}f.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(d)+")")}},isSignature:function(d,g){var _=this.reader.index;this.reader.setIndex(d);var C=this.reader.readString(4),D=C===g;return this.reader.setIndex(_),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",_=o.transformTo(g,d);this.zipComment=this.loadOptions.decodeFileName(_)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d=this.zip64EndOfCentralSize-44,g=0,_,C,D;g<d;)_=this.reader.readInt(2),C=this.reader.readInt(4),D=this.reader.readData(C),this.zip64ExtensibleData[_]={id:_,length:C,value:D}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,g;for(d=0;d<this.files.length;d++)g=this.files[d],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)d=new l({zip64:this.zip64},this.loadOptions),d.readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(d<0){var g=!this.isSignature(0,u.LOCAL_FILE_HEADER);throw g?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(d);var _=d;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,d=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),d<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var C=this.centralDirOffset+this.centralDirSize;this.zip64&&(C+=20,C+=12+this.zip64EndOfCentralSize);var D=_-C;if(D>0)this.isSignature(_,u.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(d){this.reader=a(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,s){"use strict";var a=r("./reader/readerFor"),o=r("./utils"),u=r("./compressedObject"),l=r("./crc32"),c=r("./utf8"),f=r("./compressions"),d=r("./support"),g=0,_=3,C=function(p){for(var v in f)if(!!Object.prototype.hasOwnProperty.call(f,v)&&f[v].magic===p)return f[v];return null};function D(p,v){this.options=p,this.loadOptions=v}D.prototype={isEncrypted:function(){return(this.bitFlag&1)==1},useUTF8:function(){return(this.bitFlag&2048)==2048},readLocalPart:function(p){var v,b;if(p.skip(22),this.fileNameLength=p.readInt(2),b=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(v=C(this.compressionMethod),v===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),p===g&&(this.dosPermissions=this.externalFileAttributes&63),p===_&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(!!this.extraFields[1]){var p=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v=p.index+this.extraFieldsLength,b,A,P;for(this.extraFields||(this.extraFields={});p.index+4<v;)b=p.readInt(2),A=p.readInt(2),P=p.readData(A),this.extraFields[b]={id:b,length:A,value:P};p.setIndex(v)},handleUTF8:function(){var p=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var P=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(P)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=a(p.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=a(p.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null}},n.exports=D},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,s){"use strict";var a=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),u=r("./utf8"),l=r("./compressedObject"),c=r("./stream/GenericWorker"),f=function(C,D,p){this.name=C,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=D,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}};f.prototype={internalStream:function(C){var D=null,p="string";try{if(!C)throw new Error("No output type specified.");p=C.toLowerCase();var v=p==="string"||p==="text";(p==="binarystring"||p==="text")&&(p="string"),D=this._decompressWorker();var b=!this._dataBinary;b&&!v&&(D=D.pipe(new u.Utf8EncodeWorker)),!b&&v&&(D=D.pipe(new u.Utf8DecodeWorker))}catch(A){D=new c("error"),D.error(A)}return new a(D,p,"")},async:function(C,D){return this.internalStream(C).accumulate(D)},nodeStream:function(C,D){return this.internalStream(C||"nodebuffer").toNodejsStream(D)},_compressWorker:function(C,D){if(this._data instanceof l&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(p,C,D)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},_=0;_<d.length;_++)f.prototype[d[_]]=g;n.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,s){(function(a){"use strict";var o=a.MutationObserver||a.WebKitMutationObserver,u;if(o){var l=0,c=new o(C),f=a.document.createTextNode("");c.observe(f,{characterData:!0}),u=function(){f.data=l=++l%2}}else if(!a.setImmediate&&typeof a.MessageChannel!="undefined"){var d=new a.MessageChannel;d.port1.onmessage=C,u=function(){d.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?u=function(){var p=a.document.createElement("script");p.onreadystatechange=function(){C(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},a.document.documentElement.appendChild(p)}:u=function(){setTimeout(C,0)};var g,_=[];function C(){g=!0;for(var p,v,b=_.length;b;){for(v=_,_=[],p=-1;++p<b;)v[p]();b=_.length}g=!1}n.exports=D;function D(p){_.push(p)===1&&!g&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(r,n,s){"use strict";var a=r("immediate");function o(){}var u={},l=["REJECTED"],c=["FULFILLED"],f=["PENDING"];n.exports=d;function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,y!==o&&D(this,y)}d.prototype.finally=function(y){if(typeof y!="function")return this;var T=this.constructor;return this.then(k,R);function k(z){function F(){return z}return T.resolve(y()).then(F)}function R(z){function F(){throw z}return T.resolve(y()).then(F)}},d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,T){if(typeof y!="function"&&this.state===c||typeof T!="function"&&this.state===l)return this;var k=new this.constructor(o);if(this.state!==f){var R=this.state===c?y:T;_(k,R,this.outcome)}else this.queue.push(new g(k,y,T));return k};function g(y,T,k){this.promise=y,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}g.prototype.callFulfilled=function(y){u.resolve(this.promise,y)},g.prototype.otherCallFulfilled=function(y){_(this.promise,this.onFulfilled,y)},g.prototype.callRejected=function(y){u.reject(this.promise,y)},g.prototype.otherCallRejected=function(y){_(this.promise,this.onRejected,y)};function _(y,T,k){a(function(){var R;try{R=T(k)}catch(z){return u.reject(y,z)}R===y?u.reject(y,new TypeError("Cannot resolve promise with itself")):u.resolve(y,R)})}u.resolve=function(y,T){var k=p(C,T);if(k.status==="error")return u.reject(y,k.value);var R=k.value;if(R)D(y,R);else{y.state=c,y.outcome=T;for(var z=-1,F=y.queue.length;++z<F;)y.queue[z].callFulfilled(T)}return y},u.reject=function(y,T){y.state=l,y.outcome=T;for(var k=-1,R=y.queue.length;++k<R;)y.queue[k].callRejected(T);return y};function C(y){var T=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof T=="function")return function(){T.apply(y,arguments)}}function D(y,T){var k=!1;function R(H){k||(k=!0,u.reject(y,H))}function z(H){k||(k=!0,u.resolve(y,H))}function F(){T(z,R)}var Z=p(F);Z.status==="error"&&R(Z.value)}function p(y,T){var k={};try{k.value=y(T),k.status="success"}catch(R){k.status="error",k.value=R}return k}d.resolve=v;function v(y){return y instanceof this?y:u.resolve(new this(o),y)}d.reject=b;function b(y){var T=new this(o);return u.reject(T,y)}d.all=A;function A(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,R=!1;if(!k)return this.resolve([]);for(var z=new Array(k),F=0,Z=-1,H=new this(o);++Z<k;)te(y[Z],Z);return H;function te(ve,ne){T.resolve(ve).then(pe,function(ge){R||(R=!0,u.reject(H,ge))});function pe(ge){z[ne]=ge,++F===k&&!R&&(R=!0,u.resolve(H,z))}}}d.race=P;function P(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,R=!1;if(!k)return this.resolve([]);for(var z=-1,F=new this(o);++z<k;)Z(y[z]);return F;function Z(H){T.resolve(H).then(function(te){R||(R=!0,u.resolve(F,te))},function(te){R||(R=!0,u.reject(F,te))})}}},{immediate:36}],38:[function(r,n,s){"use strict";var a=r("./lib/utils/common").assign,o=r("./lib/deflate"),u=r("./lib/inflate"),l=r("./lib/zlib/constants"),c={};a(c,o,u,l),n.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,s){"use strict";var a=r("./zlib/deflate"),o=r("./utils/common"),u=r("./utils/strings"),l=r("./zlib/messages"),c=r("./zlib/zstream"),f=Object.prototype.toString,d=0,g=4,_=0,C=1,D=2,p=-1,v=0,b=8;function A(k){if(!(this instanceof A))return new A(k);this.options=o.assign({level:p,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},k||{});var R=this.options;R.raw&&R.windowBits>0?R.windowBits=-R.windowBits:R.gzip&&R.windowBits>0&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var z=a.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(z!==_)throw new Error(l[z]);if(R.header&&a.deflateSetHeader(this.strm,R.header),R.dictionary){var F;if(typeof R.dictionary=="string"?F=u.string2buf(R.dictionary):f.call(R.dictionary)==="[object ArrayBuffer]"?F=new Uint8Array(R.dictionary):F=R.dictionary,z=a.deflateSetDictionary(this.strm,F),z!==_)throw new Error(l[z]);this._dict_set=!0}}A.prototype.push=function(k,R){var z=this.strm,F=this.options.chunkSize,Z,H;if(this.ended)return!1;H=R===~~R?R:R===!0?g:d,typeof k=="string"?z.input=u.string2buf(k):f.call(k)==="[object ArrayBuffer]"?z.input=new Uint8Array(k):z.input=k,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(F),z.next_out=0,z.avail_out=F),Z=a.deflate(z,H),Z!==C&&Z!==_)return this.onEnd(Z),this.ended=!0,!1;(z.avail_out===0||z.avail_in===0&&(H===g||H===D))&&(this.options.to==="string"?this.onData(u.buf2binstring(o.shrinkBuf(z.output,z.next_out))):this.onData(o.shrinkBuf(z.output,z.next_out)))}while((z.avail_in>0||z.avail_out===0)&&Z!==C);return H===g?(Z=a.deflateEnd(this.strm),this.onEnd(Z),this.ended=!0,Z===_):(H===D&&(this.onEnd(_),z.avail_out=0),!0)},A.prototype.onData=function(k){this.chunks.push(k)},A.prototype.onEnd=function(k){k===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg};function P(k,R){var z=new A(R);if(z.push(k,!0),z.err)throw z.msg||l[z.err];return z.result}function y(k,R){return R=R||{},R.raw=!0,P(k,R)}function T(k,R){return R=R||{},R.gzip=!0,P(k,R)}s.Deflate=A,s.deflate=P,s.deflateRaw=y,s.gzip=T},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,s){"use strict";var a=r("./zlib/inflate"),o=r("./utils/common"),u=r("./utils/strings"),l=r("./zlib/constants"),c=r("./zlib/messages"),f=r("./zlib/zstream"),d=r("./zlib/gzheader"),g=Object.prototype.toString;function _(p){if(!(this instanceof _))return new _(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),v.windowBits>=0&&v.windowBits<16&&!(p&&p.windowBits)&&(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&(v.windowBits&15)==0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var b=a.inflateInit2(this.strm,v.windowBits);if(b!==l.Z_OK)throw new Error(c[b]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}_.prototype.push=function(p,v){var b=this.strm,A=this.options.chunkSize,P=this.options.dictionary,y,T,k,R,z,F,Z=!1;if(this.ended)return!1;T=v===~~v?v:v===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof p=="string"?b.input=u.binstring2buf(p):g.call(p)==="[object ArrayBuffer]"?b.input=new Uint8Array(p):b.input=p,b.next_in=0,b.avail_in=b.input.length;do{if(b.avail_out===0&&(b.output=new o.Buf8(A),b.next_out=0,b.avail_out=A),y=a.inflate(b,l.Z_NO_FLUSH),y===l.Z_NEED_DICT&&P&&(typeof P=="string"?F=u.string2buf(P):g.call(P)==="[object ArrayBuffer]"?F=new Uint8Array(P):F=P,y=a.inflateSetDictionary(this.strm,F)),y===l.Z_BUF_ERROR&&Z===!0&&(y=l.Z_OK,Z=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),this.ended=!0,!1;b.next_out&&(b.avail_out===0||y===l.Z_STREAM_END||b.avail_in===0&&(T===l.Z_FINISH||T===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(k=u.utf8border(b.output,b.next_out),R=b.next_out-k,z=u.buf2string(b.output,k),b.next_out=R,b.avail_out=A-R,R&&o.arraySet(b.output,b.output,k,R,0),this.onData(z)):this.onData(o.shrinkBuf(b.output,b.next_out))),b.avail_in===0&&b.avail_out===0&&(Z=!0)}while((b.avail_in>0||b.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(T=l.Z_FINISH),T===l.Z_FINISH?(y=a.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):(T===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),b.avail_out=0),!0)},_.prototype.onData=function(p){this.chunks.push(p)},_.prototype.onEnd=function(p){p===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg};function C(p,v){var b=new _(v);if(b.push(p,!0),b.err)throw b.msg||c[b.err];return b.result}function D(p,v){return v=v||{},v.raw=!0,C(p,v)}s.Inflate=_,s.inflate=C,s.inflateRaw=D,s.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,s){"use strict";var a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(!!f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var d in f)f.hasOwnProperty(d)&&(l[d]=f[d])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,f,d,g){if(c.subarray&&l.subarray){l.set(c.subarray(f,f+d),g);return}for(var _=0;_<d;_++)l[g+_]=c[f+_]},flattenChunks:function(l){var c,f,d,g,_,C;for(d=0,c=0,f=l.length;c<f;c++)d+=l[c].length;for(C=new Uint8Array(d),g=0,c=0,f=l.length;c<f;c++)_=l[c],C.set(_,g),g+=_.length;return C}},u={arraySet:function(l,c,f,d,g){for(var _=0;_<d;_++)l[g+_]=c[f+_]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,u))},s.setTyped(a)},{}],42:[function(r,n,s){"use strict";var a=r("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch(d){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){u=!1}for(var l=new a.Buf8(256),c=0;c<256;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1,s.string2buf=function(d){var g,_,C,D,p,v=d.length,b=0;for(D=0;D<v;D++)_=d.charCodeAt(D),(_&64512)==55296&&D+1<v&&(C=d.charCodeAt(D+1),(C&64512)==56320&&(_=65536+(_-55296<<10)+(C-56320),D++)),b+=_<128?1:_<2048?2:_<65536?3:4;for(g=new a.Buf8(b),p=0,D=0;p<b;D++)_=d.charCodeAt(D),(_&64512)==55296&&D+1<v&&(C=d.charCodeAt(D+1),(C&64512)==56320&&(_=65536+(_-55296<<10)+(C-56320),D++)),_<128?g[p++]=_:_<2048?(g[p++]=192|_>>>6,g[p++]=128|_&63):_<65536?(g[p++]=224|_>>>12,g[p++]=128|_>>>6&63,g[p++]=128|_&63):(g[p++]=240|_>>>18,g[p++]=128|_>>>12&63,g[p++]=128|_>>>6&63,g[p++]=128|_&63);return g};function f(d,g){if(g<65537&&(d.subarray&&u||!d.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(d,g));for(var _="",C=0;C<g;C++)_+=String.fromCharCode(d[C]);return _}s.buf2binstring=function(d){return f(d,d.length)},s.binstring2buf=function(d){for(var g=new a.Buf8(d.length),_=0,C=g.length;_<C;_++)g[_]=d.charCodeAt(_);return g},s.buf2string=function(d,g){var _,C,D,p,v=g||d.length,b=new Array(v*2);for(C=0,_=0;_<v;){if(D=d[_++],D<128){b[C++]=D;continue}if(p=l[D],p>4){b[C++]=65533,_+=p-1;continue}for(D&=p===2?31:p===3?15:7;p>1&&_<v;)D=D<<6|d[_++]&63,p--;if(p>1){b[C++]=65533;continue}D<65536?b[C++]=D:(D-=65536,b[C++]=55296|D>>10&1023,b[C++]=56320|D&1023)}return f(b,C)},s.utf8border=function(d,g){var _;for(g=g||d.length,g>d.length&&(g=d.length),_=g-1;_>=0&&(d[_]&192)==128;)_--;return _<0||_===0?g:_+l[d[_]]>g?_:g}},{"./common":41}],43:[function(r,n,s){"use strict";function a(o,u,l,c){for(var f=o&65535|0,d=o>>>16&65535|0,g=0;l!==0;){g=l>2e3?2e3:l,l-=g;do f=f+u[c++]|0,d=d+f|0;while(--g);f%=65521,d%=65521}return f|d<<16|0}n.exports=a},{}],44:[function(r,n,s){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,s){"use strict";function a(){for(var l,c=[],f=0;f<256;f++){l=f;for(var d=0;d<8;d++)l=l&1?3988292384^l>>>1:l>>>1;c[f]=l}return c}var o=a();function u(l,c,f,d){var g=o,_=d+f;l^=-1;for(var C=d;C<_;C++)l=l>>>8^g[(l^c[C])&255];return l^-1}n.exports=u},{}],46:[function(r,n,s){"use strict";var a=r("../utils/common"),o=r("./trees"),u=r("./adler32"),l=r("./crc32"),c=r("./messages"),f=0,d=1,g=3,_=4,C=5,D=0,p=1,v=-2,b=-3,A=-5,P=-1,y=1,T=2,k=3,R=4,z=0,F=2,Z=8,H=9,te=15,ve=8,ne=29,pe=256,ge=pe+1+ne,le=30,Se=19,Pe=2*ge+1,Oe=15,ce=3,Ie=258,Ce=Ie+ce+1,Qe=32,et=42,We=69,De=73,it=91,$e=103,$=113,ie=666,se=1,de=2,be=3,Re=4,me=3;function Ee(h,U){return h.msg=c[U],U}function Ve(h){return(h<<1)-(h>4?9:0)}function qe(h){for(var U=h.length;--U>=0;)h[U]=0}function ze(h){var U=h.state,W=U.pending;W>h.avail_out&&(W=h.avail_out),W!==0&&(a.arraySet(h.output,U.pending_buf,U.pending_out,W,h.next_out),h.next_out+=W,U.pending_out+=W,h.total_out+=W,h.avail_out-=W,U.pending-=W,U.pending===0&&(U.pending_out=0))}function ke(h,U){o._tr_flush_block(h,h.block_start>=0?h.block_start:-1,h.strstart-h.block_start,U),h.block_start=h.strstart,ze(h.strm)}function ye(h,U){h.pending_buf[h.pending++]=U}function je(h,U){h.pending_buf[h.pending++]=U>>>8&255,h.pending_buf[h.pending++]=U&255}function Xe(h,U,W,w){var O=h.avail_in;return O>w&&(O=w),O===0?0:(h.avail_in-=O,a.arraySet(U,h.input,h.next_in,O,W),h.state.wrap===1?h.adler=u(h.adler,U,O,W):h.state.wrap===2&&(h.adler=l(h.adler,U,O,W)),h.next_in+=O,h.total_in+=O,O)}function lt(h,U){var W=h.max_chain_length,w=h.strstart,O,q,he=h.prev_length,ae=h.nice_match,ue=h.strstart>h.w_size-Ce?h.strstart-(h.w_size-Ce):0,Te=h.window,Yt=h.w_mask,Ke=h.prev,Ne=h.strstart+Ie,nt=Te[w+he-1],dt=Te[w+he];h.prev_length>=h.good_match&&(W>>=2),ae>h.lookahead&&(ae=h.lookahead);do if(O=U,!(Te[O+he]!==dt||Te[O+he-1]!==nt||Te[O]!==Te[w]||Te[++O]!==Te[w+1])){w+=2,O++;do;while(Te[++w]===Te[++O]&&Te[++w]===Te[++O]&&Te[++w]===Te[++O]&&Te[++w]===Te[++O]&&Te[++w]===Te[++O]&&Te[++w]===Te[++O]&&Te[++w]===Te[++O]&&Te[++w]===Te[++O]&&w<Ne);if(q=Ie-(Ne-w),w=Ne-Ie,q>he){if(h.match_start=U,he=q,q>=ae)break;nt=Te[w+he-1],dt=Te[w+he]}}while((U=Ke[U&Yt])>ue&&--W!=0);return he<=h.lookahead?he:h.lookahead}function Ye(h){var U=h.w_size,W,w,O,q,he;do{if(q=h.window_size-h.lookahead-h.strstart,h.strstart>=U+(U-Ce)){a.arraySet(h.window,h.window,U,U,0),h.match_start-=U,h.strstart-=U,h.block_start-=U,w=h.hash_size,W=w;do O=h.head[--W],h.head[W]=O>=U?O-U:0;while(--w);w=U,W=w;do O=h.prev[--W],h.prev[W]=O>=U?O-U:0;while(--w);q+=U}if(h.strm.avail_in===0)break;if(w=Xe(h.strm,h.window,h.strstart+h.lookahead,q),h.lookahead+=w,h.lookahead+h.insert>=ce)for(he=h.strstart-h.insert,h.ins_h=h.window[he],h.ins_h=(h.ins_h<<h.hash_shift^h.window[he+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[he+ce-1])&h.hash_mask,h.prev[he&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=he,he++,h.insert--,!(h.lookahead+h.insert<ce)););}while(h.lookahead<Ce&&h.strm.avail_in!==0)}function _t(h,U){var W=65535;for(W>h.pending_buf_size-5&&(W=h.pending_buf_size-5);;){if(h.lookahead<=1){if(Ye(h),h.lookahead===0&&U===f)return se;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var w=h.block_start+W;if((h.strstart===0||h.strstart>=w)&&(h.lookahead=h.strstart-w,h.strstart=w,ke(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-Ce&&(ke(h,!1),h.strm.avail_out===0))return se}return h.insert=0,U===_?(ke(h,!0),h.strm.avail_out===0?be:Re):(h.strstart>h.block_start&&(ke(h,!1),h.strm.avail_out===0),se)}function Xt(h,U){for(var W,w;;){if(h.lookahead<Ce){if(Ye(h),h.lookahead<Ce&&U===f)return se;if(h.lookahead===0)break}if(W=0,h.lookahead>=ce&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),W!==0&&h.strstart-W<=h.w_size-Ce&&(h.match_length=lt(h,W)),h.match_length>=ce)if(w=o._tr_tally(h,h.strstart-h.match_start,h.match_length-ce),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=ce){h.match_length--;do h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart;while(--h.match_length!=0);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else w=o._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(w&&(ke(h,!1),h.strm.avail_out===0))return se}return h.insert=h.strstart<ce-1?h.strstart:ce-1,U===_?(ke(h,!0),h.strm.avail_out===0?be:Re):h.last_lit&&(ke(h,!1),h.strm.avail_out===0)?se:de}function St(h,U){for(var W,w,O;;){if(h.lookahead<Ce){if(Ye(h),h.lookahead<Ce&&U===f)return se;if(h.lookahead===0)break}if(W=0,h.lookahead>=ce&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=ce-1,W!==0&&h.prev_length<h.max_lazy_match&&h.strstart-W<=h.w_size-Ce&&(h.match_length=lt(h,W),h.match_length<=5&&(h.strategy===y||h.match_length===ce&&h.strstart-h.match_start>4096)&&(h.match_length=ce-1)),h.prev_length>=ce&&h.match_length<=h.prev_length){O=h.strstart+h.lookahead-ce,w=o._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-ce),h.lookahead-=h.prev_length-1,h.prev_length-=2;do++h.strstart<=O&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+ce-1])&h.hash_mask,W=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart);while(--h.prev_length!=0);if(h.match_available=0,h.match_length=ce-1,h.strstart++,w&&(ke(h,!1),h.strm.avail_out===0))return se}else if(h.match_available){if(w=o._tr_tally(h,0,h.window[h.strstart-1]),w&&ke(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return se}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(w=o._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<ce-1?h.strstart:ce-1,U===_?(ke(h,!0),h.strm.avail_out===0?be:Re):h.last_lit&&(ke(h,!1),h.strm.avail_out===0)?se:de}function cr(h,U){for(var W,w,O,q,he=h.window;;){if(h.lookahead<=Ie){if(Ye(h),h.lookahead<=Ie&&U===f)return se;if(h.lookahead===0)break}if(h.match_length=0,h.lookahead>=ce&&h.strstart>0&&(O=h.strstart-1,w=he[O],w===he[++O]&&w===he[++O]&&w===he[++O])){q=h.strstart+Ie;do;while(w===he[++O]&&w===he[++O]&&w===he[++O]&&w===he[++O]&&w===he[++O]&&w===he[++O]&&w===he[++O]&&w===he[++O]&&O<q);h.match_length=Ie-(q-O),h.match_length>h.lookahead&&(h.match_length=h.lookahead)}if(h.match_length>=ce?(W=o._tr_tally(h,1,h.match_length-ce),h.lookahead-=h.match_length,h.strstart+=h.match_length,h.match_length=0):(W=o._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++),W&&(ke(h,!1),h.strm.avail_out===0))return se}return h.insert=0,U===_?(ke(h,!0),h.strm.avail_out===0?be:Re):h.last_lit&&(ke(h,!1),h.strm.avail_out===0)?se:de}function $t(h,U){for(var W;;){if(h.lookahead===0&&(Ye(h),h.lookahead===0)){if(U===f)return se;break}if(h.match_length=0,W=o._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++,W&&(ke(h,!1),h.strm.avail_out===0))return se}return h.insert=0,U===_?(ke(h,!0),h.strm.avail_out===0?be:Re):h.last_lit&&(ke(h,!1),h.strm.avail_out===0)?se:de}function ht(h,U,W,w,O){this.good_length=h,this.max_lazy=U,this.nice_length=W,this.max_chain=w,this.func=O}var Dt;Dt=[new ht(0,0,0,0,_t),new ht(4,4,8,4,Xt),new ht(4,5,16,8,Xt),new ht(4,6,32,32,Xt),new ht(4,4,16,16,St),new ht(8,16,32,32,St),new ht(8,16,128,128,St),new ht(8,32,128,256,St),new ht(32,128,258,1024,St),new ht(32,258,258,4096,St)];function br(h){h.window_size=2*h.w_size,qe(h.head),h.max_lazy_match=Dt[h.level].max_lazy,h.good_match=Dt[h.level].good_length,h.nice_match=Dt[h.level].nice_length,h.max_chain_length=Dt[h.level].max_chain,h.strstart=0,h.block_start=0,h.lookahead=0,h.insert=0,h.match_length=h.prev_length=ce-1,h.match_available=0,h.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(Pe*2),this.dyn_dtree=new a.Buf16((2*le+1)*2),this.bl_tree=new a.Buf16((2*Se+1)*2),qe(this.dyn_ltree),qe(this.dyn_dtree),qe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(Oe+1),this.heap=new a.Buf16(2*ge+1),qe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*ge+1),qe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(h){var U;return!h||!h.state?Ee(h,v):(h.total_in=h.total_out=0,h.data_type=F,U=h.state,U.pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?et:$,h.adler=U.wrap===2?0:1,U.last_flush=f,o._tr_init(U),D)}function J(h){var U=G(h);return U===D&&br(h.state),U}function oe(h,U){return!h||!h.state||h.state.wrap!==2?v:(h.state.gzhead=U,D)}function I(h,U,W,w,O,q){if(!h)return v;var he=1;if(U===P&&(U=6),w<0?(he=0,w=-w):w>15&&(he=2,w-=16),O<1||O>H||W!==Z||w<8||w>15||U<0||U>9||q<0||q>R)return Ee(h,v);w===8&&(w=9);var ae=new x;return h.state=ae,ae.strm=h,ae.wrap=he,ae.gzhead=null,ae.w_bits=w,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=O+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+ce-1)/ce),ae.window=new a.Buf8(ae.w_size*2),ae.head=new a.Buf16(ae.hash_size),ae.prev=new a.Buf16(ae.w_size),ae.lit_bufsize=1<<O+6,ae.pending_buf_size=ae.lit_bufsize*4,ae.pending_buf=new a.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=(1+2)*ae.lit_bufsize,ae.level=U,ae.strategy=q,ae.method=W,J(h)}function V(h,U){return I(h,U,Z,te,ve,z)}function m(h,U){var W,w,O,q;if(!h||!h.state||U>C||U<0)return h?Ee(h,v):v;if(w=h.state,!h.output||!h.input&&h.avail_in!==0||w.status===ie&&U!==_)return Ee(h,h.avail_out===0?A:v);if(w.strm=h,W=w.last_flush,w.last_flush=U,w.status===et)if(w.wrap===2)h.adler=0,ye(w,31),ye(w,139),ye(w,8),w.gzhead?(ye(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),ye(w,w.gzhead.time&255),ye(w,w.gzhead.time>>8&255),ye(w,w.gzhead.time>>16&255),ye(w,w.gzhead.time>>24&255),ye(w,w.level===9?2:w.strategy>=T||w.level<2?4:0),ye(w,w.gzhead.os&255),w.gzhead.extra&&w.gzhead.extra.length&&(ye(w,w.gzhead.extra.length&255),ye(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(h.adler=l(h.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=We):(ye(w,0),ye(w,0),ye(w,0),ye(w,0),ye(w,0),ye(w,w.level===9?2:w.strategy>=T||w.level<2?4:0),ye(w,me),w.status=$);else{var he=Z+(w.w_bits-8<<4)<<8,ae=-1;w.strategy>=T||w.level<2?ae=0:w.level<6?ae=1:w.level===6?ae=2:ae=3,he|=ae<<6,w.strstart!==0&&(he|=Qe),he+=31-he%31,w.status=$,je(w,he),w.strstart!==0&&(je(w,h.adler>>>16),je(w,h.adler&65535)),h.adler=1}if(w.status===We)if(w.gzhead.extra){for(O=w.pending;w.gzindex<(w.gzhead.extra.length&65535)&&!(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>O&&(h.adler=l(h.adler,w.pending_buf,w.pending-O,O)),ze(h),O=w.pending,w.pending===w.pending_buf_size));)ye(w,w.gzhead.extra[w.gzindex]&255),w.gzindex++;w.gzhead.hcrc&&w.pending>O&&(h.adler=l(h.adler,w.pending_buf,w.pending-O,O)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=De)}else w.status=De;if(w.status===De)if(w.gzhead.name){O=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>O&&(h.adler=l(h.adler,w.pending_buf,w.pending-O,O)),ze(h),O=w.pending,w.pending===w.pending_buf_size)){q=1;break}w.gzindex<w.gzhead.name.length?q=w.gzhead.name.charCodeAt(w.gzindex++)&255:q=0,ye(w,q)}while(q!==0);w.gzhead.hcrc&&w.pending>O&&(h.adler=l(h.adler,w.pending_buf,w.pending-O,O)),q===0&&(w.gzindex=0,w.status=it)}else w.status=it;if(w.status===it)if(w.gzhead.comment){O=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>O&&(h.adler=l(h.adler,w.pending_buf,w.pending-O,O)),ze(h),O=w.pending,w.pending===w.pending_buf_size)){q=1;break}w.gzindex<w.gzhead.comment.length?q=w.gzhead.comment.charCodeAt(w.gzindex++)&255:q=0,ye(w,q)}while(q!==0);w.gzhead.hcrc&&w.pending>O&&(h.adler=l(h.adler,w.pending_buf,w.pending-O,O)),q===0&&(w.status=$e)}else w.status=$e;if(w.status===$e&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&ze(h),w.pending+2<=w.pending_buf_size&&(ye(w,h.adler&255),ye(w,h.adler>>8&255),h.adler=0,w.status=$)):w.status=$),w.pending!==0){if(ze(h),h.avail_out===0)return w.last_flush=-1,D}else if(h.avail_in===0&&Ve(U)<=Ve(W)&&U!==_)return Ee(h,A);if(w.status===ie&&h.avail_in!==0)return Ee(h,A);if(h.avail_in!==0||w.lookahead!==0||U!==f&&w.status!==ie){var ue=w.strategy===T?$t(w,U):w.strategy===k?cr(w,U):Dt[w.level].func(w,U);if((ue===be||ue===Re)&&(w.status=ie),ue===se||ue===be)return h.avail_out===0&&(w.last_flush=-1),D;if(ue===de&&(U===d?o._tr_align(w):U!==C&&(o._tr_stored_block(w,0,0,!1),U===g&&(qe(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),ze(h),h.avail_out===0))return w.last_flush=-1,D}return U!==_?D:w.wrap<=0?p:(w.wrap===2?(ye(w,h.adler&255),ye(w,h.adler>>8&255),ye(w,h.adler>>16&255),ye(w,h.adler>>24&255),ye(w,h.total_in&255),ye(w,h.total_in>>8&255),ye(w,h.total_in>>16&255),ye(w,h.total_in>>24&255)):(je(w,h.adler>>>16),je(w,h.adler&65535)),ze(h),w.wrap>0&&(w.wrap=-w.wrap),w.pending!==0?D:p)}function X(h){var U;return!h||!h.state?v:(U=h.state.status,U!==et&&U!==We&&U!==De&&U!==it&&U!==$e&&U!==$&&U!==ie?Ee(h,v):(h.state=null,U===$?Ee(h,b):D))}function _e(h,U){var W=U.length,w,O,q,he,ae,ue,Te,Yt;if(!h||!h.state||(w=h.state,he=w.wrap,he===2||he===1&&w.status!==et||w.lookahead))return v;for(he===1&&(h.adler=u(h.adler,U,W,0)),w.wrap=0,W>=w.w_size&&(he===0&&(qe(w.head),w.strstart=0,w.block_start=0,w.insert=0),Yt=new a.Buf8(w.w_size),a.arraySet(Yt,U,W-w.w_size,w.w_size,0),U=Yt,W=w.w_size),ae=h.avail_in,ue=h.next_in,Te=h.input,h.avail_in=W,h.next_in=0,h.input=U,Ye(w);w.lookahead>=ce;){O=w.strstart,q=w.lookahead-(ce-1);do w.ins_h=(w.ins_h<<w.hash_shift^w.window[O+ce-1])&w.hash_mask,w.prev[O&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=O,O++;while(--q);w.strstart=O,w.lookahead=ce-1,Ye(w)}return w.strstart+=w.lookahead,w.block_start=w.strstart,w.insert=w.lookahead,w.lookahead=0,w.match_length=w.prev_length=ce-1,w.match_available=0,h.next_in=ue,h.input=Te,h.avail_in=ae,w.wrap=he,D}s.deflateInit=V,s.deflateInit2=I,s.deflateReset=J,s.deflateResetKeep=G,s.deflateSetHeader=oe,s.deflate=m,s.deflateEnd=X,s.deflateSetDictionary=_e,s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,s){"use strict";function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n.exports=a},{}],48:[function(r,n,s){"use strict";var a=30,o=12;n.exports=function(l,c){var f,d,g,_,C,D,p,v,b,A,P,y,T,k,R,z,F,Z,H,te,ve,ne,pe,ge,le;f=l.state,d=l.next_in,ge=l.input,g=d+(l.avail_in-5),_=l.next_out,le=l.output,C=_-(c-l.avail_out),D=_+(l.avail_out-257),p=f.dmax,v=f.wsize,b=f.whave,A=f.wnext,P=f.window,y=f.hold,T=f.bits,k=f.lencode,R=f.distcode,z=(1<<f.lenbits)-1,F=(1<<f.distbits)-1;e:do{T<15&&(y+=ge[d++]<<T,T+=8,y+=ge[d++]<<T,T+=8),Z=k[y&z];t:for(;;){if(H=Z>>>24,y>>>=H,T-=H,H=Z>>>16&255,H===0)le[_++]=Z&65535;else if(H&16){te=Z&65535,H&=15,H&&(T<H&&(y+=ge[d++]<<T,T+=8),te+=y&(1<<H)-1,y>>>=H,T-=H),T<15&&(y+=ge[d++]<<T,T+=8,y+=ge[d++]<<T,T+=8),Z=R[y&F];r:for(;;){if(H=Z>>>24,y>>>=H,T-=H,H=Z>>>16&255,H&16){if(ve=Z&65535,H&=15,T<H&&(y+=ge[d++]<<T,T+=8,T<H&&(y+=ge[d++]<<T,T+=8)),ve+=y&(1<<H)-1,ve>p){l.msg="invalid distance too far back",f.mode=a;break e}if(y>>>=H,T-=H,H=_-C,ve>H){if(H=ve-H,H>b&&f.sane){l.msg="invalid distance too far back",f.mode=a;break e}if(ne=0,pe=P,A===0){if(ne+=v-H,H<te){te-=H;do le[_++]=P[ne++];while(--H);ne=_-ve,pe=le}}else if(A<H){if(ne+=v+A-H,H-=A,H<te){te-=H;do le[_++]=P[ne++];while(--H);if(ne=0,A<te){H=A,te-=H;do le[_++]=P[ne++];while(--H);ne=_-ve,pe=le}}}else if(ne+=A-H,H<te){te-=H;do le[_++]=P[ne++];while(--H);ne=_-ve,pe=le}for(;te>2;)le[_++]=pe[ne++],le[_++]=pe[ne++],le[_++]=pe[ne++],te-=3;te&&(le[_++]=pe[ne++],te>1&&(le[_++]=pe[ne++]))}else{ne=_-ve;do le[_++]=le[ne++],le[_++]=le[ne++],le[_++]=le[ne++],te-=3;while(te>2);te&&(le[_++]=le[ne++],te>1&&(le[_++]=le[ne++]))}}else if((H&64)==0){Z=R[(Z&65535)+(y&(1<<H)-1)];continue r}else{l.msg="invalid distance code",f.mode=a;break e}break}}else if((H&64)==0){Z=k[(Z&65535)+(y&(1<<H)-1)];continue t}else if(H&32){f.mode=o;break e}else{l.msg="invalid literal/length code",f.mode=a;break e}break}}while(d<g&&_<D);te=T>>3,d-=te,T-=te<<3,y&=(1<<T)-1,l.next_in=d,l.next_out=_,l.avail_in=d<g?5+(g-d):5-(d-g),l.avail_out=_<D?257+(D-_):257-(_-D),f.hold=y,f.bits=T}},{}],49:[function(r,n,s){"use strict";var a=r("../utils/common"),o=r("./adler32"),u=r("./crc32"),l=r("./inffast"),c=r("./inftrees"),f=0,d=1,g=2,_=4,C=5,D=6,p=0,v=1,b=2,A=-2,P=-3,y=-4,T=-5,k=8,R=1,z=2,F=3,Z=4,H=5,te=6,ve=7,ne=8,pe=9,ge=10,le=11,Se=12,Pe=13,Oe=14,ce=15,Ie=16,Ce=17,Qe=18,et=19,We=20,De=21,it=22,$e=23,$=24,ie=25,se=26,de=27,be=28,Re=29,me=30,Ee=31,Ve=32,qe=852,ze=592,ke=15,ye=ke;function je(I){return(I>>>24&255)+(I>>>8&65280)+((I&65280)<<8)+((I&255)<<24)}function Xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function lt(I){var V;return!I||!I.state?A:(V=I.state,I.total_in=I.total_out=V.total=0,I.msg="",V.wrap&&(I.adler=V.wrap&1),V.mode=R,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new a.Buf32(qe),V.distcode=V.distdyn=new a.Buf32(ze),V.sane=1,V.back=-1,p)}function Ye(I){var V;return!I||!I.state?A:(V=I.state,V.wsize=0,V.whave=0,V.wnext=0,lt(I))}function _t(I,V){var m,X;return!I||!I.state||(X=I.state,V<0?(m=0,V=-V):(m=(V>>4)+1,V<48&&(V&=15)),V&&(V<8||V>15))?A:(X.window!==null&&X.wbits!==V&&(X.window=null),X.wrap=m,X.wbits=V,Ye(I))}function Xt(I,V){var m,X;return I?(X=new Xe,I.state=X,X.window=null,m=_t(I,V),m!==p&&(I.state=null),m):A}function St(I){return Xt(I,ye)}var cr=!0,$t,ht;function Dt(I){if(cr){var V;for($t=new a.Buf32(512),ht=new a.Buf32(32),V=0;V<144;)I.lens[V++]=8;for(;V<256;)I.lens[V++]=9;for(;V<280;)I.lens[V++]=7;for(;V<288;)I.lens[V++]=8;for(c(d,I.lens,0,288,$t,0,I.work,{bits:9}),V=0;V<32;)I.lens[V++]=5;c(g,I.lens,0,32,ht,0,I.work,{bits:5}),cr=!1}I.lencode=$t,I.lenbits=9,I.distcode=ht,I.distbits=5}function br(I,V,m,X){var _e,h=I.state;return h.window===null&&(h.wsize=1<<h.wbits,h.wnext=0,h.whave=0,h.window=new a.Buf8(h.wsize)),X>=h.wsize?(a.arraySet(h.window,V,m-h.wsize,h.wsize,0),h.wnext=0,h.whave=h.wsize):(_e=h.wsize-h.wnext,_e>X&&(_e=X),a.arraySet(h.window,V,m-X,_e,h.wnext),X-=_e,X?(a.arraySet(h.window,V,m-X,X,0),h.wnext=X,h.whave=h.wsize):(h.wnext+=_e,h.wnext===h.wsize&&(h.wnext=0),h.whave<h.wsize&&(h.whave+=_e))),0}function x(I,V){var m,X,_e,h,U,W,w,O,q,he,ae,ue,Te,Yt,Ke=0,Ne,nt,dt,yt,Zr,Gr,tt,Ct,ft=new a.Buf8(4),Kt,Ft,un=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return A;m=I.state,m.mode===Se&&(m.mode=Pe),U=I.next_out,_e=I.output,w=I.avail_out,h=I.next_in,X=I.input,W=I.avail_in,O=m.hold,q=m.bits,he=W,ae=w,Ct=p;e:for(;;)switch(m.mode){case R:if(m.wrap===0){m.mode=Pe;break}for(;q<16;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(m.wrap&2&&O===35615){m.check=0,ft[0]=O&255,ft[1]=O>>>8&255,m.check=u(m.check,ft,2,0),O=0,q=0,m.mode=z;break}if(m.flags=0,m.head&&(m.head.done=!1),!(m.wrap&1)||(((O&255)<<8)+(O>>8))%31){I.msg="incorrect header check",m.mode=me;break}if((O&15)!==k){I.msg="unknown compression method",m.mode=me;break}if(O>>>=4,q-=4,tt=(O&15)+8,m.wbits===0)m.wbits=tt;else if(tt>m.wbits){I.msg="invalid window size",m.mode=me;break}m.dmax=1<<tt,I.adler=m.check=1,m.mode=O&512?ge:Se,O=0,q=0;break;case z:for(;q<16;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(m.flags=O,(m.flags&255)!==k){I.msg="unknown compression method",m.mode=me;break}if(m.flags&57344){I.msg="unknown header flags set",m.mode=me;break}m.head&&(m.head.text=O>>8&1),m.flags&512&&(ft[0]=O&255,ft[1]=O>>>8&255,m.check=u(m.check,ft,2,0)),O=0,q=0,m.mode=F;case F:for(;q<32;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}m.head&&(m.head.time=O),m.flags&512&&(ft[0]=O&255,ft[1]=O>>>8&255,ft[2]=O>>>16&255,ft[3]=O>>>24&255,m.check=u(m.check,ft,4,0)),O=0,q=0,m.mode=Z;case Z:for(;q<16;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}m.head&&(m.head.xflags=O&255,m.head.os=O>>8),m.flags&512&&(ft[0]=O&255,ft[1]=O>>>8&255,m.check=u(m.check,ft,2,0)),O=0,q=0,m.mode=H;case H:if(m.flags&1024){for(;q<16;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}m.length=O,m.head&&(m.head.extra_len=O),m.flags&512&&(ft[0]=O&255,ft[1]=O>>>8&255,m.check=u(m.check,ft,2,0)),O=0,q=0}else m.head&&(m.head.extra=null);m.mode=te;case te:if(m.flags&1024&&(ue=m.length,ue>W&&(ue=W),ue&&(m.head&&(tt=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),a.arraySet(m.head.extra,X,h,ue,tt)),m.flags&512&&(m.check=u(m.check,X,ue,h)),W-=ue,h+=ue,m.length-=ue),m.length))break e;m.length=0,m.mode=ve;case ve:if(m.flags&2048){if(W===0)break e;ue=0;do tt=X[h+ue++],m.head&&tt&&m.length<65536&&(m.head.name+=String.fromCharCode(tt));while(tt&&ue<W);if(m.flags&512&&(m.check=u(m.check,X,ue,h)),W-=ue,h+=ue,tt)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=ne;case ne:if(m.flags&4096){if(W===0)break e;ue=0;do tt=X[h+ue++],m.head&&tt&&m.length<65536&&(m.head.comment+=String.fromCharCode(tt));while(tt&&ue<W);if(m.flags&512&&(m.check=u(m.check,X,ue,h)),W-=ue,h+=ue,tt)break e}else m.head&&(m.head.comment=null);m.mode=pe;case pe:if(m.flags&512){for(;q<16;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(O!==(m.check&65535)){I.msg="header crc mismatch",m.mode=me;break}O=0,q=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),I.adler=m.check=0,m.mode=Se;break;case ge:for(;q<32;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}I.adler=m.check=je(O),O=0,q=0,m.mode=le;case le:if(m.havedict===0)return I.next_out=U,I.avail_out=w,I.next_in=h,I.avail_in=W,m.hold=O,m.bits=q,b;I.adler=m.check=1,m.mode=Se;case Se:if(V===C||V===D)break e;case Pe:if(m.last){O>>>=q&7,q-=q&7,m.mode=de;break}for(;q<3;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}switch(m.last=O&1,O>>>=1,q-=1,O&3){case 0:m.mode=Oe;break;case 1:if(Dt(m),m.mode=We,V===D){O>>>=2,q-=2;break e}break;case 2:m.mode=Ce;break;case 3:I.msg="invalid block type",m.mode=me}O>>>=2,q-=2;break;case Oe:for(O>>>=q&7,q-=q&7;q<32;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if((O&65535)!=(O>>>16^65535)){I.msg="invalid stored block lengths",m.mode=me;break}if(m.length=O&65535,O=0,q=0,m.mode=ce,V===D)break e;case ce:m.mode=Ie;case Ie:if(ue=m.length,ue){if(ue>W&&(ue=W),ue>w&&(ue=w),ue===0)break e;a.arraySet(_e,X,h,ue,U),W-=ue,h+=ue,w-=ue,U+=ue,m.length-=ue;break}m.mode=Se;break;case Ce:for(;q<14;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(m.nlen=(O&31)+257,O>>>=5,q-=5,m.ndist=(O&31)+1,O>>>=5,q-=5,m.ncode=(O&15)+4,O>>>=4,q-=4,m.nlen>286||m.ndist>30){I.msg="too many length or distance symbols",m.mode=me;break}m.have=0,m.mode=Qe;case Qe:for(;m.have<m.ncode;){for(;q<3;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}m.lens[un[m.have++]]=O&7,O>>>=3,q-=3}for(;m.have<19;)m.lens[un[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,Kt={bits:m.lenbits},Ct=c(f,m.lens,0,19,m.lencode,0,m.work,Kt),m.lenbits=Kt.bits,Ct){I.msg="invalid code lengths set",m.mode=me;break}m.have=0,m.mode=et;case et:for(;m.have<m.nlen+m.ndist;){for(;Ke=m.lencode[O&(1<<m.lenbits)-1],Ne=Ke>>>24,nt=Ke>>>16&255,dt=Ke&65535,!(Ne<=q);){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(dt<16)O>>>=Ne,q-=Ne,m.lens[m.have++]=dt;else{if(dt===16){for(Ft=Ne+2;q<Ft;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(O>>>=Ne,q-=Ne,m.have===0){I.msg="invalid bit length repeat",m.mode=me;break}tt=m.lens[m.have-1],ue=3+(O&3),O>>>=2,q-=2}else if(dt===17){for(Ft=Ne+3;q<Ft;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}O>>>=Ne,q-=Ne,tt=0,ue=3+(O&7),O>>>=3,q-=3}else{for(Ft=Ne+7;q<Ft;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}O>>>=Ne,q-=Ne,tt=0,ue=11+(O&127),O>>>=7,q-=7}if(m.have+ue>m.nlen+m.ndist){I.msg="invalid bit length repeat",m.mode=me;break}for(;ue--;)m.lens[m.have++]=tt}}if(m.mode===me)break;if(m.lens[256]===0){I.msg="invalid code -- missing end-of-block",m.mode=me;break}if(m.lenbits=9,Kt={bits:m.lenbits},Ct=c(d,m.lens,0,m.nlen,m.lencode,0,m.work,Kt),m.lenbits=Kt.bits,Ct){I.msg="invalid literal/lengths set",m.mode=me;break}if(m.distbits=6,m.distcode=m.distdyn,Kt={bits:m.distbits},Ct=c(g,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,Kt),m.distbits=Kt.bits,Ct){I.msg="invalid distances set",m.mode=me;break}if(m.mode=We,V===D)break e;case We:m.mode=De;case De:if(W>=6&&w>=258){I.next_out=U,I.avail_out=w,I.next_in=h,I.avail_in=W,m.hold=O,m.bits=q,l(I,ae),U=I.next_out,_e=I.output,w=I.avail_out,h=I.next_in,X=I.input,W=I.avail_in,O=m.hold,q=m.bits,m.mode===Se&&(m.back=-1);break}for(m.back=0;Ke=m.lencode[O&(1<<m.lenbits)-1],Ne=Ke>>>24,nt=Ke>>>16&255,dt=Ke&65535,!(Ne<=q);){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(nt&&(nt&240)==0){for(yt=Ne,Zr=nt,Gr=dt;Ke=m.lencode[Gr+((O&(1<<yt+Zr)-1)>>yt)],Ne=Ke>>>24,nt=Ke>>>16&255,dt=Ke&65535,!(yt+Ne<=q);){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}O>>>=yt,q-=yt,m.back+=yt}if(O>>>=Ne,q-=Ne,m.back+=Ne,m.length=dt,nt===0){m.mode=se;break}if(nt&32){m.back=-1,m.mode=Se;break}if(nt&64){I.msg="invalid literal/length code",m.mode=me;break}m.extra=nt&15,m.mode=it;case it:if(m.extra){for(Ft=m.extra;q<Ft;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}m.length+=O&(1<<m.extra)-1,O>>>=m.extra,q-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=$e;case $e:for(;Ke=m.distcode[O&(1<<m.distbits)-1],Ne=Ke>>>24,nt=Ke>>>16&255,dt=Ke&65535,!(Ne<=q);){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if((nt&240)==0){for(yt=Ne,Zr=nt,Gr=dt;Ke=m.distcode[Gr+((O&(1<<yt+Zr)-1)>>yt)],Ne=Ke>>>24,nt=Ke>>>16&255,dt=Ke&65535,!(yt+Ne<=q);){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}O>>>=yt,q-=yt,m.back+=yt}if(O>>>=Ne,q-=Ne,m.back+=Ne,nt&64){I.msg="invalid distance code",m.mode=me;break}m.offset=dt,m.extra=nt&15,m.mode=$;case $:if(m.extra){for(Ft=m.extra;q<Ft;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}m.offset+=O&(1<<m.extra)-1,O>>>=m.extra,q-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){I.msg="invalid distance too far back",m.mode=me;break}m.mode=ie;case ie:if(w===0)break e;if(ue=ae-w,m.offset>ue){if(ue=m.offset-ue,ue>m.whave&&m.sane){I.msg="invalid distance too far back",m.mode=me;break}ue>m.wnext?(ue-=m.wnext,Te=m.wsize-ue):Te=m.wnext-ue,ue>m.length&&(ue=m.length),Yt=m.window}else Yt=_e,Te=U-m.offset,ue=m.length;ue>w&&(ue=w),w-=ue,m.length-=ue;do _e[U++]=Yt[Te++];while(--ue);m.length===0&&(m.mode=De);break;case se:if(w===0)break e;_e[U++]=m.length,w--,m.mode=De;break;case de:if(m.wrap){for(;q<32;){if(W===0)break e;W--,O|=X[h++]<<q,q+=8}if(ae-=w,I.total_out+=ae,m.total+=ae,ae&&(I.adler=m.check=m.flags?u(m.check,_e,ae,U-ae):o(m.check,_e,ae,U-ae)),ae=w,(m.flags?O:je(O))!==m.check){I.msg="incorrect data check",m.mode=me;break}O=0,q=0}m.mode=be;case be:if(m.wrap&&m.flags){for(;q<32;){if(W===0)break e;W--,O+=X[h++]<<q,q+=8}if(O!==(m.total&4294967295)){I.msg="incorrect length check",m.mode=me;break}O=0,q=0}m.mode=Re;case Re:Ct=v;break e;case me:Ct=P;break e;case Ee:return y;case Ve:default:return A}return I.next_out=U,I.avail_out=w,I.next_in=h,I.avail_in=W,m.hold=O,m.bits=q,(m.wsize||ae!==I.avail_out&&m.mode<me&&(m.mode<de||V!==_))&&br(I,I.output,I.next_out,ae-I.avail_out)?(m.mode=Ee,y):(he-=I.avail_in,ae-=I.avail_out,I.total_in+=he,I.total_out+=ae,m.total+=ae,m.wrap&&ae&&(I.adler=m.check=m.flags?u(m.check,_e,ae,I.next_out-ae):o(m.check,_e,ae,I.next_out-ae)),I.data_type=m.bits+(m.last?64:0)+(m.mode===Se?128:0)+(m.mode===We||m.mode===ce?256:0),(he===0&&ae===0||V===_)&&Ct===p&&(Ct=T),Ct)}function G(I){if(!I||!I.state)return A;var V=I.state;return V.window&&(V.window=null),I.state=null,p}function J(I,V){var m;return!I||!I.state||(m=I.state,(m.wrap&2)==0)?A:(m.head=V,V.done=!1,p)}function oe(I,V){var m=V.length,X,_e,h;return!I||!I.state||(X=I.state,X.wrap!==0&&X.mode!==le)?A:X.mode===le&&(_e=1,_e=o(_e,V,m,0),_e!==X.check)?P:(h=br(I,V,m,m),h?(X.mode=Ee,y):(X.havedict=1,p))}s.inflateReset=Ye,s.inflateReset2=_t,s.inflateResetKeep=lt,s.inflateInit=St,s.inflateInit2=Xt,s.inflate=x,s.inflateEnd=G,s.inflateGetHeader=J,s.inflateSetDictionary=oe,s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,s){"use strict";var a=r("../utils/common"),o=15,u=852,l=592,c=0,f=1,d=2,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],D=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(v,b,A,P,y,T,k,R){var z=R.bits,F=0,Z=0,H=0,te=0,ve=0,ne=0,pe=0,ge=0,le=0,Se=0,Pe,Oe,ce,Ie,Ce,Qe=null,et=0,We,De=new a.Buf16(o+1),it=new a.Buf16(o+1),$e=null,$=0,ie,se,de;for(F=0;F<=o;F++)De[F]=0;for(Z=0;Z<P;Z++)De[b[A+Z]]++;for(ve=z,te=o;te>=1&&De[te]===0;te--);if(ve>te&&(ve=te),te===0)return y[T++]=1<<24|64<<16|0,y[T++]=1<<24|64<<16|0,R.bits=1,0;for(H=1;H<te&&De[H]===0;H++);for(ve<H&&(ve=H),ge=1,F=1;F<=o;F++)if(ge<<=1,ge-=De[F],ge<0)return-1;if(ge>0&&(v===c||te!==1))return-1;for(it[1]=0,F=1;F<o;F++)it[F+1]=it[F]+De[F];for(Z=0;Z<P;Z++)b[A+Z]!==0&&(k[it[b[A+Z]]++]=Z);if(v===c?(Qe=$e=k,We=19):v===f?(Qe=g,et-=257,$e=_,$-=257,We=256):(Qe=C,$e=D,We=-1),Se=0,Z=0,F=H,Ce=T,ne=ve,pe=0,ce=-1,le=1<<ve,Ie=le-1,v===f&&le>u||v===d&&le>l)return 1;for(;;){ie=F-pe,k[Z]<We?(se=0,de=k[Z]):k[Z]>We?(se=$e[$+k[Z]],de=Qe[et+k[Z]]):(se=32+64,de=0),Pe=1<<F-pe,Oe=1<<ne,H=Oe;do Oe-=Pe,y[Ce+(Se>>pe)+Oe]=ie<<24|se<<16|de|0;while(Oe!==0);for(Pe=1<<F-1;Se&Pe;)Pe>>=1;if(Pe!==0?(Se&=Pe-1,Se+=Pe):Se=0,Z++,--De[F]==0){if(F===te)break;F=b[A+k[Z]]}if(F>ve&&(Se&Ie)!==ce){for(pe===0&&(pe=ve),Ce+=H,ne=F-pe,ge=1<<ne;ne+pe<te&&(ge-=De[ne+pe],!(ge<=0));)ne++,ge<<=1;if(le+=1<<ne,v===f&&le>u||v===d&&le>l)return 1;ce=Se&Ie,y[ce]=ve<<24|ne<<16|Ce-T|0}}return Se!==0&&(y[Ce+Se]=F-pe<<24|64<<16|0),R.bits=ve,0}},{"../utils/common":41}],51:[function(r,n,s){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,s){"use strict";var a=r("../utils/common"),o=4,u=0,l=1,c=2;function f(x){for(var G=x.length;--G>=0;)x[G]=0}var d=0,g=1,_=2,C=3,D=258,p=29,v=256,b=v+1+p,A=30,P=19,y=2*b+1,T=15,k=16,R=7,z=256,F=16,Z=17,H=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ve=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=512,le=new Array((b+2)*2);f(le);var Se=new Array(A*2);f(Se);var Pe=new Array(ge);f(Pe);var Oe=new Array(D-C+1);f(Oe);var ce=new Array(p);f(ce);var Ie=new Array(A);f(Ie);function Ce(x,G,J,oe,I){this.static_tree=x,this.extra_bits=G,this.extra_base=J,this.elems=oe,this.max_length=I,this.has_stree=x&&x.length}var Qe,et,We;function De(x,G){this.dyn_tree=x,this.max_code=0,this.stat_desc=G}function it(x){return x<256?Pe[x]:Pe[256+(x>>>7)]}function $e(x,G){x.pending_buf[x.pending++]=G&255,x.pending_buf[x.pending++]=G>>>8&255}function $(x,G,J){x.bi_valid>k-J?(x.bi_buf|=G<<x.bi_valid&65535,$e(x,x.bi_buf),x.bi_buf=G>>k-x.bi_valid,x.bi_valid+=J-k):(x.bi_buf|=G<<x.bi_valid&65535,x.bi_valid+=J)}function ie(x,G,J){$(x,J[G*2],J[G*2+1])}function se(x,G){var J=0;do J|=x&1,x>>>=1,J<<=1;while(--G>0);return J>>>1}function de(x){x.bi_valid===16?($e(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):x.bi_valid>=8&&(x.pending_buf[x.pending++]=x.bi_buf&255,x.bi_buf>>=8,x.bi_valid-=8)}function be(x,G){var J=G.dyn_tree,oe=G.max_code,I=G.stat_desc.static_tree,V=G.stat_desc.has_stree,m=G.stat_desc.extra_bits,X=G.stat_desc.extra_base,_e=G.stat_desc.max_length,h,U,W,w,O,q,he=0;for(w=0;w<=T;w++)x.bl_count[w]=0;for(J[x.heap[x.heap_max]*2+1]=0,h=x.heap_max+1;h<y;h++)U=x.heap[h],w=J[J[U*2+1]*2+1]+1,w>_e&&(w=_e,he++),J[U*2+1]=w,!(U>oe)&&(x.bl_count[w]++,O=0,U>=X&&(O=m[U-X]),q=J[U*2],x.opt_len+=q*(w+O),V&&(x.static_len+=q*(I[U*2+1]+O)));if(he!==0){do{for(w=_e-1;x.bl_count[w]===0;)w--;x.bl_count[w]--,x.bl_count[w+1]+=2,x.bl_count[_e]--,he-=2}while(he>0);for(w=_e;w!==0;w--)for(U=x.bl_count[w];U!==0;)W=x.heap[--h],!(W>oe)&&(J[W*2+1]!==w&&(x.opt_len+=(w-J[W*2+1])*J[W*2],J[W*2+1]=w),U--)}}function Re(x,G,J){var oe=new Array(T+1),I=0,V,m;for(V=1;V<=T;V++)oe[V]=I=I+J[V-1]<<1;for(m=0;m<=G;m++){var X=x[m*2+1];X!==0&&(x[m*2]=se(oe[X]++,X))}}function me(){var x,G,J,oe,I,V=new Array(T+1);for(J=0,oe=0;oe<p-1;oe++)for(ce[oe]=J,x=0;x<1<<te[oe];x++)Oe[J++]=oe;for(Oe[J-1]=oe,I=0,oe=0;oe<16;oe++)for(Ie[oe]=I,x=0;x<1<<ve[oe];x++)Pe[I++]=oe;for(I>>=7;oe<A;oe++)for(Ie[oe]=I<<7,x=0;x<1<<ve[oe]-7;x++)Pe[256+I++]=oe;for(G=0;G<=T;G++)V[G]=0;for(x=0;x<=143;)le[x*2+1]=8,x++,V[8]++;for(;x<=255;)le[x*2+1]=9,x++,V[9]++;for(;x<=279;)le[x*2+1]=7,x++,V[7]++;for(;x<=287;)le[x*2+1]=8,x++,V[8]++;for(Re(le,b+1,V),x=0;x<A;x++)Se[x*2+1]=5,Se[x*2]=se(x,5);Qe=new Ce(le,te,v+1,b,T),et=new Ce(Se,ve,0,A,T),We=new Ce(new Array(0),ne,0,P,R)}function Ee(x){var G;for(G=0;G<b;G++)x.dyn_ltree[G*2]=0;for(G=0;G<A;G++)x.dyn_dtree[G*2]=0;for(G=0;G<P;G++)x.bl_tree[G*2]=0;x.dyn_ltree[z*2]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Ve(x){x.bi_valid>8?$e(x,x.bi_buf):x.bi_valid>0&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function qe(x,G,J,oe){Ve(x),oe&&($e(x,J),$e(x,~J)),a.arraySet(x.pending_buf,x.window,G,J,x.pending),x.pending+=J}function ze(x,G,J,oe){var I=G*2,V=J*2;return x[I]<x[V]||x[I]===x[V]&&oe[G]<=oe[J]}function ke(x,G,J){for(var oe=x.heap[J],I=J<<1;I<=x.heap_len&&(I<x.heap_len&&ze(G,x.heap[I+1],x.heap[I],x.depth)&&I++,!ze(G,oe,x.heap[I],x.depth));)x.heap[J]=x.heap[I],J=I,I<<=1;x.heap[J]=oe}function ye(x,G,J){var oe,I,V=0,m,X;if(x.last_lit!==0)do oe=x.pending_buf[x.d_buf+V*2]<<8|x.pending_buf[x.d_buf+V*2+1],I=x.pending_buf[x.l_buf+V],V++,oe===0?ie(x,I,G):(m=Oe[I],ie(x,m+v+1,G),X=te[m],X!==0&&(I-=ce[m],$(x,I,X)),oe--,m=it(oe),ie(x,m,J),X=ve[m],X!==0&&(oe-=Ie[m],$(x,oe,X)));while(V<x.last_lit);ie(x,z,G)}function je(x,G){var J=G.dyn_tree,oe=G.stat_desc.static_tree,I=G.stat_desc.has_stree,V=G.stat_desc.elems,m,X,_e=-1,h;for(x.heap_len=0,x.heap_max=y,m=0;m<V;m++)J[m*2]!==0?(x.heap[++x.heap_len]=_e=m,x.depth[m]=0):J[m*2+1]=0;for(;x.heap_len<2;)h=x.heap[++x.heap_len]=_e<2?++_e:0,J[h*2]=1,x.depth[h]=0,x.opt_len--,I&&(x.static_len-=oe[h*2+1]);for(G.max_code=_e,m=x.heap_len>>1;m>=1;m--)ke(x,J,m);h=V;do m=x.heap[1],x.heap[1]=x.heap[x.heap_len--],ke(x,J,1),X=x.heap[1],x.heap[--x.heap_max]=m,x.heap[--x.heap_max]=X,J[h*2]=J[m*2]+J[X*2],x.depth[h]=(x.depth[m]>=x.depth[X]?x.depth[m]:x.depth[X])+1,J[m*2+1]=J[X*2+1]=h,x.heap[1]=h++,ke(x,J,1);while(x.heap_len>=2);x.heap[--x.heap_max]=x.heap[1],be(x,G),Re(J,_e,x.bl_count)}function Xe(x,G,J){var oe,I=-1,V,m=G[0*2+1],X=0,_e=7,h=4;for(m===0&&(_e=138,h=3),G[(J+1)*2+1]=65535,oe=0;oe<=J;oe++)V=m,m=G[(oe+1)*2+1],!(++X<_e&&V===m)&&(X<h?x.bl_tree[V*2]+=X:V!==0?(V!==I&&x.bl_tree[V*2]++,x.bl_tree[F*2]++):X<=10?x.bl_tree[Z*2]++:x.bl_tree[H*2]++,X=0,I=V,m===0?(_e=138,h=3):V===m?(_e=6,h=3):(_e=7,h=4))}function lt(x,G,J){var oe,I=-1,V,m=G[0*2+1],X=0,_e=7,h=4;for(m===0&&(_e=138,h=3),oe=0;oe<=J;oe++)if(V=m,m=G[(oe+1)*2+1],!(++X<_e&&V===m)){if(X<h)do ie(x,V,x.bl_tree);while(--X!=0);else V!==0?(V!==I&&(ie(x,V,x.bl_tree),X--),ie(x,F,x.bl_tree),$(x,X-3,2)):X<=10?(ie(x,Z,x.bl_tree),$(x,X-3,3)):(ie(x,H,x.bl_tree),$(x,X-11,7));X=0,I=V,m===0?(_e=138,h=3):V===m?(_e=6,h=3):(_e=7,h=4)}}function Ye(x){var G;for(Xe(x,x.dyn_ltree,x.l_desc.max_code),Xe(x,x.dyn_dtree,x.d_desc.max_code),je(x,x.bl_desc),G=P-1;G>=3&&x.bl_tree[pe[G]*2+1]===0;G--);return x.opt_len+=3*(G+1)+5+5+4,G}function _t(x,G,J,oe){var I;for($(x,G-257,5),$(x,J-1,5),$(x,oe-4,4),I=0;I<oe;I++)$(x,x.bl_tree[pe[I]*2+1],3);lt(x,x.dyn_ltree,G-1),lt(x,x.dyn_dtree,J-1)}function Xt(x){var G=4093624447,J;for(J=0;J<=31;J++,G>>>=1)if(G&1&&x.dyn_ltree[J*2]!==0)return u;if(x.dyn_ltree[9*2]!==0||x.dyn_ltree[10*2]!==0||x.dyn_ltree[13*2]!==0)return l;for(J=32;J<v;J++)if(x.dyn_ltree[J*2]!==0)return l;return u}var St=!1;function cr(x){St||(me(),St=!0),x.l_desc=new De(x.dyn_ltree,Qe),x.d_desc=new De(x.dyn_dtree,et),x.bl_desc=new De(x.bl_tree,We),x.bi_buf=0,x.bi_valid=0,Ee(x)}function $t(x,G,J,oe){$(x,(d<<1)+(oe?1:0),3),qe(x,G,J,!0)}function ht(x){$(x,g<<1,3),ie(x,z,le),de(x)}function Dt(x,G,J,oe){var I,V,m=0;x.level>0?(x.strm.data_type===c&&(x.strm.data_type=Xt(x)),je(x,x.l_desc),je(x,x.d_desc),m=Ye(x),I=x.opt_len+3+7>>>3,V=x.static_len+3+7>>>3,V<=I&&(I=V)):I=V=J+5,J+4<=I&&G!==-1?$t(x,G,J,oe):x.strategy===o||V===I?($(x,(g<<1)+(oe?1:0),3),ye(x,le,Se)):($(x,(_<<1)+(oe?1:0),3),_t(x,x.l_desc.max_code+1,x.d_desc.max_code+1,m+1),ye(x,x.dyn_ltree,x.dyn_dtree)),Ee(x),oe&&Ve(x)}function br(x,G,J){return x.pending_buf[x.d_buf+x.last_lit*2]=G>>>8&255,x.pending_buf[x.d_buf+x.last_lit*2+1]=G&255,x.pending_buf[x.l_buf+x.last_lit]=J&255,x.last_lit++,G===0?x.dyn_ltree[J*2]++:(x.matches++,G--,x.dyn_ltree[(Oe[J]+v+1)*2]++,x.dyn_dtree[it(G)*2]++),x.last_lit===x.lit_bufsize-1}s._tr_init=cr,s._tr_stored_block=$t,s._tr_flush_block=Dt,s._tr_tally=br,s._tr_align=ht},{"../utils/common":41}],53:[function(r,n,s){"use strict";function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n.exports=a},{}],54:[function(r,n,s){(function(a){(function(o,u){"use strict";if(o.setImmediate)return;var l=1,c={},f=!1,d=o.document,g;function _(R){typeof R!="function"&&(R=new Function(""+R));for(var z=new Array(arguments.length-1),F=0;F<z.length;F++)z[F]=arguments[F+1];var Z={callback:R,args:z};return c[l]=Z,g(l),l++}function C(R){delete c[R]}function D(R){var z=R.callback,F=R.args;switch(F.length){case 0:z();break;case 1:z(F[0]);break;case 2:z(F[0],F[1]);break;case 3:z(F[0],F[1],F[2]);break;default:z.apply(u,F);break}}function p(R){if(f)setTimeout(p,0,R);else{var z=c[R];if(z){f=!0;try{D(z)}finally{C(R),f=!1}}}}function v(){g=function(R){process.nextTick(function(){p(R)})}}function b(){if(o.postMessage&&!o.importScripts){var R=!0,z=o.onmessage;return o.onmessage=function(){R=!1},o.postMessage("","*"),o.onmessage=z,R}}function A(){var R="setImmediate$"+Math.random()+"$",z=function(F){F.source===o&&typeof F.data=="string"&&F.data.indexOf(R)===0&&p(+F.data.slice(R.length))};o.addEventListener?o.addEventListener("message",z,!1):o.attachEvent("onmessage",z),g=function(F){o.postMessage(R+F,"*")}}function P(){var R=new MessageChannel;R.port1.onmessage=function(z){var F=z.data;p(F)},g=function(z){R.port2.postMessage(z)}}function y(){var R=d.documentElement;g=function(z){var F=d.createElement("script");F.onreadystatechange=function(){p(z),F.onreadystatechange=null,R.removeChild(F),F=null},R.appendChild(F)}}function T(){g=function(R){setTimeout(p,0,R)}}var k=Object.getPrototypeOf&&Object.getPrototypeOf(o);k=k&&k.setTimeout?k:o,{}.toString.call(o.process)==="[object process]"?v():b()?A():o.MessageChannel?P():d&&"onreadystatechange"in d.createElement("script")?y():T(),k.setImmediate=_,k.clearImmediate=C})(typeof self=="undefined"?typeof a=="undefined"?this:a:self)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})});var rd=K(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.default=void 0;var pi=He(),n_=As($i()),ed=As(rs()),s_=As(Sr()),a_=As(Qc());function As(i){return i&&i.__esModule?i:{default:i}}var td=class{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new a_.default}catch(e){throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return(0,n_.default)(e,"binary").then(function(r){return this.zip.loadAsync(r,{base64:t})}.bind(this))}request(e,t){var r=new pi.defer,n,s=new s_.default(e);return t||(t=s.extension),t=="blob"?n=this.getBlob(e):n=this.getText(e),n?n.then(function(a){let o=this.handleResponse(a,t);r.resolve(o)}.bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):(0,pi.isXml)(t)?r=(0,pi.parse)(e,"text/xml"):t=="xhtml"?r=(0,pi.parse)(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=(0,pi.parse)(e,"text/html"):r=e,r}getBlob(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return t=t||ed.default.lookup(n.name),n.async("uint8array").then(function(s){return new Blob([s],{type:t})})}getText(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return n.async("string").then(function(s){return s})}getBase64(e,t){var r=window.decodeURIComponent(e.substr(1)),n=this.zip.file(r);if(n)return t=t||ed.default.lookup(n.name),n.async("base64").then(function(s){return"data:"+t+";base64,"+s})}createUrl(e,t){var r=new pi.defer,n=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then(function(u){this.urlCache[e]=u,r.resolve(u)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(u){s=n.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}.bind(this))),a||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}},o_=td;Ts.default=o_});var nd=K((id,Do)=>{(function(i){if(typeof id=="object"&&typeof Do!="undefined")Do.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var e;typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:typeof self!="undefined"?e=self:e=this,e.localforage=i()}})(function(){var i,e,t;return function r(n,s,a){function o(c,f){if(!s[c]){if(!n[c]){var d=typeof require=="function"&&require;if(!f&&d)return d(c,!0);if(u)return u(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var _=s[c]={exports:{}};n[c][0].call(_.exports,function(C){var D=n[c][1][C];return o(D||C)},_,_.exports,r,n,s,a)}return s[c].exports}for(var u=typeof require=="function"&&require,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(r,n,s){(function(a){"use strict";var o=a.MutationObserver||a.WebKitMutationObserver,u;if(o){var l=0,c=new o(C),f=a.document.createTextNode("");c.observe(f,{characterData:!0}),u=function(){f.data=l=++l%2}}else if(!a.setImmediate&&typeof a.MessageChannel!="undefined"){var d=new a.MessageChannel;d.port1.onmessage=C,u=function(){d.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?u=function(){var p=a.document.createElement("script");p.onreadystatechange=function(){C(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},a.document.documentElement.appendChild(p)}:u=function(){setTimeout(C,0)};var g,_=[];function C(){g=!0;for(var p,v,b=_.length;b;){for(v=_,_=[],p=-1;++p<b;)v[p]();b=_.length}g=!1}n.exports=D;function D(p){_.push(p)===1&&!g&&u()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(r,n,s){"use strict";var a=r(1);function o(){}var u={},l=["REJECTED"],c=["FULFILLED"],f=["PENDING"];n.exports=d;function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,y!==o&&D(this,y)}d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,T){if(typeof y!="function"&&this.state===c||typeof T!="function"&&this.state===l)return this;var k=new this.constructor(o);if(this.state!==f){var R=this.state===c?y:T;_(k,R,this.outcome)}else this.queue.push(new g(k,y,T));return k};function g(y,T,k){this.promise=y,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}g.prototype.callFulfilled=function(y){u.resolve(this.promise,y)},g.prototype.otherCallFulfilled=function(y){_(this.promise,this.onFulfilled,y)},g.prototype.callRejected=function(y){u.reject(this.promise,y)},g.prototype.otherCallRejected=function(y){_(this.promise,this.onRejected,y)};function _(y,T,k){a(function(){var R;try{R=T(k)}catch(z){return u.reject(y,z)}R===y?u.reject(y,new TypeError("Cannot resolve promise with itself")):u.resolve(y,R)})}u.resolve=function(y,T){var k=p(C,T);if(k.status==="error")return u.reject(y,k.value);var R=k.value;if(R)D(y,R);else{y.state=c,y.outcome=T;for(var z=-1,F=y.queue.length;++z<F;)y.queue[z].callFulfilled(T)}return y},u.reject=function(y,T){y.state=l,y.outcome=T;for(var k=-1,R=y.queue.length;++k<R;)y.queue[k].callRejected(T);return y};function C(y){var T=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof T=="function")return function(){T.apply(y,arguments)}}function D(y,T){var k=!1;function R(H){k||(k=!0,u.reject(y,H))}function z(H){k||(k=!0,u.resolve(y,H))}function F(){T(z,R)}var Z=p(F);Z.status==="error"&&R(Z.value)}function p(y,T){var k={};try{k.value=y(T),k.status="success"}catch(R){k.status="error",k.value=R}return k}d.resolve=v;function v(y){return y instanceof this?y:u.resolve(new this(o),y)}d.reject=b;function b(y){var T=new this(o);return u.reject(T,y)}d.all=A;function A(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,R=!1;if(!k)return this.resolve([]);for(var z=new Array(k),F=0,Z=-1,H=new this(o);++Z<k;)te(y[Z],Z);return H;function te(ve,ne){T.resolve(ve).then(pe,function(ge){R||(R=!0,u.reject(H,ge))});function pe(ge){z[ne]=ge,++F===k&&!R&&(R=!0,u.resolve(H,z))}}}d.race=P;function P(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=y.length,R=!1;if(!k)return this.resolve([]);for(var z=-1,F=new this(o);++z<k;)Z(y[z]);return F;function Z(H){T.resolve(H).then(function(te){R||(R=!0,u.resolve(F,te))},function(te){R||(R=!0,u.reject(F,te))})}}},{"1":1}],3:[function(r,n,s){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=r(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(r,n,s){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E};function o(E,N){if(!(E instanceof N))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(E){return}}var l=u();function c(){try{if(!l||!l.open)return!1;var E=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),N=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!E||N)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(S){return!1}}function f(E,N){E=E||[],N=N||{};try{return new Blob(E,N)}catch(B){if(B.name!=="TypeError")throw B;for(var S=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,L=new S,M=0;M<E.length;M+=1)L.append(E[M]);return L.getBlob(N.type)}}typeof Promise=="undefined"&&r(3);var d=Promise;function g(E,N){N&&E.then(function(S){N(null,S)},function(S){N(S)})}function _(E,N,S){typeof N=="function"&&E.then(N),typeof S=="function"&&E.catch(S)}function C(E){return typeof E!="string"&&(console.warn(E+" used as a key, but it is not a string."),E=String(E)),E}function D(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",v=void 0,b={},A=Object.prototype.toString,P="readonly",y="readwrite";function T(E){for(var N=E.length,S=new ArrayBuffer(N),L=new Uint8Array(S),M=0;M<N;M++)L[M]=E.charCodeAt(M);return S}function k(E){return new d(function(N){var S=E.transaction(p,y),L=f([""]);S.objectStore(p).put(L,"key"),S.onabort=function(M){M.preventDefault(),M.stopPropagation(),N(!1)},S.oncomplete=function(){var M=navigator.userAgent.match(/Chrome\/(\d+)/),B=navigator.userAgent.match(/Edge\//);N(B||!M||parseInt(M[1],10)>=43)}}).catch(function(){return!1})}function R(E){return typeof v=="boolean"?d.resolve(v):k(E).then(function(N){return v=N,v})}function z(E){var N=b[E.name],S={};S.promise=new d(function(L,M){S.resolve=L,S.reject=M}),N.deferredOperations.push(S),N.dbReady?N.dbReady=N.dbReady.then(function(){return S.promise}):N.dbReady=S.promise}function F(E){var N=b[E.name],S=N.deferredOperations.pop();if(S)return S.resolve(),S.promise}function Z(E,N){var S=b[E.name],L=S.deferredOperations.pop();if(L)return L.reject(N),L.promise}function H(E,N){return new d(function(S,L){if(b[E.name]=b[E.name]||ce(),E.db)if(N)z(E),E.db.close();else return S(E.db);var M=[E.name];N&&M.push(E.version);var B=l.open.apply(l,M);N&&(B.onupgradeneeded=function(j){var Y=B.result;try{Y.createObjectStore(E.storeName),j.oldVersion<=1&&Y.createObjectStore(p)}catch(Q){if(Q.name==="ConstraintError")console.warn('The database "'+E.name+'" has been upgraded from version '+j.oldVersion+" to version "+j.newVersion+', but the storage "'+E.storeName+'" already exists.');else throw Q}}),B.onerror=function(j){j.preventDefault(),L(B.error)},B.onsuccess=function(){var j=B.result;j.onversionchange=function(Y){Y.target.close()},S(j),F(E)}})}function te(E){return H(E,!1)}function ve(E){return H(E,!0)}function ne(E,N){if(!E.db)return!0;var S=!E.db.objectStoreNames.contains(E.storeName),L=E.version<E.db.version,M=E.version>E.db.version;if(L&&(E.version!==N&&console.warn('The database "'+E.name+`" can't be downgraded from version `+E.db.version+" to version "+E.version+"."),E.version=E.db.version),M||S){if(S){var B=E.db.version+1;B>E.version&&(E.version=B)}return!0}return!1}function pe(E){return new d(function(N,S){var L=new FileReader;L.onerror=S,L.onloadend=function(M){var B=btoa(M.target.result||"");N({__local_forage_encoded_blob:!0,data:B,type:E.type})},L.readAsBinaryString(E)})}function ge(E){var N=T(atob(E.data));return f([N],{type:E.type})}function le(E){return E&&E.__local_forage_encoded_blob}function Se(E){var N=this,S=N._initReady().then(function(){var L=b[N._dbInfo.name];if(L&&L.dbReady)return L.dbReady});return _(S,E,E),S}function Pe(E){z(E);for(var N=b[E.name],S=N.forages,L=0;L<S.length;L++){var M=S[L];M._dbInfo.db&&(M._dbInfo.db.close(),M._dbInfo.db=null)}return E.db=null,te(E).then(function(B){return E.db=B,ne(E)?ve(E):B}).then(function(B){E.db=N.db=B;for(var j=0;j<S.length;j++)S[j]._dbInfo.db=B}).catch(function(B){throw Z(E,B),B})}function Oe(E,N,S,L){L===void 0&&(L=1);try{var M=E.db.transaction(E.storeName,N);S(null,M)}catch(B){if(L>0&&(!E.db||B.name==="InvalidStateError"||B.name==="NotFoundError"))return d.resolve().then(function(){if(!E.db||B.name==="NotFoundError"&&!E.db.objectStoreNames.contains(E.storeName)&&E.version<=E.db.version)return E.db&&(E.version=E.db.version+1),ve(E)}).then(function(){return Pe(E).then(function(){Oe(E,N,S,L-1)})}).catch(S);S(B)}}function ce(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ie(E){var N=this,S={db:null};if(E)for(var L in E)S[L]=E[L];var M=b[S.name];M||(M=ce(),b[S.name]=M),M.forages.push(N),N._initReady||(N._initReady=N.ready,N.ready=Se);var B=[];function j(){return d.resolve()}for(var Y=0;Y<M.forages.length;Y++){var Q=M.forages[Y];Q!==N&&B.push(Q._initReady().catch(j))}var ee=M.forages.slice(0);return d.all(B).then(function(){return S.db=M.db,te(S)}).then(function(re){return S.db=re,ne(S,N._defaultConfig.version)?ve(S):re}).then(function(re){S.db=M.db=re,N._dbInfo=S;for(var fe=0;fe<ee.length;fe++){var Ae=ee[fe];Ae!==N&&(Ae._dbInfo.db=S.db,Ae._dbInfo.version=S.version)}})}function Ce(E,N){var S=this;E=C(E);var L=new d(function(M,B){S.ready().then(function(){Oe(S._dbInfo,P,function(j,Y){if(j)return B(j);try{var Q=Y.objectStore(S._dbInfo.storeName),ee=Q.get(E);ee.onsuccess=function(){var re=ee.result;re===void 0&&(re=null),le(re)&&(re=ge(re)),M(re)},ee.onerror=function(){B(ee.error)}}catch(re){B(re)}})}).catch(B)});return g(L,N),L}function Qe(E,N){var S=this,L=new d(function(M,B){S.ready().then(function(){Oe(S._dbInfo,P,function(j,Y){if(j)return B(j);try{var Q=Y.objectStore(S._dbInfo.storeName),ee=Q.openCursor(),re=1;ee.onsuccess=function(){var fe=ee.result;if(fe){var Ae=fe.value;le(Ae)&&(Ae=ge(Ae));var Be=E(Ae,fe.key,re++);Be!==void 0?M(Be):fe.continue()}else M()},ee.onerror=function(){B(ee.error)}}catch(fe){B(fe)}})}).catch(B)});return g(L,N),L}function et(E,N,S){var L=this;E=C(E);var M=new d(function(B,j){var Y;L.ready().then(function(){return Y=L._dbInfo,A.call(N)==="[object Blob]"?R(Y.db).then(function(Q){return Q?N:pe(N)}):N}).then(function(Q){Oe(L._dbInfo,y,function(ee,re){if(ee)return j(ee);try{var fe=re.objectStore(L._dbInfo.storeName);Q===null&&(Q=void 0);var Ae=fe.put(Q,E);re.oncomplete=function(){Q===void 0&&(Q=null),B(Q)},re.onabort=re.onerror=function(){var Be=Ae.error?Ae.error:Ae.transaction.error;j(Be)}}catch(Be){j(Be)}})}).catch(j)});return g(M,S),M}function We(E,N){var S=this;E=C(E);var L=new d(function(M,B){S.ready().then(function(){Oe(S._dbInfo,y,function(j,Y){if(j)return B(j);try{var Q=Y.objectStore(S._dbInfo.storeName),ee=Q.delete(E);Y.oncomplete=function(){M()},Y.onerror=function(){B(ee.error)},Y.onabort=function(){var re=ee.error?ee.error:ee.transaction.error;B(re)}}catch(re){B(re)}})}).catch(B)});return g(L,N),L}function De(E){var N=this,S=new d(function(L,M){N.ready().then(function(){Oe(N._dbInfo,y,function(B,j){if(B)return M(B);try{var Y=j.objectStore(N._dbInfo.storeName),Q=Y.clear();j.oncomplete=function(){L()},j.onabort=j.onerror=function(){var ee=Q.error?Q.error:Q.transaction.error;M(ee)}}catch(ee){M(ee)}})}).catch(M)});return g(S,E),S}function it(E){var N=this,S=new d(function(L,M){N.ready().then(function(){Oe(N._dbInfo,P,function(B,j){if(B)return M(B);try{var Y=j.objectStore(N._dbInfo.storeName),Q=Y.count();Q.onsuccess=function(){L(Q.result)},Q.onerror=function(){M(Q.error)}}catch(ee){M(ee)}})}).catch(M)});return g(S,E),S}function $e(E,N){var S=this,L=new d(function(M,B){if(E<0){M(null);return}S.ready().then(function(){Oe(S._dbInfo,P,function(j,Y){if(j)return B(j);try{var Q=Y.objectStore(S._dbInfo.storeName),ee=!1,re=Q.openKeyCursor();re.onsuccess=function(){var fe=re.result;if(!fe){M(null);return}E===0||ee?M(fe.key):(ee=!0,fe.advance(E))},re.onerror=function(){B(re.error)}}catch(fe){B(fe)}})}).catch(B)});return g(L,N),L}function $(E){var N=this,S=new d(function(L,M){N.ready().then(function(){Oe(N._dbInfo,P,function(B,j){if(B)return M(B);try{var Y=j.objectStore(N._dbInfo.storeName),Q=Y.openKeyCursor(),ee=[];Q.onsuccess=function(){var re=Q.result;if(!re){L(ee);return}ee.push(re.key),re.continue()},Q.onerror=function(){M(Q.error)}}catch(re){M(re)}})}).catch(M)});return g(S,E),S}function ie(E,N){N=D.apply(this,arguments);var S=this.config();E=typeof E!="function"&&E||{},E.name||(E.name=E.name||S.name,E.storeName=E.storeName||S.storeName);var L=this,M;if(!E.name)M=d.reject("Invalid arguments");else{var B=E.name===S.name&&L._dbInfo.db,j=B?d.resolve(L._dbInfo.db):te(E).then(function(Y){var Q=b[E.name],ee=Q.forages;Q.db=Y;for(var re=0;re<ee.length;re++)ee[re]._dbInfo.db=Y;return Y});E.storeName?M=j.then(function(Y){if(!!Y.objectStoreNames.contains(E.storeName)){var Q=Y.version+1;z(E);var ee=b[E.name],re=ee.forages;Y.close();for(var fe=0;fe<re.length;fe++){var Ae=re[fe];Ae._dbInfo.db=null,Ae._dbInfo.version=Q}var Be=new d(function(Fe,ut){var st=l.open(E.name,Q);st.onerror=function(Mt){var wi=st.result;wi.close(),ut(Mt)},st.onupgradeneeded=function(){var Mt=st.result;Mt.deleteObjectStore(E.storeName)},st.onsuccess=function(){var Mt=st.result;Mt.close(),Fe(Mt)}});return Be.then(function(Fe){ee.db=Fe;for(var ut=0;ut<re.length;ut++){var st=re[ut];st._dbInfo.db=Fe,F(st._dbInfo)}}).catch(function(Fe){throw(Z(E,Fe)||d.resolve()).catch(function(){}),Fe})}}):M=j.then(function(Y){z(E);var Q=b[E.name],ee=Q.forages;Y.close();for(var re=0;re<ee.length;re++){var fe=ee[re];fe._dbInfo.db=null}var Ae=new d(function(Be,Fe){var ut=l.deleteDatabase(E.name);ut.onerror=function(){var st=ut.result;st&&st.close(),Fe(ut.error)},ut.onblocked=function(){console.warn('dropInstance blocked for database "'+E.name+'" until all open connections are closed')},ut.onsuccess=function(){var st=ut.result;st&&st.close(),Be(st)}});return Ae.then(function(Be){Q.db=Be;for(var Fe=0;Fe<ee.length;Fe++){var ut=ee[Fe];F(ut._dbInfo)}}).catch(function(Be){throw(Z(E,Be)||d.resolve()).catch(function(){}),Be})})}return g(M,N),M}var se={_driver:"asyncStorage",_initStorage:Ie,_support:c(),iterate:Qe,getItem:Ce,setItem:et,removeItem:We,clear:De,length:it,key:$e,keys:$,dropInstance:ie};function de(){return typeof openDatabase=="function"}var be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="~~local_forage_type~",me=/^~~local_forage_type~([^~]+)~/,Ee="__lfsc__:",Ve=Ee.length,qe="arbf",ze="blob",ke="si08",ye="ui08",je="uic8",Xe="si16",lt="si32",Ye="ur16",_t="ui32",Xt="fl32",St="fl64",cr=Ve+qe.length,$t=Object.prototype.toString;function ht(E){var N=E.length*.75,S=E.length,L,M=0,B,j,Y,Q;E[E.length-1]==="="&&(N--,E[E.length-2]==="="&&N--);var ee=new ArrayBuffer(N),re=new Uint8Array(ee);for(L=0;L<S;L+=4)B=be.indexOf(E[L]),j=be.indexOf(E[L+1]),Y=be.indexOf(E[L+2]),Q=be.indexOf(E[L+3]),re[M++]=B<<2|j>>4,re[M++]=(j&15)<<4|Y>>2,re[M++]=(Y&3)<<6|Q&63;return ee}function Dt(E){var N=new Uint8Array(E),S="",L;for(L=0;L<N.length;L+=3)S+=be[N[L]>>2],S+=be[(N[L]&3)<<4|N[L+1]>>4],S+=be[(N[L+1]&15)<<2|N[L+2]>>6],S+=be[N[L+2]&63];return N.length%3==2?S=S.substring(0,S.length-1)+"=":N.length%3==1&&(S=S.substring(0,S.length-2)+"=="),S}function br(E,N){var S="";if(E&&(S=$t.call(E)),E&&(S==="[object ArrayBuffer]"||E.buffer&&$t.call(E.buffer)==="[object ArrayBuffer]")){var L,M=Ee;E instanceof ArrayBuffer?(L=E,M+=qe):(L=E.buffer,S==="[object Int8Array]"?M+=ke:S==="[object Uint8Array]"?M+=ye:S==="[object Uint8ClampedArray]"?M+=je:S==="[object Int16Array]"?M+=Xe:S==="[object Uint16Array]"?M+=Ye:S==="[object Int32Array]"?M+=lt:S==="[object Uint32Array]"?M+=_t:S==="[object Float32Array]"?M+=Xt:S==="[object Float64Array]"?M+=St:N(new Error("Failed to get type for BinaryArray"))),N(M+Dt(L))}else if(S==="[object Blob]"){var B=new FileReader;B.onload=function(){var j=Re+E.type+"~"+Dt(this.result);N(Ee+ze+j)},B.readAsArrayBuffer(E)}else try{N(JSON.stringify(E))}catch(j){console.error("Couldn't convert value into a JSON string: ",E),N(null,j)}}function x(E){if(E.substring(0,Ve)!==Ee)return JSON.parse(E);var N=E.substring(cr),S=E.substring(Ve,cr),L;if(S===ze&&me.test(N)){var M=N.match(me);L=M[1],N=N.substring(M[0].length)}var B=ht(N);switch(S){case qe:return B;case ze:return f([B],{type:L});case ke:return new Int8Array(B);case ye:return new Uint8Array(B);case je:return new Uint8ClampedArray(B);case Xe:return new Int16Array(B);case Ye:return new Uint16Array(B);case lt:return new Int32Array(B);case _t:return new Uint32Array(B);case Xt:return new Float32Array(B);case St:return new Float64Array(B);default:throw new Error("Unkown type: "+S)}}var G={serialize:br,deserialize:x,stringToBuffer:ht,bufferToString:Dt};function J(E,N,S,L){E.executeSql("CREATE TABLE IF NOT EXISTS "+N.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],S,L)}function oe(E){var N=this,S={db:null};if(E)for(var L in E)S[L]=typeof E[L]!="string"?E[L].toString():E[L];var M=new d(function(B,j){try{S.db=openDatabase(S.name,String(S.version),S.description,S.size)}catch(Y){return j(Y)}S.db.transaction(function(Y){J(Y,S,function(){N._dbInfo=S,B()},function(Q,ee){j(ee)})},j)});return S.serializer=G,M}function I(E,N,S,L,M,B){E.executeSql(S,L,M,function(j,Y){Y.code===Y.SYNTAX_ERR?j.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[N.storeName],function(Q,ee){ee.rows.length?B(Q,Y):J(Q,N,function(){Q.executeSql(S,L,M,B)},B)},B):B(j,Y)},B)}function V(E,N){var S=this;E=C(E);var L=new d(function(M,B){S.ready().then(function(){var j=S._dbInfo;j.db.transaction(function(Y){I(Y,j,"SELECT * FROM "+j.storeName+" WHERE key = ? LIMIT 1",[E],function(Q,ee){var re=ee.rows.length?ee.rows.item(0).value:null;re&&(re=j.serializer.deserialize(re)),M(re)},function(Q,ee){B(ee)})})}).catch(B)});return g(L,N),L}function m(E,N){var S=this,L=new d(function(M,B){S.ready().then(function(){var j=S._dbInfo;j.db.transaction(function(Y){I(Y,j,"SELECT * FROM "+j.storeName,[],function(Q,ee){for(var re=ee.rows,fe=re.length,Ae=0;Ae<fe;Ae++){var Be=re.item(Ae),Fe=Be.value;if(Fe&&(Fe=j.serializer.deserialize(Fe)),Fe=E(Fe,Be.key,Ae+1),Fe!==void 0){M(Fe);return}}M()},function(Q,ee){B(ee)})})}).catch(B)});return g(L,N),L}function X(E,N,S,L){var M=this;E=C(E);var B=new d(function(j,Y){M.ready().then(function(){N===void 0&&(N=null);var Q=N,ee=M._dbInfo;ee.serializer.serialize(N,function(re,fe){fe?Y(fe):ee.db.transaction(function(Ae){I(Ae,ee,"INSERT OR REPLACE INTO "+ee.storeName+" (key, value) VALUES (?, ?)",[E,re],function(){j(Q)},function(Be,Fe){Y(Fe)})},function(Ae){if(Ae.code===Ae.QUOTA_ERR){if(L>0){j(X.apply(M,[E,Q,S,L-1]));return}Y(Ae)}})})}).catch(Y)});return g(B,S),B}function _e(E,N,S){return X.apply(this,[E,N,S,1])}function h(E,N){var S=this;E=C(E);var L=new d(function(M,B){S.ready().then(function(){var j=S._dbInfo;j.db.transaction(function(Y){I(Y,j,"DELETE FROM "+j.storeName+" WHERE key = ?",[E],function(){M()},function(Q,ee){B(ee)})})}).catch(B)});return g(L,N),L}function U(E){var N=this,S=new d(function(L,M){N.ready().then(function(){var B=N._dbInfo;B.db.transaction(function(j){I(j,B,"DELETE FROM "+B.storeName,[],function(){L()},function(Y,Q){M(Q)})})}).catch(M)});return g(S,E),S}function W(E){var N=this,S=new d(function(L,M){N.ready().then(function(){var B=N._dbInfo;B.db.transaction(function(j){I(j,B,"SELECT COUNT(key) as c FROM "+B.storeName,[],function(Y,Q){var ee=Q.rows.item(0).c;L(ee)},function(Y,Q){M(Q)})})}).catch(M)});return g(S,E),S}function w(E,N){var S=this,L=new d(function(M,B){S.ready().then(function(){var j=S._dbInfo;j.db.transaction(function(Y){I(Y,j,"SELECT key FROM "+j.storeName+" WHERE id = ? LIMIT 1",[E+1],function(Q,ee){var re=ee.rows.length?ee.rows.item(0).key:null;M(re)},function(Q,ee){B(ee)})})}).catch(B)});return g(L,N),L}function O(E){var N=this,S=new d(function(L,M){N.ready().then(function(){var B=N._dbInfo;B.db.transaction(function(j){I(j,B,"SELECT key FROM "+B.storeName,[],function(Y,Q){for(var ee=[],re=0;re<Q.rows.length;re++)ee.push(Q.rows.item(re).key);L(ee)},function(Y,Q){M(Q)})})}).catch(M)});return g(S,E),S}function q(E){return new d(function(N,S){E.transaction(function(L){L.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(M,B){for(var j=[],Y=0;Y<B.rows.length;Y++)j.push(B.rows.item(Y).name);N({db:E,storeNames:j})},function(M,B){S(B)})},function(L){S(L)})})}function he(E,N){N=D.apply(this,arguments);var S=this.config();E=typeof E!="function"&&E||{},E.name||(E.name=E.name||S.name,E.storeName=E.storeName||S.storeName);var L=this,M;return E.name?M=new d(function(B){var j;E.name===S.name?j=L._dbInfo.db:j=openDatabase(E.name,"","",0),E.storeName?B({db:j,storeNames:[E.storeName]}):B(q(j))}).then(function(B){return new d(function(j,Y){B.db.transaction(function(Q){function ee(Be){return new d(function(Fe,ut){Q.executeSql("DROP TABLE IF EXISTS "+Be,[],function(){Fe()},function(st,Mt){ut(Mt)})})}for(var re=[],fe=0,Ae=B.storeNames.length;fe<Ae;fe++)re.push(ee(B.storeNames[fe]));d.all(re).then(function(){j()}).catch(function(Be){Y(Be)})},function(Q){Y(Q)})})}):M=d.reject("Invalid arguments"),g(M,N),M}var ae={_driver:"webSQLStorage",_initStorage:oe,_support:de(),iterate:m,getItem:V,setItem:_e,removeItem:h,clear:U,length:W,key:w,keys:O,dropInstance:he};function ue(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(E){return!1}}function Te(E,N){var S=E.name+"/";return E.storeName!==N.storeName&&(S+=E.storeName+"/"),S}function Yt(){var E="_localforage_support_test";try{return localStorage.setItem(E,!0),localStorage.removeItem(E),!1}catch(N){return!0}}function Ke(){return!Yt()||localStorage.length>0}function Ne(E){var N=this,S={};if(E)for(var L in E)S[L]=E[L];return S.keyPrefix=Te(E,N._defaultConfig),Ke()?(N._dbInfo=S,S.serializer=G,d.resolve()):d.reject()}function nt(E){var N=this,S=N.ready().then(function(){for(var L=N._dbInfo.keyPrefix,M=localStorage.length-1;M>=0;M--){var B=localStorage.key(M);B.indexOf(L)===0&&localStorage.removeItem(B)}});return g(S,E),S}function dt(E,N){var S=this;E=C(E);var L=S.ready().then(function(){var M=S._dbInfo,B=localStorage.getItem(M.keyPrefix+E);return B&&(B=M.serializer.deserialize(B)),B});return g(L,N),L}function yt(E,N){var S=this,L=S.ready().then(function(){for(var M=S._dbInfo,B=M.keyPrefix,j=B.length,Y=localStorage.length,Q=1,ee=0;ee<Y;ee++){var re=localStorage.key(ee);if(re.indexOf(B)===0){var fe=localStorage.getItem(re);if(fe&&(fe=M.serializer.deserialize(fe)),fe=E(fe,re.substring(j),Q++),fe!==void 0)return fe}}});return g(L,N),L}function Zr(E,N){var S=this,L=S.ready().then(function(){var M=S._dbInfo,B;try{B=localStorage.key(E)}catch(j){B=null}return B&&(B=B.substring(M.keyPrefix.length)),B});return g(L,N),L}function Gr(E){var N=this,S=N.ready().then(function(){for(var L=N._dbInfo,M=localStorage.length,B=[],j=0;j<M;j++){var Y=localStorage.key(j);Y.indexOf(L.keyPrefix)===0&&B.push(Y.substring(L.keyPrefix.length))}return B});return g(S,E),S}function tt(E){var N=this,S=N.keys().then(function(L){return L.length});return g(S,E),S}function Ct(E,N){var S=this;E=C(E);var L=S.ready().then(function(){var M=S._dbInfo;localStorage.removeItem(M.keyPrefix+E)});return g(L,N),L}function ft(E,N,S){var L=this;E=C(E);var M=L.ready().then(function(){N===void 0&&(N=null);var B=N;return new d(function(j,Y){var Q=L._dbInfo;Q.serializer.serialize(N,function(ee,re){if(re)Y(re);else try{localStorage.setItem(Q.keyPrefix+E,ee),j(B)}catch(fe){(fe.name==="QuotaExceededError"||fe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Y(fe),Y(fe)}})})});return g(M,S),M}function Kt(E,N){if(N=D.apply(this,arguments),E=typeof E!="function"&&E||{},!E.name){var S=this.config();E.name=E.name||S.name,E.storeName=E.storeName||S.storeName}var L=this,M;return E.name?M=new d(function(B){E.storeName?B(Te(E,L._defaultConfig)):B(E.name+"/")}).then(function(B){for(var j=localStorage.length-1;j>=0;j--){var Y=localStorage.key(j);Y.indexOf(B)===0&&localStorage.removeItem(Y)}}):M=d.reject("Invalid arguments"),g(M,N),M}var Ft={_driver:"localStorageWrapper",_initStorage:Ne,_support:ue(),iterate:yt,getItem:dt,setItem:ft,removeItem:Ct,clear:nt,length:tt,key:Zr,keys:Gr,dropInstance:Kt},un=function(N,S){return N===S||typeof N=="number"&&typeof S=="number"&&isNaN(N)&&isNaN(S)},ep=function(N,S){for(var L=N.length,M=0;M<L;){if(un(N[M],S))return!0;M++}return!1},Yo=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"},bi={},Ko={},Xr={INDEXEDDB:se,WEBSQL:ae,LOCALSTORAGE:Ft},tp=[Xr.INDEXEDDB._driver,Xr.WEBSQL._driver,Xr.LOCALSTORAGE._driver],ln=["dropInstance"],Hs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ln),rp={description:"",driver:tp.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ip(E,N){E[N]=function(){var S=arguments;return E.ready().then(function(){return E[N].apply(E,S)})}}function Zs(){for(var E=1;E<arguments.length;E++){var N=arguments[E];if(N)for(var S in N)N.hasOwnProperty(S)&&(Yo(N[S])?arguments[0][S]=N[S].slice():arguments[0][S]=N[S])}return arguments[0]}var np=function(){function E(N){o(this,E);for(var S in Xr)if(Xr.hasOwnProperty(S)){var L=Xr[S],M=L._driver;this[S]=M,bi[M]||this.defineDriver(L)}this._defaultConfig=Zs({},rp),this._config=Zs({},this._defaultConfig,N),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return E.prototype.config=function(S){if((typeof S=="undefined"?"undefined":a(S))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var L in S){if(L==="storeName"&&(S[L]=S[L].replace(/\W/g,"_")),L==="version"&&typeof S[L]!="number")return new Error("Database version must be a number.");this._config[L]=S[L]}return"driver"in S&&S.driver?this.setDriver(this._config.driver):!0}else return typeof S=="string"?this._config[S]:this._config},E.prototype.defineDriver=function(S,L,M){var B=new d(function(j,Y){try{var Q=S._driver,ee=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!S._driver){Y(ee);return}for(var re=Hs.concat("_initStorage"),fe=0,Ae=re.length;fe<Ae;fe++){var Be=re[fe],Fe=!ep(ln,Be);if((Fe||S[Be])&&typeof S[Be]!="function"){Y(ee);return}}var ut=function(){for(var wi=function(op){return function(){var up=new Error("Method "+op+" is not implemented by the current driver"),Jo=d.reject(up);return g(Jo,arguments[arguments.length-1]),Jo}},Gs=0,ap=ln.length;Gs<ap;Gs++){var Xs=ln[Gs];S[Xs]||(S[Xs]=wi(Xs))}};ut();var st=function(wi){bi[Q]&&console.info("Redefining LocalForage driver: "+Q),bi[Q]=S,Ko[Q]=wi,j()};"_support"in S?S._support&&typeof S._support=="function"?S._support().then(st,Y):st(!!S._support):st(!0)}catch(Mt){Y(Mt)}});return _(B,L,M),B},E.prototype.driver=function(){return this._driver||null},E.prototype.getDriver=function(S,L,M){var B=bi[S]?d.resolve(bi[S]):d.reject(new Error("Driver not found."));return _(B,L,M),B},E.prototype.getSerializer=function(S){var L=d.resolve(G);return _(L,S),L},E.prototype.ready=function(S){var L=this,M=L._driverSet.then(function(){return L._ready===null&&(L._ready=L._initDriver()),L._ready});return _(M,S,S),M},E.prototype.setDriver=function(S,L,M){var B=this;Yo(S)||(S=[S]);var j=this._getSupportedDrivers(S);function Y(){B._config.driver=B.driver()}function Q(fe){return B._extend(fe),Y(),B._ready=B._initStorage(B._config),B._ready}function ee(fe){return function(){var Ae=0;function Be(){for(;Ae<fe.length;){var Fe=fe[Ae];return Ae++,B._dbInfo=null,B._ready=null,B.getDriver(Fe).then(Q).catch(Be)}Y();var ut=new Error("No available storage method found.");return B._driverSet=d.reject(ut),B._driverSet}return Be()}}var re=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=re.then(function(){var fe=j[0];return B._dbInfo=null,B._ready=null,B.getDriver(fe).then(function(Ae){B._driver=Ae._driver,Y(),B._wrapLibraryMethodsWithReady(),B._initDriver=ee(j)})}).catch(function(){Y();var fe=new Error("No available storage method found.");return B._driverSet=d.reject(fe),B._driverSet}),_(this._driverSet,L,M),this._driverSet},E.prototype.supports=function(S){return!!Ko[S]},E.prototype._extend=function(S){Zs(this,S)},E.prototype._getSupportedDrivers=function(S){for(var L=[],M=0,B=S.length;M<B;M++){var j=S[M];this.supports(j)&&L.push(j)}return L},E.prototype._wrapLibraryMethodsWithReady=function(){for(var S=0,L=Hs.length;S<L;S++)ip(this,Hs[S])},E.prototype.createInstance=function(S){return new E(S)},E}(),sp=new np;n.exports=sp},{"3":3}]},{},[4])(4)})});var ad=K(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.default=void 0;var _r=He(),u_=nn($i()),Co=nn(rs()),l_=nn(Sr()),h_=nn(Qt()),sd=nn(nd());function nn(i){return i&&i.__esModule?i:{default:i}}var Ao=class{constructor(e,t,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||u_.default,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof sd.default=="undefined"&&(e=sd.default),this.storage=e.createInstance({name:this.name})}catch(e){throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let r=e.resources.map(n=>{let{href:s}=n,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(u=>!u||t?this.requester(a,"binary").then(l=>this.storage.setItem(o,l)):u)});return Promise.all(r)}put(e,t,r){let n=window.encodeURIComponent(e);return this.storage.getItem(n).then(s=>s||this.requester(e,"binary",t,r).then(a=>this.storage.setItem(n,a)))}request(e,t,r,n){return this.online?this.requester(e,t,r,n).then(s=>(this.put(e),s)):this.retrieve(e,t)}retrieve(e,t){var r=new _r.defer,n,s=new l_.default(e);return t||(t=s.extension),t=="blob"?n=this.getBlob(e):n=this.getText(e),n.then(a=>{var o=new _r.defer,u;return a?(u=this.handleResponse(a,t),o.resolve(u)):o.reject({message:"File not found in storage: "+e,stack:new Error().stack}),o.promise})}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):(0,_r.isXml)(t)?r=(0,_r.parse)(e,"text/xml"):t=="xhtml"?r=(0,_r.parse)(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=(0,_r.parse)(e,"text/html"):r=e,r}getBlob(e,t){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(n){if(!!n)return t=t||Co.default.lookup(e),new Blob([n],{type:t})})}getText(e,t){let r=window.encodeURIComponent(e);return t=t||Co.default.lookup(e),this.storage.getItem(r).then(function(n){var s=new _r.defer,a=new FileReader,o;if(!!n)return o=new Blob([n],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,t),s.promise})}getBase64(e,t){let r=window.encodeURIComponent(e);return t=t||Co.default.lookup(e),this.storage.getItem(r).then(n=>{var s=new _r.defer,a=new FileReader,o;if(!!n)return o=new Blob([n],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,t),s.promise})}createUrl(e,t){var r=new _r.defer,n=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(o?(a=this.getBase64(e),a&&a.then(function(u){this.urlCache[e]=u,r.resolve(u)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(u){s=n.createObjectURL(u),this.urlCache[e]=s,r.resolve(s)}.bind(this))),a||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}};(0,h_.default)(Ao.prototype);var f_=Ao;ks.default=f_});var ld=K(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.default=void 0;var od=He(),ud=class{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;let t=(0,od.qs)(e,"display_options");return t?((0,od.qsa)(t,"option").forEach(n=>{let s="";switch(n.childNodes.length&&(s=n.childNodes[0].nodeValue),n.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}},c_=ud;Ns.default=c_});var Ro=K(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.default=void 0;var d_=wt(Qt()),ir=He(),kr=wt(Gi()),hd=wt(Sr()),p_=wt(xf()),v_=wt(Cf()),g_=wt(Tf()),fd=wt(Nf()),To=wt(Rf()),m_=wt(Pf()),ko=wt(Mf()),__=wt(Cs()),y_=wt(rd()),cd=wt($i()),b_=wt(Rt()),w_=wt(ad()),No=wt(ld()),dd=Wt();function wt(i){return i&&i.__esModule?i:{default:i}}var pd="META-INF/container.xml",E_="META-INF/com.apple.ibooks.display-options.xml",nr={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"},Oo=class{constructor(e,t){typeof t=="undefined"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=(0,ir.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),(0,ir.extend)(this.settings,t),this.opening=new ir.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new ir.defer,spine:new ir.defer,metadata:new ir.defer,cover:new ir.defer,navigation:new ir.defer,pageList:new ir.defer,resources:new ir.defer,displayOptions:new ir.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||cd.default,this.spine=new p_.default,this.locations=new v_.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var n=new Error("Cannot load book at "+e);this.emit(dd.EVENTS.BOOK.OPEN_FAILED,n)})}open(e,t){var r,n=t||this.determineType(e);return n===nr.BINARY?(this.archived=!0,this.url=new kr.default("/",""),r=this.openEpub(e)):n===nr.BASE64?(this.archived=!0,this.url=new kr.default("/",""),r=this.openEpub(e,n)):n===nr.EPUB?(this.archived=!0,this.url=new kr.default("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):n==nr.OPF?(this.url=new kr.default(e),r=this.openPackaging(this.url.Path.toString())):n==nr.MANIFEST?(this.url=new kr.default(e),r=this.openManifest(this.url.Path.toString())):(this.url=new kr.default(e),r=this.openContainer(pd).then(this.openPackaging.bind(this))),r}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(pd)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(t=>(this.container=new g_.default(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new hd.default(e),this.load(e).then(t=>(this.packaging=new fd.default(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new hd.default(e),this.load(e).then(t=>(this.packaging=new fd.default,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(!!e){var r=e,n=e.indexOf("://")>-1;return n?e:(this.path&&(r=this.path.resolve(e)),t!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,r,n;if(this.settings.encoding==="base64")return nr.BASE64;if(typeof e!="string")return nr.BINARY;if(t=new kr.default(e),r=t.path(),n=r.extension,n&&(n=n.replace(/\?.*$/,"")),!n)return nr.DIRECTORY;if(n==="epub")return nr.EPUB;if(n==="opf")return nr.OPF;if(n==="json")return nr.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(E_)).then(t=>{this.displayOptions=new No.default(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new No.default,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new No.default,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new m_.default(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((n,s)=>{this.navigation=new To.default(r),e.pageList&&(this.pageList=new ko.default(e.pageList)),n(this.navigation)}):t?this.load(t,"xml").then(n=>(this.navigation=new To.default(n),this.pageList=new ko.default(n),this.navigation)):new Promise((n,s)=>{this.navigation=new To.default,this.pageList=new ko.default,n(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new __.default(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new y_.default,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,n=this.settings.requestMethod||cd.default.bind(this);return this.storage=new w_.default(e,n,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new kr.default("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new b_.default(e),r=this.spine.get(t.spinePos),n=this.load.bind(this);return r?r.load(n).then(function(s){var a=t.toRange(r.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${dd.EPUBJS_VERSION}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}};(0,d_.default)(Oo.prototype);var x_=Oo;Os.default=x_});var _d=K(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.default=void 0;var vd=qr(Ro()),S_=qr(Cs()),D_=qr(Rt()),C_=qr(Ji()),A_=T_(He()),gd=Wt(),Mb=qr(po()),zb=qr(Es()),qb=qr(Eo());function md(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(md=function(r){return r?t:e})(i)}function T_(i,e){if(!e&&i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var t=md(e);if(t&&t.has(i))return t.get(i);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if(s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)){var a=n?Object.getOwnPropertyDescriptor(i,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=i[s]}return r.default=i,t&&t.set(i,r),r}function qr(i){return i&&i.__esModule?i:{default:i}}function Ur(i,e){return new vd.default(i,e)}Ur.VERSION=gd.EPUBJS_VERSION;typeof global!="undefined"&&(global.EPUBJS_VERSION=gd.EPUBJS_VERSION);Ur.Book=vd.default;Ur.Rendition=S_.default;Ur.Contents=C_.default;Ur.CFI=D_.default;Ur.utils=A_;var k_=Ur;Rs.default=k_});var yd=K(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});Object.defineProperty(yr,"Book",{enumerable:!0,get:function(){return N_.default}});Object.defineProperty(yr,"Contents",{enumerable:!0,get:function(){return I_.default}});Object.defineProperty(yr,"EpubCFI",{enumerable:!0,get:function(){return O_.default}});Object.defineProperty(yr,"Layout",{enumerable:!0,get:function(){return B_.default}});Object.defineProperty(yr,"Rendition",{enumerable:!0,get:function(){return R_.default}});yr.default=void 0;var N_=vi(Ro()),O_=vi(Rt()),R_=vi(Cs()),I_=vi(Ji()),B_=vi(ao()),L_=vi(_d());function vi(i){return i&&i.__esModule?i:{default:i}}var P_=L_.default;yr.default=P_});var Io=K(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.EpubViewStyle=void 0;var F_={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}};Is.EpubViewStyle=F_});var Dd=K(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.default=void 0;var Bs=q_(xn()),xt=bd(ya()),M_=bd(yd()),z_=Io();function bd(i){return i&&i.__esModule?i:{default:i}}function wd(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(wd=function(n){return n?t:e})(i)}function q_(i,e){if(!e&&i&&i.__esModule)return i;if(i===null||Wr(i)!=="object"&&typeof i!="function")return{default:i};var t=wd(e);if(t&&t.has(i))return t.get(i);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if(s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)){var a=n?Object.getOwnPropertyDescriptor(i,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=i[s]}return r.default=i,t&&t.set(i,r),r}function Wr(i){return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(i)}function Ed(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function U_(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ed(Object(t),!0).forEach(function(r){Po(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Ed(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function W_(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function xd(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Sd(r.key),r)}}function V_(i,e,t){return e&&xd(i.prototype,e),t&&xd(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function j_(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Bo(i,e)}function Bo(i,e){return Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Bo(i,e)}function H_(i){var e=G_();return function(){var r=Ls(i),n;if(e){var s=Ls(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Z_(this,n)}}function Z_(i,e){if(e&&(Wr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lo(i)}function Lo(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function G_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Ls(i){return Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ls(i)}function Po(i,e,t){return e=Sd(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Sd(i){var e=X_(i,"string");return Wr(e)==="symbol"?e:String(e)}function X_(i,e){if(Wr(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Wr(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}var Fo=function(i){j_(t,i);var e=H_(t);function t(r){var n;return W_(this,t),n=e.call(this,r),Po(Lo(n),"onLocationChange",function(s){var a=n.props,o=a.location,u=a.locationChanged,l=s&&s.start;o!==l&&(n.location=l,u&&u(l))}),Po(Lo(n),"handleKeyPress",function(s){var a=s.key;a&&a==="ArrowRight"&&n.nextPage(),a&&a==="ArrowLeft"&&n.prevPage()}),n.state={isLoaded:!1,toc:[]},n.viewerRef=Bs.default.createRef(),n.location=r.location,n.book=n.rendition=n.prevPage=n.nextPage=null,n}return V_(t,[{key:"componentDidMount",value:function(){this.initBook(!0),document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"initBook",value:function(){var n=this,s=this.props,a=s.url,o=s.tocChanged,u=s.epubInitOptions;this.book&&this.book.destroy(),this.book=new M_.default(a,u),this.book.loaded.navigation.then(function(l){var c=l.toc;n.setState({isLoaded:!0,toc:c},function(){o&&o(c),n.initReader()})})}},{key:"componentWillUnmount",value:function(){this.book&&this.book.destroy(),this.book=this.rendition=this.prevPage=this.nextPage=null,document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"shouldComponentUpdate",value:function(n){return!this.state.isLoaded||n.location!==this.props.location||n.url!==this.props.url}},{key:"componentDidUpdate",value:function(n){n.location!==this.props.location&&this.location!==this.props.location&&this.rendition.display(this.props.location),n.url!==this.props.url&&this.initBook()}},{key:"initReader",value:function(){var n=this,s=this.state.toc,a=this.props,o=a.location,u=a.epubOptions,l=a.getRendition,c=this.viewerRef.current;this.rendition=this.book.renderTo(c,U_({contained:!0,width:"100%",height:"100%"},u)),this.prevPage=function(){n.rendition.prev()},this.nextPage=function(){n.rendition.next()},this.registerEvents(),l&&l(this.rendition),typeof o=="string"||typeof o=="number"?this.rendition.display(o):s.length>0&&s[0].href?this.rendition.display(s[0].href):this.rendition.display()}},{key:"registerEvents",value:function(){var n=this.props,s=n.handleKeyPress,a=n.handleTextSelected;this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",s||this.handleKeyPress),a&&this.rendition.on("selected",a)}},{key:"renderBook",value:function(){var n=this.props.epubViewStyles;return Bs.default.createElement("div",{ref:this.viewerRef,style:n.view})}},{key:"render",value:function(){var n=this.state.isLoaded,s=this.props,a=s.loadingView,o=s.epubViewStyles;return Bs.default.createElement("div",{style:o.viewHolder},n&&this.renderBook()||a)}}]),t}(Bs.Component);Fo.defaultProps={loadingView:null,locationChanged:null,tocChanged:null,epubViewStyles:z_.EpubViewStyle,epubOptions:{},epubInitOptions:{}};Fo.propTypes={url:xt.default.oneOfType([xt.default.string,xt.default.instanceOf(ArrayBuffer)]),loadingView:xt.default.element,location:xt.default.oneOfType([xt.default.string,xt.default.number]),locationChanged:xt.default.func,tocChanged:xt.default.func,epubViewStyles:xt.default.object,epubInitOptions:xt.default.object,epubOptions:xt.default.object,getRendition:xt.default.func,handleKeyPress:xt.default.func,handleTextSelected:xt.default.func};var $_=Fo;Ps.default=$_});var Id=K(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});var Fs=xn(),Cd="Left",Ad="Right",Td="Up",kd="Down",gi={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Mo={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Nd="mousemove",Od="mouseup",Y_="touchend",K_="touchmove",J_="touchstart";function Q_(i,e,t,r){return i>e?t>0?Ad:Cd:r>0?kd:Td}function Rd(i,e){if(e===0)return i;let t=Math.PI/180*e,r=i[0]*Math.cos(t)+i[1]*Math.sin(t),n=i[1]*Math.cos(t)-i[0]*Math.sin(t);return[r,n]}function e2(i,e){let t=c=>{let f="touches"in c;f&&c.touches.length>1||i((d,g)=>{g.trackMouse&&!f&&(document.addEventListener(Nd,r),document.addEventListener(Od,a));let{clientX:_,clientY:C}=f?c.touches[0]:c,D=Rd([_,C],g.rotationAngle);return g.onTouchStartOrOnMouseDown&&g.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},d),Mo),{initial:D.slice(),xy:D,start:c.timeStamp||0})})},r=c=>{i((f,d)=>{let g="touches"in c;if(g&&c.touches.length>1)return f;if(c.timeStamp-f.start>d.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;let{clientX:_,clientY:C}=g?c.touches[0]:c,[D,p]=Rd([_,C],d.rotationAngle),v=D-f.xy[0],b=p-f.xy[1],A=Math.abs(v),P=Math.abs(b),y=(c.timeStamp||0)-f.start,T=Math.sqrt(A*A+P*P)/(y||1),k=[v/(y||1),b/(y||1)],R=Q_(A,P,v,b),z=typeof d.delta=="number"?d.delta:d.delta[R.toLowerCase()]||gi.delta;if(A<z&&P<z&&!f.swiping)return f;let F={absX:A,absY:P,deltaX:v,deltaY:b,dir:R,event:c,first:f.first,initial:f.initial,velocity:T,vxvy:k};F.first&&d.onSwipeStart&&d.onSwipeStart(F),d.onSwiping&&d.onSwiping(F);let Z=!1;return(d.onSwiping||d.onSwiped||d[`onSwiped${R}`])&&(Z=!0),Z&&d.preventScrollOnSwipe&&d.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:F,swiping:!0})})},n=c=>{i((f,d)=>{let g;if(f.swiping&&f.eventData){if(c.timeStamp-f.start<d.swipeDuration){g=Object.assign(Object.assign({},f.eventData),{event:c}),d.onSwiped&&d.onSwiped(g);let _=d[`onSwiped${g.dir}`];_&&_(g)}}else d.onTap&&d.onTap({event:c});return d.onTouchEndOrOnMouseUp&&d.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},f),Mo),{eventData:g})})},s=()=>{document.removeEventListener(Nd,r),document.removeEventListener(Od,a)},a=c=>{s(),n(c)},o=(c,f)=>{let d=()=>{};if(c&&c.addEventListener){let g=Object.assign(Object.assign({},gi.touchEventOptions),f.touchEventOptions),_=[[J_,t,g],[K_,r,Object.assign(Object.assign({},g),f.preventScrollOnSwipe?{passive:!1}:{})],[Y_,n,g]];_.forEach(([C,D,p])=>c.addEventListener(C,D,p)),d=()=>_.forEach(([C,D])=>c.removeEventListener(C,D))}return d},l={ref:c=>{c!==null&&i((f,d)=>{if(f.el===c)return f;let g={};return f.el&&f.el!==c&&f.cleanUpTouch&&(f.cleanUpTouch(),g.cleanUpTouch=void 0),d.trackTouch&&c&&(g.cleanUpTouch=o(c,d)),Object.assign(Object.assign(Object.assign({},f),{el:c}),g)})}};return e.trackMouse&&(l.onMouseDown=t),[l,o]}function t2(i,e,t,r){return!e.trackTouch||!i.el?(i.cleanUpTouch&&i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:void 0})):i.cleanUpTouch?e.preventScrollOnSwipe!==t.preventScrollOnSwipe||e.touchEventOptions.passive!==t.touchEventOptions.passive?(i.cleanUpTouch(),Object.assign(Object.assign({},i),{cleanUpTouch:r(i.el,e)})):i:Object.assign(Object.assign({},i),{cleanUpTouch:r(i.el,e)})}function r2(i){let{trackMouse:e}=i,t=Fs.useRef(Object.assign({},Mo)),r=Fs.useRef(Object.assign({},gi)),n=Fs.useRef(Object.assign({},r.current));n.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},gi),i);let s;for(s in gi)r.current[s]===void 0&&(r.current[s]=gi[s]);let[a,o]=Fs.useMemo(()=>e2(u=>t.current=u(t.current,r.current),{trackMouse:e}),[e]);return t.current=t2(t.current,r.current,n.current,o),a}Vr.DOWN=kd;Vr.LEFT=Cd;Vr.RIGHT=Ad;Vr.UP=Td;Vr.useSwipeable=r2});var zo=K(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.ReactReaderStyle=void 0;var i2={container:{overflow:"hidden",position:"relative",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:50,left:50,bottom:20,right:50},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 10px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",margintop:"-.5em"}};Ms.ReactReaderStyle=i2});var jd=K(qs=>{"use strict";function jr(i){return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(i)}Object.defineProperty(qs,"__esModule",{value:!0});qs.default=void 0;var Ge=l2(xn()),Zt=u2(ya()),n2=Id(),s2=Wo(),Bd=zo(),a2=["children"],o2=["title","showToc","loadingView","readerStyles","locationChanged","swipeable","epubViewStyles"];function u2(i){return i&&i.__esModule?i:{default:i}}function Ld(i){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ld=function(n){return n?t:e})(i)}function l2(i,e){if(!e&&i&&i.__esModule)return i;if(i===null||jr(i)!=="object"&&typeof i!="function")return{default:i};var t=Ld(e);if(t&&t.has(i))return t.get(i);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in i)if(s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)){var a=n?Object.getOwnPropertyDescriptor(i,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=i[s]}return r.default=i,t&&t.set(i,r),r}function sn(){return sn=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},sn.apply(this,arguments)}function Pd(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Fd(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Ud(r.key),r)}}function Md(i,e,t){return e&&Fd(i.prototype,e),t&&Fd(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function zd(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&qo(i,e)}function qo(i,e){return qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},qo(i,e)}function qd(i){var e=f2();return function(){var r=zs(i),n;if(e){var s=zs(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return h2(this,n)}}function h2(i,e){if(e&&(jr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hr(i)}function Hr(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function f2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function zs(i){return zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zs(i)}function mi(i,e,t){return e=Ud(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ud(i){var e=c2(i,"string");return jr(e)==="symbol"?e:String(e)}function c2(i,e){if(jr(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(jr(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Wd(i,e){if(i==null)return{};var t=d2(i,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,r)||(t[r]=i[r]))}return t}function d2(i,e){if(i==null)return{};var t={},r=Object.keys(i),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(t[n]=i[n]);return t}var p2=function(e){var t=e.children,r=Wd(e,a2),n=(0,n2.useSwipeable)(r);return Ge.default.createElement("div",n,t)},Vd=function(i){zd(t,i);var e=qd(t);function t(){var r;Pd(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),mi(Hr(r),"setLocation",function(){r.props.setLocation(r.props.href)}),r}return Md(t,[{key:"render",value:function(){var n=this,s=this.props,a=s.label,o=s.styles,u=s.subitems;return Ge.default.createElement("div",null,Ge.default.createElement("button",{onClick:this.setLocation,style:o},a),u&&u.length>0&&Ge.default.createElement("div",{style:{paddingLeft:10}},u.map(function(l,c){return Ge.default.createElement(t,sn({key:c},n.props,l))})))}}]),t}(Ge.PureComponent);Vd.propTypes={label:Zt.default.string,href:Zt.default.string,setLocation:Zt.default.func,styles:Zt.default.object};var Uo=function(i){zd(t,i);var e=qd(t);function t(r){var n;return Pd(this,t),n=e.call(this,r),mi(Hr(n),"toggleToc",function(){n.setState({expandedToc:!n.state.expandedToc})}),mi(Hr(n),"next",function(){var s=n.readerRef.current;s.nextPage()}),mi(Hr(n),"prev",function(){var s=n.readerRef.current;s.prevPage()}),mi(Hr(n),"onTocChange",function(s){var a=n.props.tocChanged;n.setState({toc:s},function(){return a&&a(s)})}),mi(Hr(n),"setLocation",function(s){var a=n.props.locationChanged;n.setState({expandedToc:!1},function(){return a&&a(s)})}),n.readerRef=Ge.default.createRef(),n.state={expandedToc:!1,toc:!1},n}return Md(t,[{key:"renderToc",value:function(){var n=this,s=this.state,a=s.toc,o=s.expandedToc,u=this.props.readerStyles;return Ge.default.createElement("div",null,Ge.default.createElement("div",{style:u.tocArea},Ge.default.createElement("div",{style:u.toc},a.map(function(l,c){return Ge.default.createElement(Vd,sn({},l,{key:c,setLocation:n.setLocation,styles:u.tocAreaButton}))}))),o&&Ge.default.createElement("div",{style:u.tocBackground,onClick:this.toggleToc}))}},{key:"renderTocToggle",value:function(){var n=this.state.expandedToc,s=this.props.readerStyles;return Ge.default.createElement("button",{style:Object.assign({},s.tocButton,n?s.tocButtonExpanded:{}),onClick:this.toggleToc},Ge.default.createElement("span",{style:Object.assign({},s.tocButtonBar,s.tocButtonBarTop)}),Ge.default.createElement("span",{style:Object.assign({},s.tocButtonBar,s.tocButtonBottom)}))}},{key:"render",value:function(){var n=this.props,s=n.title,a=n.showToc,o=n.loadingView,u=n.readerStyles,l=n.locationChanged,c=n.swipeable,f=n.epubViewStyles,d=Wd(n,o2),g=this.state,_=g.toc,C=g.expandedToc;return Ge.default.createElement("div",{style:u.container},Ge.default.createElement("div",{style:Object.assign({},u.readerArea,C?u.containerExpanded:{})},a&&this.renderTocToggle(),Ge.default.createElement("div",{style:u.titleArea},s),Ge.default.createElement(p2,{onSwipedRight:this.prev,onSwipedLeft:this.next,trackMouse:!0},Ge.default.createElement("div",{style:u.reader},Ge.default.createElement(s2.EpubView,sn({ref:this.readerRef,loadingView:o,epubViewStyles:f},d,{tocChanged:this.onTocChange,locationChanged:l})),c&&Ge.default.createElement("div",{style:u.swipeWrapper}))),Ge.default.createElement("button",{style:Object.assign({},u.arrow,u.prev),onClick:this.prev},"\u2039"),Ge.default.createElement("button",{style:Object.assign({},u.arrow,u.next),onClick:this.next},"\u203A")),a&&_&&this.renderToc())}}]),t}(Ge.PureComponent);Uo.defaultProps={loadingView:Ge.default.createElement("div",{style:Bd.ReactReaderStyle.loadingView},"Loading\u2026"),locationChanged:null,tocChanged:null,showToc:!0,readerStyles:Bd.ReactReaderStyle};Uo.propTypes={title:Zt.default.string,loadingView:Zt.default.element,showToc:Zt.default.bool,locationChanged:Zt.default.func,tocChanged:Zt.default.func,readerStyles:Zt.default.object,epubViewStyles:Zt.default.object,swipeable:Zt.default.bool};var v2=Uo;qs.default=v2});var Wo=K(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});Object.defineProperty(_i,"EpubView",{enumerable:!0,get:function(){return g2.default}});Object.defineProperty(_i,"EpubViewStyle",{enumerable:!0,get:function(){return m2.EpubViewStyle}});Object.defineProperty(_i,"ReactReader",{enumerable:!0,get:function(){return _2.default}});Object.defineProperty(_i,"ReactReaderStyle",{enumerable:!0,get:function(){return y2.ReactReaderStyle}});var g2=Hd(Dd()),m2=Io(),_2=Hd(jd()),y2=zo();function Hd(i){return i&&i.__esModule?i:{default:i}}});iu(exports,{default:()=>$o});var Gt=Nr(require("obsidian"));var vt=Nr(require("obsidian")),hn={scrolledView:!1,fontSizePercent:100,highlightColor:"#ffd700",followObsidianTheme:!0,followObsidianFont:!0,selectionNotePath:"/",selectionNoteUseSameFolder:!0,notePath:"/",useSameFolder:!0,tags:"notes/booknotes"},Ys=class extends vt.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"EPUB \u8BBE\u7F6E"}),new vt.Setting(e).setName("\u6EDA\u52A8\u9605\u8BFB").setDesc("\u542F\u7528\u540E\u53EF\u5728\u9875\u9762\u4E4B\u95F4\u8FDE\u7EED\u6EDA\u52A8\u3002").addToggle(t=>t.setValue(this.plugin.settings.scrolledView).onChange(r=>Le(this,null,function*(){this.plugin.settings.scrolledView=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u9ED8\u8BA4\u5B57\u53F7").setDesc("\u9605\u8BFB\u5668\u9ED8\u8BA4\u5B57\u4F53\u5927\u5C0F\uFF08\u767E\u5206\u6BD4\uFF09\u3002").addSlider(t=>t.setLimits(80,160,5).setValue(this.plugin.settings.fontSizePercent).setDynamicTooltip().onChange(r=>Le(this,null,function*(){this.plugin.settings.fontSizePercent=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u8DDF\u968F Obsidian \u4E3B\u9898").setDesc("\u5F00\u542F\u540E\uFF0C\u9605\u8BFB\u5668\u660E\u6697\u4E3B\u9898\u8DDF\u968F Obsidian\u3002").addToggle(t=>t.setValue(this.plugin.settings.followObsidianTheme).onChange(r=>Le(this,null,function*(){this.plugin.settings.followObsidianTheme=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u8DDF\u968F Obsidian \u5B57\u4F53").setDesc("\u5F00\u542F\u540E\uFF0C\u9605\u8BFB\u5668\u5B57\u4F53\u4E0E\u5B57\u53F7\u5C06\u8DDF\u968F Obsidian \u8BBE\u7F6E\u3002").addToggle(t=>t.setValue(this.plugin.settings.followObsidianFont).onChange(r=>Le(this,null,function*(){this.plugin.settings.followObsidianFont=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u6458\u5F55\u540C\u76EE\u5F55").setDesc("\u5F00\u542F\u540E\uFF0C\u9009\u4E2D\u6587\u672C\u521B\u5EFA\u7684\u7B14\u8BB0\u5C06\u4FDD\u5B58\u5230\u4E66\u7C4D\u540C\u76EE\u5F55\u3002").addToggle(t=>t.setValue(this.plugin.settings.selectionNoteUseSameFolder).onChange(r=>Le(this,null,function*(){this.plugin.settings.selectionNoteUseSameFolder=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u6458\u5F55\u7B14\u8BB0\u6587\u4EF6\u5939").setDesc("\u9009\u62E9\u9009\u4E2D\u6587\u672C\u7B14\u8BB0\u7684\u4FDD\u5B58\u4F4D\u7F6E\u3002\u5F00\u542F\u201C\u6458\u5F55\u540C\u76EE\u5F55\u201D\u540E\u6B64\u9879\u65E0\u6548\u3002").addDropdown(t=>t.addOptions(nu(this.app)).setValue(this.plugin.settings.selectionNotePath).onChange(r=>Le(this,null,function*(){this.plugin.settings.selectionNotePath=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u9AD8\u4EAE\u989C\u8272").setDesc("\u9AD8\u4EAE\u663E\u793A\u989C\u8272\uFF08Hex\uFF0C\u4F8B\u5982 #ffd700\uFF09\u3002").addText(t=>{t.setPlaceholder("#ffd700"),t.setValue(this.plugin.settings.highlightColor).onChange(r=>Le(this,null,function*(){this.plugin.settings.highlightColor=r.trim(),yield this.plugin.saveSettings()}))}),new vt.Setting(e).setName("\u540C\u76EE\u5F55").setDesc("\u5F00\u542F\u540E\uFF0Cepub \u7B14\u8BB0\u6587\u4EF6\u5C06\u521B\u5EFA\u5728\u4E0E\u4E66\u7C4D\u76F8\u540C\u7684\u6587\u4EF6\u5939\u3002").addToggle(t=>t.setValue(this.plugin.settings.useSameFolder).onChange(r=>Le(this,null,function*(){this.plugin.settings.useSameFolder=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u7B14\u8BB0\u6587\u4EF6\u5939").setDesc("\u9009\u62E9 epub \u7B14\u8BB0\u9ED8\u8BA4\u4FDD\u5B58\u4F4D\u7F6E\u3002\u5F00\u542F\u201C\u540C\u76EE\u5F55\u201D\u540E\u6B64\u9879\u65E0\u6548\u3002").addDropdown(t=>t.addOptions(nu(this.app)).setValue(this.plugin.settings.notePath).onChange(r=>Le(this,null,function*(){this.plugin.settings.notePath=r,yield this.plugin.saveSettings()}))),new vt.Setting(e).setName("\u6807\u7B7E").setDesc("\u65B0\u5EFA\u7B14\u8BB0\u7684\u5143\u6570\u636E\u6807\u7B7E\u3002").addText(t=>{t.inputEl.size=50,t.setValue(this.plugin.settings.tags).onChange(r=>Le(this,null,function*(){this.plugin.settings.tags=r,yield this.plugin.saveSettings()}))})}};function nu(i){let e={};return vt.Vault.recurseChildren(i.vault.getRoot(),t=>{t instanceof vt.TFolder&&(e[t.path]=t.path)}),e}var yi=Nr(require("obsidian"));Qr();Qr();Qr();Qr();var sr=Nr(require("obsidian")),mt=Nr(Wo());var Vo=Nr(require("obsidian"));function jo(i){let e=new TextEncoder().encode(i),t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}function Us(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");for(;e.length%4;)e+="=";let t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return new TextDecoder().decode(r)}function Ho(i){return(i!=null?i:"").replace(/\|/g," ").replace(/[\[\]]/g,"").replace(/[\r\n]+/g," ").replace(/\s+/g," ").trim()}function Zd(i){var a;if(!i)return null;let e=i;if(e.startsWith("obsidian://"))try{let o=new URL(e),u=o.searchParams.get("file");u&&(e=decodeURIComponent(u)+((a=o.hash)!=null?a:""))}catch(o){}let[t,r]=e.split("#",2),n=decodeURIComponent(t);if(!n.toLowerCase().endsWith(".epub")||!r)return null;let s=r.match(/cfi64=([A-Za-z0-9_-]+)/);return(s==null?void 0:s[1])?{path:(0,Vo.normalizePath)(n),cfi64:s[1]}:null}function an(i){return(0,Vo.normalizePath)(i)}var Gd="#ffd700";function Xd(i){let e=(i!=null?i:"").trim();if(!e)return null;let t=e.startsWith("#")?e.slice(1):e;return t.length===3&&(t=t.split("").map(r=>r+r).join("")),/^[0-9a-fA-F]{6}$/.test(t)?`#${t.toLowerCase()}`:null}function $d(i,e){var a;let t=(a=Xd(i))!=null?a:Gd,r=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);return`rgba(${r}, ${n}, ${s}, ${e})`}function Yd(i){return(i!=null?i:"").replace(/[\\\/:*?"<>|]/g," ").replace(/\s+/g," ").trim()}function b2(i){let e=t=>String(t).padStart(2,"0");return`${i.getFullYear()}${e(i.getMonth()+1)}${e(i.getDate())}-${e(i.getHours())}${e(i.getMinutes())}${e(i.getSeconds())}`}function Ws(i,e){let t=getComputedStyle(i).getPropertyValue(e).trim();return t||null}function Kd(){let i=document.body,e=document.documentElement,t=getComputedStyle(i),r=getComputedStyle(e),n=Ws(i,"--font-text")||Ws(e,"--font-text")||t.fontFamily||r.fontFamily||"",s=Ws(i,"--font-text-size")||Ws(e,"--font-text-size")||t.fontSize||r.fontSize||"";return{fontFamily:n,fontSize:s}}function w2(i){let e=i.match(/^epubcfi\((.+?),/);return(e==null?void 0:e[1])?`epubcfi(${e[1]})`:null}var Jd=({app:i,file:e,title:t,contents:r,scrolled:n,highlightColor:s,fontSizePercent:a,followObsidianTheme:o,followObsidianFont:u,selectionNotePath:l,selectionNoteUseSameFolder:c,noteTags:f,initialLocation:d,jumpCfiRange:g,highlights:_,onLocationChange:C,onOpenNote:D})=>{let p=Jt(null),v=Jt(null),b=Jt(null),A=Jt(0),P=Jt([]),[y,T]=qt(null),[k,R]=qt(d),[z,F]=qt(null),[Z,H]=qt(()=>document.body.classList.contains("theme-dark")),[te,ve]=qt(()=>Kd()),ne=Jt([]);Ot(()=>{if(!o)return;let $=document.body,ie=()=>H($.classList.contains("theme-dark")),se=new MutationObserver(()=>ie());return ie(),se.observe($,{attributes:!0,attributeFilter:["class"]}),()=>se.disconnect()},[o]),Ot(()=>{if(!u)return;let $=()=>{let Re=Kd();ve(me=>me.fontFamily===Re.fontFamily&&me.fontSize===Re.fontSize?me:Re)};$();let ie=document.body,se=document.documentElement,de=document.head,be=new MutationObserver(()=>$());return be.observe(ie,{attributes:!0,attributeFilter:["class","style"]}),be.observe(se,{attributes:!0,attributeFilter:["class","style"]}),be.observe(de,{childList:!0,subtree:!0}),()=>be.disconnect()},[u]);let pe=ct(()=>{var de,be,Re,me,Ee;let $=p.current;if(!$)return;let ie=(de=$.getContents)==null?void 0:de.call($),se=Array.isArray(ie)?ie:ie?[ie]:[];for(let Ve of se)try{(Ee=(me=(Re=(be=Ve==null?void 0:Ve.window)==null?void 0:be.getSelection)==null?void 0:Re.call(be))==null?void 0:me.removeAllRanges)==null||Ee.call(me)}catch(qe){}},[]),ge=ct($=>Le(void 0,null,function*(){let ie=i.clipboardManager;if(ie==null?void 0:ie.writeText){yield ie.writeText($);return}yield navigator.clipboard.writeText($)}),[i]),le=ct($=>{R($),C($),F(null)},[C]),Se=ct($=>{let ie=$.themes;ie.override("color",Z?"#fff":"#000"),ie.override("background",Z?"#000":"#fff")},[Z]),Pe=ct(($,ie)=>{$.themes.fontSize(`${ie}%`)},[]),Oe=ct($=>{var se,de;let ie=$.themes;if(u){te.fontFamily&&ie.override("font-family",te.fontFamily),te.fontSize&&ie.override("font-size",te.fontSize);return}(se=ie.remove)==null||se.call(ie,"font-family"),(de=ie.remove)==null||de.call(ie,"font-size"),Pe($,a)},[u,te,a,Pe]);Ot(()=>{!y||Se(y)},[y,Se]);let ce=ct(($,ie)=>Le(void 0,null,function*(){var de;let se=(de=$==null?void 0:$.book)==null?void 0:de.ready;if(se&&typeof se.then=="function")try{yield se}catch(be){}try{return yield $.display(ie),!0}catch(be){return!1}}),[]),Ie=ct($=>Le(void 0,null,function*(){let ie=p.current;if(!ie)return!1;if(yield ce(ie,$))return!0;let se=w2($);return se&&se!==$?yield ce(ie,se):!1}),[ce]);Ot(()=>{!g||(v.current=g,Ie(g).then($=>{$&&(v.current=null)}))},[g,Ie]);let Ce=ct(($,ie)=>{for(let de of ne.current)try{$.annotations.remove(de,"highlight")}catch(be){}ne.current=[];let se=(ie!=null?ie:[]).slice(0,80);for(let de of se)try{$.annotations.add("highlight",de.cfiRange,{},()=>{new sr.Notice(`Open backlink: ${de.display}`),D(de.sourceFile)},"epubjs-backlink-hl"),ne.current.push(de.cfiRange)}catch(be){}},[D]);Ot(()=>{P.current=_},[_]),Ot(()=>{if(!y)return;Oe(y);let $=!1;return(()=>Le(void 0,null,function*(){var de;let se=(de=y==null?void 0:y.book)==null?void 0:de.ready;if(se&&typeof se.then=="function")try{yield se}catch(be){}$||Ce(y,_)}))(),()=>{$=!0}},[y,_,Oe,Ce]);let Qe=ct(($,ie)=>{var je,Xe,lt,Ye,_t;let se=(Xe=(je=ie.window)==null?void 0:je.getSelection)==null?void 0:Xe.call(je);if(!se||se.rangeCount===0)return;let de=se.toString();if(!de||!de.trim())return;let Re=se.getRangeAt(0).getBoundingClientRect(),me=(Ye=(lt=ie.document)==null?void 0:lt.defaultView)==null?void 0:Ye.frameElement;if(!me)return;let Ee=me.getBoundingClientRect(),Ve=Ee.left+Re.left+Re.width/2,qe=Ee.top+Re.top-44;qe<24&&(qe=Ee.top+Re.bottom+10);let ze=(_t=b.current)==null?void 0:_t.getBoundingClientRect(),ke=ze?Ve-ze.left:Ve,ye=ze?qe-ze.top:qe;A.current=Date.now(),F({visible:!0,x:ke,y:ye,cfiRange:$,text:de})},[]);Ot(()=>{var ze,ke,ye,je;if(!y)return;let $=()=>{Date.now()-A.current<200||F(null)},ie=()=>F(null),se=()=>{Ce(y,P.current)},de=(ze=Xd(s))!=null?ze:Gd,be=$d(de,.35),Re=$d(de,.8),me=Xe=>{try{let lt=Xe.window.document.body;lt.oncontextmenu=()=>!1;let Ye=Xe.document.getElementById("epubjs-backlink-style"),_t=Ye!=null?Ye:Xe.document.createElement("style");_t.id="epubjs-backlink-style",_t.innerHTML=`
          .epubjs-backlink-hl { 
            fill: ${be};
            stroke: ${Re};
            stroke-width: 1px;
            cursor: pointer;
          }
          ::selection { background: rgba(120, 120, 255, 0.25); }
        `,Ye||Xe.document.head.appendChild(_t)}catch(lt){}};y.on("selected",Qe),y.on("click",$),y.on("relocated",ie),y.on("rendered",se);let Ee=(ke=y.hooks)==null?void 0:ke.content;(ye=Ee==null?void 0:Ee.register)==null||ye.call(Ee,me);let Ve=(je=y.getContents)==null?void 0:je.call(y),qe=Array.isArray(Ve)?Ve:Ve?[Ve]:[];if(qe.length){for(let Xe of qe)me(Xe);se()}return()=>{var Xe;y.off("selected",Qe),y.off("click",$),y.off("relocated",ie),y.off("rendered",se),(Xe=Ee==null?void 0:Ee.unregister)==null||Xe.call(Ee,me)}},[y,Qe,Ce,s]);let et=ct(()=>Le(void 0,null,function*(){if(!z)return;let $=Ho(z.text);$||($="Quote"),$.length>60&&($=$.slice(0,60)+"...");let ie=jo(z.cfiRange),se=`[[${e.path}#cfi64=${ie}|${$}]]`;try{yield ge(se),new sr.Notice("EPUB link copied")}catch(de){new sr.Notice("Copy failed")}finally{F(null),pe()}}),[z,e.path,ge,pe]),We=ct($=>Le(void 0,null,function*(){let ie=(0,sr.normalizePath)($).replace(/^\/+/,"");if(!ie)return;let se=ie.split("/").filter(Boolean),de="";for(let be of se)de=de?`${de}/${be}`:be,i.vault.getAbstractFileByPath(de)||(yield i.vault.createFolder(de))}),[i]),De=ct(($,ie)=>{let se=new Date().toISOString(),de=(f!=null?f:"").trim(),be=de?`---
tags: ${de}
created: ${se}
---

`:`---
created: ${se}
---

`,Re=$.split(/\r?\n/).map(me=>`> ${me}`).join(`
`);return`${be}${Re}

${ie}
`},[f]),it=ct(()=>Le(void 0,null,function*(){var ze;if(!z)return;let $=Ho(z.text);$||($="Quote"),$.length>60&&($=$.slice(0,60)+"...");let ie=jo(z.cfiRange),se=`[[${e.path}#cfi64=${ie}|${$}]]`,de=c?e.parent.path:l,be=(0,sr.normalizePath)(de||"/"),Re=Yd(e.basename).slice(0,40)||"Book",me=Yd($).slice(0,40),Ee=b2(new Date),Ve=me?`${Re}-${me}-${Ee}`:`${Re}-${Ee}`,qe=`${Ve}.md`;try{yield We(be);let ke=be==="/"?"":`${be}/`,ye=(0,sr.normalizePath)(`${ke}${qe}`),je=1;for(;i.vault.getAbstractFileByPath(ye);)ye=(0,sr.normalizePath)(`${ke}${Ve}-${je}.md`),je+=1;let Xe=De(z.text,se),lt=yield i.vault.create(ye,Xe);((ze=i.workspace.getLeaf("split","vertical"))!=null?ze:i.workspace.getLeaf(!1)).openFile(lt,{active:!0}),new sr.Notice("Note created")}catch(ke){new sr.Notice("Create note failed")}finally{F(null),pe()}}),[z,e.path,e.basename,e.parent.path,l,c,i,We,De,pe]),$e=wr(()=>Z?x2:E2,[Z]);return at("div",{ref:b,style:{height:"100%",width:"100%",position:"relative",overflow:n?"auto":"hidden"}},z&&z.visible&&at("div",{style:{position:"absolute",left:z.x,top:z.y,transform:"translateX(-50%)",background:"var(--background-primary)",border:"1px solid var(--background-modifier-border)",borderRadius:"8px",boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:"6px 8px",zIndex:99999,display:"flex",gap:"6px"},onMouseDown:$=>$.preventDefault()},at("button",{className:"mod-cta",style:{cursor:"pointer",border:"none",background:"transparent",color:"var(--text-normal)",fontSize:"13px"},onClick:et},"Copy Link"),at("button",{className:"mod-cta",style:{cursor:"pointer",border:"none",background:"transparent",color:"var(--text-normal)",fontSize:"13px"},onClick:it},"Create Note")),at(mt.ReactReader,{title:t,showToc:!0,location:k,locationChanged:le,swipeable:!1,url:r,getRendition:$=>{if(p.current=$,ne.current=[],T($),Se($),Oe($),v.current){let ie=v.current;Ie(ie).then(se=>{se&&(v.current=null)})}},epubOptions:n?{allowPopups:!0,flow:"scrolled",manager:"continuous"}:void 0,readerStyles:$e}))},E2=Et(rt({},mt.ReactReaderStyle),{arrow:Et(rt({},mt.ReactReaderStyle.arrow),{backgroundColor:"transparent",border:"none",boxShadow:"none"}),arrowHover:Et(rt({},mt.ReactReaderStyle.arrowHover),{backgroundColor:"transparent",boxShadow:"none"}),readerArea:Et(rt({},mt.ReactReaderStyle.readerArea),{padding:"0 6px",transition:void 0}),titleArea:Et(rt({},mt.ReactReaderStyle.titleArea),{display:"none",height:0,margin:0,padding:0})}),x2=Et(rt({},mt.ReactReaderStyle),{arrow:Et(rt({},mt.ReactReaderStyle.arrow),{color:"white",backgroundColor:"transparent",border:"none",boxShadow:"none"}),arrowHover:Et(rt({},mt.ReactReaderStyle.arrowHover),{color:"#ccc",backgroundColor:"transparent",boxShadow:"none"}),readerArea:Et(rt({},mt.ReactReaderStyle.readerArea),{padding:"0 6px",backgroundColor:"#000",transition:void 0}),titleArea:Et(rt({},mt.ReactReaderStyle.titleArea),{display:"none",height:0,margin:0,padding:0}),tocArea:Et(rt({},mt.ReactReaderStyle.tocArea),{background:"#111"}),tocButtonExpanded:Et(rt({},mt.ReactReaderStyle.tocButtonExpanded),{background:"#222"}),tocButtonBar:Et(rt({},mt.ReactReaderStyle.tocButtonBar),{background:"#fff"}),tocButton:Et(rt({},mt.ReactReaderStyle.tocButton),{color:"white"})});var Vs=Nr(require("obsidian"));var Qd=/#cfi64=([A-Za-z0-9_-]+)/g,Zo=class{constructor(e){this.app=e}getHighlightsForBook(e,t=200){var l,c,f,d,g,_,C;let r=e.path,n=this.app.metadataCache.resolvedLinks,s=(c=(l=this.app.metadataCache).getBacklinksForFile)==null?void 0:c.call(l,e),a=[];if(s==null?void 0:s.data){let D=s.data;if(typeof(D==null?void 0:D.keys)=="function")for(let p of D.keys()){let v=this.app.vault.getAbstractFileByPath(p);v instanceof Vs.TFile&&a.push(v)}else for(let p of Object.keys(D)){let v=this.app.vault.getAbstractFileByPath(p);v instanceof Vs.TFile&&a.push(v)}}if(!a.length)for(let[D,p]of Object.entries(n)){if(!p||!Object.prototype.hasOwnProperty.call(p,r))continue;let v=this.app.vault.getAbstractFileByPath(D);v instanceof Vs.TFile&&a.push(v)}let o=new Set,u=[];for(let D of a){let p=this.app.metadataCache.getFileCache(D);if(!p)continue;let v=[...(f=p.links)!=null?f:[],...(d=p.embeds)!=null?d:[]];if(!!v.length)for(let b of v){let A=String((g=b.link)!=null?g:""),y=A.split("#")[0];if(!y){let te=String((_=b.original)!=null?_:"").match(/\[\[([^|\]]+)/);(te==null?void 0:te[1])&&(y=te[1].split("#")[0])}let T=this.app.metadataCache.getFirstLinkpathDest(y,D.path);if(!T||T.path!==e.path)continue;let k=b.original,R=b.subpath,z=[k,A,R].filter(Boolean);if(!z.some(H=>H.indexOf("#cfi64=")!==-1))continue;let Z=String((C=b.displayText)!=null?C:D.basename);for(let H of z){Qd.lastIndex=0;let te;for(;(te=Qd.exec(H))!==null;){let ve=te[1];if(!!ve&&!o.has(ve)){o.add(ve);try{let ne=Us(ve);if(u.push({cfiRange:ne,sourceFile:D,display:Z}),u.length>=t)return u}catch(ne){}}}}}}return u}};var js="epub",on="epub",Go="doc-epub",Xo=class extends yi.FileView{constructor(e,t,r){super(e);this.settings=t;this.progressStore=r;this.fileContent=null;this.jumpCfiRange=null;this.highlights=[];this.highlightsKey=null;this.refreshTimer=null;this.backlinkManager=new Zo(this.app)}onPaneMenu(e,t){e.addItem(r=>{r.setTitle("Create new epub note").setIcon("document").onClick(()=>Le(this,null,function*(){let n=this.getFileName(),s=this.app.vault.getAbstractFileByPath(n);(s==null||!(s instanceof yi.TFile))&&(s=yield this.app.vault.create(n,this.getFileContent())),this.app.workspace.createLeafBySplit(this.leaf).openFile(s,{active:!0})}))}),e.addSeparator(),super.onPaneMenu(e,t)}getFileName(){let e;return this.settings.useSameFolder?e=`${this.file.parent.path}/`:e=this.settings.notePath.endsWith("/")?this.settings.notePath:`${this.settings.notePath}/`,`${e}${this.file.basename}.md`}getFileContent(){return`---
Tags: ${this.settings.tags}
Date: ${(0,yi.moment)().toLocaleString()}
---

# ${this.file.basename}
`}onLoadFile(e){return Le(this,null,function*(){var r,n,s,a;Ni(this.contentEl),this.contentEl.empty(),this.fileContent=yield this.app.vault.readBinary(e),this.highlights=this.backlinkManager.getHighlightsForBook(e),this.highlightsKey=this.getHighlightsKey(this.highlights),this.registerEvent(this.app.metadataCache.on("resolved",()=>{!this.file||(this.refreshTimer&&window.clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(()=>{if(!this.file)return;let o=this.backlinkManager.getHighlightsForBook(this.file),u=this.getHighlightsKey(o);u!==this.highlightsKey&&(this.highlights=o,this.highlightsKey=u,this.renderReader())},150))}));let t=(a=(n=(r=this.leaf).getEphemeralState)==null?void 0:n.call(r))!=null?a:(s=this.leaf.viewState)==null?void 0:s.eState;(t==null?void 0:t.cfi64)&&this.handleJumpFromCfi64(String(t.cfi64)),this.renderReader()})}setEphemeralState(e){return Le(this,null,function*(){if(!!e){if(e.cfi64){this.handleJumpFromCfi64(String(e.cfi64));return}if(typeof e.subpath=="string"){let t=e.subpath.match(/#?cfi64=([A-Za-z0-9_-]+)/);(t==null?void 0:t[1])&&this.handleJumpFromCfi64(t[1])}}})}handleJumpFromCfi64(e){try{this.jumpCfiRange=Us(e),this.renderReader()}catch(t){}}renderReader(){var C,D,p;if(!this.file||!this.fileContent)return;let e=(C=this.containerEl.parentElement)==null?void 0:C.querySelector("div.view-header"),t=(D=this.containerEl.parentElement)==null?void 0:D.querySelector("div.view-content"),r=e?getComputedStyle(e):null,n=r?parseFloat(r.height):0,s=r?parseFloat(r.width):0,a=t?getComputedStyle(t):null,o=a?parseFloat(a.paddingBottom):0,u=a?parseFloat(a.paddingTop):0,l=(n<s?n:0)+u+1,c=o,f=0,d=0,g=(p=this.progressStore.getProgress(this.file.path))!=null?p:0,_={paddingTop:f,paddingBottom:d,height:"100%",boxSizing:"border-box",overflow:this.settings.scrolledView?"auto":"hidden"};En(at("div",{style:_},at(Jd,{app:this.app,file:this.file,contents:this.fileContent,title:this.file.basename,scrolled:this.settings.scrolledView,highlightColor:this.settings.highlightColor,fontSizePercent:this.settings.fontSizePercent,followObsidianTheme:this.settings.followObsidianTheme,followObsidianFont:this.settings.followObsidianFont,selectionNotePath:this.settings.selectionNotePath,selectionNoteUseSameFolder:this.settings.selectionNoteUseSameFolder,noteTags:this.settings.tags,initialLocation:g,jumpCfiRange:this.jumpCfiRange,highlights:this.highlights,onLocationChange:v=>{!this.file||this.progressStore.setProgress(this.file.path,v)},onOpenNote:v=>{var A;((A=this.app.workspace.getLeaf("split","vertical"))!=null?A:this.app.workspace.getLeaf(!1)).openFile(v)}})),this.contentEl),this.jumpCfiRange=null}getHighlightsKey(e){return e.map(t=>`${t.cfiRange}|${t.sourceFile.path}`).join(`
`)}onunload(){Ni(this.contentEl)}getDisplayText(){return this.file?this.file.basename:"No File"}canAcceptExtension(e){return e==js}getViewType(){return on}getIcon(){return Go}};function S2(i){return Boolean(i.closest(".cm-editor, .markdown-source-view"))}function D2(i){let e=i.closest("[data-href]"),t=e==null?void 0:e.getAttribute("data-href"),r=i.closest("a.internal-link, span.internal-link, a");if(!r)return null;let n=r.getAttribute("href");return t&&t.indexOf("#cfi64=")!==-1?t:n||t||null}var $o=class extends Gt.Plugin{constructor(){super(...arguments);this.data={version:1,settings:rt({},hn),progress:{}};this.saveTimer=null}onload(){return Le(this,null,function*(){yield this.loadPluginData(),this.settings=this.data.settings,(0,Gt.addIcon)(Go,`
			<path
				fill="currentColor"
				stroke="currentColor"
				d="M 90.695312 47.296875 C 90.046875 46.589844 89.136719 46.1875 88.175781 46.1875 C 87.21875 46.1875 86.304688 46.589844 85.660156 47.296875 L 70.535156 63.277344 L 52.855469 81.933594 C 51.558594 83.339844 49.734375 84.144531 47.820312 84.144531 C 45.90625 84.144531 44.078125 83.339844 42.785156 81.933594 L 17.582031 55.292969 C 14.792969 52.292969 14.792969 47.648438 17.582031 44.648438 L 42.785156 18.023438 C 44.078125 16.617188 45.90625 15.816406 47.820312 15.816406 C 49.734375 15.816406 51.558594 16.617188 52.855469 18.023438 L 64.382812 30.207031 L 40.417969 55.5 C 39.730469 56.257812 39.730469 57.410156 40.417969 58.167969 L 42.945312 60.839844 C 43.652344 61.566406 44.761719 61.566406 45.472656 60.839844 L 73.222656 31.566406 C 73.90625 30.808594 73.90625 29.652344 73.222656 28.894531 L 70.691406 26.226562 L 70.511719 26.054688 L 57.886719 12.722656 C 55.28125 9.921875 51.628906 8.332031 47.804688 8.332031 C 43.980469 8.332031 40.332031 9.921875 37.726562 12.722656 L 12.503906 39.347656 C 6.941406 45.222656 6.941406 54.769531 12.503906 60.644531 L 37.703125 87.269531 C 40.308594 90.070312 43.960938 91.664062 47.789062 91.664062 C 51.613281 91.664062 55.265625 90.070312 57.871094 87.269531 L 83.070312 60.644531 L 90.632812 52.679688 C 92.007812 51.171875 92.007812 48.863281 90.632812 47.359375 L 90.695312 47.292969 Z M 90.695312 47.296875"
			/>
		`),this.registerView(on,e=>new Xo(e,this.settings,this));try{this.registerExtensions([js],on)}catch(e){console.log(`Existing file extension ${js}`)}this.addSettingTab(new Ys(this.app,this)),this.registerEvent(this.app.workspace.on("click",e=>Le(this,null,function*(){var f,d;let t=e.target;if(!t||S2(t)&&!(e.ctrlKey||e.metaKey))return;let r=D2(t);if(!r)return;let n=Zd(r);if(!n)return;e.preventDefault(),e.stopPropagation();let s=this.app.workspace.getActiveFile(),a=(f=s==null?void 0:s.path)!=null?f:"",o=this.app.metadataCache.getFirstLinkpathDest(n.path,a);if(!(o instanceof Gt.TFile))return;let u=this.app.workspace.getLeavesOfType(on).find(g=>{var _,C;return((C=(_=g.view)==null?void 0:_.file)==null?void 0:C.path)===o.path}),l=(d=u!=null?u:this.app.workspace.getLeaf("split","vertical"))!=null?d:this.app.workspace.getLeaf(!1),c=()=>{var g,_,C,D;(_=(g=l.view)==null?void 0:g.setEphemeralState)==null||_.call(g,{cfi64:n.cfi64}),(D=(C=this.app.workspace)==null?void 0:C.setActiveLeaf)==null||D.call(C,l,{focus:!1})};if(u){c();return}yield l.openFile(o,{active:!0,eState:{cfi64:n.cfi64}}),c()}))),this.registerEvent(this.app.vault.on("rename",(e,t)=>{let r=an(t),n=e.path;if(e instanceof Gt.TFolder){let s=(0,Gt.normalizePath)(t)+"/",a=(0,Gt.normalizePath)(n)+"/",o=rt({},this.data.progress),u=!1;for(let[l,c]of Object.entries(this.data.progress)){if(!l.startsWith(s))continue;let f=a+l.slice(s.length);o[f]||(o[f]=c),delete o[l],u=!0}u&&(this.data.progress=o,this.requestSave());return}if(e instanceof Gt.TFile){let s=an(n);this.data.progress[r]&&!this.data.progress[s]&&(this.data.progress[s]=this.data.progress[r]),this.data.progress[r]&&(delete this.data.progress[r],this.requestSave())}}))})}onunload(){}getProgress(e){var r,n;let t=an(e);return(n=(r=this.data.progress[t])==null?void 0:r.location)!=null?n:null}setProgress(e,t){let r=an(e);this.data.progress[r]={location:t,updatedAt:Date.now()},this.requestSave()}requestSave(){this.saveTimer&&window.clearTimeout(this.saveTimer),this.saveTimer=window.setTimeout(()=>{this.saveTimer=null,this.savePluginData().catch(()=>{})},500)}loadPluginData(){return Le(this,null,function*(){var r,n;let e=yield this.loadData();if(e&&typeof e=="object"&&e.version===1){let s=e;this.data={version:1,settings:rt(rt({},hn),(r=s.settings)!=null?r:{}),progress:(n=s.progress)!=null?n:{}};return}let t=e&&typeof e=="object"?e:{};this.data={version:1,settings:rt(rt({},hn),t),progress:{}}})}savePluginData(){return Le(this,null,function*(){this.data.settings=this.settings,yield this.saveData(this.data)})}loadSettings(){return Le(this,null,function*(){yield this.loadPluginData(),this.settings=this.data.settings})}saveSettings(){return Le(this,null,function*(){yield this.savePluginData()})}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
